{"meta":{"title":"ç§ƒå¤´ç‹","subtitle":"","description":"","author":"John Doe","url":"https://tutouwang.vercel.app","root":"/"},"pages":[{"title":"","date":"2022-05-24T01:43:13.878Z","updated":"2021-03-10T02:47:10.545Z","comments":true,"path":"404.html","permalink":"https://tutouwang.vercel.app/404.html","excerpt":"","text":"404 å¾ˆæŠ±æ­‰ï¼Œæ‚¨è®¿é—®çš„é¡µé¢ä¸å­˜åœ¨ å¯èƒ½æ˜¯è¾“å…¥åœ°å€æœ‰è¯¯æˆ–è¯¥åœ°å€å·²è¢«åˆ é™¤"},{"title":"","date":"2022-05-24T01:43:13.900Z","updated":"2021-03-10T02:39:15.459Z","comments":true,"path":"about/index.html","permalink":"https://tutouwang.vercel.app/about/index.html","excerpt":"","text":"å•Šå§å•Šå§å•Šå§ï¼ï¼ï¼"},{"title":"æ‰€æœ‰åˆ†ç±»","date":"2022-05-24T01:43:13.901Z","updated":"2021-03-10T02:43:26.017Z","comments":true,"path":"categories/index.html","permalink":"https://tutouwang.vercel.app/categories/index.html","excerpt":"","text":""},{"title":"","date":"2022-05-24T01:43:13.902Z","updated":"2021-03-10T02:46:22.827Z","comments":true,"path":"mylist/index.html","permalink":"https://tutouwang.vercel.app/mylist/index.html","excerpt":"","text":""},{"title":"æ‰€æœ‰æ ‡ç­¾","date":"2022-05-24T01:43:13.903Z","updated":"2021-03-10T02:44:59.392Z","comments":true,"path":"tags/index.html","permalink":"https://tutouwang.vercel.app/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Mysqlå¸¸ç”¨æŒ‡ä»¤","slug":"Mysqlå¸¸ç”¨æŒ‡ä»¤","date":"2022-11-19T11:46:14.000Z","updated":"2022-11-19T11:46:14.353Z","comments":true,"path":"2022/11/19/Mysqlå¸¸ç”¨æŒ‡ä»¤/","link":"","permalink":"https://tutouwang.vercel.app/2022/11/19/Mysql%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"Mysqlå¸¸ç”¨æŒ‡ä»¤","slug":"MySql/Mysqlå¸¸ç”¨æŒ‡ä»¤","date":"2022-11-19T11:46:14.000Z","updated":"2022-11-21T12:57:12.794Z","comments":true,"path":"2022/11/19/MySql/Mysqlå¸¸ç”¨æŒ‡ä»¤/","link":"","permalink":"https://tutouwang.vercel.app/2022/11/19/MySql/Mysql%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/","excerpt":"","text":"æ•°æ®åº“å¸¸ç”¨æŒ‡ä»¤ DDLç”¨æˆ·ç™»å½•mysql -u ç”¨æˆ·å -p å¯†ç  1mysql -u root -p æŸ¥çœ‹æ•°æ®åº“1show databases; åˆ›å»ºä¸€ä¸ªç®€å•é»˜è®¤å­—ç¬¦é›†çš„æ•°æ®åº“create database &#x3D;&#x3D;æ•°æ®åº“åç§°&#x3D;&#x3D;; 1create database test; mysqlçš„é»˜è®¤ç¼–ç ä¸ºlatin1ï¼Œå­˜å‚¨ä¸­æ–‡æ—¶æ€»ä¼šå‡ºç°ä¹±ç  åˆ›å»ºæ•°æ®åº“ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨å¦‚æœå­˜åœ¨ä»€ä¹ˆéƒ½ä¸åšcreate database if not exists &#x3D;&#x3D;æ•°æ®åº“åç§°&#x3D;&#x3D;; ä¸ä¼šæŠ¥ä»»ä½•é”™è¯¯ 1create database if not exists test; åˆ›å»ºæ•°æ®åº“ï¼Œå¹¶æŒ‡å®šå­—ç¬¦é›†create database &#x3D;&#x3D;æ•°æ®åº“å&#x3D;&#x3D; default character set &#x3D;&#x3D;å­—ç¬¦é›†&#x3D;&#x3D;; 1create database test1 default character set gbk; æŸ¥çœ‹æ•°æ®åº“ æŸ¥çœ‹æ‰€æœ‰çš„:ä½†æ˜¯çœ‹ä¸åˆ°å­—ç¬¦é›† 1show databases; æŸ¥çœ‹å•ä¸ªçš„æ•°æ®åº“å¹¶æŸ¥çœ‹åŸºæœ¬ä¿¡æ¯ show create database &#x3D;&#x3D;æ•°æ®åç§°&#x3D;&#x3D;; 1show create database test; 123456+----------+-----------------------------------------------------------------+| Database | Create Database |+----------+-----------------------------------------------------------------+| test | CREATE DATABASE &#96;test&#96; &#x2F;*!40100 DEFAULT CHARACTER SET latin1 *&#x2F; |+----------+-----------------------------------------------------------------+1 row in set (0.00 sec) åˆ é™¤æ•°æ®åº“drop database &#x3D;&#x3D;æ•°æ®åº“åç§°&#x3D;&#x3D;; åˆ é™¤æ€ä¹ˆæŸ¥çœ‹ï¼šshow databases; 1drop database test; ä¿®æ”¹æ•°æ®åº“ ä¿®æ”¹å­—ç¬¦é›† ä¿®æ”¹æ•°æ®åº“çš„åç§°(å»ºè®®ç›´æ¥æ–°åˆ›å»º) alter database &#x3D;&#x3D;æ•°æ®åç§°&#x3D;&#x3D; default character set &#x3D;&#x3D;å­—ç¬¦é›†&#x3D;&#x3D;; 1alter database test default character set UTF8; åˆ‡æ¢æ•°æ®åº“use &#x3D;&#x3D;æ•°æ®åº“åç§°&#x3D;&#x3D;; 1use test; æŸ¥çœ‹ç›®å‰æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“1select database(); è¡¨çš„å¸¸ç”¨æŒ‡ä»¤ DDLåˆ›å»ºè¡¨å»ºç«‹æ•°æ®è¡¨ï¼Œå°±æ˜¯å»ºç«‹è¡¨ç»“æ„ï¼ŒæŒ‡å®šæ•°æ®è¡¨ä¸­çš„ä¸€å…±æœ‰å¤šå°‘åˆ—ï¼Œæ¯ä¸€åˆ—çš„æ•°æ®ç±»å‹ create æŒ‡çš„æ˜¯ã€åˆ›å»ºã€‘ï¼Œtable æŒ‡çš„æ˜¯ã€æ•°æ®è¡¨ã€‘ã€‚ 12345create table è¡¨å ( -- å¯ä»¥å®šä¹‰å¤šä¸ªåˆ— å­—æ®µå ç±»å‹(é•¿åº¦) çº¦æŸ, å­—æ®µå ç±»å‹(é•¿åº¦) çº¦æŸ); ã€æ¡ˆä¾‹ã€‘ 123456-- åˆ›å»ºç”¨æˆ·è¡¨create table t_user ( uid int primary key auto_increment, -- ç”¨æˆ· id uname varchar(20) -- ç”¨æˆ·å);-- auto_increment æ ‡è¯†è‡ªå¢ (å‰ææ˜¯ int ç±»å‹) å­—ç¬¦ç±»å‹å¸¸ç”¨çš„ç±»å‹æœ‰ï¼š æ•°å­—å‹ï¼šintã€integerã€bigintã€mediumintã€smallintã€tinyint æµ®ç‚¹å‹ï¼šdoubleã€floatã€decimalï¼ˆç²¾ç¡®å°æ•°ç±»å‹ï¼‰ å­—ç¬¦å‹ï¼šcharï¼ˆå®šé•¿å­—ç¬¦ä¸²ï¼‰ã€varcharï¼ˆå¯å˜é•¿å­—ç¬¦ä¸²ï¼‰ æ—¥æœŸç±»å‹ï¼šdateï¼ˆåªæœ‰å¹´æœˆæ—¥ï¼‰ã€timeï¼ˆåªæœ‰æ—¶åˆ†ç§’ï¼‰ã€datetimeï¼ˆå¹´æœˆæ—¥ï¼Œæ—¶åˆ†ç§’ï¼‰ã€yearï¼ˆå¹´ï¼‰ äºŒè¿›åˆ¶å­—ç¬¦ä¸²ç±»å‹ï¼šbinaryï¼ˆå®šé•¿ï¼Œä»¥äºŒè¿›åˆ¶å½¢å¼ä¿å­˜å­—ç¬¦ä¸²ï¼‰ã€varbinaryï¼ˆå¯è¾¹é•¿ï¼‰ å•è¡¨çº¦æŸ ä¸€ä¸ªè¡¨è¦æœ‰ä¸€ä¸ªä¸»é”® å”¯ä¸€çº¦æŸ å¦‚:èº«ä»½è¯å· éç©ºçº¦æŸ(ç»´æŠ¤æ•°æ®çš„å”¯ä¸€æ€§å®Œæ•´æ€§) ä¸èƒ½ä¸å¡«:å¦‚:ç”·å¥³ 123ä¸»é”®çº¦æŸï¼šprimary keyå”¯ä¸€çº¦æŸï¼šuniqueéç©ºçº¦æŸï¼šnot null æ³¨æ„ ä¸»é”®çº¦æŸ &#x3D; å”¯ä¸€çº¦æŸ + éç©ºçº¦æŸ æŸ¥çœ‹è¡¨&#x3D;&#x3D;è¦å…ˆé€‰ä¸­æ•°æ®åº“è¦ä¸ä¼šæŠ¥é”™&#x3D;&#x3D; æè¿°ä¸€ä¸‹è¡¨ Field(å­—æ®µ) Type(ç±»å‹) Null(æ˜¯ä¸æ˜¯éç©º) Key(æ˜¯ä¸æ˜¯ä¸»é”®) Extra(æ‰©å±•ä¿¡æ¯) 1desc t_user; æŸ¥çœ‹æ•°æ®ä¸­çš„æ‰€æœ‰è¡¨1show tables; æŸ¥çœ‹è¡¨çš„Sqlè¯­å¥1show create table t_user; å¿«é€Ÿåˆ›å»ºä¸€ä¸ªè¡¨create table &#x3D;&#x3D;æ–°è¡¨å&#x3D;&#x3D; linke &#x3D;&#x3D;æ—§è¡¨å&#x3D;&#x3D;; ä¼šå’Œæ—§çš„è¡¨ä¸€æ · 1create table tb_user like t_user; åˆ é™¤ä¸€ä¸ªè¡¨drop table &#x3D;&#x3D;è¡¨å&#x3D;&#x3D;; 1drop table tb_user; åˆ é™¤ä¸€ä¸ªè¡¨ï¼Œåˆ¤æ–­ä¸€ä¸‹åˆ é™¤è¡¨æ˜¯å¦å­˜åœ¨ è®©ä»–ä¸æŠ¥é”™ å­˜åœ¨å°±åˆ é™¤ä¸å­˜åœ¨å°±ä¸åˆ  1drop table if exists tb_user; ä¿®æ”¹è¡¨12345678910-- 1.ä¿®æ”¹è¡¨æ·»åŠ åˆ—alter table è¡¨å add åˆ—å ç±»å‹(é•¿åº¦) çº¦æŸ;-- 2.ä¿®æ”¹è¡¨ä¿®æ”¹åˆ—çš„ç±»å‹é•¿åº¦åŠçº¦æŸalter table è¡¨å modify åˆ—å ç±»å‹(é•¿åº¦) çº¦æŸ;-- 3.ä¿®æ”¹è¡¨ä¿®æ”¹åˆ—åalter table è¡¨å change æ—§åˆ—å æ–°åˆ—å ç±»å‹(é•¿åº¦) çº¦æŸ;-- 4.ä¿®æ”¹è¡¨åˆ é™¤åˆ—alter table è¡¨å drop åˆ—å;-- 5.ä¿®æ”¹è¡¨årename table è¡¨å to æ–°è¡¨å; [æ¡ˆä¾‹]&#x2F;(æœ‰æ•°æ®éœ€è¦è°¨æ…) 12345678910-- ä¿®æ”¹è¡¨æ·»åŠ åˆ—alter table user add address varchar(50);-- ä¿®æ”¹è¡¨ä¿®æ”¹åˆ—çš„ç±»å‹é•¿åº¦åŠçº¦æŸalter table user modify address int(30);-- ä¿®æ”¹è¡¨ä¿®æ”¹åˆ—åalter table user change address addr varchar(50);-- ä¿®æ”¹è¡¨åˆ é™¤åˆ—alter table user drop addr;-- ä¿®æ”¹è¡¨å rename table user to tb_user; æ•°æ®æ“ä½œè¯­éŸ³ DMLæ’å…¥è®°å½•ï¼šinsertè¯­æ³•ï¼š 123456789-- 1.å‘è¡¨ä¸­æ’å…¥æŸäº›åˆ—insert into è¡¨ (åˆ—å1,åˆ—å2,åˆ—å3..) values (å€¼1,å€¼2,å€¼3..);-- 2.å‘è¡¨ä¸­æ’å…¥æ‰€æœ‰åˆ—insert into è¡¨ values (å€¼1,å€¼2,å€¼3..);-- 3.ä»å¦å¤–ä¸€å¼ è¡¨æŸ¥æŸäº›åˆ—çš„ç»“æœæ’å…¥å½“å‰è¡¨insert into è¡¨ (åˆ—å1, åˆ—å2, åˆ—å3..) values select (åˆ—å1,åˆ—å2,åˆ—å3..) from è¡¨-- 4.ä»å¦å¤–ä¸€å¼ è¡¨æŸ¥æ‰€æœ‰åˆ—çš„ç»“æœæ’å…¥å½“å‰è¡¨insert into è¡¨ values select * from è¡¨ ã€æ¡ˆä¾‹ã€‘ 1234-- å‘è¡¨ä¸­æ’å…¥æŸäº›åˆ—ï¼Œå¿…é¡»å†™åˆ—åinsert into user (uid, uname) values (001, &#x27;cuihua&#x27;);-- å‘è¡¨ä¸­æ’å…¥æ‰€æœ‰åˆ—insert into user values (002, &#x27;aqiang&#x27;); æ³¨æ„ï¼š â‘  åˆ—åæ•°ä¸ values åé¢çš„å€¼çš„ä¸ªæ•°ç›¸ç­‰ â‘¡ åˆ—çš„é¡ºåºä¸æ’å…¥çš„å€¼å¾—é¡ºåºä¸€è‡´ â‘¢ åˆ—åçš„ç±»å‹ä¸æ’å…¥çš„å€¼è¦ä¸€è‡´. â‘£ æ’å…¥å€¼å¾—æ—¶å€™ä¸èƒ½è¶…è¿‡æœ€å¤§é•¿åº¦. â‘¤ å€¼å¦‚æœæ˜¯å­—ç¬¦ä¸²æˆ–è€…æ—¥æœŸéœ€è¦åŠ å¼•å·â€™â€™ ï¼ˆä¸€èˆ¬æ˜¯å•å¼•å·æˆ–è€…åŒå¼•å·ï¼‰ æ›´æ–°è®°å½•ï¼šupdateè¯­æ³•æ ¼å¼ï¼šupdate æ›´æ–°ã€set ä¿®æ”¹çš„åˆ—å€¼ã€where æŒ‡å®šæ¡ä»¶ã€‚ 1234-- 1.ä¸æŒ‡å®šæ¡ä»¶ï¼Œä¼šä¿®æ”¹è¡¨ä¸­å½“å‰åˆ—æ‰€æœ‰æ•°æ®update è¡¨å set å­—æ®µå=å€¼, å­—æ®µå=å€¼;-- 2.æŒ‡å®šæ¡ä»¶ï¼Œç¬¦åˆæ¡ä»¶çš„æ‰ä¼šä¿®æ”¹update è¡¨å set å­—æ®µå=å€¼, å­—æ®µå=å€¼ where æ¡ä»¶; ã€æ¡ˆä¾‹ã€‘ 1234-- æ›´æ–°æ‰€æœ‰å­—æ®µçš„å€¼update user set uname=&#x27;xiaodong&#x27;;-- æ ¹æ®æŒ‡å®šçš„æ¡ä»¶æ¥æ›´æ–°update user set uname=&#x27;hashiqi&#x27; where uid = 2; æ³¨æ„ï¼š â‘  åˆ—åçš„ç±»å‹ä¸ä¿®æ”¹çš„å€¼è¦ä¸€è‡´ â‘¡ ä¿®æ”¹å€¼å¾—æ—¶å€™ä¸èƒ½è¶…è¿‡æœ€å¤§é•¿åº¦ â‘¢ å€¼å¦‚æœæ˜¯å­—ç¬¦ä¸²æˆ–è€…æ—¥æœŸéœ€è¦åŠ &#x3D;&#x3D;&#96;&#96;&#x3D;&#x3D;å¼•å· åˆ é™¤è®°å½•ï¼šdelete &amp; truncateè¯­æ³•æ ¼å¼: 1delete from è¡¨å [where æ¡ä»¶]; 1truncate table è¡¨å æ³¨æ„ åˆ é™¤è¡¨ä¸­æ‰€æœ‰è®°å½•ä½¿ç”¨ã€delete from è¡¨åã€‘ï¼Œè¿˜æ˜¯ç”¨ã€truncate table è¡¨åã€‘ï¼Ÿ åˆ é™¤æ–¹å¼çš„åŒºåˆ«ï¼š 12delete:ä¸€æ¡ä¸€æ¡åˆ é™¤ï¼Œä¸æ¸…ç©º auto_increment è®°å½•æ•°ã€‚truncate:ç›´æ¥å°†è¡¨åˆ é™¤ï¼Œé‡æ–°å»ºè¡¨ï¼Œauto_increment å°†ç½®ä¸ºé›¶ï¼Œä»æ–°å¼€å§‹ ã€æ¡ˆä¾‹ã€‘ 1234-- åˆ é™¤æ‰€æœ‰æ•°æ®delete from user;-- åˆ é™¤ uid = 1 çš„ç”¨æˆ·delete from user where uid = 1; æŸ¥è¯¢DQL æŸ¥è¯¢è¯­å¥çš„é¡ºåºselect åˆ—è¡¨ from where æ¡ä»¶ group by(åˆ†ç»„) having(è¿‡æ»¤) order by(æ’åº) 1select * | åˆ—å, åˆ—å from è¡¨å [where æ¡ä»¶]; selectæ˜¯æŸ¥è¯¢æŒ‡ä»¤ï¼Œå¯ä»¥è¯»1-nè¡Œæ•°æ®ï¼› åˆ—åæ¢æˆ&#x3D;&#x3D;*&#x3D;&#x3D;å·,å¯ä»¥æŸ¥è¯¢æ‰€æœ‰å­—æ®µæ•°æ®ï¼› ä½¿ç”¨whereæ¥æŒ‡å®šå¯¹åº”çš„æ¡ä»¶ ä¸ºäº†åç»­æŸ¥è¯¢è¯­å¥å‡†å¤‡å·¥ä½œã€æ ·ä¾‹è¡¨ã€‘123456789101112131415CREATE TABLE products ( -- è‡ªå¢åŠ  AUTO_INCREMENT pid INT PRIMARY KEY AUTO_INCREMENT, pname VARCHAR(20), -- å•†å“åç§° price DOUBLE, -- å•†å“ä»·æ ¼ pdate DATE, -- æ—¥æœŸ sid VARCHAR(20) -- åˆ†ç±»ID);INSERT INTO products VALUES(NULL,&#x27;æ³°å›½å¤§æ¦´è²&#x27;, 98, NULL, &#x27;s001&#x27;);INSERT INTO products VALUES(NULL,&#x27;æ–°ç–†å¤§æ£&#x27;, 38, NULL, &#x27;s002&#x27;);INSERT INTO products VALUES(NULL,&#x27;æ–°ç–†åˆ‡ç³•&#x27;, 68, NULL, &#x27;s001&#x27;);INSERT INTO products VALUES(NULL,&#x27;åä¸‰é¦™&#x27;, 10, NULL, &#x27;s002&#x27;);INSERT INTO products VALUES(NULL,&#x27;è€å¹²å¦ˆ&#x27;, 20, NULL, &#x27;s002&#x27;);INSERT INTO products VALUES(NULL,&#x27;è€å¹²å¦ˆ&#x27;, 20, NULL, &#x27;s002&#x27;); ç®€ç­”æŸ¥è¯¢12-- æŸ¥è¯¢æ‰€æœ‰select * from è¡¨å ã€æ¡ˆä¾‹ã€‘ 12-- æŸ¥è¯¢æ‰€æœ‰select * from products æŸ¥è¯¢æ‰€æœ‰å•†å“çš„æŒ‡å®šåˆ—1select åˆ—å, åˆ—å... from products; ã€æ¡ˆä¾‹ã€‘ 1select pname, sid from products; åˆ«åæŸ¥è¯¢123456-- è¯­æ³•-- ä½¿ç”¨å…³é”®å­—as, aså¯ä»¥å†™ä¸Šä¹Ÿå¯ä»¥çœç•¥-- è¡¨çš„åˆ«åã€åˆ—çš„åˆ«åselect åˆ—å as åˆ«å, åˆ—å as åˆ«å .... from è¡¨å as è¡¨åˆ«å-- orselect åˆ—å åˆ«å, åˆ—å åˆ«å .... from è¡¨å è¡¨åˆ«å ã€æ¡ˆä¾‹ã€‘ 12345678-- as or No asselect * from products as p;select * from products p;-- è¡¨çš„åˆ«åä¸ºä»€ä¹ˆæ˜¯ è¡¨åˆ«å.åˆ—æ˜ã€æ˜¯ä¸æ˜¯è„±äº†è£¤å­æ”¾pã€‘-- å®åˆ™ä¸æ˜¯çš„ å› ä¸ºåœ¨å¤šè¡¨æŸ¥è¯¢ä¸­ä¼šå¯èƒ½ä¼šæœ‰é‡å¤åˆ—åï¼Œå°±ä¼šç”¨åˆ°ã€è¡¨åˆ«å.åˆ—æ˜ã€‘-- è¡¨çš„åˆ«å è¿˜å¯ä»¥ç®€åŒ–SQL,åŒºåˆ†è¡¨-- åˆ—åˆ«åçš„ä½œç”¨ï¼šæ”¹å˜æŸ¥è¯¢ç»“æœä¸­åˆ—åçš„åç§°, è¿˜å¯ä»¥å¢åŠ å¯è¯»æ€§select p.pid pname from products as p; å»æ‰é‡å¤å€¼1select distinct åˆ—å, åˆ—å from è¡¨å; ã€æ¡ˆä¾‹ã€‘ 1select distinct pname,sid from products; ä¸ºä¸€åˆ—ä¸Šæ‰€æœ‰çš„çš„æ•°æ®åŠ ä¸Š21select åˆ—å + æ•°å€¼ from è¡¨å; ã€æ¡ˆä¾‹ã€‘ 1select pname, price + 2 from products; æ¡ä»¶æŸ¥è¯¢ä½¿ç”¨æ¡ä»¶æŸ¥è¯¢ï¼Œå¯ä»¥æ ¹æ®å½“ä¸‹å…·ä½“æƒ…å†µç›´æŸ¥æƒ³è¦çš„é‚£éƒ¨åˆ†æ•°æ®ï¼Œå¯¹è®°å½•è¿›è¡Œè¿‡æ»¤ã€‚ SQL è¯­æ³•å…³é”®å­—ï¼š WHERE è¯­æ³•æ ¼å¼ï¼š 1select * from è¡¨å where æ¡ä»¶; æ¡ä»¶æ€ä¹ˆå†™: æ“ä½œç¬¦ æè¿° å®ä¾‹ &#x3D; ç­‰å·,æ£€æµ‹ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰è¿”å›true (A &#x3D; B) è¿”å›false &lt;&gt;,!&#x3D; ä¸ç­‰äº,æ£€æµ‹ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰è¿”å›true (A !&#x3D; B) è¿”å› true &gt; å¤§äºå·ï¼Œæ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å¤§äºå³è¾¹çš„å€¼,å¦‚æœå·¦è¾¹çš„å€¼å¤§äºå³è¾¹çš„å€¼è¿”å›true (A &gt; B) è¿”å› false &lt; å°äºå·,æ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å°äºå³è¾¹çš„å€¼,å¦‚æœå·¦è¾¹çš„å€¼å°äºå³è¾¹çš„å€¼è¿”å›true (A &lt; B) è¿”å› true &gt;&#x3D; å¤§äºç­‰äºå·,æ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å¤§äºæˆ–ç­‰äºå³è¾¹çš„å€¼,å¦‚æœå·¦è¾¹çš„å€¼å¤§äºæˆ–ç­‰äºå³è¾¹çš„å€¼è¿”å›true (A &gt;&#x3D; B) è¿”å› false &lt;&#x3D; å°äºç­‰äºå·,æ£€æµ‹å·¦è¾¹çš„å€¼æ˜¯å¦å°äºäºæˆ–ç­‰äºå³è¾¹çš„å€¼,å¦‚æœå·¦è¾¹çš„å€¼å°äºæˆ–ç­‰äºå³è¾¹çš„å€¼è¿”å›true (A &lt;&#x3D; B) è¿”å› true è¿ç®—ç¬¦ï¼šå±€é™æ€§åªèƒ½é’ˆå¯¹ä¸€ä¸ªå­—æ®µ(ä¸ä½¿ç”¨é€»è¾‘è¿ç®—ç¬¦çš„å‰æä¸‹) 123456789-- æŸ¥è¯¢å•†å“åç§°ä¸ºåä¸‰é¦™çš„å•†å“æ‰€æœ‰ä¿¡æ¯select * from products where pname=&#x27;åä¸‰é¦™&#x27;;-- æŸ¥è¯¢å•†å“åä»·æ ¼ &gt;60 å•†å“æ‰€æœ‰ä¿¡æ¯select * from products where price &gt; 60;-- ä¸ç­‰äºselect * from products where price &lt;&gt; 60;select * from products where price != 60; é€»è¾‘è¿ç®—ç¬¦ NOT é€»è¾‘éã€!ã€‘ AND é€»è¾‘ä¸ã€&amp;&amp;ã€‘ OR é€»è¾‘æˆ–ã€||ã€‘ é€»è¾‘è¿ç®—ç¬¦ï¼šä½œç”¨æ˜¯å°†ä¸¤ä¸ªåŠä»¥ä¸Šçš„æ¡ä»¶ç»„åˆåœ¨ä¸€èµ· é€»è¾‘è¿ç®—ç¬¦ï¼š NOT ã€éã€‘ AND ã€ä¸ã€‘ OR ã€æˆ–ã€‘ 12345-- è¯­æ³•-- æŸ¥è¯¢å¤§å•†å“ä»·æ ¼ å¤§äº40ä¸”å°äº30çš„æ‰€æœ‰å•†å“ ã€é€»è¾‘æœ‰é—®é¢˜ï¼Œåªæ˜¯è¯­æ³•æ²¡æœ‰é”™è¯¯ã€‘select * from è¡¨å where æ¡ä»¶1 é€»è¾‘è¿ç®—ç¬¦ æ¡ä»¶2;-- æŸ¥è¯¢å¤§å•†å“ä»·æ ¼ å¤§äº40æˆ–å°äº30çš„æ‰€æœ‰å•†å“ select * from è¡¨å where æ¡ä»¶1 é€»è¾‘è¿ç®—ç¬¦ æ¡ä»¶2; ã€æ¡ˆä¾‹ã€‘ 12-- æŸ¥è¯¢å¤§å•†å“ä»·æ ¼ å¤§äº40æˆ–å°äº30çš„æ‰€æœ‰å•†å“ select * from products where price &gt; 30 OR price &lt; 30; æŸ¥è¯¢æ¡ä»¶inä½œç”¨æŒ‡å®šèŒƒå›´å†…çš„æ‰€æœ‰æ•°æ® 1select * from products where åˆ—å in (3, 2); ã€æ¡ˆä¾‹ã€‘ 1234-- åœ¨èŒƒå›´å†…select * from products where pid in (3, 2);-- ä¸åœ¨èŒƒå›´å†…select * from products where pid not in (38, 38); èŒƒå›´æŸ¥è¯¢èŒƒå›´æŸ¥è¯¢:ä½œç”¨æŸ¥è¯¢æŒ‡å®šæ¡ä»¶å†…çš„æ•°æ®ï¼Œä»·æ ¼[30 - 100] 01å†™æ³•æŸ¥è¯¢ 1select *from products where price &gt;= 38 &amp;&amp; price &lt;= 98; 02å†™æ³•: Between â€¦ and â€¦ ã€&gt;&#x3D; and &lt;&#x3D;ã€‘ 1select * from products where price between 38 and 98; æ¨¡ç³ŠæŸ¥è¯¢æ¨¡ç³ŠæŸ¥è¯¢ï¼šä½œç”¨æ˜¯å¸®åŠ©åŒ¹é…æ¨¡ç³Šçš„å­—æ®µå†…å®¹ å¦‚æœ‰å­—æ®µï¼šä¸€å·å­¦ç”Ÿã€äºŒå·å­¦ç”Ÿã€ä¸‰å·å­¦ç”Ÿã€å››å·å­¦ç”Ÿâ€¦ â€¦ æ¨¡ç³ŠæŸ¥è¯¢ï¼šæŸ¥è¯¢å­¦ç”Ÿåªè¦å­—æ®µä¸­åŒ…å«äº†å­¦ç”Ÿå°±å›æŸ¥è¯¢åˆ°! 1-- è¯­æ³•: where ä¹‹ååŠ ä¸Š like è¯­æ³•ã€‚ã€é€šé…ç¬¦æœ‰ã€‘ % (ç™¾åˆ†å·)ï¼Œ _ (ä¸‹åˆ’çº¿) % (ç™¾åˆ†å·) ä»£è¡¨&#x3D;&#x3D;ä»»æ„é•¿åº¦&#x3D;&#x3D;çš„å†…å®¹æ¨¡ç³ŠåŒ¹é…ï¼š ã€%xxxã€‘ä»¥ xxx ç»“å°¾çš„ä»»æ„å†…å®¹ã€‚ ã€xxx%ã€‘ä»¥ xxx å¼€å¤´çš„ä»»æ„å†…å®¹ã€‚ ã€%xxx%ã€‘åŒ…å«xxxçš„ä»»æ„å†…å®¹ã€‚ _ (ä¸‹åˆ’çº¿) ä»£è¡¨&#x3D;&#x3D;ä»»æ„ä¸€ä¸ªå­—ç¬¦&#x3D;&#x3D;çš„å†…å®¹æ¨¡ç³ŠåŒ¹é…ï¼š ã€_xxxã€‘ä»¥ä»»æ„å•ä¸ªå­—ç¬¦å¼€å¤´çš„ xxx çš„å†…å®¹ã€‚ ã€xxx__xã€‘ä»¥ xxx ä¸­é—´ä»»æ„äºŒä¸ªå­—ç¬¦ä»¥ x ç»“å°¾çš„å†…å®¹ã€‚ 12345-- è¯­æ³•-- æŸ¥è¯¢æ‰€æœ‰æ–°ç–†çš„äº§å“select * from è¡¨å where åˆ—å like &#x27;xx%&#x27;;-- ä»¥æ‰“å¤§æ£ç»“å°¾çš„ï¼Œä½†æ˜¯å¤´ä¸¤ä¸ªå­—ç¬¦ä»»æ„select * from è¡¨å where åˆ—å like &#x27;__xx&#x27;; ã€æ¡ˆä¾‹ã€‘ 12345-- æŸ¥è¯¢æ‰€æœ‰æ–°ç–†çš„äº§å“ %select * from products where pname like &#x27;æ–°ç–†%&#x27;;-- ä»¥æ‰“å¤§æ£ç»“å°¾çš„ï¼Œä½†æ˜¯å¤´ä¸¤ä¸ªå­—ç¬¦ä»»æ„ __select * from products where pname like &#x27;__å¤§æ£&#x27;; æ’åºæŸ¥è¯¢æ’åºæŸ¥è¯¢ï¼šä½œç”¨å°†æŸ¥è¯¢ç»“æœè¿›è¡Œæ’åº 123-- è¯­æ³•select * from è¡¨å where å­—æ®µ=å€¼ order by å­—æ®µå æ’åºè§„åˆ™[å‡åºã€é™åº]-- å‡åº ascã€é™åºdesc ã€æ¡ˆä¾‹ã€‘ 1234-- æ ¹åŸºä»·æ ¼ å‡åºselect *from products order by price asc;-- æŸ¥è¯¢æ‰€æœ‰åŒ…å«&#x27;æ–°&#x27;çš„å•†å“ï¼Œå¹¶ä¸”ä»·æ ¼æ˜¯ä»å¤§å¤§å°select * from products where pname like &#x27;%æ–°%&#x27; order by price desc; èšåˆæŸ¥è¯¢èšåˆæŸ¥è¯¢ï¼šä½œç”¨å¯¹å•åˆ—æ•°æ®è¿›è¡Œèšåˆåˆ†æã€æ±‚å’Œã€æ±‚å¹³å‡å€¼ã€æ±‚æœ€å¤§å€¼ï¼Œæ±‚æœ€å°å€¼ã€‘ 12-- è¯­æ³•select èšåˆå‡½æ•° from è¡¨ where æ¡ä»¶; èšåˆå‡½æ•°ä¾‹å­ï¼š æ±‚å’Œsum() æ±‚å¹³å‡å€¼avg() æ±‚æœ€å¤§å€¼max() æ±‚æœ€å°å€¼min() æ±‚å…ƒç´ ä¸ªæ•°count() &#x3D;&#x3D;æ³¨æ„&#x3D;&#x3D;ï¼šSQLè¯­å¥æ˜¯åŸºäºéœ€æ±‚å®ç°çš„ï¼ŒåŒä¸€ä¸ªéœ€æ±‚å¯èƒ½å‡ºç°nå¤šç§SQLå†™æ³•ã€‚å¦‚æœSQLè¯­å¥æ²¡æœ‰éœ€æ±‚èƒŒæ™¯ï¼ŒSQLå¦‚æ— æ ¹ä¹‹æ°´ï¼Œæ¯«æ— æ„ä¹‰ã€‚ ã€æ¡ˆä¾‹ã€‘ 12345678910-- æ±‚æ‰€æœ‰å•†å“ä»·æ ¼çš„æ€»å’Œselect sum(price) from products;-- æ˜¾ç¤ºçš„æ¯”è¾ƒæ¨¡ç³Š å°±ç”¨åˆ«åselect sum(price) as æ‰€æœ‰å•†å“æ€»ä»· from products;-- æ±‚æ‰€æœ‰å•†å“çš„å¹³å‡ä»·æ ¼/æœ€å°ä»·æ ¼/æœ€é«˜ä»·æ ¼select avg(price) as å•†å“å¹³å‡ä»·æ ¼, max(price) as æœ€å¤§å•†å“ä»·æ ¼, min(price) as å•†å“æœ€å°ä»·æ ¼ from products;-- å…ƒç´ ä¸ªæ•°select count(*) from products; åˆ†ç»„æŸ¥è¯¢åˆ†ç»„æŸ¥è¯¢ï¼šä½œç”¨å°†æŸ¥è¯¢ç»“æœæŒ‰ç…§æŸåˆ—æ•°æ®æ¥è¿›è¡Œåˆ†ç»„å‘ˆç° 12-- è¯­æ³•æ ¼å¼select åˆ—å from è¡¨ where group by åˆ†ç»„å­—æ®µ having æ¡ä»¶; æ³¨æ„ï¼š select è¯­å¥ä¸­çš„åˆ—å¿…é¡»å‡ºç°åœ¨ group by çš„å­å¥ä¸­ã€‚ group byçš„åˆ—ï¼Œä¸ä¸€å®šéè¦å‡ºç°åœ¨selectåˆ—ä¸­ã€‚ èšåˆå‡½æ•°åªèƒ½å‡ºç°åœ¨selectåˆ—ï¼Œæˆ–è€…æ˜¯havingè¯­å¥ä¸­ï¼Œä¸€å®šä¸èƒ½å‡ºç°åœ¨whereæ¡ä»¶ä¸­ã€‚ ã€æ¡ˆä¾‹ã€‘ 123456-- éœ€æ±‚-- ç»Ÿè®¡ï¼ŒæŒ‡å®šåˆ†ç±»ä¸‹å•†å“çš„ä¸ªæ•°select sid as å•†å“åˆ†ç±», count(*) as å•†å“ä¸ªæ•° from products group by sid;-- ç»Ÿè®¡ï¼ŒæŸç±»å•†å“çš„å¹³å‡ä»·æ ¼ï¼Œå•†å“çš„å¹³å‡ä»·ä¸èƒ½ä½äº60select sid as å•†å“åˆ†ç±» , avg(price) as å•†å“çš„å¹³å‡ä»·æ ¼ from products group by sid having avg(price) &gt;= 60; åˆ†é¡µæŸ¥è¯¢å…³é”®å­—: limit[offset] rows åˆ†é¡µæŸ¥è¯¢:ä½œç”¨æ˜¯å°†æŸ¥è¯¢çš„ç»“æœæŒ‰ç…§ä¸€é¡µä¸€é¡µçš„å½¢å¼è¾“å‡ºã€‚ 12-- è¯­æ³•select åˆ— from è¡¨ limit offset, lenght ã€æ¡ˆä¾‹ã€‘ 1234-- åˆ†é¡µæŸ¥è¯¢ï¼Œå°†æ•°æ®åˆ†ä¸ºä¸‰é¡µï¼ŒæŸ¥è¯¢ç¬¬ä¸€é¡µæ•°æ®select * from products limit 0, 2;-- 0 ä»£è¡¨åç§»é‡ï¼ˆå¼€å§‹è¡Œæ•°ï¼‰# è¿™ä¸ªå€¼æ˜¯ç®—å‡ºæ¥çš„ é‚£ä¹ˆä¹ˆç¬¬äºŒé¡µå¼€å§‹å°±æ˜¯ 2 2-- 2 æ¯é¡µæ˜¾ç¤ºçš„è¡Œæ•° &#x3D;&#x3D;limit&#x3D;&#x3D; å…³é”®å­—ä¸æ˜¯SQL92æ ‡å‡†æå‡ºçš„å…³é”®å­—ï¼Œå®ƒæ˜¯&#x3D;&#x3D;MySQLç‹¬æœ‰çš„è¯­æ³•&#x3D;&#x3D;ã€‚ é€šè¿‡ limit å…³é”®å­—ï¼ŒMySQLå®ç°äº†ç‰©ç†åˆ†é¡µã€‚ åˆ†é¡µåˆ†ä¸ºé€»è¾‘åˆ†é¡µå’Œç‰©ç†åˆ†é¡µ é€»è¾‘åˆ†é¡µï¼šå°†æ•°æ®åº“ä¸­çš„æ•°æ®æŸ¥è¯¢åˆ°å†…å­˜ä¹‹åå†è¿›è¡Œåˆ†é¡µã€‚ ç‰©ç†åˆ†é¡µï¼šé€šè¿‡ LIMIT å…³é”®å­—ï¼Œç›´æ¥å†æ•°æ®åº“ä¸­è¿›è¡Œåˆ†é¡µï¼Œæœ€ç»ˆè¿”å›çš„æ•°æ®ï¼Œåªæ˜¯åˆ†é¡µåçš„æ•°æ®ã€‚ ã€è¾“å‡ºã€‘ 12345678910111213141516# ç¬¬ä¸€é¡µè¾“å‡ºmysql&gt; select * from products limit 0, 2;+-----+-----------------+-------+-------+------+| pid | pname | price | pdate | sid |+-----+-----------------+-------+-------+------+| 1 | æ³°å›½å¤§æ¦´è² | 98 | NULL | s001 || 2 | æ–°ç–†å¤§æ£ | 38 | NULL | s002 |+-----+-----------------+-------+-------+------+# ç¬¬äºŒé¡µè¾“å‡ºmysql&gt; select * from products limit 2, 2;+-----+--------------+-------+-------+------+| pid | pname | price | pdate | sid |+-----+--------------+-------+-------+------+| 3 | æ–°ç–†åˆ‡ç³• | 68 | NULL | s001 || 4 | åä¸‰é¦™ | 10 | NULL | s002 |+-----+--------------+-------+-------+------+ &#x3D;&#x3D;çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œè§‰çŸ¥ä»£ç è¦èº¬è¡Œ&#x3D;&#x3D;","categories":[{"name":"MySql","slug":"MySql","permalink":"https://tutouwang.vercel.app/categories/MySql/"}],"tags":[]},{"title":"å››ç§è¿œç¨‹è¿æ¥äº‘ä¸»æœºçš„æ–¹æ³•/è®¾ç½®å…å¯†ç™»å½•","slug":"æœ‰è¶£çš„çŸ¥è¯†/å››ç§è¿œç¨‹è¿æ¥äº‘ä¸»æœºçš„æ“ä½œ","date":"2022-11-02T11:26:07.000Z","updated":"2022-11-02T14:52:33.128Z","comments":true,"path":"2022/11/02/æœ‰è¶£çš„çŸ¥è¯†/å››ç§è¿œç¨‹è¿æ¥äº‘ä¸»æœºçš„æ“ä½œ/","link":"","permalink":"https://tutouwang.vercel.app/2022/11/02/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/%E5%9B%9B%E7%A7%8D%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5%E4%BA%91%E4%B8%BB%E6%9C%BA%E7%9A%84%E6%93%8D%E4%BD%9C/","excerpt":"","text":"å®‰è£…SSH&#x2F;ssh å‰æœŸéœ€è¦å®‰è£… ssh å¯ä»¥ä½¿ç”¨&#x3D;&#x3D;ssh -V&#x3D;&#x3D;æŸ¥çœ‹ç‰ˆæœ¬ç¡®å®šæ˜¯å¦å®‰è£…äº†ssh å®‰è£…äº†å°±ä¼šæç¤ºï¼šï¼ˆå°±å¯ä»¥è·³è¿‡ä¸€ä¸‹é¢æ­¥éª¤ï¼‰ OpenSSH_8.2p1 Ubuntu-4ubuntu0.4, OpenSSL 1.1.1f 31 Mar 2020 å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ å®‰è£…ï¼š 1apt install ssh æŠ¥é”™ï¼šOpen (13: insufficient permission) å°±æ˜¯æƒé™ä¸è¶³å¯ä»¥ä½¿ç”¨&#x3D;&#x3D;sudo&#x3D;&#x3D;ææƒ 1sudo apt install ssh æŸ¥çœ‹ç‰ˆæœ¬&#x2F;æ£€éªŒæ˜¯å¦å®‰è£…æˆåŠŸ 1ssh -V çœ‹åˆ°ç‰ˆæœ¬ã€è¡¨ç¤ºæˆåŠŸï¼ OpenSSH_8.2p1 Ubuntu-4ubuntu0.4, OpenSSL 1.1.1f 31 Mar 2020 ç¬¬ä¸€ç§ssh ç”¨æˆ·å@IPåœ°ä¸­ 1ssh root@192.168.1.1 ç¬¬äºŒç§è®¾ç½®&#x3D;&#x3D;hosts&#x3D;&#x3D;æ–‡ä»¶ 1sudo vim /etc/hosts ssh ç”¨æˆ·å@&#x3D;&#x3D;hosts&#x3D;&#x3D;æ–‡ä»¶ä¸­è®¾ç½®çš„åå­— 1ssh nowcoder@VM ç¬¬ä¸‰ç§å¦‚æœè¯´æœ¬æœºåå­—å°±æ˜¯è¦ç™»å½•çš„åå­—ä¹Ÿå¯ä»¥ç¼ºçœ ssh åˆ«å 1ssh VM ç¬¬å››ç§aliaså‘½ä»¤ç”¨äºè®¾ç½®æŒ‡ä»¤çš„åˆ«å alias[åˆ«å]&#x3D;[æŒ‡ä»¤åç§°] æŸ¥çœ‹æœ¬æœºéƒ½æœ‰å“ªäº›åˆ«å 1alias è®¾ç½®åˆ«å alias æƒ³è¦è®¾ç½®çš„åå­—&#x3D;â€ssh åå­—@IPâ€ 1alias x=&quot;ssh nowcode@192.168.5.236&quot; ä¹‹åç›´æ¥æ‰§è¡Œ&#x3D;&#x3D;x&#x3D;&#x3D;å°±å¯ä»¥äº† å½“ç„¶è¿™é‡Œæœ‰ä¸ªå¼Šç«¯å°±æ˜¯ä½ è®¾ç½®ä¸€æ¬¡åå…³&#x3D;&#x3D;é—­æ§åˆ¶å°å°±ä¼šå¤±æ•ˆ&#x3D;&#x3D; å¯ä»¥è®¾ç½®&#x3D;&#x3D;vim.zshrc&#x3D;&#x3D; é‡Œé¢æ·»åŠ alias x=&quot;ssh nowcode@192.168.5.236&quot; ä¸‹æ¬¡å¯åŠ¨å°±ä¸éœ€è¦å†æ¬¡è®¾ç½®äº†ï¼ï¼ï¼ è®¾ç½®å…å¯†æ“ä½œå…å¯†ç™»å½•çš„åŸç† æ‰‹åŠ¨ï¼šæ‹·è´å…¬é’¥åˆ°è®¤è¯æ–‡ä»¶ è‡ªåŠ¨ï¼šssh-copy-id å…¬é’¥å‘é€åˆ°authorized_keys å¦‚æœæ²¡æœ‰å…¶ä½™æœºå™¨åšæµ‹è¯•é‚£ä¹ˆå°±å¯ä»¥è¿æ¥è‡ªå·± æ‰‹åŠ¨1.å…¬é’¥è·¯å¾„ï¼š&#x3D;&#x3D;éœ€è¦å…ˆç”Ÿæˆ&#x3D;&#x3D;1ls .ssh/id_rsa.pub 2.æŸ¥çœ‹å…¬é’¥ï¼š1cat .ssh/id_rsa.pub 3.ç”Ÿæˆçš„å¯†é’¥æ”¾åˆ°authorized_keys1vim .ssh/authorized_keys 4.æµ‹è¯•è¿æ¥1ssh ç”¨æˆ·å@IP è‡ªåŠ¨æ‹·è´ID ssh-copy-id åå­—@IP(å°±æ˜¯æ‹·è´ç»™è°) 1ssh-copy-id nowcoder@VM å°±ä¼šè®©ä½ è¾“å…¥å¯†ç  æˆåŠŸæç¤ºï¼šNumber of key(s) added: 1","categories":[],"tags":[]},{"title":"socketç¼–ç¨‹åŸºç¡€","slug":"åº·å¤è®­ç»ƒ/socketç¼–ç¨‹åŸºç¡€","date":"2022-10-22T11:42:28.000Z","updated":"2022-10-24T06:37:57.100Z","comments":true,"path":"2022/10/22/åº·å¤è®­ç»ƒ/socketç¼–ç¨‹åŸºç¡€/","link":"","permalink":"https://tutouwang.vercel.app/2022/10/22/%E5%BA%B7%E5%A4%8D%E8%AE%AD%E7%BB%83/socket%E7%BC%96%E7%A8%8B%E5%9F%BA%E7%A1%80/","excerpt":"","text":"è¿è¾“å±‚åè®®æ¦‚è¿°TCP: &#x3D;&#x3D;ä¼ è¾“æ§åˆ¶åè®®&#x3D;&#x3D;é¢å‘è¿æ¥,&#x3D;&#x3D;å¯é &#x3D;&#x3D;çš„æ•°æ®ä¼ è¾“åè®®ã€‚ UDP: &#x3D;&#x3D;ç”¨æˆ·æ•°æ®æŠ¥åè®®&#x3D;&#x3D;æ— è¿æ¥ï¼Œ&#x3D;&#x3D;ä¸å¯é &#x3D;&#x3D;çš„æ•°æ®çš„æ•°æ®ä¼ è¾“åè®® IP: å°½åŠ›è€Œä¸ºäº¤ä»˜æœåŠ¡ å‡½æ•°APIæ¥æ”¶ç«¯_serversocket()å¥—æ¥å­—12#include &lt;sys/socket.h&gt;int scoket(int domain, int type, int protocol); domain: AF_INET &#x2F;&#x2F; IPV4 AF_INET6 &#x2F;&#x2F; IPV6 AF_LOCAL &#x2F;&#x2F; æœ¬åœ° AF_ROUTE &#x2F;&#x2F; è·¯ç”± type: SOCK_STREAM &#x2F;&#x2F; TCP SOCK_DGRAM &#x2F;&#x2F; UDP SOCK_PACKET SOCK_SEQPACKET protocol: IPPROTO_TCP TPPROTO_UDP IPPROTO_TIPC ä¸€èˆ¬ä¸º0 Return Value: æˆåŠŸä¸ºæ–°çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå¦åˆ™-1 bind()å¸®å®šIPå’Œç«¯å£123#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;int bind(int sockfd, const struct sockaddr *addr, socketlen_t addrlen); sockfd: æ˜¯è°ƒç”¨socket()è¿”å›çš„æ–‡ä»¶æè¿°ç¬¦ addrï¼š æ˜¯æŒ‡å‘æ•°æ®ç»“æ„struct sockaddr çš„æŒ‡é’ˆï¼Œå®ƒä¿å­˜ä½ çš„åœ°å€(å³ç«¯å£å’ŒIPåœ°å€)ä¿¡æ¯ addrlenï¼š è®¾ç½®sizeof(struct sockaddr) Return Value: -1 å‡ºé”™ 0 æ²¡å‡ºé”™ socketç›¸å…³çš„ç»“æ„ä½“1234567891011121314151617#include &lt;sys/socket.h&gt;struct sockaddr &#123; sa_family_t sin_family; char sa_data[14];&#125;;struct sockaddr_in &#123; sa_family_t sin_family; /* address family: AF_INET */ in_port sin_port; /* port in network byte order */ struct in_addr sin_addr; /* internet address */&#125;;/* Internet address. */struct in_addr &#123; uint32_t s_addr; /* address in network byte order */ &#125;; ä¸sockaddrç›¸å…³çš„å‡½æ•°1234567#include &lt;arpa/inet.h&gt;uint32_t htonl(uint32_t hostlong);uint16_t htons(uint16_t hostshort);uint32_t ntohl(uint32_t netlong);uint16_t ntohl(uint16_t netlong);in_addr_t inet_addr(const char *ip);char *inet_ntoa(struct in_addr in); ä¸»æœºå­—èŠ‚åº&amp;ç½‘ç»œå­—èŠ‚åº ä¸»æœºå­—èŠ‚åºï¼šå°±æ˜¯æˆ‘ä»¬å¹³å¸¸è¯´çš„å¤§ç«¯å’Œå°ç«¯æ¨¡å¼ å°ç«¯æ¨¡å¼ï¼šä½ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„åº•åœ°å€ç«¯ï¼Œé«˜ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„é«˜åœ°å€ç«¯ å¤§ç«¯æ¨¡å¼ï¼šé«˜ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„åº•åœ°å€ç«¯ï¼Œä½ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„é«˜åœ°å€ç«¯ ç½‘ç»œå­—èŠ‚åºï¼š4ä¸ªå­—èŠ‚çš„32bitå€¼ä»¥ä¸‹é¢çš„æ¬¡åºä¼ è¾“ï¼šé¦–å…ˆæ˜¯07bit,æœ€åæ˜¯2431bit æŸ¥çœ‹æœ¬æœºæ˜¯å¤§ç«¯æ¨¡å¼è¿˜æ˜¯å°ç«¯æ¨¡å¼ 123456789101112131415#include &lt;stdio.h&gt;union Un &#123; char a; int b;&#125;;int main() &#123; union Un k; k.b = 1; // å¦‚æœæ˜¯å¤§ç«¯ï¼Œåˆ™k.aä¸º0x00,åˆ™t.a != 1ï¼Œåä¹‹æ˜¯å°ç«¯ if(k.a != 1) printf(&quot;å¤§ç«¯ï¼&quot;); else printf(&quot;å°ç«¯ï¼&quot;); return 0;&#125; å¯ä»¥å¤åˆ¶è‡ªå·±ç”µè„‘æµ‹è¯•ï¼Œæˆ‘æ˜¯å°ç«¯ï¼ linsten()ç›‘å¬socket123#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;int listen(int sockfd, int backlog); sockfd æ˜¯è°ƒç”¨socket()è¿”å›çš„å¥—æ¥å­—æ–‡ä»¶æè¿° backlong æ˜¯åœ¨è¿›å…¥é˜Ÿåˆ—ä¸­å…è®¸çš„è¿æ¥æ•°ç›® Return Value å‘ç”Ÿé”™è¯¯è¿”å›-1ï¼Œå¦åˆ™è¿”å›0 accept()æ¥å—è¿æ¥123#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen); accept()ç”¨æ¥ä»sockfdä¸Šè¿”å›ä¸€ä¸ªæ–°çš„è¿æ¥ï¼š ç¬¬ä¸€ä¸ªå‚æ•°sockfdå¿…é¡»æ˜¯ç»ç”±socket(), bind(), listen()å‡½æ•°å¤„ç†åçš„socket ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªåœ°å€ï¼Œå°†ä¿å­˜å¯¹ç«¯åœ°å€åˆ°è¯¥åœ°å€ä¸­ ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯åœ°å€é•¿åº¦çš„åœ°å€ Return Value: å¦‚æœ&#x3D;&#x3D;æˆåŠŸ&#x3D;&#x3D;è¿”å›çš„æ˜¯ä¸€ä¸ª&#x3D;&#x3D;æ–°çš„sockfd&#x3D;&#x3D;,åŸæ¥çš„sockfdä¾ç„¶å¯ä»¥ç”¨accept å¦‚æœå¤±è´¥ï¼Œåˆ™è¿”å›-1 å‘é€ç«¯_Clientconnect()å»ºç«‹è¿æ¥123#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;int connect(int sockfd, const struct sockaddr *addr, socklen_t addrlen); sockfd: æ˜¯ç³»ç»Ÿè°ƒç”¨socket() è¿”å›çš„å¥—æ¥å­—æ–‡ä»¶æè¿° addrï¼šæ˜¯ä¿å­˜ç€&#x3D;&#x3D;ç›®çš„ç«¯å£å’ŒIPåœ°å€&#x3D;&#x3D;çš„æ•°æ®ç»“æ„ struct sockaddr. addrlen: è®¾ç½®ä¸ºsizeof(struct sockaddr) Return Value: é”™è¯¯è¿”å›-1ï¼Œå¦åˆ™è¿”å›0 connectå’Œacceptæ˜¯ä¸€å¯¹ï¼Œåˆ†åˆ«åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡æ‰§è¡Œï¼Œåœ¨æ­¤æœŸé—´ï¼Œå®Œæˆäº†ä¸‰æ¬¡æ¡æ‰‹æ“ä½œ send()å‘é€æ•°æ®12345#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;// read ä¹Ÿè¡Œssize_t send(int sockfd, const void *buf, size_t len, int flags);ssize_t sendto(int sockfd, const void *buf, size_t len, int flags, const struct sockaddr *dest_addr, socklen_t addrlen); sockfdï¼šæ˜¯ä½ æƒ³å‘é€æ•°æ®çš„å¥—æ¥å­—æè¿°ç¬¦ msg: æ˜¯ä½ æƒ³å‘é€çš„æ•°æ®æŒ‡é’ˆ len: æ˜¯æ•°æ®çš„é•¿åº¦ flags è®¾ç½®0å³å¯ &#x3D;&#x3D;sendtop&#x3D;&#x3D;:ä¸»è¦ç”¨åœ¨UDPé€šä¿¡ä¸­ dest_addrï¼šä¸ºè¿œç«¯è¦é€šä¿¡çš„ç½‘ç»œåœ°å€ addlen: ä¸ºåœ°å€çš„é•¿åº¦ Return Value: æˆåŠŸå‘é€çš„å­—èŠ‚æ•°ï¼Œé”™è¯¯åˆ™è¿”å›-1ï¼Œå¹¶è®¾ç½®errno recv()æ¥æ”¶æ•°æ®12345#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;// write ä¹Ÿè¡Œssize_t recv(int sockfd, void *buf, size_t len, int flags);ssize_t sendto(int sockfd, void *buf, size_t len, int flags, struct sockaddr *src_addr, socklen_t *addrlen); sockfd:æ˜¯è¦è¯»çš„å¥—æ¥å­—æè¿°ç¬¦ buf: æ˜¯è¦è¯»çš„ä¿¡æ¯ç¼“å†²åŒº len: æ˜¯ç¼“å†²çš„æœ€å¤§é•¿åº¦ flags: å¯ä»¥è®¾ç½®ä¸º0 Return Value: å®é™…è¯»å…¥ç¼“å†²çš„æ•°æ®çš„å­—èŠ‚æ•°ã€‚åœ¨å‡ºé”™çš„æ—¶å€™è¿”å›åŒæ—¶è®¾ç½®&#x3D;&#x3D;errno&#x3D;&#x3D; close()å…³é—­è¿æ¥12#include &lt;unistd.h&gt;int clase(int fd); ä¸‰æ¬¡æ¡æ‰‹_æµç¨‹ å››æ¬¡æŒ¥æ‰‹_æµç¨‹","categories":[],"tags":[]},{"title":"C++è®¾è®¡æ¨¡å¼","slug":"åº·å¤è®­ç»ƒ/C++è®¾è®¡æ¨¡å¼","date":"2022-10-06T01:27:27.000Z","updated":"2022-10-17T14:12:32.630Z","comments":true,"path":"2022/10/06/åº·å¤è®­ç»ƒ/C++è®¾è®¡æ¨¡å¼/","link":"","permalink":"https://tutouwang.vercel.app/2022/10/06/%E5%BA%B7%E5%A4%8D%E8%AE%AD%E7%BB%83/C++%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿæ¯ä¸€ä¸ªæ¨¡å¼æè¿°äº†ä¸€ä¸ªåœ¨æˆ‘ä»¬å‘¨å›´ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒã€‚è¿™æ ·ï¼Œä½ å°±èƒ½ä¸€æ¬¡åˆä¸€æ¬¡åœ°ä½¿ç”¨è¯¥æ–¹æ¡ˆè€Œä¸å¿…åšé‡å¤åŠ³åŠ¨ã€‚ è®¾è®¡æ¨¡å¼æ˜¯æˆ‘ä»¬åœ¨å¼€å‘è½¯ä»¶æ—¶ï¼Œé’ˆå¯¹å¸¸è§é—®é¢˜çš„ã€é€šç”¨ã€‘è§£å†³æ–¹æ¡ˆä¹Ÿæ˜¯å‰è¾ˆä»¬ä¸æ–­æ‘¸ç´¢æ€»ç»“å‡ºæ¥çš„å¥½çš„ç¼–ç¨‹æ–¹æ³•ï¼Œå¯ä»¥ç†è§£ä¸ºæ‰“æ¸¸æˆçš„æ”»ç•¥ è®¾è®¡æ¨¡å¼æœ‰ä»€ä¹ˆç”¨?å‡å°‘çƒ‚ä»£ç è®©é¡¹ç›®æ›´å¥½ç»´æŠ¤ï¼Œå¦‚æœæ²¡å­¦è¿‡è®¾è®¡æ¨¡å¼ï¼Œå¯èƒ½éšç€äº§å“ä¸æ–­åŠ éœ€æ±‚æ”¹éœ€æ±‚ï¼Œä½ çš„ä»£ç ä¼šå……æ»¡if-elseï¼Œåˆ«äººä¹Ÿä¸æ•¢åŠ¨ä½ çš„ä»£ç åªèƒ½å†å»è¡¥å……if-elseï¼Œäºæ˜¯â€œğŸ’©(å±)å±±â€å°±è¶Šå †è¶Šé«˜ï¼Œä½¿ç”¨è®¾è®¡æ¨¡å¼ï¼Œå°±å¯ä»¥æŠŠæ¯æ®µé€»è¾‘ï¼Œå•ç‹¬å°è£…å’Œç»´æŠ¤ï¼Œå¤§å®¶åˆä½œå¼€å‘ä¹Ÿä¼šæ›´é«˜æ•ˆã€‚ è®¾è®¡æ¨¡å¼çš„ç§ç±» åˆ†ç±»ï¼š å•åˆ—æ¨¡å¼ æ‡’æ±‰å¼: ç›´åˆ°ç¬¬ä¸€æ¬¡ç”¨åˆ°ç±»çš„å®ä¾‹æ—¶æ‰å»å®ä¾‹æ—¶æ‰å»å®ä¾‹åŒ–ï¼Œä¸‹é¢æ˜¯èµ–æ±‰å®ç° é¥¿æ±‰æ¨¡å¼ï¼šç±»å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–ä¸‹é¢æ˜¯é¥¿æ±‰å®ç° å•åˆ—è®¾è®¡æ¨¡å¼è§£å†³çš„é—®é¢˜ï¼š æŸä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œåœ¨å…¨å±€ä¸­åªæœ‰ä¸€ä¸ª æ¯”å¦‚è¯´å¼€å‘ä¸€ä¸ªHTTPçš„æœåŠ¡å™¨ï¼Œä½ çš„ä¸€ä¸ªç¨‹åºè¿è¡Œèµ·æ¥ï¼Œå¦‚æœæŠŠHTTPæœåŠ¡å™¨çœ‹æˆä¸€ä¸ªå¯¹è±¡çš„è¯ï¼Œå“ªä½ å¸Œæœ›ä½ çš„ç¨‹åºä¸­æœ‰å‡ ä¸ªHTTPæœåŠ¡å™¨çš„å¯¹è±¡å‘¢ï¼Ÿ åªæœ‰ä¸€ä¸ªæ¯”è¾ƒåˆé€‚ï¼Œæ‰€æœ‰è¯´ä½ å¦‚ä½•ä¿è¯ä½ ç›¸å…³çš„HTTPæœåŠ¡å™¨çš„å¯¹è±¡åœ¨å…¨å±€ä¸­åªæœ‰ä¸€ä¸ªã€‚ ä½ è¯´ï¼Œä½ åªç”Ÿæˆä¸€ä¸ªï¼Œé‚£å°±è¡Œäº†ã€‚ å…¶å®å“ªä¸è¡Œï¼Œä½ ç”¨ä½ çš„äººæ ¼æ‹…ä¿ä¸äº† é‚£ä¹ˆå•åˆ—æ¨¡å¼å°±å¯ä»¥ä¿è¯ç›¸å…³çš„ç±»çš„å¯¹è±¡åœ¨æˆ‘çš„å…¨å±€ç¯å¢ƒä¸­æœ‰ä¸”åªæœ‰ä¸€ä¸ªï¼Œè¿™å°±æ˜¯å•åˆ—æ¨¡å¼çš„ä½œç”¨ã€‚ 12345678910111213141516171819/************************************************************************* &gt; File Name: singleton.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´10æœˆ17æ—¥ æ˜ŸæœŸä¸€ 10æ—¶48åˆ†08ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;class HttpServer &#123;public :&#125;;int main() &#123; HttpServer h1; // 1.ä¸€ç§å®šä¹‰ HttpServer h2(h1); // 2.å¯ä»¥æ‹·è´è¿‡æ¥ return 0;&#125; å•åˆ—_ä¸Šè¿°ä»£ç æ€è€ƒï¼Ÿä¸ºä»€ä¹ˆ&#x3D;&#x3D;HttpServer&#x3D;&#x3D;å®ƒçš„å¯¹è±¡èƒ½æœ‰å¤šä¸ªï¼Ÿ å› ä¸ºå¤–éƒ¨å¯ä»¥è°ƒç”¨HttpServerçš„ç›¸å…³æ„é€ å‡½æ•°ï¼Œå¦‚æœè¯´æˆ‘è¦æŠŠHttpServerçš„æ‰€æœ‰æ„é€ å‡½æ•°(å¤–éƒ¨æ‰€æœ‰èƒ½è°ƒç”¨åˆ°çš„)éƒ½ç»™ä»–åˆ é™¤æˆ–è€…å¼„æˆç§æœ‰çš„ï¼Œå¤–éƒ¨æ˜¯ä¸æ˜¯å°±ä¸èƒ½è°ƒç”¨äº†ã€‚ 1234567891011121314151617#include &lt;iostream&gt;using namespace std;class HttpServer &#123;public :private: HttpServer(); // ç³»ç»Ÿå¸¦çš„ é»˜è®¤æ„é€ å‡½æ•° HttpServer(const HttpServer &amp;); // ç³»ç»Ÿå¸¦çš„ æ‹·è´æ„é€ å‡½æ•°&#125;;int main() &#123; // å°±ä¼šå‘ç°ä¸‹é¢çš„ä»£ç å°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºå®ƒè®¿é—®ä¸åˆ°ç›¸åº”çš„æ„é€ å‡½æ•°äº† HttpServer h1; // 1.ä¸€ç§å®šä¹‰ HttpServer h2(h1); // 2.å¯ä»¥æ‹·è´è¿‡æ¥ return 0;&#125; 1ç¼–è¯‘é˜¶æ®µå°±ä¼šæŠ¥é”™ï¼Œå› ä¸ºè®¿é—®ä¸åˆ°ç›¸åº”çš„æ„é€ å‡½æ•°äº†ã€‚åˆ æ‰1ï¼Œ2ä»£ç å°±æ­£å¸¸äº†ï¼Œè¿™æ ·å°±ä¿è¯äº†å¤–éƒ¨ç»å¯¹æ²¡æœ‰ä»»ä½•çš„ä¸€ä¸ª(å¤–éƒ¨çš„ç±»å’Œæ–¹æ³•), åˆ›å»ºè¿™ä¸ªHttpServerçš„å¯¹è±¡çš„ã€‚ &#x3D;&#x3D;é‚£ä¹ˆæˆ‘ä»¬è·å–ä¸€ä¸ªå¯¹è±¡å‘¢ï¼Ÿå¯ä»¥ä½¿ç”¨ç±»æ–¹æ³•&#x3D;&#x3D; å•åˆ—æ¨¡å¼_ä»£ç å®ç°(éçº¿ç¨‹å®‰å…¨__å¹¶å­˜åœ¨BUG) ç¬¬ä¸€æ¬¡ï¼šè°ƒç”¨getInstance()æ—¶å€™ï¼Œä¼šåˆå§‹åŒ–ç§æœ‰çš„ç±»å±æ€§(instance)ã€‚ ç¬¬äºŒæ¬¡ï¼šè°ƒç”¨getInstance()æ—¶å€™ï¼Œä½ è·å¾—å°±æ˜¯ä¹‹å‰åˆå§‹è¯çš„HttpServerçš„å¯¹è±¡(instance)ã€‚ ä¸ç®¡æˆ‘ä»¬åœ¨æˆ‘ä»¬çš„ç¨‹åºä¸­(é¡¹ç›®)ï¼Œå“ªé‡Œè°ƒç”¨getInstance(),å…¶å®è·å¾—åŒæ ·çš„ä¸€ä¸ªå¯¹è±¡HttpServerçš„å¯¹è±¡(instance)ã€‚ 123456789101112131415161718192021222324252627282930313233/************************************************************************* &gt; File Name: singleton.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´10æœˆ17æ—¥ æ˜ŸæœŸä¸€ 10æ—¶48åˆ†08ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;class HttpServer &#123;public : // é™æ€çš„ ç±»æ–¹æ³• static HttpServer * getInstance() &#123; if(instance == nullptr) &#123; instance = new HttpServer(); &#125; return instance; &#125;private: static HttpServer *instance; HttpServer() &#123;&#125; // ç³»ç»Ÿå¸¦çš„ é»˜è®¤æ„é€ å‡½æ•° HttpServer(const HttpServer &amp;) = delete; // ç³»ç»Ÿå¸¦çš„ æ‹·è´æ„é€ å‡½æ•°&#125;;HttpServer * HttpServer::instance = nullptr;int main() &#123; HttpServer *t1 = HttpServer::getInstance(); HttpServer *t2 = HttpServer::getInstance(); cout &lt;&lt; t1 &lt;&lt; endl &lt;&lt; t2 &lt;&lt; endl; return 0;&#125; è¾“å‡ºç»“æœ120x7fffcc7d5eb00x7fffcc7d5eb0 ä¸Šè¿°ä»£ç -æ€è€ƒï¼Ÿæœ‰ä»€ä¹ˆé—®é¢˜ï¼ŸBUG_1è·å¾—äº†å¯¹è±¡çš„åœ°å€æ˜¯å¦å¯ä»¥è¿›è¡Œdelete? 1234567int main() &#123; HttpServer *t1 = HttpServer::getInstance(); delete t1; HttpServer *t2 = HttpServer::getInstance(); cout &lt;&lt; t1 &lt;&lt; endl &lt;&lt; t2 &lt;&lt; endl; return 0;&#125; å½“delete t1;æ—¶å€™æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å½“ä½ t2åœ¨è·å¾—çš„æ—¶å€™ï¼Œå“ªå°±æ˜¯ä¸€ä¸ªæ— ç”¨çš„å¯¹è±¡ ï¼Œå¦‚ä½ åœ¨ç”¨è¿™ä¸ªæ— ç”¨å¯¹è±¡å»è°ƒç”¨ä¸€äº›ç›¸å…³å±æ€§å’Œæ–¹æ³•æ—¶å€™å°±é”™äº†ï¼Œä½†æ˜¯t2ä¹Ÿä¼šè·å¾—æˆ‘ä»¬deleteçš„é‚£ä¸ªåœ°å€ã€‚ æˆ‘ä»¬å‘ç°é€šè¿‡æ·»åŠ deleteçš„ä»£ç æ˜¯å¯ä»¥æ­£ç¡®çš„é€šè¿‡ç¼–è¯‘çš„ï¼Œä½†æ˜¯è¿™ä¸ªä»£ç å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Œæˆ‘ä»¬è¦æ˜¯æ”¾åˆ°å®é™…çš„å·¥ç¨‹ä¸­å°±ä¼šå‘ç”Ÿ&#x3D;&#x3D;å¤§BUG&#x3D;&#x3D; è§£å†³æ–¹æ³• æŠŠææ„å‡½æ•°è®¾ç½®æˆç§æœ‰æˆå‘˜å‡½æ•° 123456789101112131415class HttpServer &#123;public : // é™æ€çš„ ç±»æ–¹æ³• static HttpServer * getInstance() &#123; if(instance == nullptr) &#123; instance = new HttpServer(); &#125; return instance; &#125;private: static HttpServer *instance; HttpServer() &#123;&#125; // ç³»ç»Ÿå¸¦çš„ é»˜è®¤æ„é€ å‡½æ•° HttpServer(const HttpServer &amp;) = delete; // ç³»ç»Ÿå¸¦çš„ æ‹·è´æ„é€ å‡½æ•° ~HttpServer() &#123;&#125;&#125;; è®¾ç½®æˆç§æœ‰çš„ææ„å‡½æ•°ï¼Œæˆ‘ä»¬ä¼šå‘ç°ä»»ä½•ä¸€ç§åœ¨å¤–éƒ¨è¯•å›¾è¿›è¡Œdeleteçš„è¡Œä¸ºéƒ½é€šè¿‡ä¸äº†ç¼–è¯‘ï¼Œè¿™ä¸ªå°±æˆ‘ä»¬ä¸€ç›´åœ¨è¯´çš„&#x3D;&#x3D;æŠŠç¨‹åºçš„BUGæš´éœ²åœ¨ç¼–è¯‘æœŸ&#x3D;&#x3D; ä¸Šè¿°ä»£ç -æ€è€ƒï¼Ÿæœ‰ä»€ä¹ˆé—®é¢˜ï¼ŸBUG_2åœ¨getInstance()é‡Œé¢æˆ‘ä»¬ç›´æ¥è¿”å›ç±»å±æ€§çš„å€¼ï¼Œåœ¨è¿”å›ç±»å±æ€§çš„å€¼çš„å‰è¿˜åˆ¤æ–­äº†ä¸€ä¸‹è¿™ä¸ªç±»å±æ€§å€¼(instance)æ˜¯å¦ä¸ºç©ºæˆ‘ä»¬å°±å»newä¸€ä¸‹ï¼Œçœ‹ä¼¼è¿™ä¸ªé€»è¾‘å¥½åƒæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ç»†æƒ³ä¸€ä¸‹ï¼Œè¿™ä¸ªä»£ç ä»€ä¹ˆæƒ…å†µä¸‹æ²¡æœ‰é—®é¢˜ï¼Œå•çº¿ç¨‹æƒ…å†µä¸‹æ²¡æœ‰é—®é¢˜ï¼Œå¦‚æœè¦æ˜¯æ”¾åˆ°å¤šçº¿ç¨‹æƒ…å†µä¸‹å‘¢ï¼Ÿã€‚å¦‚æœè¿™ä¸ªä»£ç åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹ï¼Œä½ èƒ½ä¿è¯å®ƒæ²¡æœ‰é—®é¢˜ï¼Ÿå¦‚æœä¸¤ä¸ªçº¿ç¨‹éƒ½è·‘åˆ°$if(instance &#x3D;&#x3D; nullptr)$ä¹‹åä¸¤ä¸ªçº¿ç¨‹éƒ½åˆ°$instance &#x3D; new HttpServer();$æ¥å¯¹å®ƒè¿›è¡Œèµ‹å€¼ã€‚ æˆ‘ä»¬åœ¨å¤šçº¿ç¨‹æƒ…å†µä¸‹,å°±å¯èƒ½åˆå§‹åŒ–ä¸¤ä¸ªå¯¹è±¡,æœ€ä¸­instanceåªæŒ‡å‘äº†ä¸€ä¸ªå¯¹è±¡ï¼Œå¦å¤–ä¸€ä¸ªå¯¹è±¡å†…å­˜æ³„æ¼äº†ã€‚&#x3D;&#x3D;å°±éœ€è¦è€ƒè™‘åˆ°å¤šçº¿ç¨‹çš„åŠ é”&#x3D;&#x3D; å¤šçº¿ç¨‹è§£å†³æ–¹æ³• ä¸€ æ‡’æ±‰å¼æ‡’æ±‰å¼: ç›´åˆ°ç¬¬ä¸€æ¬¡ç”¨åˆ°ç±»çš„å®ä¾‹æ—¶æ‰å»å®ä¾‹æ—¶æ‰å»å®ä¾‹åŒ–ï¼Œä¸‹é¢æ˜¯èµ–æ±‰å®ç° åŠ é” 123456789101112131415161718192021222324252627282930313233343536373839/************************************************************************* &gt; File Name: singleton.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´10æœˆ17æ—¥ æ˜ŸæœŸä¸€ 10æ—¶48åˆ†08ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;mutex&gt;using namespace std;class HttpServer &#123;public : // é™æ€çš„ ç±»æ–¹æ³• static HttpServer * getInstance() &#123; unique_lock&lt;mutex&gt; lock(m_mutex); if(instance == nullptr) &#123; instance = new HttpServer(); &#125; // è¿™é‡Œå¯ä»¥ä¸ç”¨unlockï¼Œå¯ä»¥é€šè¿‡unique_lockçš„ææ„å‡½æ•°unlock return instance; &#125;private: static mutex m_mutex; static HttpServer *instance; HttpServer() &#123;&#125; // ç³»ç»Ÿå¸¦çš„ é»˜è®¤æ„é€ å‡½æ•° HttpServer(const HttpServer &amp;) = delete; // ç³»ç»Ÿå¸¦çš„ æ‹·è´æ„é€ å‡½æ•° ~HttpServer() &#123;&#125;&#125;;HttpServer * HttpServer::instance = nullptr;mutex HttpServer::m_mutex;int main() &#123; HttpServer *t1 = HttpServer::getInstance(); HttpServer *t2 = HttpServer::getInstance(); cout &lt;&lt; t1 &lt;&lt; endl &lt;&lt; t2 &lt;&lt; endl; return 0;&#125; è¿›ä¸€æ­¥ä¼˜åŒ–ä¸Šè¿°ä»£ç  é—®é¢˜ï¼š åŠ é”ä¹‹åæ¯æ¬¡è°ƒç”¨$getInstance()$éƒ½ä¼šåŠ é”ï¼Œè¿™ç§æƒ…å†µå°±ä¼šå½±å“æˆ‘ä»¬å•ä¾‹æ¨¡å¼åœ¨å¤šçº¿ç¨‹ä¸­çš„æ‰§è¡Œæ•ˆç‡ åŒé‡éªŒè¯ 1234567891011121314151617181920212223242526272829303132333435363738394041/************************************************************************* &gt; File Name: singleton.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´10æœˆ17æ—¥ æ˜ŸæœŸä¸€ 10æ—¶48åˆ†08ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;mutex&gt;using namespace std;class HttpServer &#123;public : // é™æ€çš„ ç±»æ–¹æ³• static HttpServer * getInstance() &#123; // åŒé‡éªŒè¯ if(instance == nullptr) &#123; unique_lock&lt;mutex&gt; lock(m_mutex); if(instance == nullptr) &#123; instance = new HttpServer(); &#125; &#125; return instance; &#125;private: static mutex m_mutex; static HttpServer *instance; HttpServer() &#123;&#125; // ç³»ç»Ÿå¸¦çš„ é»˜è®¤æ„é€ å‡½æ•° HttpServer(const HttpServer &amp;) = delete; // ç³»ç»Ÿå¸¦çš„ æ‹·è´æ„é€ å‡½æ•° ~HttpServer() &#123;&#125;&#125;;HttpServer * HttpServer::instance = new HttpServer();mutex HttpServer::m_mutex;int main() &#123; HttpServer *t1 = HttpServer::getInstance(); HttpServer *t2 = HttpServer::getInstance(); cout &lt;&lt; t1 &lt;&lt; endl &lt;&lt; t2 &lt;&lt; endl; return 0;&#125; æ€è€ƒï¼Ÿ ä¸ºä»€ä¹ˆè¦$getInstance()$ä¸­ä¸¤æ¬¡åˆ¤ç©ºinstanceï¼Œå¤–å±‚å·²ç»éªŒè¯åˆ¤ç©ºäº†ï¼Œå†…å±‚æ˜¯å¦å¯ä»¥å»æ‰ï¼Ÿ ç­”æ¡ˆï¼šä¸èƒ½ï¼Œä¸¤ä¸ªåˆ¤ç©ºéƒ½ä¸èƒ½ç¼ºå°‘ï¼Œè¦ä¸å°±ä¼šå‡ºç°BUG å¤šçº¿ç¨‹è§£å†³æ–¹æ³• äºŒ é¥¿æ±‰å¼é¥¿æ±‰æ¨¡å¼ï¼šç±»å®šä¹‰çš„æ—¶å€™åˆå§‹åŒ–ä¸‹é¢æ˜¯é¥¿æ±‰å®ç° ç›´æ¥åœ¨å±æ€§åˆå§‹åŒ–çš„åœ°æ–¹$new HttpServer();$ 12345678910111213141516171819202122232425262728293031323334/************************************************************************* &gt; File Name: singleton.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´10æœˆ17æ—¥ æ˜ŸæœŸä¸€ 10æ—¶48åˆ†08ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;mutex&gt;using namespace std;class HttpServer &#123;public : // é™æ€çš„ ç±»æ–¹æ³• static HttpServer * getInstance() &#123; return instance; &#125;private: static mutex m_mutex; static HttpServer *instance; HttpServer() &#123;&#125; // ç³»ç»Ÿå¸¦çš„ é»˜è®¤æ„é€ å‡½æ•° HttpServer(const HttpServer &amp;) = delete; // ç³»ç»Ÿå¸¦çš„ æ‹·è´æ„é€ å‡½æ•° ~HttpServer() &#123;&#125;&#125;;HttpServer * HttpServer::instance = new HttpServer();mutex HttpServer::m_mutex;int main() &#123; HttpServer *t1 = HttpServer::getInstance(); HttpServer *t2 = HttpServer::getInstance(); cout &lt;&lt; t1 &lt;&lt; endl &lt;&lt; t2 &lt;&lt; endl; return 0;&#125;","categories":[{"name":"åº·å¤è®­ç»ƒ","slug":"åº·å¤è®­ç»ƒ","permalink":"https://tutouwang.vercel.app/categories/%E5%BA%B7%E5%A4%8D%E8%AE%AD%E7%BB%83/"}],"tags":[]},{"title":"è¿›ç¨‹é—´é€šä¿¡IPC","slug":"åº·å¤è®­ç»ƒ/è¿›ç¨‹é—´é€šä¿¡IPC","date":"2022-10-05T06:10:31.000Z","updated":"2022-10-13T07:14:59.249Z","comments":true,"path":"2022/10/05/åº·å¤è®­ç»ƒ/è¿›ç¨‹é—´é€šä¿¡IPC/","link":"","permalink":"https://tutouwang.vercel.app/2022/10/05/%E5%BA%B7%E5%A4%8D%E8%AE%AD%E7%BB%83/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1IPC/","excerpt":"","text":"å…±äº«å†…å­˜å…±äº«å†…å­˜å…è®¸ä¸¤ä¸ªæˆ–è€…å¤šä¸ªè¿›ç¨‹å…±äº«ç‰©ç†å†…å­˜çš„åŒä¸€å—åŒºåŸŸï¼ˆé€šå¸¸è¢«ç§°ä¸ºæ®µï¼‰ã€‚ç”±äº ä¸€ä¸ªå…±äº«å†…å­˜æ®µä¼šæˆä¸ºä¸€ä¸ªè¿›ç¨‹ç”¨æˆ·ç©ºé—´çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤è¿™ç§ IPC æœºåˆ¶æ— éœ€å†…æ ¸ä»‹ å…¥ã€‚æ‰€æœ‰éœ€è¦åšçš„å°±æ˜¯è®©ä¸€ä¸ªè¿›ç¨‹å°†æ•°æ®å¤åˆ¶è¿›å…±äº«å†…å­˜ä¸­ï¼Œå¹¶ä¸”è¿™éƒ¨åˆ†æ•°æ®ä¼šå¯¹å…¶ ä»–æ‰€æœ‰å…±äº«åŒä¸€ä¸ªæ®µçš„è¿›ç¨‹å¯ç”¨ã€‚ ä¸ç®¡é“ç­‰è¦æ±‚å‘é€è¿›ç¨‹å°†æ•°æ®ä»ç”¨æˆ·ç©ºé—´çš„ç¼“å†²åŒºå¤åˆ¶è¿›å†…æ ¸å†…å­˜å’Œæ¥æ”¶è¿›ç¨‹å°†æ•°æ® ä»å†…æ ¸å†…å­˜å¤åˆ¶è¿›ç”¨æˆ·ç©ºé—´çš„ç¼“å†²åŒºçš„åšæ³•ç›¸æ¯”ï¼Œè¿™ç§ IPC æŠ€æœ¯çš„é€Ÿåº¦æ›´å¿« 123Linux_Ubuntu(wsl)è¾“å…¥:man shmshmat shmdt shmop shm_overviewshmctl shmget shm_open shm_unlink å…±äº«å†…å­˜ä½¿ç”¨æ­¥éª¤ è°ƒç”¨ shmget() åˆ›å»ºä¸€ä¸ªæ–°å…±äº«å†…å­˜æ®µæˆ–å–å¾—ä¸€ä¸ªæ—¢æœ‰å…±äº«å†…å­˜æ®µçš„æ ‡è¯†ç¬¦ï¼ˆå³ç”±å…¶ ä»–è¿›ç¨‹åˆ›å»ºçš„å…±äº«å†…å­˜æ®µï¼‰ã€‚è¿™ä¸ªè°ƒç”¨å°†è¿”å›åç»­è°ƒç”¨ä¸­éœ€è¦ç”¨åˆ°çš„å…±äº«å†…å­˜æ ‡è¯†ç¬¦ã€‚ ä½¿ç”¨ shmat() æ¥é™„ä¸Šå…±äº«å†…å­˜æ®µï¼Œå³ä½¿è¯¥æ®µæˆä¸ºè°ƒç”¨è¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜çš„ä¸€éƒ¨åˆ†ã€‚æ­¤åˆ»åœ¨ç¨‹åºä¸­å¯ä»¥åƒå¯¹å¾…å…¶ä»–å¯ç”¨å†…å­˜é‚£æ ·å¯¹å¾…è¿™ä¸ªå…±äº«å†…å­˜æ®µã€‚ä¸ºå¼•ç”¨è¿™å—å…±äº«å†…å­˜ï¼Œ ç¨‹åºéœ€è¦ä½¿ç”¨ç”±shmat() è°ƒç”¨è¿”å›çš„ addr å€¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ ä¸­è¯¥å…±äº«å†…å­˜æ®µçš„èµ·ç‚¹çš„æŒ‡é’ˆã€‚ è°ƒç”¨ shmdt() æ¥åˆ†ç¦»å…±äº«å†…å­˜æ®µã€‚åœ¨è¿™ä¸ªè°ƒç”¨ä¹‹åï¼Œè¿›ç¨‹å°±æ— æ³•å†å¼•ç”¨è¿™å—å…±äº«å†…å­˜ äº†ã€‚è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ï¼Œå¹¶ä¸”åœ¨è¿›ç¨‹ç»ˆæ­¢æ—¶ä¼šè‡ªåŠ¨å®Œæˆè¿™ä¸€æ­¥ã€‚ è°ƒç”¨ shmctl() æ¥åˆ é™¤å…±äº«å†…å­˜æ®µã€‚åªæœ‰å½“å½“å‰æ‰€æœ‰é™„åŠ å†…å­˜æ®µçš„è¿›ç¨‹éƒ½ä¸ä¹‹åˆ†ç¦»ä¹‹åå†…å­˜æ®µæ‰ä¼šé”€æ¯ã€‚åªæœ‰ä¸€ä¸ªè¿›ç¨‹éœ€è¦æ‰§è¡Œè¿™ä¸€æ­¥ åˆ›å»ºå…±äº«å†…å­˜_å‡½æ•°APIç®€ä»‹shmget åˆ›å»ºå…±äº«å†…å­˜ 123456789101112131415161718#include &lt;sys/ipc.h&gt;#include &lt;sys/shm.h&gt;// åŠŸèƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å…±äº«å†…å­˜æ®µã€æˆ–è€…è·å–ä¸€ä¸ªæ—¢æœ‰çš„å…±äº«å†…å­˜æ®µçš„æ ‡è¯†, æ–°åˆ›å»ºçš„å†…å­˜æ®µä¸­çš„æ•°æ®éƒ½ä¼šè¢«åˆå§‹åŒ–ä¸º0 int shmget(key_t key, size_t size, int shmflg); - key: æ˜¯æ ‡è¯†å…±äº«å†…å­˜çš„é”®å€¼ï¼Œå¯ä»¥å–éè´Ÿæ•´æ•°æˆ–IPC_PRIVATE - key_t ç±»å‹æ˜¯ä¸€ä¸ªæ•´å½¢,é€šè¿‡è¿™ä¸ªæ‰¾åˆ°æˆ–è€…åˆ›å»ºä¸€ä¸ªå…±äº«å†…å­˜, ä¸€èˆ¬ä½¿ç”¨16è¿›åˆ¶è¡¨ç¤º,é0å€¼ - å½“keyæ˜¯IPC_PRIVATEæ—¶ï¼Œshmflgä¸éœ€è¦IPC_CREATã€‚ - å½“keyæ˜¯éè´Ÿæ•´æ•°æ—¶ï¼Œshmflgéœ€è¦IPC_CREATã€‚ - size: æ˜¯å…±äº«å†…å­˜çš„å¤§å°ï¼Œä»¥å­—èŠ‚ä¸ºå•ä½ã€‚ - shmflg : æ˜¯æƒé™æ ‡å¿—ï¼Œä¸æ–‡ä»¶çš„è¯»å†™æƒé™ä¸€æ ·ã€‚ - é™„åŠ å±æ€§: åˆ›å»º/åˆ¤æ–­å…±äº«å†…å­˜æ˜¯ä¸æ˜¯å­˜åœ¨ - åˆ›å»º: IPC_CREAT - åˆ¤æ–­å…±äº«å†…å­˜æ˜¯å¦å­˜åœ¨: IPC_EXCL, éœ€è¦å’ŒIPC_CREATä¸€èµ·ä½¿ç”¨ IPC_CREAT | IPC_EXCL | 0664 - è¿”å›å€¼ : - æˆåŠŸ: è¿”å› &gt;0 å…±äº«å†…å­˜çš„å¼•ç”¨çš„ID,åé¢æ“ä½œå…±äº«å†…å­˜éƒ½æ˜¯é€šè¿‡è¿™ä¸ªå€¼ - å¤±è´¥: è¿”å› -1 å¹¶è®¾ç½®é”™è¯¯ shmat æ˜ å°„å…±äº«å†…å­˜ 1234567891011121314void *shmat(int shmid, const void *shmaddr, int shmflg); - åŠŸèƒ½: å’Œå½“å‰çš„è¿›ç¨‹è¿›è¡Œå…³è”ï¼ˆé™„åŠ åˆ° shmaddr æŒ‡å®š shmidä¸Šï¼‰ - å‚æ•°: - shmid: å…±äº«å†…å­˜çš„æ ‡è¯†(ID)ç”±shmgetè¿”å›å€¼è·å– - shmaddr: ä¸ºNULL: ç”³è¯·çš„å…±äº«å†…å­˜çš„èµ·å§‹åœ°å€,æŒ‡å®šNULL, å†…æ ¸æŒ‡å®š(ç³»ç»Ÿå°†é€‰æ‹©åˆé€‚çš„é¡µé¢å¯¹é½åœ°å€ä»¥é™„åŠ æ®µã€‚) ä¸ä¸ºNULL : å¦‚æœshmaddrä¸ä¸ºNULLï¼Œå¹¶ä¸”åœ¨SHM_RNDä¸­æŒ‡å®šäº†SHM_RNDflgï¼Œé™„åŠ å€¼åœ¨æœ€è¿‘çš„shmaddrçš„åœ°å€ä¸Šã€‚ ä¸¤è€…éƒ½ä¸æ˜¯çš„æƒ…å†µ: å¦åˆ™ï¼Œshmaddrå¿…é¡»æ˜¯ä½äºçš„é¡µé¢å¯¹é½åœ°å€(4K)å‘ç”Ÿè¿æ¥çš„ä½ç½®ã€‚ - shmflg: å¯¹å…±äº«å†…å­˜çš„æ“ä½œ - è¯» : SHM_RDONLY, å¿…é¡»æœ‰è¯»æƒé™ - è¯»å†™ : 0 - è¿”å›å€¼: æˆåŠŸ: è¿”å›å…±äº«å†…å­˜çš„é¦–åœ°å€(èµ·å§‹)åœ°å€ã€‚ å¤±è´¥: (void *) -1 shmdt åˆ†ç¦»å…±äº«å†…å­˜ æœ¬å‡½æ•°è°ƒç”¨å¹¶ä¸åˆ é™¤æ‰€æŒ‡å®šçš„å…±äº«å†…å­˜åŒºï¼Œè€Œåªæ˜¯å°†å…ˆå‰ç”¨shmatå‡½æ•°è¿æ¥ï¼ˆattachï¼‰å¥½çš„å…±äº«å†… å­˜è„±ç¦»ï¼ˆdetachï¼‰ç›®å‰çš„è¿›ç¨‹ 1234567int shmdt(const void *shmaddr); - åŠŸèƒ½: è§£é™¤å½“å‰è¿›ç¨‹å’Œå…±äº«å†…å­˜çš„å…³è” - å‚æ•°: shmaddr: å…±äº«å†…å­˜çš„é¦–åœ°å€ - è¿”å›å€¼: æˆåŠŸ: 0 å¤±è´¥: -1 shmctl æ§åˆ¶å…±äº«å†…å­˜ 1234567891011121314151617181920212223int shmctl(int shmid, int cmd, struct shmid_ds *buf); - åŠŸèƒ½: å¯¹å…±äº«å†…å­˜è¿›è¡Œæ“ä½œã€‚åˆ é™¤å…±äº«å†…å­˜, å…±äº«å†…å­˜è¦åˆ é™¤æ‰ä¼šæ¶ˆå¤±, åˆ›å»ºå…±äº«å†…å­˜çš„è¿›è¡Œè¢«é”€æ¯äº†å¯¹å…±äº«å†…å­˜æ˜¯æ²¡æœ‰ä»»ä½•å½±å“ - å‚æ•°: - shmid: å…±äº«å†…å­˜çš„ID - cmd: è¦åšçš„æ“ä½œ - IPC_STAT:è·å¾—å…±äº«å†…å­˜çš„å½“å‰çŠ¶æ€ - IPC_SET: è®¾ç½®å…±äº«å†…å­˜çš„çŠ¶æ€ - IPC_RMID: æ ‡è®°å…±äº«å†…å­˜è¢«é”€æ¯ - buf: éœ€è¦è®¾ç½®æˆ–è€…è·å–çš„å…±äº«å†…å­˜å±æ€§ä¿¡æ¯ - IPC_STAT:bufå­˜å‚¨æ•°æ® - IPC_SET: bufä¸­éœ€è¦åˆå§‹åŒ–æ•°æ®,è®¾ç½®åˆ°å†…æ ¸ä¸­ - IPC_RMID: æ²¡æœ‰ç”¨,NULL struct shmid_ds &#123; struct ipc_perm shm_perm; /* Ownership and permissions */ size_t shm_segsz; /* Size of segment (bytes) */ time_t shm_atime; /* Last attach time */ time_t shm_dtime; /* Last detach time */ time_t shm_ctime; /* Last change time */ pid_t shm_cpid; /* PID of creator */ pid_t shm_lpid; /* PID of last shmat(2)/shmdt(2) */ shmatt_t shm_nattch; /* No. of current attaches */ ... &#125;; 12345678key_t ftok(const char *pathname, int proj_id); - åŠŸèƒ½: æ ¹æ®æŒ‡å®šçš„è·¯, å’Œintå€¼,ç”Ÿæˆä¸€ä¸ªå…±äº«å†…å­˜çš„key - å‚æ•°: - pathname: æŒ‡å®šä¸€ä¸ªå­˜åœ¨çš„è·¯å¾„ /home/qz/test/ / - proj_id: intç±»å‹çš„å€¼,ä½†æ˜¯è¿™å…³ç³»è°ƒç”¨åªä¼šä½¿ç”¨å…¶ä¸­çš„1ä¸ªå­—ç¬¦ èŒƒå›´: 0 - 255 ä¸€èˆ¬æŒ‡å®šä¸€ä¸ªå­—ç¬¦ &#x27;a&#x27; ä»£ç å®ç°_å­˜åœ¨bug éœ€æ‰‹åŠ¨å…³é—­å†…å­˜å…±äº«ã€éœ€è¦åŠ é” å®ç°åŠŸèƒ½ æ±‚ 1 - 100 ç´¯åŠ  12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182/************************************************************************* &gt; File Name: shm.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´10æœˆ05æ—¥ æ˜ŸæœŸä¸‰ 19æ—¶43åˆ†18ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/shm.h&gt;#include &lt;sys/ipc.h&gt;#include &lt;sys/wait.h&gt;#define INS 5struct Num &#123; int now; int sum;&#125;;struct Num *share_memory;void do_add(int x) &#123; while(1) &#123; if(share_memory-&gt;now &gt; 100) break; share_memory-&gt;sum += share_memory-&gt;now; share_memory-&gt;now++; printf(&quot;&lt;%d&gt; now = %d, sum = %d \\n&quot;, x, share_memory-&gt;now, share_memory-&gt;sum); &#125; return ;&#125;int main() &#123; pid_t pid; int x = 0; int shmid; key_t key = ftok(&quot;.&quot;, 2022); shmid = shmget(key, sizeof(struct Num), IPC_CREAT | IPC_EXCL | 0664); if(shmid &lt; 0) &#123; perror(&quot;shmget&quot;); exit(1); &#125; printf(&quot;shmid = %d\\n&quot;, shmid); share_memory = (struct Num *)shmat(shmid, NULL, 0); if(share_memory &lt; 0) &#123; perror(&quot;shmat&quot;); exit(1); &#125; share_memory-&gt;now = 0; share_memory-&gt;sum = 0; for(int i = 1; i &lt;= INS; i++) &#123; if((pid = fork()) &lt; 0) &#123; perror(&quot;fork&quot;); exit(1); &#125; x = i; if(pid == 0) break; &#125; if(pid == 0) &#123; do_add(x); &#125; else &#123; for(int i = 1; i &lt;= INS; i++) &#123; wait(NULL); &#125; &#125; printf(&quot;share_memory-&gt;sum = %d\\n&quot;, share_memory-&gt;sum); return 0;&#125; å…±äº«å†…å­˜æ“ä½œå‘½ä»¤å¤šè¿›ç¨‹é—´é€šä¿¡å¸¸ç”¨çš„æŠ€æœ¯æ‰‹æ®µåŒ…æ‹¬å…±äº«å†…å­˜ã€æ¶ˆæ¯é˜Ÿåˆ—ã€ä¿¡å·é‡ç­‰ç­‰ã€‚ipcs å‘½ä»¤çš„ç”¨é€”ä¸»è¦ç”¨äºæŠ¥å‘Šè¿›ç¨‹é—´é€šä¿¡è®¾æ–½çŠ¶æ€ã€‚ shmget: File exists &#x2F;&#x2F; æç¤ºè¿™ä¸ªè¡¨ç¤ºå…±äº«å†…å­˜å·²ç»å­˜åœ¨ ä½†æ˜¯ä½ å‘ç° ipcs æŸ¥çœ‹ä¸åˆ° é‚£æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ ææƒ-sudo sudo ipcs &#x2F;&#x2F; å†çœ‹åº”è¯¥å°±ä¼šæœ‰äº† 1ipcrn -m msqid &#x2F;&#x2F;å°±å¯ä»¥å…³é—­å…±äº«å†…å­˜ ç”¨æ³• æè¿° ipcs æŸ¥çœ‹å¸®åŠ©ï¼š ipcs -help pipcs -a &#x2F;&#x2F; æ‰“å°å½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰çš„è¿›ç¨‹é—´é€šä¿¡æ–¹å¼çš„ä¿¡æ¯ pipcs -m &#x2F;&#x2F; æ‰“å°å‡ºä½¿ç”¨å…±äº«å†…å­˜è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡çš„ä¿¡æ¯ pipcs -q &#x2F;&#x2F; æ‰“å°å‡ºä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡çš„ä¿¡æ¯ pipcs -s &#x2F;&#x2F; æ‰“å°å‡ºä½¿ç”¨ä¿¡å·è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡çš„ä¿¡æ¯ ipcrm æŸ¥çœ‹å¸®åŠ©ï¼š ipcrm-help pipcrm -M shmkey &#x2F;&#x2F; ç§»é™¤ç”¨shmkeyåˆ›å»ºçš„å…±äº«å†…å­˜æ®µ pipcrm -m shmid &#x2F;&#x2F; ç§»é™¤ç”¨shmidæ ‡è¯†çš„å…±äº«å†…å­˜æ®µ pipcrm -Q msgkey &#x2F;&#x2F; ç§»é™¤ç”¨msqkeyåˆ›å»ºçš„æ¶ˆæ¯é˜Ÿåˆ— pipcrm -q msqid &#x2F;&#x2F; ç§»é™¤ç”¨msqidæ ‡è¯†çš„æ¶ˆæ¯é˜Ÿåˆ— pipcrm -S semkey &#x2F;&#x2F; ç§»é™¤ç”¨semkeyåˆ›å»ºçš„ä¿¡å· pipcrm -s semid &#x2F;&#x2F; ç§»é™¤ç”¨semidæ ‡è¯†çš„ä¿¡å· ä»£ç å®ç°_äº’æ–¥é”å®ç°äº† äº’æ–¥é” å…±äº«å†…å­˜ ftok()ã€shmget()ã€shmat()ã€shmdt()ã€shactl(). è¿›ç¨‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105/************************************************************************* &gt; File Name: shm.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´10æœˆ05æ—¥ æ˜ŸæœŸä¸‰ 19æ—¶43åˆ†18ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/shm.h&gt;#include &lt;sys/ipc.h&gt;#include &lt;sys/wait.h&gt;#include &lt;pthread.h&gt;#define INS 5struct Num &#123; int now; int sum; pthread_mutex_t mutex;&#125;;struct Num *share_memory;void do_add(int x) &#123; while(1) &#123; // åŠ é” pthread_mutex_lock(&amp;share_memory-&gt;mutex); if(share_memory-&gt;now &gt; 100) &#123; // shmdt(share_memory); pthread_mutex_unlock(&amp;share_memory-&gt;mutex); break; &#125; share_memory-&gt;sum += share_memory-&gt;now; share_memory-&gt;now++; printf(&quot;&lt;%d&gt; now = %d, sum = %d \\n&quot;, x, share_memory-&gt;now, share_memory-&gt;sum); fflush(stdout); pthread_mutex_unlock(&amp;share_memory-&gt;mutex); &#125; // è®©å­è¿›ç¨‹ç›´æ¥é€€å‡ºï¼Œè®©çˆ¶è¿›ç¨‹è¾“å‡º exit(0);&#125;int main() &#123; pid_t pid; int x = 0; int shmid; // æ ¹æ®æŒ‡å®šçš„è·¯, å’Œintå€¼,ç”Ÿæˆä¸€ä¸ªå…±äº«å†…å­˜çš„key key_t key = ftok(&quot;.&quot;, 2022); // è·å–ä¸€ä¸ªå…±äº«å†…å­˜ shmid = shmget(key, sizeof(struct Num), IPC_CREAT | IPC_EXCL | 0664); if(shmid &lt; 0) &#123; perror(&quot;shmget&quot;); exit(1); &#125; printf(&quot;shmid = %d\\n&quot;, shmid); // å’Œå½“å‰è¿›ç¨‹è¿›è¡Œå…³è” share_memory = (struct Num *)shmat(shmid, NULL, 0); if(share_memory &lt; 0) &#123; perror(&quot;shmat&quot;); exit(1); &#125; share_memory-&gt;now = 0; share_memory-&gt;sum = 0; // æ­£å¸¸æ˜¯çº¿ç¨‹åŠ é”ä½†æ˜¯æˆ‘ä»¬æ˜¯è¿›ç¨‹å°±éœ€è¦è¿™ä¸ªmustexattr_tæ“ä½œä¸€ä¸‹ pthread_mutexattr_t attr; pthread_mutexattr_init(&amp;attr); pthread_mutexattr_setpshared(&amp;attr, 1); pthread_mutex_init(&amp;share_memory-&gt;mutex, &amp;attr); for(int i = 1; i &lt;= INS; i++) &#123; if((pid = fork()) &lt; 0) &#123; perror(&quot;fork&quot;); exit(1); &#125; x = i; if(pid == 0) break; &#125; if(pid == 0) &#123; do_add(x); &#125; else &#123; for(int i = 1; i &lt;= INS; i++) &#123; wait(NULL); &#125; &#125; printf(&quot;share_memory-&gt;sum = %d\\n&quot;, share_memory-&gt;sum); // è§£é™¤å…³è” shmdt(share_memory); // æ ‡è®°é”€æ¯ shmctl(shmid, IPC_RMID, NULL); return 0;&#125; ä»£ç å®ç°_æ¡ä»¶å˜é‡å®ç°äº† äº’æ–¥é” + æ¡ä»¶å˜é‡ + ä¿¡å· å…±äº«å†…å­˜ ftok()ã€shmget()ã€shmat()ã€shmdt()ã€shactl(). è¿›ç¨‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119/************************************************************************* &gt; File Name: shm.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´10æœˆ05æ—¥ æ˜ŸæœŸä¸‰ 19æ—¶43åˆ†18ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/shm.h&gt;#include &lt;sys/ipc.h&gt;#include &lt;sys/wait.h&gt;#include &lt;pthread.h&gt;#define INS 5struct Num &#123; int now; int sum; pthread_mutex_t mutex; pthread_cond_t cond;&#125;;struct Num *share_memory;void do_add(int x) &#123; while(1) &#123; // åŠ é” pthread_mutex_lock(&amp;share_memory-&gt;mutex); pthread_cond_wait(&amp;share_memory-&gt;cond, &amp;share_memory-&gt;mutex); int flag = 0; for(int i = 0; i &lt; 100; ++i) &#123; if(share_memory-&gt;now &gt; 100) &#123; // shmdt(share_memory); pthread_mutex_unlock(&amp;share_memory-&gt;mutex); pthread_cond_signal(&amp;share_memory-&gt;cond); exit(0); &#125; share_memory-&gt;sum += share_memory-&gt;now; share_memory-&gt;now++; printf(&quot;&lt;%d&gt; now = %d, sum = %d \\n&quot;, x, share_memory-&gt;now, share_memory-&gt;sum); fflush(stdout); &#125; // è§£é” pthread_mutex_unlock(&amp;share_memory-&gt;mutex); pthread_cond_signal(&amp;share_memory-&gt;cond); &#125; // è®©å­è¿›ç¨‹ç›´æ¥é€€å‡ºï¼Œè®©çˆ¶è¿›ç¨‹è¾“å‡º exit(0);&#125;int main() &#123; pid_t pid; int x = 0; int shmid; key_t key = ftok(&quot;.&quot;, 2022); shmid = shmget(key, sizeof(struct Num), IPC_CREAT | IPC_EXCL | 0664); if(shmid &lt; 0) &#123; perror(&quot;shmget&quot;); exit(1); &#125; printf(&quot;shmid = %d\\n&quot;, shmid); share_memory = (struct Num *)shmat(shmid, NULL, 0); if(share_memory &lt; 0) &#123; perror(&quot;shmat&quot;); exit(1); &#125; share_memory-&gt;now = 0; share_memory-&gt;sum = 0; // æ­£å¸¸æ˜¯çº¿ç¨‹åŠ é”ä½†æ˜¯æˆ‘ä»¬æ˜¯è¿›ç¨‹å°±éœ€è¦è¿™ä¸ªmustexattr_tæ“ä½œ ä¸€ä¸‹ pthread_mutexattr_t attr; pthread_mutexattr_init(&amp;attr); pthread_mutexattr_setpshared(&amp;attr, 1); pthread_mutex_init(&amp;share_memory-&gt;mutex, &amp;attr); // å…±äº«çš„äº’æ–¥é‡ pthread_condattr_t c_attr; pthread_condattr_init(&amp;c_attr); pthread_condattr_setpshared(&amp;c_attr, 1); pthread_cond_init(&amp;share_memory-&gt;cond, &amp;c_attr); for(int i = 1; i &lt;= INS; i++) &#123; if((pid = fork()) &lt; 0) &#123; perror(&quot;fork&quot;); exit(1); &#125; x = i; if(pid == 0) break; &#125; if(pid == 0) &#123; do_add(x); &#125; else &#123; pthread_cond_signal(&amp;share_memory-&gt;cond); for(int i = 1; i &lt;= INS; i++) &#123; wait(NULL); &#125; &#125; printf(&quot;share_memory-&gt;sum = %d\\n&quot;, share_memory-&gt;sum); // è§£é™¤å…³è” shmdt(share_memory); // æ ‡è®°é”€æ¯ shmctl(shmid, IPC_RMID, NULL); return 0;&#125; ä»£ç å®ç°_ç®€æ˜“è¿›ç¨‹é—´é€šä¿¡ äº’æ–¥é” + æ¡ä»¶å˜é‡ + ä¿¡å· å…±äº«å†…å­˜ head.h123456789101112131415161718192021/************************************************************************* &gt; File Name: head.h &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´10æœˆ09æ—¥ æ˜ŸæœŸæ—¥ 10æ—¶54åˆ†26ç§’ ************************************************************************/#ifndef _HEAD_H#define _HEAD_H#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;sys/ipc.h&gt;#include &lt;sys/shm.h&gt;#include &lt;unistd.h&gt;#include &lt;pthread.h&gt;#include &quot;chat.h&quot;#endif chat.h123456789101112131415161718/************************************************************************* &gt; File Name: chat.h &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´10æœˆ09æ—¥ æ˜ŸæœŸæ—¥ 10æ—¶38åˆ†59ç§’ ************************************************************************/#ifndef _CHAT_H#define _CHAT_H// å­˜å‚¨ä¸€äº›æè¿°çš„è¿‡ç¨‹struct Msg&#123; char name[20]; char msg[1024]; pthread_mutex_t mutex; pthread_cond_t cond;&#125;;#endif server.c123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/************************************************************************* &gt; File Name: server.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´10æœˆ09æ—¥ æ˜ŸæœŸæ—¥ 10æ—¶45åˆ†56ç§’ ************************************************************************/#include &quot;head.h&quot;struct Msg *shar_memory = NULL;int main() &#123; int shmid; key_t key = ftok(&quot;.&quot;, 2022); shmid = shmget(key, sizeof(struct Msg) ,IPC_CREAT | IPC_EXCL | 0664); if(shmid &lt; 0) &#123; perror(&quot;shmget&quot;); exit(1); &#125; shar_memory = (struct Msg *)shmat(shmid, NULL, 0); if(shar_memory &lt; 0) &#123; perror(&quot;shmat&quot;); exit(1); &#125; memset(shar_memory, 0, sizeof(struct Msg)); pthread_mutexattr_t m_attr; pthread_mutexattr_init(&amp;m_attr); pthread_mutexattr_setpshared(&amp;m_attr, PTHREAD_PROCESS_SHARED); pthread_mutex_init(&amp;shar_memory-&gt;mutex, &amp;m_attr); pthread_condattr_t c_attr; pthread_condattr_init(&amp;c_attr); pthread_condattr_setpshared(&amp;c_attr, PTHREAD_PROCESS_SHARED); pthread_cond_init(&amp;shar_memory-&gt;cond, &amp;c_attr); while(1) &#123; pthread_mutex_lock(&amp;shar_memory-&gt;mutex); printf(&quot;Server got the Mutex!\\n&quot;); pthread_cond_wait(&amp;shar_memory-&gt;cond, &amp;shar_memory-&gt;mutex); printf(&quot;Server got the cond signal!\\n&quot;); printf(&quot;&lt;%s&gt; : %s.\\n&quot;, shar_memory-&gt;name, shar_memory-&gt;msg); memset(shar_memory-&gt;msg, 0, sizeof(shar_memory-&gt;msg)); pthread_mutex_unlock(&amp;shar_memory-&gt;mutex); &#125; return 0;&#125; &#x3D;&#x3D;ç¼ºå°‘é‡Šæ”¾å…±äº«å†…å­˜ï¼Œè§£å†³åŠæ³•å¯ä»¥ä½¿ç”¨ä¿¡å·æ•æ‰(CTRL + C)ä¹‹åå†é‡Šæ”¾å…±äº«å†…å­˜&#x3D;&#x3D; client.c1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859/************************************************************************* &gt; File Name: client.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´10æœˆ13æ—¥ æ˜ŸæœŸå›› 10æ—¶09åˆ†01ç§’ ************************************************************************/#include &quot;head.h&quot;struct Msg *share_memory = NULL;int main(int argc, char **argv) &#123; int opt, shmid; char name[20] = &#123;0&#125;; while((opt = getopt(argc, argv, &quot;n:&quot;)) != -1) &#123; switch(opt) &#123; case &#x27;n&#x27; : strcpy(name, optarg); break; default : fprintf(stderr, &quot;Usage : %s -n name\\n&quot;, argv[0]); exit(1); &#125; &#125; key_t key = ftok(&quot;.&quot;, 2022); shmid = shmget(key, sizeof(struct Msg), IPC_CREAT | 0666); if(shmid &lt; 0) &#123; perror(&quot;shmget&quot;); exit(1); &#125; share_memory = shmat(shmid, NULL, 0); if(share_memory &lt; 0) &#123; perror(&quot;shmat&quot;); exit(1); &#125; while(1) &#123; char msg[1024] = &#123;0&#125;; scanf(&quot;%[^\\n]s&quot;, msg); getchar(); if(!strlen(msg)) continue; while(1) &#123; if(!strlen(share_memory-&gt;msg)) &#123; pthread_mutex_lock(&amp;share_memory-&gt;mutex); break; &#125; &#125; printf(&quot;Sending : %s... \\n&quot;, msg); strcpy(share_memory-&gt;msg, msg); strcpy(share_memory-&gt;name, name); pthread_cond_signal(&amp;share_memory-&gt;cond); pthread_mutex_unlock(&amp;share_memory-&gt;mutex); printf(&quot;Client signaled the cond\\n&quot;); &#125; return 0;&#125; 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859/************************************************************************* &gt; File Name: client.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´10æœˆ13æ—¥ æ˜ŸæœŸå›› 10æ—¶09åˆ†01ç§’ ************************************************************************/#include &quot;head.h&quot;struct Msg *share_memory = NULL;int main(int argc, char **argv) &#123; int opt, shmid; char name[20] = &#123;0&#125;; while((opt = getopt(argc, argv, &quot;n:&quot;)) != -1) &#123; switch(opt) &#123; case &#x27;n&#x27; : strcpy(name, optarg); break; default : fprintf(stderr, &quot;Usage : %s -n name\\n&quot;, argv[0]); exit(1); &#125; &#125; key_t key = ftok(&quot;.&quot;, 2022); shmid = shmget(key, sizeof(struct Msg), IPC_CREAT | 0666); if(shmid &lt; 0) &#123; perror(&quot;shmget&quot;); exit(1); &#125; share_memory = shmat(shmid, NULL, 0); if(share_memory &lt; 0) &#123; perror(&quot;shmat&quot;); exit(1); &#125; while(1) &#123; char msg[1024] = &#123;0&#125;; scanf(&quot;%[^\\n]s&quot;, msg); getchar(); if(!strlen(msg)) continue; while(1) &#123; if(!strlen(share_memory-&gt;msg)) &#123; pthread_mutex_lock(&amp;share_memory-&gt;mutex); break; &#125; &#125; printf(&quot;Sending : %s... \\n&quot;, msg); strcpy(share_memory-&gt;msg, msg); strcpy(share_memory-&gt;name, name); pthread_cond_signal(&amp;share_memory-&gt;cond); pthread_mutex_unlock(&amp;share_memory-&gt;mutex); printf(&quot;Client signaled the cond\\n&quot;); &#125; return 0;&#125;","categories":[{"name":"åº·å¤è®­ç»ƒ","slug":"åº·å¤è®­ç»ƒ","permalink":"https://tutouwang.vercel.app/categories/%E5%BA%B7%E5%A4%8D%E8%AE%AD%E7%BB%83/"}],"tags":[]},{"title":"å¤šè¿›ç¨‹","slug":"åº·å¤è®­ç»ƒ/å¤šè¿›ç¨‹","date":"2022-10-02T14:10:56.000Z","updated":"2022-10-02T14:13:59.850Z","comments":true,"path":"2022/10/02/åº·å¤è®­ç»ƒ/å¤šè¿›ç¨‹/","link":"","permalink":"https://tutouwang.vercel.app/2022/10/02/%E5%BA%B7%E5%A4%8D%E8%AE%AD%E7%BB%83/%E5%A4%9A%E8%BF%9B%E7%A8%8B/","excerpt":"","text":"ä»€ä¹ˆæ˜¯è¿›ç¨‹è¿›ç¨‹æ˜¯ç¨‹åºåœ¨è¿›ç¨‹ä¸­çš„é•œåƒ ç¨‹åºæ”¾åˆ°è¿›ç¨‹ä¸­ä»–å°±å˜æˆäº†è¿›ç¨‹ è¿›ç¨‹æ˜¯ç¨‹åºæ­£åœ¨è¿è¡Œä¸­çš„ç¨‹åº","categories":[],"tags":[]},{"title":"IOæ¨¡å‹ï¼ˆé˜»å¡ï¼Œéé˜»å¡ï¼Œå¤šè·¯å¤ç”¨ï¼‰","slug":"åº·å¤è®­ç»ƒ/IOæ¨¡å‹_é˜»å¡_éé˜»å¡_å¤šè·¯å¤ç”¨","date":"2022-10-01T07:41:34.000Z","updated":"2022-10-02T11:58:12.713Z","comments":true,"path":"2022/10/01/åº·å¤è®­ç»ƒ/IOæ¨¡å‹_é˜»å¡_éé˜»å¡_å¤šè·¯å¤ç”¨/","link":"","permalink":"https://tutouwang.vercel.app/2022/10/01/%E5%BA%B7%E5%A4%8D%E8%AE%AD%E7%BB%83/IO%E6%A8%A1%E5%9E%8B_%E9%98%BB%E5%A1%9E_%E9%9D%9E%E9%98%BB%E5%A1%9E_%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/","excerpt":"","text":"åœ¨äº†è§£IOæ¨¡å‹å‰ï¼Œå…ˆäº†è§£ä»€ä¹ˆå«IOï¼ŒIOå¾—æ“ä½œæ˜¯æ€ä¹ˆæ ·çš„ï¼ŸIOæ—¢è¾“å…¥è¾“å‡ºï¼ŒæŒ‡çš„æ˜¯ä¸€åˆ‡æ“ä½œç¨‹åºæˆ–è®¾å¤‡ä¸è®¡ç®—æœºä¹‹é—´å‘ç”Ÿçš„æ•°æ®ä¼ è¾“çš„è¿‡ç¨‹ã€‚å®ƒåˆ†ä¸ºIOè®¾å¤‡å’ŒIOæ¥å£ä¸¤ä¸ªéƒ¨åˆ†ã€‚ IOè®¾å¤‡ï¼šå°±æ˜¯æŒ‡å¯ä»¥ä¸è®¡ç®—æœºè¿›è¡Œæ•°æ®ä¼ è¾“çš„ç¡¬ä»¶ã€‚æœ€å¸¸è§çš„I&#x2F;Oè®¾å¤‡æœ‰æ‰“å°æœºã€ç¡¬ç›˜ã€é”®ç›˜å’Œé¼ æ ‡ã€‚ä»ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è®²ï¼Œå®ƒä»¬ä¸­æœ‰ä¸€äº›åªèƒ½ç®—æ˜¯è¾“å…¥è®¾å¤‡ï¼ˆæ¯”å¦‚è¯´é”®ç›˜å’Œé¼ æ ‡ï¼‰ï¼›æœ‰ä¸€äº›åªæ˜¯è¾“å‡ºè®¾å¤‡ï¼ˆå¦‚æ‰“å°æœºï¼‰ã€‚ IOæ¥å£ï¼šå°±æ˜¯æ˜¯ä¸»æœºå’Œå¤–è®¾ä¹‹é—´çš„äº¤æ¥ç•Œé¢ï¼Œé€šè¿‡æ¥å£å¯ä»¥å®ç°ä¸»æœºå’Œå¤–è®¾ä¹‹é—´çš„ä¿¡æ¯äº¤æ¢ã€‚ IOçš„äº”ç§æ¨¡å‹ é˜»å¡ä¸éé˜»å¡IO ä½ æ‰“ç”µè¯é—®ä¹¦åº—è€æ¿æœ‰æ²¡æœ‰ã€Šåˆ†å¸ƒå¼ç³»ç»Ÿã€‹è¿™æœ¬ä¹¦ï¼Œä½ å¦‚æœæ˜¯é˜»å¡å¼è°ƒç”¨ï¼Œä½ ä¼šä¸€ç›´æŠŠè‡ªå·±â€œæŒ‚èµ·â€ï¼Œç›´åˆ°å¾—åˆ°è¿™æœ¬ä¹¦æœ‰æ²¡æœ‰çš„ç»“æœï¼Œå¦‚æœæ˜¯éé˜»å¡å¼è°ƒç”¨ï¼Œä½ ä¸ç®¡è€æ¿æœ‰æ²¡æœ‰å‘Šè¯‰ä½ ï¼Œä½ è‡ªå·±å…ˆä¸€è¾¹å»ç©äº†ï¼Œ å½“ç„¶ä½ ä¹Ÿè¦å¶å°”è¿‡å‡ åˆ†é’Ÿcheckä¸€ä¸‹è€æ¿æœ‰æ²¡æœ‰è¿”å›ç»“æœã€‚åœ¨è¿™é‡Œé˜»å¡ä¸éé˜»å¡ä¸æ˜¯å¦åŒæ­¥å¼‚æ­¥æ— å…³ã€‚è·Ÿè€æ¿é€šè¿‡ä»€ä¹ˆæ–¹å¼å›ç­”ä½ ç»“æœæ— å…³ã€‚ å¾€ä¸€ä¸ªæ–‡ä»¶ä¸­å†™æ•°æ®éœ€è¦å‡ ä¸ªæ­¥éª¤ï¼š 1.opne()ã€2.write(){ç³»ç»Ÿè°ƒç”¨ï¼Œè¦æƒ³å†™ç£ç›˜ï¼ŒæŠŠæ•°æ®ç»™writeè®©writeå¸®è‡ªå·±å†™(æŠŠæ•°æ®ç»™å†…æ ¸ï¼Œè¿™ä¸ªè¿‡ç¨‹å«ç”¨æˆ·æ€ä¸‹æ²‰åˆ°å†…æ ¸æ€)ï¼Œå†…æ ¸(å†…æ ¸é‡Œé¢è¿˜æœ‰ç¼“å†²IO,å¿«ç¼“å†²(æ”’äº†ä¸€ä¼šå†å†™)ã€ç›´æ¥IO)æ‹¿åˆ°æ•°æ®(BUff)åœ¨å†™é“ç£ç›˜å½“ä¸­ï¼Œå½“å†™çš„è¿‡ç¨‹ä¸­å†…æ ¸éœ€è¦è°ƒåº¦åº•å±‚IO}ã€3.close() fcntl(int fd, int cmd, â€¦&#x2F;* arg *&#x2F;); å¤åˆ¶ä¸€ä¸ªç°æœ‰çš„æè¿°ç¬¦(cmd&#x3D;F_DUPFD). è·å¾—ï¼è®¾ç½®æ–‡ä»¶æè¿°ç¬¦æ ‡è®°(cmd&#x3D;F_GETFDæˆ–F_SETFD). è·å¾—ï¼è®¾ç½®æ–‡ä»¶çŠ¶æ€æ ‡è®°(cmd&#x3D;F_GETFLæˆ–F_SETFL). è·å¾—ï¼è®¾ç½®å¼‚æ­¥I&#x2F;Oæ‰€æœ‰æƒ(cmd&#x3D;F_GETOWNæˆ–F_SETOWN). è·å¾—ï¼è®¾ç½®è®°å½•é”(cmd&#x3D;F_GETLK , F_SETLKæˆ–F_SETLKW). é˜»å¡(Block)&#x2F;éé˜»å¡(NonBlock) åœºæ™¯æè¿°é˜»å¡:ä½ å’Œä½ çš„å¥³æœ‹çº¦å¥½å†å¤–é¢ç”µè¯äº­(æ–‡ä»¶)è§é¢ï¼Œä½ ä»¬å°±æ˜¯æ•°æ®,ä½ å°±å»äº†ç”µè¯äº­å°±å†å“ªä¸€ç›´ç­‰ç­‰ç­‰ï¼ï¼ï¼ï¼Œä½ æ€•ä½ èµ°äº†å¥¹å°±æ¥äº†ï¼Œä½ å°±å†é‚£å¹²ç­‰äº†10åˆ†é’Ÿã€‚ éé˜»å¡ï¼šä½ å’Œä½ çš„å¥³æœ‹çº¦å¥½å†å¤–é¢ç”µè¯äº­(æ–‡ä»¶)è§é¢ï¼Œä½ ä»¬å°±æ˜¯æ•°æ®,ä½ å°±å»äº†ç”µè¯äº­æ²¡çœ‹åˆ°ä½ çš„å¥³æœ‹å‹(æ‹¿åˆ°ä¸€ä¸ª-1)ï¼Œ(å‡å¦‚ä½ ä»¬è¦æ°é¥­)ä½ å°±ç›´æ¥èµ°äº†å»æ°é¥­ã€‚ä¸ºäº†æˆ‘ä»¬çš„å…³ç³»æˆ‘è¿‡ä¸€ä¼šæˆ‘å°±çœ‹ä¸€ä¸‹æ¯”å¦‚10åˆ†é’Ÿæˆ–è€…1ç§’(è¿™å«è½®è¯¢) common.c1234567891011121314151617181920212223242526272829#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;fcntl.h&gt;&#x2F;&#x2F; éé˜»å¡int make_nonblock(int fd) &#123; int flag; flag &#x3D; fcntl(fd, F_GETFL); if(flag &lt; 0) &#123; return -1; &#125; &#x2F;&#x2F; O_NONBLOCK ä½æ©ç  flag |&#x3D; O_NONBLOCK; return fcntl(fd, F_SETFL, flag);&#125;&#x2F;&#x2F; è§£é™¤éé˜»å¡int make_block(int fd) &#123; int flag; flag &#x3D; fcntl(fd, F_GETFL); if(flag &lt; 0) &#123; return -1; &#125; flag &amp;&#x3D; ~ O_NONBLOCK; return fcntl(fd, F_SETFL, flag);&#125; é˜»å¡IO(Block)é˜»å¡ï¼šå¾€å¾€éœ€è¦ç­‰å¾…ç¼“å†²åŒºä¸­çš„æ•°æ®å‡†å¤‡å¥½è¿‡åæ‰å¤„ç†å…¶ä»–çš„äº‹æƒ…ï¼Œå¦åˆ™ä¸€ç›´ç­‰å¾…åœ¨é‚£é‡Œã€‚ï¼ˆæµªè´¹æ—¶é—´ï¼‰ æ­£å¸¸å†™çš„ç¨‹åºåŸºæœ¬éƒ½æ˜¯é˜»å¡ éé˜»å¡IO(NonBlock)è®¾ç½®æ ‡å‡†è¾“å…¥ä¸ºéé˜»å¡12345678910111213141516#include &quot;5.common.c&quot;int main() &#123; int age; /* * é»˜è®¤ 0ã€1ã€2 ä¸‰ä¸ªæ–‡ä»¶æè¿°ç¬¦æ˜¯ä»çˆ¶äº²å“ªç»§æ‰¿è¿‡æ¥çš„ * æˆ‘ä»¬ç§°ä»–ä»¬ä¸ºï¼šæ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºã€æ ‡å‡†é”™è¯¯ */ make_nonblock(0); int ret = scanf(&quot;%d&quot;, &amp;age); printf(&quot;ttw is %d years old! &lt;%d&gt;\\n&quot;, age, ret); perror(&quot;scanf&quot;); return 0;&#125; è¿è¡Œç»“æœscanf retValueæ˜¯-1 é‚£ä¹ˆ -1 æ˜¯ä»€ä¹ˆæ„æ€ç”¨perroræ‰“å°æŸ¥çœ‹ä»€é”™è¯¯ scanfï¼šæ˜¯æˆåŠŸè¯»å…¥çš„ä¸ªæ•°ï¼Œè¿”å› -1 å‡ºé”™ perror(â€œscanfâ€): èµ„æºçš„ä¸´æ—¶æ˜¯ä¸å¯è®¿é—®çš„(æƒ³è¦ä»ä¸€ä¸ªç©ºçš„è¾“å…¥æµä¸­æå‡ºä¸€ä¸ªæ•°æ®ï¼Œæ˜¾ç„¶æ˜¯æ²¡æœ‰çš„ï¼Œä½†æ˜¯åˆæ˜¯éé˜»å¡çš„ä¹Ÿä¸èƒ½ç­‰æ‰€ä»¥è¿”å› -1) 12ttw is -99424160 years old! &lt;-1&gt; scanf: Resource temporarily unavailable æƒ³åŠæ³•æ€ä¹ˆè®©ç¨‹åºè¯»åˆ°æ•°æ®ï¼Ÿ(æ ‡å‡†è¾“å…¥-O_NONBLOCK)ç®€ç­”çŒœæƒ³ï¼Ÿ åŠ ä¸Šsleep(5)è¿™å‰5ç§’æ ‡å‡†è¾“å…¥æµæ‰“å¼€äº†ä¹ˆï¼Ÿ å†ç­‰å¾…çš„5ç§’ä¸­ä¹‹å‰è¾“å…¥123ï¼Œscanf()è¯»åˆ°äº†ï¼Œæ„å‘³ç€ä»€ä¹ˆæ ‡å‡†è¾“å…¥æµæ‰“ä¸æ‰“å¼€æœ‰æ²¡æœ‰æ•°æ®è¿‡å»è·Ÿscanfæ²¡æœ‰å…³ç³»ï¼Œæ²¡æœ‰scanfæ ‡å‡†è¾“å…¥æµä¸­çš„æ•°æ®è¯¥å»è¿˜æ˜¯å¾—å»ï¼Œåªæ˜¯è¿™ä¸ªæ•°æ®æœ‰æ²¡æœ‰è¢«æ”¶èµ°ï¼Œåªè¦æ˜¯éé˜»å¡IOåªè¦æœ‰æ•°æ®æˆ‘å°±å¯ä»¥ç›´æ¥æŠŠä»–æ‹¿èµ°ã€‚ 123456789101112131415161718/************************************************************************* &gt; File Name: 6.test_nonblock.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´10æœˆ01æ—¥ æ˜ŸæœŸå…­ 19æ—¶50åˆ†04ç§’ ************************************************************************/#include &quot;5.common.c&quot;int main() &#123; int age; make_nonblock(0); sleep(5); // è®©ç¨‹åºç¡è§‰äº† â€” æ•°æ®å·²ç»å†²åˆ°å®¶é—¨å£äº† â€” ä¸å ç”¨CPU int ret = scanf(&quot;%d&quot;, &amp;age); printf(&quot;ttw is %d years old! &lt;%d&gt;\\n&quot;, age, ret); perror(&quot;scanf&quot;); return 0;&#125; è¿è¡Œç»“æœ1234123 // ç­‰å¾…5ç§’å‰è¾“å…¥// è¾“å‡ºç»“æœttw is 123 years old! &lt;1&gt;scanf: Success SELECT()selectçš„å‡½æ•°æ ¼å¼ï¼š&#x2F;&#x2F; æœ€å¤§æ–‡ä»¶æè¿°ç¬¦ + 1, è¯»ã€å†™ã€å¼‚å¸¸ã€é˜»å¡ï¼ˆç¡è§‰å•¥ä¹Ÿä¸å¹²ï¼‰ int select(int nfds, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, struct timeval *timeout); è§£é‡Šä¸€ä¸‹å„ä¸ªå‚æ•°çš„æ„æ€:12345678910111213141516171819202122232425- å‚æ•°: - nfds: å§”æ‰˜å†…æ ¸çš„æ£€æµ‹æœ€å¤§æ–‡ä»¶æè¿°ç¬¦çš„å€¼ + 1 - readfds: è¦æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦çš„è¯»çš„é›†åˆ,å§”æ‰˜å†…æ ¸æ£€æµ‹å“ªäº›æ–‡ä»¶æè¿°ç¬¦çš„è¯»çš„å±æ€§ - ä¸€èˆ¬æ£€æµ‹è¯»æ“ä½œ - å¯¹åº”çš„æ˜¯å¯¹æ–¹å‘é€æ¥çš„æ•°æ®, å› ä¸ºè¯»è¢«çš„æ¥æ”¶æ•°æ®, æ£€æµ‹çš„å°±æ˜¯è¯»ç¼“å†²åŒº - æ˜¯ä¸€ä¸ªä¼ å…¥ä¼ å‡ºå‚æ•° - fd_seté›†åˆå¯ä»¥é€šè¿‡ä¸€äº›å®ç”±äººä¸ºæ¥æ“ä½œ: - FD_ZERO(fd_set *fdset)ï¼šæ¸…ç©ºfdsetä¸æ‰€æœ‰æ–‡ä»¶å¥æŸ„çš„è”ç³»ã€‚ - FD_SET(int fd, fd_set *fdset)ï¼šå»ºç«‹æ–‡ä»¶å¥æŸ„fdä¸fdsetçš„è”ç³»ã€‚ - FD_CLR(int fd, fd_set *fdset)ï¼šæ¸…é™¤æ–‡ä»¶å¥æŸ„fdä¸fdsetçš„è”ç³»ã€‚ - FD_ISSET(int fd, fdset *fdset)ï¼šæ£€æŸ¥fdsetè”ç³»çš„æ–‡ä»¶å¥æŸ„fdæ˜¯å¦å¯è¯»å†™ï¼Œ&gt;0è¡¨ç¤ºå¯è¯»å†™ã€‚ - writefds: è¦æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦çš„å†™çš„é›†åˆ, å§”æ‰˜å†…æ ¸æ£€æµ‹å“ªäº›æ–‡ä»¶æè¿°ç¬¦çš„å†™çš„å±æ€§ - å§”æ‰˜å†…æ ¸æ£€æµ‹å†™ç¼“å­˜åŒºæ˜¯ä¸æ˜¯è¿˜å¯ä»¥å†™æ•°æ® (ä¸æ»¡å°±å¯ä»¥å†™) - exceptfds: æ£€æµ‹å‘ç”Ÿå¼‚å¸¸çš„æ–‡ä»¶æè¿°ç¬¦çš„é›†åˆ - timeout: è¦è®¾ç½®çš„è¶…æ—¶æ—¶é—´ struct timeout &#123; long tv_sec; &#x2F;* seconds ç§’ *&#x2F; long tv_usec; &#x2F;* microseconds å¾®ç§’ *&#x2F; &#125; - å€¼ä¸º NULL: æ°¸ä¹…é˜»å¡, ç›´åˆ°æ£€æµ‹åˆ°äº†æ–‡ä»¶æè¿°ç¬¦çš„å˜åŒ– - tv_sec &#x3D; 0, tv_usec: &#x3D; 0 : è¡¨ç¤ºä¸é˜»å¡ - tv_sec &gt; 0, tv_usec: &gt; 0 : é˜»å¡å¯¹åº”çš„æ—¶é—´ - è¿”å›å€¼: -1: å¤±è´¥ &gt; 0 (n): æ£€æµ‹çš„é›†åˆä¸­nä¸ªæ–‡ä»¶æè¿°ç¬¦å‘ç”Ÿäº†å˜åŒ– ä¸»æ—¨æ€æƒ³: 1 .é¦–å…ˆè¦æ„é€ ä¸€ä¸ªå…³äºæ–‡ä»¶æè¿°ç¬¦çš„åˆ—è¡¨ï¼Œå°†è¦ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦æ·»åŠ åˆ°è¯¥åˆ—è¡¨ä¸­ã€‚ è°ƒç”¨ç³»ç»Ÿå‡½æ•°(select), ç›‘å¬è¯¥åˆ—è¡¨ä¸­çš„æ–‡ä»¶æè¿°ç¬¦,ç›´åˆ°è¿™äº›æè¿°ç¬¦ä¸­çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¿›è¡ŒI\\Oæ“ä½œæ—¶, è¯¥å‡½æ•°æ‰ä¼šè¿”å› a. è¿™ä¸ªå‡½æ•°æ˜¯é˜»å¡çš„ b. å‡½æ•°å¯¹æ–‡ä»¶æè¿°ç¬¦çš„æ£€æµ‹çš„æ“ä½œæ˜¯ç”±å†…æ ¸å®Œæˆ åœ¨è¿”å›æ—¶, å®ƒä¼šå‘Šè¯‰è¿›ç¨‹æœ‰å¤šå°‘(å“ªäº›)æè¿°ç¬¦è¦è¿›è¡ŒI&#x2F;Oæ“ä½œ FD_SETSIZE å®ƒæŒ‡å®šæœ€å¤§æè¿°ç¬¦æ•°ï¼ˆé€šå¸¸æ˜¯1024ï¼‰ï¼Œä¸€ä¸ªæ•´æ•°å 4ä¸ªå­—èŠ‚ï¼Œæ—¢32ä½ï¼Œé‚£ä¹ˆå°±æ˜¯ç”¨åŒ…å«32ä¸ªå…ƒç´ çš„æ•´æ•°æ•°ç»„æ¥è¡¨ç¤ºæ–‡ä»¶æè¿°ç¬¦é›†ã€‚æˆ‘ä»¬å¯ä»¥åœ¨å¤´æ–‡ä»¶ä¸­ä¿®æ”¹è¿™ä¸ªå€¼æ¥æ”¹å˜selectä½¿ç”¨çš„æ–‡ä»¶æè¿°ç¬¦é›†çš„å¤§å°ï¼Œä½†æ˜¯å¿…é¡»é‡æ–°ç¼–è¯‘å†…æ ¸æ‰èƒ½ä½¿ä¿®æ”¹åçš„å€¼æœ‰æ•ˆã€‚å½“å‰ç‰ˆæœ¬çš„unixæ“ä½œç³»ç»Ÿæ²¡æœ‰é™åˆ¶FD_SETSIZEçš„æœ€å¤§å€¼ï¼Œé€šå¸¸åªå—å†…å­˜ä»¥åŠç³»ç»Ÿç®¡ç†ä¸Šçš„é™åˆ¶ã€‚ select ç¼ºç‚¹ï¼š æ¯æ¬¡è°ƒç”¨selectï¼Œéƒ½éœ€è¦æŠŠfdé›†åˆä»ç”¨æˆ·æ€æ‹·è´åˆ°å†…æ ¸æ€ï¼Œè¿™ä¸ªå¼€é”€åœ¨fdå¾ˆå¤šæ—¶ä¼šå¾ˆå¤§ã€‚ åŒæ—¶æ¯æ¬¡è°ƒç”¨selectéƒ½éœ€è¦åœ¨å†…æ ¸éå†ä¼ é€’è¿›æ¥çš„æ‰€æœ‰fdï¼Œè¿™ä¸ªå¼€é”€åœ¨fdå¾ˆå¤šæ—¶ä¹Ÿå¾ˆå¤§ã€‚ selectæ”¯æŒçš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡å¤ªå°äº†,é»˜è®¤æ˜¯1024ã€‚ fdsé›†åˆä¸èƒ½é‡ç”¨ï¼Œæ¯æ¬¡éƒ½éœ€è¦é‡ç½®ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041/************************************************************************* &gt; File Name: 7.select.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´10æœˆ02æ—¥ æ˜ŸæœŸæ—¥ 14æ—¶12åˆ†04ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/time.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;int main(void) &#123; fd_set rfds; struct timeval tv; int retval; /* Watch stdin (fd 0) to see when it has input. */ FD_ZERO(&amp;rfds); FD_SET(0, &amp;rfds); /* Wait up to five seconds. */ tv.tv_sec = 5; tv.tv_usec = 0; retval = select(1, &amp;rfds, NULL, NULL, &amp;tv); /* Don&#x27;t rely on the value of tv now! */ if (retval == -1) perror(&quot;select()&quot;); else if (retval) printf(&quot;Data is available now.\\n&quot;); /* FD_ISSET(0, &amp;rfds) will be true. */ else printf(&quot;No data within five seconds.\\n&quot;); exit(EXIT_SUCCESS);&#125; çœŸçš„ç†è§£äº†ä¹ˆï¼Ÿå°é—®é¢˜ä¸Šè¿°ä»£ç è¿è¡Œï¼Œè¾“å…¥lsæˆ–è€…ä»»æ„(123)ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºç°ä¸€ä¸‹ç°è±¡ï¼Ÿ 12345qz@DESKTOP-FH4203J IO % .&#x2F;a.out 123Data is available now.qz@DESKTOP-FH4203J IO % 123 zsh: command not found: 123 .&#x2F;a.out æ„ŸçŸ¥åˆ°äº†æ•°æ®åˆ°æ¥ IOæ„ŸçŸ¥ selectæ²¡æ”¶ å°±å¥½æ¯”è¯´ä½ é›‡äº†ä¸€ä¸ªäººï¼Œçœ‹ç€ç”µè¯äº­ä½ å¥³æœ‹å‹æ˜¯å¦æ¥äº†æ¥å°±æ‰“ç”µè¯å‘Šè¯‰ä½ ï¼Œä½†æ˜¯ä½ å¥³æœ‹å‹æ¥äº†çœ‹ç€çš„äººç»™ä½ æ‰“ç”µè¯äº†ï¼Œä½†æ˜¯ä½ å¥³æœ‹å‹è¿˜å†ç”µè¯äº­é‡Œé¢ç­‰ç€ï¼Œè¿™æ—¶å€™å°±ä½ èƒ½ä¸èƒ½åˆ°å°±çœ‹ä½ è‡ªå·±äº†ï¼Œæ‰€ä»¥è¯´å¦‚æœä½ æ²¡æœ‰æ¥èµ°è¢«åˆ«äººæ¥èµ°äº†ï¼ˆç¨‹åºæ­»äº†ï¼Œè¢«zshæ¥èµ°äº†ï¼‰ï¼Œ ä¿®æ”¹ç¨‹åºï¼Œåˆšæ‰é‚£ç§æ˜¾ç¤ºç»“æœå°±ä¸ä¼šå‡ºç°äº†12345678910111213141516171819202122232425262728293031323334353637#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/time.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;int main(void) &#123; fd_set rfds; struct timeval tv; int retval; /* Watch stdin (fd 0) to see when it has input. */ FD_ZERO(&amp;rfds); FD_SET(0, &amp;rfds); /* Wait up to five seconds. */ tv.tv_sec = 5; tv.tv_usec = 0; retval = select(1, &amp;rfds, NULL, NULL, &amp;tv); /* Don&#x27;t rely on the value of tv now! */ if (retval == -1) perror(&quot;select()&quot;); else if (retval) &#123; char buff[512] = &#123;0&#125;; printf(&quot;Data is available now.\\n&quot;); scanf(&quot;%s&quot;, buff); &#125; /* FD_ISSET(0, &amp;rfds) will be true. */ else printf(&quot;No data within five seconds.\\n&quot;); exit(EXIT_SUCCESS);&#125; poll()12345678910111213141516171819202122#include &lt;poll.h&gt;struct pollfd &#123; int fd; /* å§”æ‰˜å†…æ ¸æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦ */ short events; /* å§”æ‰˜å†…æ ¸æ£€æµ‹æ–‡ä»¶æè¿°ç¬¦çš„ä»€ä¹ˆäº‹ä»¶ */ short revents; /* æ–‡ä»¶æè¿°ç¬¦å®é™…å‘ç”Ÿçš„äº‹ä»¶ */&#125;;struct pollfd myfd;myfd.fd = 5;myfd.events = POLLIN | POLLOUT;int poll(struct pollfd *fds, nfds_t nfds, int timeout); - å‚æ•°ï¼š - fds : æ˜¯ä¸€ä¸ªstruct pollfd ç»“æ„ä½“æ•°ç»„ï¼Œè¿™æ˜¯ä¸€ä¸ªéœ€è¦æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦çš„é›†åˆ - nfds : è¿™ä¸ªæ˜¯ç¬¬ä¸€ä¸ªå‚æ•°æ•°ç»„ä¸­æœ€åä¸€ä¸ªæœ‰æ•ˆå…ƒç´ çš„ä¸‹æ ‡ + 1 - timeout : é˜»å¡æ—¶é•¿(æ¯«ç§’) 0 : ä¸é˜»å¡ -1 : é˜»å¡ï¼Œå½“æ£€æµ‹åˆ°éœ€è¦æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦æœ‰å˜åŒ–ï¼Œè§£é™¤é˜»å¡ &gt;0 : é˜»å¡çš„æ—¶é•¿ - è¿”å›å€¼ï¼š -1 : å¤±è´¥ &gt;0ï¼ˆnï¼‰ : æˆåŠŸ,nè¡¨ç¤ºæ£€æµ‹åˆ°é›†åˆä¸­æœ‰nä¸ªæ–‡ä»¶æè¿°ç¬¦å‘ç”Ÿå˜åŒ– poll ç¼ºç‚¹ï¼š æ¯æ¬¡è°ƒç”¨selectï¼Œéƒ½éœ€è¦æŠŠfdé›†åˆä»ç”¨æˆ·æ€æ‹·è´åˆ°å†…æ ¸æ€ï¼Œè¿™ä¸ªå¼€é”€åœ¨fdå¾ˆå¤šæ—¶ä¼šå¾ˆå¤§ã€‚ åŒæ—¶æ¯æ¬¡è°ƒç”¨selectéƒ½éœ€è¦åœ¨å†…æ ¸éå†ä¼ é€’è¿›æ¥çš„æ‰€æœ‰fdï¼Œè¿™ä¸ªå¼€é”€åœ¨fdå¾ˆå¤šæ—¶ä¹Ÿå¾ˆå¤§ã€‚ selectæ”¯æŒçš„æ–‡ä»¶æè¿°ç¬¦æ•°é‡å¤ªå°äº†,é»˜è®¤æ˜¯1024. fdsé›†åˆä¸èƒ½é‡ç”¨ï¼Œæ¯æ¬¡éƒ½éœ€è¦é‡ç½®ã€‚ epoll123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#include &lt;sys&#x2F;epoll.h&gt;&#x2F;&#x2F; åˆ›å»ºä¸€ä¸ªæ–°çš„epollå®ä¾‹ã€‚åœ¨å†…æ ¸ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ•°æ®ï¼Œè¿™ä¸ªæ•°æ®ä¸­æœ‰ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„æ•°æ®ï¼Œä¸€ä¸ªæ˜¯éœ€è¦æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦çš„ä¿¡æ¯ï¼ˆçº¢é»‘æ ‘ï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯å°±ç»ªåˆ—è¡¨ï¼Œå­˜æ”¾æ£€æµ‹åˆ°æ•°æ®å‘é€æ”¹å˜çš„æ–‡ä»¶æè¿°ç¬¦ä¿¡æ¯ï¼ˆåŒå‘é“¾è¡¨ï¼‰ã€‚int epoll_create(int size); - å‚æ•°ï¼š size : (ä»¥å‰æ˜¯ä½¿ç”¨å“ˆå¸Œå®ç°çš„éœ€è¦ç”¨åˆ°size)ç›®å‰æ²¡æœ‰æ„ä¹‰äº†ã€‚éšä¾¿å†™ä¸€ä¸ªæ•°ï¼Œå¿…é¡»å¤§äº0 - è¿”å›å€¼ï¼š -1 : å¤±è´¥ &gt; 0 : æ–‡ä»¶æè¿°ç¬¦ï¼Œæ“ä½œepollå®ä¾‹çš„ typedef union epoll_data &#123; void *ptr; int fd; uint32_t u32; uint64_t u64;&#125; epoll_data_t;struct epoll_event &#123; uint32_t events; &#x2F;* Epoll events *&#x2F; epoll_data_t data; &#x2F;* User data variable *&#x2F;&#125;;å¸¸è§çš„Epollæ£€æµ‹äº‹ä»¶ï¼š - EPOLLIN - EPOLLOUT - EPOLLERR ... ... &#x2F;&#x2F; å¯¹epollå®ä¾‹è¿›è¡Œç®¡ç†ï¼šæ·»åŠ æ–‡ä»¶æè¿°ç¬¦ä¿¡æ¯ï¼Œåˆ é™¤ä¿¡æ¯ï¼Œä¿®æ”¹ä¿¡æ¯int epoll_ctl(int epfd, int op, int fd, struct epoll_event *event); - å‚æ•°ï¼š - epfd : epollå®ä¾‹å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ - op : è¦è¿›è¡Œä»€ä¹ˆæ“ä½œ EPOLL_CTL_ADD: æ·»åŠ  EPOLL_CTL_MOD: ä¿®æ”¹ EPOLL_CTL_DEL: åˆ é™¤ - fd : è¦æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦ - event : æ£€æµ‹æ–‡ä»¶æè¿°ç¬¦ä»€ä¹ˆäº‹æƒ…&#x2F;&#x2F; æ£€æµ‹å‡½æ•°int epoll_wait(int epfd, struct epoll_event *events, int maxevents, inttimeout); - å‚æ•°: - epfd : epollå®ä¾‹å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ - events : ä¼ å‡ºå‚æ•°ï¼Œä¿å­˜äº†å‘é€ äº†å˜åŒ–çš„æ–‡ä»¶æè¿°ç¬¦çš„ä¿¡æ¯ - maxevents : ç¬¬äºŒä¸ªå‚æ•°ç»“æ„ä½“æ•°ç»„çš„å¤§å° - timeout : é˜»å¡æ—¶é—´ - 0 : ä¸é˜»å¡ - -1 : é˜»å¡ï¼Œç›´åˆ°æ£€æµ‹åˆ°fdæ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œè§£é™¤é˜»å¡ - &gt; 0 : é˜»å¡çš„æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰ - è¿”å›å€¼: - æˆåŠŸï¼Œè¿”å›å‘é€å˜åŒ–çš„æ–‡ä»¶æè¿°ç¬¦çš„ä¸ªæ•° &gt; 0 - å¤±è´¥ -1 Epoll çš„å·¥ä½œæ¨¡å¼ï¼š LT æ¨¡å¼ ï¼ˆæ°´å¹³è§¦å‘ï¼‰ å‡è®¾å§”æ‰˜å†…æ ¸æ£€æµ‹è¯»äº‹ä»¶ -&gt; æ£€æµ‹fdçš„è¯»ç¼“å†²åŒº è¯»ç¼“å†²åŒºæœ‰æ•°æ® - &gt; epollæ£€æµ‹åˆ°äº†ä¼šç»™ç”¨æˆ·é€šçŸ¥ a.ç”¨æˆ·ä¸è¯»æ•°æ®ï¼Œæ•°æ®ä¸€ç›´åœ¨ç¼“å†²åŒºï¼Œepoll ä¼šä¸€ç›´é€šçŸ¥ b.ç”¨æˆ·åªè¯»äº†ä¸€éƒ¨åˆ†æ•°æ®ï¼Œepollä¼šé€šçŸ¥ c.ç¼“å†²åŒºçš„æ•°æ®è¯»å®Œäº†ï¼Œä¸é€šçŸ¥ LTï¼ˆlevel - triggeredï¼‰æ˜¯ç¼ºçœçš„å·¥ä½œæ–¹å¼ï¼Œå¹¶ä¸”åŒæ—¶æ”¯æŒ block å’Œ nonblock, socketã€‚åœ¨è¿™ ç§åšæ³•ä¸­ï¼Œå†…æ ¸å‘Šè¯‰ä½ ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦æ˜¯å¦å°±ç»ªäº†ï¼Œç„¶åä½ å¯ä»¥å¯¹è¿™ä¸ªå°±ç»ªçš„ fd è¿›è¡Œ IO æ“ ä½œã€‚å¦‚æœä½ ä¸ä½œä»»ä½•æ“ä½œï¼Œå†…æ ¸è¿˜æ˜¯ä¼šç»§ç»­é€šçŸ¥ä½ çš„ã€‚ ET æ¨¡å¼ï¼ˆè¾¹æ²¿è§¦å‘ï¼‰ å‡è®¾å§”æ‰˜å†…æ ¸æ£€æµ‹è¯»äº‹ä»¶ -&gt; æ£€æµ‹fdçš„è¯»ç¼“å†²åŒº è¯»ç¼“å†²åŒºæœ‰æ•°æ® - &gt; epollæ£€æµ‹åˆ°äº†ä¼šç»™ç”¨æˆ·é€šçŸ¥ a.ç”¨æˆ·ä¸è¯»æ•°æ®ï¼Œæ•°æ®ä¸€è‡´åœ¨ç¼“å†²åŒºä¸­ï¼Œepollä¸‹æ¬¡æ£€æµ‹çš„æ—¶å€™å°±ä¸é€šçŸ¥äº† b.ç”¨æˆ·åªè¯»äº†ä¸€éƒ¨åˆ†æ•°æ®ï¼Œepollä¸é€šçŸ¥ c.ç¼“å†²åŒºçš„æ•°æ®è¯»å®Œäº†ï¼Œä¸é€šçŸ¥ ETï¼ˆedge - triggeredï¼‰æ˜¯é«˜é€Ÿå·¥ä½œæ–¹å¼ï¼Œåªæ”¯æŒ nonblock, socketã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œå½“æè¿° ç¬¦ä»æœªå°±ç»ªå˜ä¸ºå°±ç»ªæ—¶ï¼Œå†…æ ¸é€šè¿‡epollå‘Šè¯‰ä½ ã€‚ç„¶åå®ƒä¼šå‡è®¾ä½ çŸ¥é“æ–‡ä»¶æè¿°ç¬¦å·²ç»å°±ç»ªï¼Œ å¹¶ä¸”ä¸ä¼šå†ä¸ºé‚£ä¸ªæ–‡ä»¶æè¿°ç¬¦å‘é€æ›´å¤šçš„å°±ç»ªé€šçŸ¥ï¼Œç›´åˆ°ä½ åšäº†æŸäº›æ“ä½œå¯¼è‡´é‚£ä¸ªæ–‡ä»¶æè¿° ç¬¦ä¸å†ä¸ºå°±ç»ªçŠ¶æ€äº†ã€‚ä½†æ˜¯è¯·æ³¨æ„ï¼Œå¦‚æœä¸€ç›´ä¸å¯¹è¿™ä¸ª fd ä½œ IO æ“ä½œï¼ˆä»è€Œå¯¼è‡´å®ƒå†æ¬¡å˜æˆ æœªå°±ç»ªï¼‰ï¼Œå†…æ ¸ä¸ä¼šå‘é€æ›´å¤šçš„é€šçŸ¥ï¼ˆonly onceï¼‰ã€‚ ET æ¨¡å¼åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå‡å°‘äº† epoll äº‹ä»¶è¢«é‡å¤è§¦å‘çš„æ¬¡æ•°ï¼Œå› æ­¤æ•ˆç‡è¦æ¯” LT æ¨¡å¼é«˜ã€‚epoll å·¥ä½œåœ¨ ET æ¨¡å¼çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨éé˜»å¡å¥—æ¥å£ï¼Œä»¥é¿å…ç”±äºä¸€ä¸ªæ–‡ä»¶å¥æŸ„çš„é˜»å¡è¯»&#x2F;é˜»å¡å†™ æ“ä½œæŠŠå¤„ç†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„ä»»åŠ¡é¥¿æ­»ã€‚ 123456789struct epoll_event &#123; uint32_t events; /* Epoll events */ epoll_data_t data; /* User data variable */&#125;;å¸¸è§çš„Epollæ£€æµ‹äº‹ä»¶ï¼š - EPOLLIN - EPOLLOUT - EPOLLERR - EPOLLET // è¾¹æ²¿è§¦å‘ ä¸¢ä¸ªåšå®¢ï¼š ç‚¹æˆ‘å’±å°±èµ°ï¼","categories":[{"name":"åº·å¤è®­ç»ƒ","slug":"åº·å¤è®­ç»ƒ","permalink":"https://tutouwang.vercel.app/categories/%E5%BA%B7%E5%A4%8D%E8%AE%AD%E7%BB%83/"}],"tags":[]},{"title":"å‡½æ•°API","slug":"å‡½æ•°API","date":"2022-09-28T02:37:22.000Z","updated":"2022-09-30T02:23:09.643Z","comments":true,"path":"2022/09/28/å‡½æ•°API/","link":"","permalink":"https://tutouwang.vercel.app/2022/09/28/%E5%87%BD%E6%95%B0API/","excerpt":"","text":"å‡½æ•°API getopt()123456789101112131415161718192021222324252627282930313233343536373839/************************************************************************* &gt; File Name: 1.getopt.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´09æœˆ28æ—¥ æ˜ŸæœŸä¸‰ 10æ—¶35åˆ†29ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;int main(int argc, char **argv) &#123; int opt; int a_flag = 0, l_flag = 0; printf(&quot;argc = %d\\n&quot;, argc); while((opt = getopt(argc, argv, &quot;alm:o::&quot;)) != -1) &#123; switch(opt) &#123; case &#x27;a&#x27;: a_flag = 1; break; case &#x27;l&#x27;: l_flag = 1; break; case &#x27;m&#x27;: printf(&quot;msg = %s\\n&quot;, optarg); break; case &#x27;o&#x27;: printf(&quot;opt = %s\\n&quot;, optarg); break; default : fprintf(stderr, &quot;Usage : %s -al\\n&quot;, argv[0]); // exit(1); &#125; &#125; printf(&quot;optind = %d\\n optopt = %c\\n&quot;, optind, optopt); return 0;&#125; getoptå‡½æ•°çš„ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸²å‚æ•° â€œ$alm:o::$â€ï¼šåœ¨man pageä¸­è¿™æ ·è§£é‡Šä¸ºï¼š**-al ä¸ç”¨ä¸€ä¸ªå…³è”å€¼ï¼›-m éœ€è¦æœ‰ä¸€ä¸ªå…³è”çš„valueå‚æ•°;-o å¯ä»¥åŠ ä¸€ä¸ªå…³è”å‚æ•°ä¹Ÿå¯ä»¥ä¸åŠ **ã€‚ è¿è¡Œç»“æœ:12345âœ test .&#x2F;a.out -t &#x2F;&#x2F;é¦–å…ˆ -t æ˜¯ä¸€ä¸ªéæ³•çš„é€‰é¡¹.&#x2F;a.out: invalid option -- &#39;t&#39; &#x2F;&#x2F;è¾“å‡ºé”™è¯¯ä¿¡æ¯ï¼Œå› ä¸ºéæ³•é€‰é¡¹optind &#x3D; 2 &#x2F;&#x2F;æ­¤æ—¶argv[optind]æ˜¯æˆ‘ä»¬çš„æ“ä½œæ•°ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¼ é€’ç»™ä¸»å‡½æ•°çš„å‚æ•°optopt &#x3D; t &#x2F;&#x2F;å½“å‘ç°æ— æ•ˆé¡¹å­—ç¬¦æ—¶ï¼Œoptoptä¼šåŒ…å«è¯¥å­—ç¬¦ï¼Œæ­£å¦‚æˆ‘ä»¬ä¼ é€’çš„â€˜aâ€™è¿™ä¸ªæ— æ•ˆé¡¹ã€‚opterr &#x3D; 1 &#x2F;&#x2F;opterrå˜é‡éé›¶ï¼Œgetopt()å‡½æ•°ä¸ºâ€œæ— æ•ˆé€‰é¡¹â€å’Œâ€œç¼ºå°‘å‚æ•°é€‰é¡¹ï¼Œå¹¶è¾“å‡ºå…¶é”™è¯¯ä¿¡æ¯ã€‚Usage : .&#x2F;a.out -al å†æ¬¡è¿è¡Œ:12345âœ test .&#x2F;a.out -m &#x2F;&#x2F;æ ¹æ®getoptå‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå› ä¸ºâ€˜mâ€™å­—ç¬¦åæœ‰â€˜:â€™å†’å·ï¼Œå› æ­¤åœ¨â€˜-mâ€™é€‰é¡¹åéœ€è¦è·Ÿéšä¸€ä¸ªå‚æ•°ã€‚å› æ­¤æ­¤æ¬¡è¿è¡Œçš„é”™è¯¯ä¸ºâ€œç¼ºå°‘å‚æ•°â€ï¼Œå¦‚ä¸‹æç¤ºï¼š.&#x2F;a.out: option requires an argument -- &#39;m&#39; &#x2F;&#x2F;è¾“å‡ºäº†é”™è¯¯ä¿¡æ¯ï¼Œå› ä¸ºâ€œç¼ºå°‘å‚æ•°â€optind &#x3D; 2 &#x2F;&#x2F;argv[optind]ä¸ºç©ºï¼Œå› ä¸ºæ­¤æ¬¡è¿è¡Œæ²¡æœ‰ä¼ é€’å‚æ•°optopt &#x3D; m &#x2F;&#x2F;å½“å‘ç°æ— æ•ˆé¡¹å­—ç¬¦æ—¶ï¼Œoptoptä¼šåŒ…å«è¯¥å­—ç¬¦ï¼Œæ­£å¦‚æˆ‘ä»¬ä¼ é€’çš„â€˜tâ€™ç¼ºå°‘å‚æ•°çš„é€‰é¡¹ã€‚opterr &#x3D; 1 &#x2F;&#x2F;opterrå˜é‡éé›¶ï¼Œgetopt()å‡½æ•°ä¸ºâ€œæ— æ•ˆé€‰é¡¹â€å’Œâ€œç¼ºå°‘å‚æ•°â€œé€‰é¡¹ï¼Œå¹¶è¾“å‡ºå…¶é”™è¯¯ä¿¡æ¯ã€‚Usage : .&#x2F;a.out -al å†æ¬¡è¿è¡Œ:123456âœ test .&#x2F;a.out -al -m 123 -o &#x2F;&#x2F;â€˜-alâ€™ä¸ç”¨åŠ å‚æ•°,â€˜-mâ€™éœ€è¦åŠ å‚æ•°,â€˜-oâ€™å¯åŠ å¯ä¸åŠ , å‘mainå‡½æ•°ä¼ é€’å‚æ•°å«123ã€456argc &#x3D; 5 &#x2F;&#x2F; å­—ç¬¦ä¸²é•¿åº¦msg &#x3D; 123opt &#x3D; 456optind &#x3D; 5 &#x2F;&#x2F; å­—ç¬¦ä¸²é•¿åº¦ optopt &#x3D; å¤–éƒ¨å˜é‡ optindã€opterrã€optoptã€optargã€errno éƒ½åœ¨æŸä¸ª.cæ–‡ä»¶ä¸­å®šä¹‰çš„ï¼Œæ‰€æœ‰ç°åœ¨èƒ½ç”¨ï¼Œå¯èƒ½æ˜¯å¤–éƒ¨å˜é‡ã€å¯èƒ½æ˜¯é™æ€å…¨å±€å˜é‡â€¦ â€¦ a.c12345678910#include &lt;stdio.h&gt;void input();extern int age;int main() &#123; input(); printf(&quot;ttw age : %d \\n&quot;, age); return 0;&#125; b.c123456789#include &lt;stdio.h&gt;int age;void input() &#123; printf(&quot;Please input you age:\\n\\t&quot;); scanf(&quot;%d&quot;, &amp;age); return ;&#125; 1gcc a.c b.c è¿è¡Œç»“æœ123Please input you age: 14ttw age : 14","categories":[],"tags":[]},{"title":"Linux-g++gccç¼–è¯‘åæ ˆå†…å­˜åœ°å€ä¸å®é™…ç›¸å","slug":"æœ‰è¶£çš„çŸ¥è¯†/Linux-g-gccç¼–è¯‘åæ ˆå†…å­˜åœ°å€ä¸å®é™…ç›¸å","date":"2022-09-27T07:45:32.000Z","updated":"2022-09-27T10:24:32.162Z","comments":true,"path":"2022/09/27/æœ‰è¶£çš„çŸ¥è¯†/Linux-g-gccç¼–è¯‘åæ ˆå†…å­˜åœ°å€ä¸å®é™…ç›¸å/","link":"","permalink":"https://tutouwang.vercel.app/2022/09/27/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/Linux-g-gcc%E7%BC%96%E8%AF%91%E5%90%8E%E6%A0%88%E5%86%85%E5%AD%98%E5%9C%B0%E5%9D%80%E4%B8%8E%E5%AE%9E%E9%99%85%E7%9B%B8%E5%8F%8D/","excerpt":"","text":"Linux-g++gccç¼–è¯‘åæ ˆå†…å­˜åœ°å€ä¸å®é™…ç›¸åæ ˆæ­£å¸¸å­˜å‚¨å†…å­˜åœ°å€ æ ˆç©ºé—´å…ˆä½¿ç”¨é«˜åœ°å€åœ¨ä½¿ç”¨åº•åœ°å€ Win_Devc++1234567891011#include &lt;iostream&gt;using namespace std;int main() &#123; int a = 0; int b = 0; printf(&quot;a == %p\\n&quot;, &amp;a); printf(&quot;b == %p\\n&quot;, &amp;b); return 0;&#125; ä»£ç _æˆªå›¾ è¿è¡Œ_ç»“æœ123a &#x3D;&#x3D; 00000000006ffe1cb &#x3D;&#x3D; 00000000006ffe18-------------------------------- Vim(Linux)1234567891011#include &lt;iostream&gt;using namespace std;int main() &#123; int a = 0; int b = 0; printf(&quot;a == %p\\n&quot;, &amp;a); printf(&quot;b == %p\\n&quot;, &amp;b); return 0;&#125; è¿è¡Œ_ç»“æœ(é»˜è®¤)å‘ç°äºŒä¸ªå˜é‡ a, båœ¨æ ˆä¸­å­˜å‚¨çš„åœ°å€ç”±é«˜åˆ°åº•åˆ†åˆ«ä¸º a&gt;b&gt; è·Ÿè¯¾ä¸Šé¢devæ­£å¥½ç›¸å. 12a == 0x7ffffa941740b == 0x7ffffa941744 å…³é—­æ ˆä¿æŠ¤å…³é—­æ ˆä¿æŠ¤åçš„ç»“æœ:ä¸æ¨æ–­çš„ç»“æœç›¸åŒ. 1g++ test.cpp -fno-stack-protector -o ttw 12a &#x3D;&#x3D; 0x7fffc18bfd1cb &#x3D;&#x3D; 0x7fffc18bfd18 è¿è¡Œæˆªå›¾","categories":[{"name":"æœ‰è¶£çš„çŸ¥è¯†","slug":"æœ‰è¶£çš„çŸ¥è¯†","permalink":"https://tutouwang.vercel.app/categories/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[]},{"title":"Udpchatroom","slug":"Udpchatroom","date":"2022-08-08T02:46:50.000Z","updated":"2022-08-08T02:50:53.673Z","comments":true,"path":"2022/08/08/Udpchatroom/","link":"","permalink":"https://tutouwang.vercel.app/2022/08/08/Udpchatroom/","excerpt":"","text":"P2PèŠå¤©å®¤çš„å®ç°æ€»ä½“è®¾è®¡æ•°æ®ç»“æ„ ç”¨æˆ· æŠ¥æ–‡å®šä¹‰ 1234567891011#define CHAT_SYN 0x001#define CHAT_ACK 0x002#define CHAT_FIN 0x004#define CHAT_HEART 0x008struct Msg &#123; int type; char from[20]; char to[20]; char buff[1024];&#125;; æ¶æ„è¯´æ˜ serverå’Œclientåœ¨åŒä¸€ä¸ªç¨‹åºä¸­ ç¨‹åºè·‘èµ·æ¥ä¹‹åï¼Œæ²¡æœ‰æ˜ç¡®çš„å®¢æˆ·å’ŒæœåŠ¡ç«¯åŒºåˆ« ç”¨æˆ·å­˜å‚¨ é€‰ç”¨åˆé€‚çš„æ•°æ®ç»“æ„æ¥å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ å¯é“¾è¡¨ï¼Œå¯æ•°ç»„ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–çš„å¤æ‚ç»“æ„ 1234567891011//æ­¤ç»“æ„ä¸å‚ä¸ä»»ä½•èŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®äº¤äº’ï¼Œå¯è‡ªè¡Œç»´æŠ¤#define FL_SYNSENT 0x001#define FL_ONLINE 0x002struct User &#123; char name[20]; char ip[20]; int flag; //ç”¨æˆ·å½“å‰çš„çŠ¶æ€ int fd; int cntï¼›//å‘å‡ºå¿ƒè·³çš„æ¬¡æ•°ï¼Œå½“è¿™ä¸ªå€¼åˆ°è¾¾10çš„æ—¶å€™ï¼Œåˆ é™¤å¥½å‹&#125;; å¿ƒè·³çº¿ç¨‹ è¯¥çº¿ç¨‹ç”¨æ¥éå†æ¯ä¸€ä¸ªç”¨æˆ·ï¼Œå¯¹å…¶å‘é€å¿ƒè·³åŒ… å¹¶åˆ¤æ–­æ˜¯å¦éœ€è¦å°†ç”¨æˆ·ç§»å‡º æ¥æ”¶çº¿ç¨‹ å¾ªç¯æ¥å—ç”¨æˆ·ä¿¡æ¯ï¼Œå°†ç”¨æˆ·çš„è¯·æ±‚å‹åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ å‘é€çº¿ç¨‹è¯»å–æ ‡å‡†è¾“å…¥ï¼Œå¹¶å°†æ•°æ®å‘é€ç»™å·¥ä½œçº¿ç¨‹ï¼Œè´Ÿè´£å°†æ•°æ®è½¬å‘å‡ºå» ç¬¬ä¸€é˜¶æ®µèŠ‚ç‚¹å‘ç° æ¯ä¸ªèŠ‚ç‚¹å¯åŠ¨åï¼Œå»ºç«‹å¥½ä¸»ååº”å †åï¼Œå¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œç»™æ‰€æœ‰iplistä¸­çš„æ‰€æœ‰ipå‘é€SYNæŠ¥æ–‡ æ³¨æ„ï¼Œåœ¨è¿™é‡Œå…ˆæŠŠè‡ªå·±çš„ipåŠ åˆ°iplistæ–‡ä»¶ä¸­ï¼Œæ¢ä¸€ä¸ªç«¯å£ï¼Œå¼€ä¸€ä¸ªç›¸åº”çš„è¿›ç¨‹æµ‹è¯• å‘é€å®ŒSYNæŠ¥æ–‡åï¼Œå°†è¯¥èŠ‚ç‚¹ä¿¡æ¯æ·»åŠ åˆ°ç”¨æˆ·å­˜å‚¨ç»“æ„ä¸­ ç­‰å¾…å¯¹æ–¹çš„SYNACKæŠ¥æ–‡ï¼Œå¦‚æœæ”¶åˆ°SYNACKæŠ¥æ–‡ï¼Œåˆ™è®¤ä¸ºèŠ‚ç‚¹åœ¨çº¿ã€Œå®é™…æ˜¯åœ¨ä¸»ååº”å †ä¸­åšã€ ä½¿ç”¨UDPçš„connectä¸å¯¹æ–¹å»ºç«‹ä¸€æ¡ç¡®å®šçš„ä¼ªè¿æ¥ å¹¶æ ‡è®°ä¸ºåœ¨çº¿ èŠ‚ç‚¹è¢«å‘ç° åœ¨ä¸»ååº”å †ä¸­ï¼Œå¤„äºç›‘å¬çŠ¶æ€çš„å¥—æ¥å­—ï¼Œæ”¶åˆ°æ•°æ®è¿æ¥ä¹‹åï¼Œæ”¶åˆ°åŒ…ï¼Œéœ€è¦åˆ¤æ–­æ˜¯å¦æ˜¯åˆæ³•çš„åŒ… å¦‚æœåˆæ³•ï¼Œå¹¶ä¸”è¯¥åŒ…æ˜¯ä¸€ä¸ªSYNåŒ…,åˆ™ç»™å¯¹æ–¹å‘é€ä¸€ä¸ªSYNACKæŠ¥æ–‡ é€šè¿‡connectè¿æ¥åˆ°å¯¹æ–¹ï¼Œå»ºç«‹ä¸€æ¡ç¡®è®¤çš„ä¼ªè¿æ¥ å¹¶æ ‡è®°ä¸ºå¯¹æ–¹åœ¨çº¿ å¦‚æœæ”¶åˆ°çš„æ˜¯SYNACKï¼Œå¤„ç†å¦‚ä¸ŠèŠ‚èŠ‚ç‚¹å‘ç° å¾ªç¯æ‰“å°å‘ç°çš„ç»“ç‚¹ è®¾ç½®ä¸€ä¸ªä¸“é—¨çš„çº¿ç¨‹ï¼Œæˆ–è€…å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸Šé¢èŠ‚ç‚¹å‘ç°é‡Œç¬¬1æ¡æ‰€ä½¿ç”¨çš„çº¿ç¨‹æ¥æ¥ç»­å®Œæˆä¸‹é¢çš„å·¥ä½œ å¾ªç¯æ‰“å°è‡ªå·±å‘ç°çš„ç»“ç‚¹ ç¬¬äºŒé˜¶æ®µå¿ƒè·³çš„å‘é€ å¿ƒè·³çš„ç›®çš„æ˜¯ç”¨æ¥åˆ¤æ–­å¯¹ç«¯æ˜¯å¦åœ¨çº¿ï¼Œä¹Ÿå°±æ˜¯å¸®åŠ©ä½ ç¡®å®šï¼Œå¥½å‹åˆ—è¡¨é‡Œçš„è¿™äº›ä¸ªäººï¼Œæ˜¯å¦çœŸçš„åœ¨çº¿ã€‚ å¯åŠ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹heart_beat è¿™ä¸ªçº¿ç¨‹ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ç»™è‡ªå·±çš„æ‰€æœ‰å¥½å‹å‘ä¸€ä¸ªå¿ƒè·³æŠ¥æ–‡CHAT_HEART å½“å¿ƒè·³çº¿ç¨‹å‘ç°æŸä¸ªå¥½å‹ï¼Œå·²ç»å‘äº†10ä¸ªå¿ƒè·³åŒ…äº†ï¼Œä½†æ˜¯ä¸€ç›´æ²¡æœ‰ä»»ä½•æ•°æ®å“åº”ï¼Œé‚£ä¹ˆä»»åŠ¡ä»–å¤±è”äº†ï¼Œæ ‡è®°ä¸ºä¸‹çº¿ å¿ƒè·³çš„ç¡®è®¤ åœ¨è¿™é‡Œï¼Œéœ€è¦æ˜ç¡®ä¸€ç‚¹ï¼Œå¯¹å¿ƒè·³çš„ACKç®—æ˜¯å¯¹å¿ƒè·³çš„ç¡®è®¤ï¼Œä½†ï¼ŒåŒæ—¶ï¼Œç»™å¯¹æ–¹çš„ä»»ä½•æ•°æ®ï¼Œå…¶å®éƒ½æ˜¯åœ¨å‘ŠçŸ¥å¯¹æ–¹ï¼šâ€œæˆ‘è¿˜æ´»ç€â€ã€‚ å¦‚æœæ”¶åˆ°ä¸€ä¸ªå¿ƒè·³åŒ…ï¼Œé‚£ä¹ˆç»™å¯¹æ–¹å›ä¸€ä¸ªå¿ƒè·³ç¡®è®¤åŒ…CHAT_ACK","categories":[],"tags":[]},{"title":"cè¯­è¨€è¾“å‡ºé¢œè‰²","slug":"æœ‰è¶£çš„çŸ¥è¯†/cè¯­è¨€è¾“å‡ºé¢œè‰²","date":"2022-08-05T12:21:32.000Z","updated":"2022-08-05T12:30:14.259Z","comments":true,"path":"2022/08/05/æœ‰è¶£çš„çŸ¥è¯†/cè¯­è¨€è¾“å‡ºé¢œè‰²/","link":"","permalink":"https://tutouwang.vercel.app/2022/08/05/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/c%E8%AF%AD%E8%A8%80%E8%BE%93%E5%87%BA%E9%A2%9C%E8%89%B2/","excerpt":"","text":"å‘½ä»¤åç•Œé¢è¾“å‡ºé¢œè‰²åµŒå…¥å¼ç»ˆç«¯ç•Œé¢è¾“å‡ºæ—¥å¿—æ—¶ï¼Œä¸ºäº†åŒºåˆ†è¾“å‡ºçš„æœ‰ç”¨ä¿¡æ¯ã€é”™è¯¯ä¿¡æ¯ï¼Œå¯ä»¥ç»™ä¸åŒçº§åˆ«çš„è¾“å‡ºåŠ ä¸Šä¸åŒçš„é¢œè‰²ï¼Œä»¥æ–¹ä¾¿æŸ¥çœ‹ã€‚ä¸‹é¢æ˜¯é¢œè‰²çš„å®šä¹‰ 1234567891011121314151617//é¢œè‰²å®å®šä¹‰#define NONE &quot;\\033[m&quot;#define RED &quot;\\033[0;32;31m&quot;#define LIGHT_RED &quot;\\033[1;31m&quot;#define GREEN &quot;\\033[0;32;32m&quot;#define LIGHT_GREEN &quot;\\033[1;32m&quot;#define BLUE &quot;\\033[0;32;34m&quot;#define LIGHT_BLUE &quot;\\033[1;34m&quot;#define DARY_GRAY &quot;\\033[1;30m&quot;#define CYAN &quot;\\033[0;36m&quot;#define LIGHT_CYAN &quot;\\033[1;36m&quot;#define PURPLE &quot;\\033[0;35m&quot;#define LIGHT_PURPLE &quot;\\033[1;35m&quot;#define BROWN &quot;\\033[0;33m&quot;#define YELLOW &quot;\\033[1;33m&quot;#define LIGHT_GRAY &quot;\\033[0;37m&quot;#define WHITE &quot;\\033[1;37m&quot; ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹: 1printf(YELLOW&quot;this print msg is yellow!\\n&quot;NONE); è¿™æ ·æ‰“å°å‡ºæ¥çš„å­—ç¬¦ä¸²: â€œthis print msg is yellow!â€ å°±æ˜¯é»„è‰²çš„ã€‚é¢œè‰²å€¼æ”¾åœ¨æ‰“å°å†…å®¹å¼€å§‹çš„åŒå¼•å·å‰é¢ï¼Œç»“æŸæ—¶å†åŒå¼•å·åé¢åŠ ä¸ŠNONEï¼Œç”¨äºç»“æŸé¢œè‰²ä½œç”¨åŸŸ. 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#include &lt;stdio.h&gt;//é¢œè‰²å®å®šä¹‰#define NONE &quot;\\033[m&quot;#define RED &quot;\\033[0;32;31m&quot;#define LIGHT_RED &quot;\\033[1;31m&quot;#define GREEN &quot;\\033[0;32;32m&quot;#define LIGHT_GREEN &quot;\\033[1;32m&quot;#define BLUE &quot;\\033[0;32;34m&quot;#define LIGHT_BLUE &quot;\\033[1;34m&quot;#define DARY_GRAY &quot;\\033[1;30m&quot;#define CYAN &quot;\\033[0;36m&quot;#define LIGHT_CYAN &quot;\\033[1;36m&quot;#define PURPLE &quot;\\033[0;35m&quot;#define LIGHT_PURPLE &quot;\\033[1;35m&quot;#define BROWN &quot;\\033[0;33m&quot;#define YELLOW &quot;\\033[1;33m&quot;#define LIGHT_GRAY &quot;\\033[0;37m&quot;#define WHITE &quot;\\033[1;37m&quot;int main()&#123; printf(RED&quot;çº¢è‰²****************************\\n&quot;NONE); printf(LIGHT_RED&quot;äº®çº¢è‰²**************************\\n&quot;NONE); printf(GREEN&quot;ç»¿è‰²****************************\\n&quot;NONE); printf(LIGHT_GREEN&quot;äº®ç»¿è‰²****************************\\n&quot;NONE); printf(BLUE&quot;è“è‰²******************************\\n&quot;NONE); printf(LIGHT_BLUE&quot;äº®è“è‰²****************************\\n&quot;NONE); printf(DARY_GRAY&quot;ç°è‰²******************************\\n&quot;NONE); printf(CYAN&quot;é’è‰²*****************************\\n&quot;NONE); printf(LIGHT_CYAN&quot;äº®é’è‰²****************************\\n&quot;NONE); printf(PURPLE&quot;ç´«è‰²*****************************\\n&quot;NONE); printf(LIGHT_PURPLE&quot;äº®ç´«è‰²****************************\\n&quot;NONE); printf(BROWN&quot;æ£•è‰²*****************************\\n&quot;NONE); printf(YELLOW&quot;é»„è‰²****************************\\n&quot;NONE); printf(LIGHT_GRAY&quot;äº®ç°è‰²*****************************\\n&quot;NONE); printf(WHITE&quot;ç™½è‰²****************************\\n&quot;NONE); return 0;&#125; è¿è¡Œç»“æœ","categories":[{"name":"æœ‰è¶£çš„çŸ¥è¯†","slug":"æœ‰è¶£çš„çŸ¥è¯†","permalink":"https://tutouwang.vercel.app/categories/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[]},{"title":"SmartPointeræ™ºèƒ½æŒ‡é’ˆ","slug":"OOP/SmartPointeræ™ºèƒ½æŒ‡é’ˆ","date":"2022-08-02T01:08:22.000Z","updated":"2022-08-03T02:28:55.604Z","comments":true,"path":"2022/08/02/OOP/SmartPointeræ™ºèƒ½æŒ‡é’ˆ/","link":"","permalink":"https://tutouwang.vercel.app/2022/08/02/OOP/SmartPointer%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/","excerpt":"","text":"å…³äºæ™ºèƒ½æŒ‡é’ˆ åœ¨C++11ä¸­é€šè¿‡å¼•å…¥æ™ºèƒ½æŒ‡é’ˆçš„æ¦‚å¿µï¼Œä½¿å¾—C++ç¨‹åºå‘˜ä¸éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ æ™ºèƒ½æŒ‡é’ˆçš„ç§ç±» std::unique_ptr (ç‹¬å æŒ‡é’ˆ) std::shared_ptr (è®¡æ•°æŒ‡é’ˆ) std::weak_ptr (shared_ptr çš„è¡¥å……) æ³¨æ„ std::auto_ptr å·²åºŸå¼ƒ æ™ºèƒ½æŒ‡é’ˆæ¦‚è¿° C++çš„æŒ‡é’ˆåŒ…æ‹¬ä¸¤ç§ åŸå§‹æŒ‡é’ˆ (raw pointer) æ™ºèƒ½æŒ‡é’ˆ æ™ºèƒ½æŒ‡é’ˆæ˜¯åŸå§‹æŒ‡é’ˆçš„å°è£…ï¼Œå…¶ä¼˜ç‚¹æ˜¯ä¼šè‡ªåŠ¨åˆ†é…å†…å­˜ï¼Œä¸ç”¨æ‹…å¿ƒæ½œåœ¨çš„å†…å­˜æ³„éœ² æ™ºèƒ½æŒ‡é’ˆä¸åŸå§‹æŒ‡é’ˆ å¹¶ä¸æ˜¯æ‰€æœ‰çš„æŒ‡é’ˆéƒ½å¯ä»¥å°è£…æˆæ™ºèƒ½æŒ‡é’ˆï¼Œå¾ˆå¤šæ—¶å€™åŸå§‹æŒ‡é’ˆè¦æ›´æ–¹ä¾¿ å„ç§æŒ‡é’ˆä¸­ï¼Œæœ€å¸¸ç”¨çš„æ˜¯è£¸æŒ‡é’ˆï¼Œå…¶æ¬¡æ˜¯unique_ptrå’Œshared_ptr weak_ptræ˜¯share_ptrçš„ä¸€ä¸ªè¡¥å……åº”ç”¨åœºæ™¯è¾ƒå°‘ æ™ºèƒ½æŒ‡é’ˆä¸Rustçš„å†…å­˜å®‰å…¨ æ™ºèƒ½æŒ‡é’ˆåªè§£å†³ä¸€éƒ¨åˆ†é—®é¢˜ï¼Œå³ç‹¬å &#x2F;å…±äº«æ‰€æœ‰æƒæŒ‡é’ˆçš„é‡Šæ”¾ã€ä¼ è¾“ æ™ºèƒ½æŒ‡é’ˆæ²¡æœ‰ä»æ ¹æœ¬ä¸Šè§£å†³C++å†…å­˜å®‰å…¨é—®é¢˜ï¼Œä¸åŠ ä»¥æ³¨æ„ä¾ç„¶ä¼šé€ æˆå†…å­˜å®‰å…¨é—®é¢˜ ç‹¬å æŒ‡é’ˆ: unique_ptr unique_ptr åœ¨ä»»ä½•ç»™å®šçš„æ—¶åˆ»ï¼Œåªèƒ½æœ‰ä¸€ä¸ªæŒ‡é’ˆç®¡ç†å†…å­˜ å½“æŒ‡é’ˆè¶…å‡ºä½œç”¨åŸŸæ—¶ï¼Œå†…å­˜è‡ªåŠ¨é‡Šæ”¾ è¯¥ç±»å‹æŒ‡é’ˆä¸å¯Copy,åªå¯ä»¥Move åˆ›å»ºæ–¹å¼ ä¸‰ç§åˆ›å»ºæ–¹å¼ é€šè¿‡å·²æœ‰çš„è£¸æŒ‡é’ˆåˆ›å»º (å»ºè®®è®¾ç½®æˆç©ºé”€æ¯æ‰) é€šè¿‡newæ¥åˆ›å»º (ä¸ç¬¬ä¸€ç§æ²¡æœ‰åŒºåˆ«) é€šè¿‡std::make_uniqueåˆ›å»º (æ¨è) unique_ptrå¯ä»¥é€šè¿‡get()è·å–åœ°å€ unique_ptrå®ç°-&gt;ä¸* å¯ä»¥é€šè¿‡-&gt;è°ƒç”¨æˆå‘˜å‡½æ•° å¯ä»¥é€šè¿‡*è°ƒç”¨dereferencing ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156/************************************************************************* &gt; File Name: unique_ptr_test.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´08æœˆ02æ—¥ æ˜ŸæœŸäºŒ 09æ—¶44åˆ†12ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;memory&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test1)class Cat &#123;public : Cat(string Name); Cat() = default; void cat_info() const &#123; cout &lt;&lt; &quot;cat info name : &quot; &lt;&lt; name &lt;&lt; endl; &#125; string get_name() const &#123; return this-&gt;name; &#125; void set_cat_name(const string &amp;name) &#123; this-&gt;name = name; &#125; ~Cat();private : string name&#123;&quot;ttw&quot;&#125;;&#125;;Cat::Cat(string Name) : name(Name) &#123; cout &lt;&lt; &quot;constructor of Cat : &quot; &lt;&lt; name &lt;&lt; endl;&#125;Cat::~Cat() &#123; cout &lt;&lt; &quot;Destructor of Cat : &quot; &lt;&lt; name &lt;&lt; endl;&#125;int main() &#123; /* Cat c1(&quot;ok&quot;); c1.cat_info(); &#123; // ä½œç”¨åŸŸç»“æŸè‡ªåŠ¨é”€æ¯ Cat c1&#123;&quot;OK&quot;&#125;; c1.cat_info(); &#125; */ // åŸç”Ÿ Cat *c2 = new Cat(&quot;no&quot;); c2-&gt;cat_info(); delete c2; &#123; Cat *c2 = new Cat(&quot;no_no&quot;); c2-&gt;cat_info(); delete c2; &#125; return 0;&#125;ENDS(test1)BEGINS(test2)class Cat &#123;public : Cat(string Name); Cat() = default; void cat_info() const &#123; cout &lt;&lt; this &lt;&lt; &quot; : cat info name : &quot; &lt;&lt; name &lt;&lt; endl; &#125; string get_name() const &#123; return this-&gt;name; &#125; void set_cat_name(const string &amp;name) &#123; this-&gt;name = name; &#125; ~Cat();private : string name&#123;&quot;ttw&quot;&#125;;&#125;;Cat::Cat(string Name) : name(Name) &#123; cout &lt;&lt; this &lt;&lt; &quot; : constructor of Cat : &quot; &lt;&lt; name &lt;&lt; endl;&#125;Cat::~Cat() &#123; cout &lt;&lt; this &lt;&lt; &quot; : Destructor of Cat : &quot; &lt;&lt; name &lt;&lt; endl;&#125;int main() &#123; Cat *c1 = new Cat(&quot;c1&quot;); unique_ptr&lt;Cat&gt; u_c1(c1); /* // å»ºè®®é”€æ¯ Cat *c1 = new Cat(&quot;&quot;); å¦åˆ™å¦‚ä¸‹ // c1 è¿˜èƒ½ç”¨ä¹ˆ? å¯ä»¥ç”¨! c1-&gt;cat_info(); u_c1-&gt;cat_info(); c1-&gt;set_cat_name(&quot;ok&quot;); u_c1-&gt;cat_info(); */ //delete c1; // c1 = nullptr; u_c1-&gt;cat_info(); cout &lt;&lt; &quot;------------------ åˆ†éš”ç¬¦ ------------------------&quot; &lt;&lt; endl; // ç¬¬äºŒç§ã€new unique_ptr&lt;Cat&gt; u_c2(new Cat(&quot;c2&quot;)); unique_ptr&lt;int&gt; u_i_p2&#123;new int(100)&#125;; u_c2-&gt;cat_info(); u_c2-&gt;set_cat_name(&quot;u_c2&quot;); u_c2-&gt;cat_info(); cout &lt;&lt; *u_i_p2 &lt;&lt; endl; cout &lt;&lt; &quot;int address : &quot; &lt;&lt; u_i_p2.get() &lt;&lt; endl; cout &lt;&lt; &quot;Cat c2 address : &quot; &lt;&lt; u_c2.get() &lt;&lt; endl; cout &lt;&lt; &quot;------------------ åˆ†éš”ç¬¦ ------------------------&quot; &lt;&lt; endl; // ç¬¬ä¸‰ç§ã€æ¨è // unique_ptr&lt;Cat&gt; p = make_unique&lt;Cat&gt;(); unique_ptr&lt;Cat&gt; u_c3 = make_unique&lt;Cat&gt;(); unique_ptr&lt;int&gt; u_i_p3 = make_unique&lt;int&gt;(200); u_c3-&gt;cat_info(); u_c3-&gt;set_cat_name(&quot;u_c3&quot;); u_c3-&gt;cat_info(); cout &lt;&lt; *u_i_p3 &lt;&lt; endl; cout &lt;&lt; &quot;int address : &quot; &lt;&lt; u_i_p3.get() &lt;&lt; endl; cout &lt;&lt; &quot;Cat c3 address : &quot; &lt;&lt; u_c3.get() &lt;&lt; endl; // get å’Œ å¸¸é‡ç±»å‹ return 0;&#125;ENDS(test2)int main() &#123; // test1::main(); test2::main(); return 0;&#125; unique_pträ¸å‡½æ•°è°ƒç”¨ unique_ptræ˜¯ä¸å¯Copy,åªå¯ä»¥Move åœ¨åšå‡½æ•°å‚æ•°æˆ–æ˜¯è¿”å›å€¼ä¸­ä¸€å®šæ³¨æ„æ‰€æœ‰æƒ å‡½æ•°è°ƒç”¨ä¸unique_ptræ³¨æ„äº‹é¡¹ Passing by value éœ€è¦ç”¨std::moveæ¥è½¬ç§»å†…å­˜æƒé™ å¦‚æœå‚æ•°å€¼ä¼ å…¥std::make_uniqueè¯­å¥ è‡ªåŠ¨è½¬ä¸ºmove Passing by reference(ä¼ å¼•ç”¨) å¦‚æœè®¾ç½®å‚æ•°ä¸ºconståˆ™ä¸èƒ½æ”¹å˜æŒ‡å‘ æ¯”å¦‚è¯´reset() reset()æ–¹æ³•ä¸ºæ™ºèƒ½æŒ‡é’ˆæ¸…ç©ºæ–¹æ³• Return by value æŒ‡å‘ä¸€ä¸ªlocal object å¯ä»¥ç”¨ä½œé“¾å¼å‡½æ•° è®¡æ•°æŒ‡é’ˆ: shared_ptrPs:çœ‹çœ‹ææ„å‡ æ¬¡ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ï¼ é”€æ¯æ˜¯æŒ‰ç…§å†…å­˜æ¥çš„ã€å®ƒæ•°æ®åªæœ‰ä¸€å¥—åªä¼šé”€æ¯ä¸€æ¬¡ shared_ptrè®¡æ•°æŒ‡é’ˆåˆç§°å…±äº«æŒ‡é’ˆ ä¸unique_pträ¸åŒçš„æ˜¯å®ƒå¯ä»¥å…±äº«æ•°æ®çš„ shared_ptråˆ›å»ºäº†ä¸€ä¸ªè®¡æ•°å™¨ä¸ç±»å¯¹è±¡æ‰€æŒ‡çš„å†…å­˜ç›¸å…³è” Copyåˆ™è®¡æ•°å™¨åŠ ä¸€ï¼Œé”€æ¯åˆ™è®¡æ•°å™¨å‡ä¸€ apiä¸ºuse_count() shared_pträ¸å‡½æ•° shared_ptr passed by value copy å‡½æ•°å†…éƒ¨è®¡æ•°å™¨åŠ ä¸€ shared_ptr passed by ref constè¡¨ç¤ºä¸å¯æ”¹å˜æŒ‡å‘ retuming by value é“¾å¼è°ƒç”¨ ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140/************************************************************************* &gt; File Name: shared_ptr_test.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´08æœˆ02æ—¥ æ˜ŸæœŸäºŒ 18æ—¶01åˆ†01ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;memory&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(ttw) class Cat &#123;public : Cat(string Name); Cat() = default; void cat_info() const &#123; cout &lt;&lt; this &lt;&lt; &quot; : cat info name : &quot; &lt;&lt; name &lt;&lt; endl; &#125; string get_name() const &#123; return this-&gt;name; &#125; void set_cat_name(const string &amp;name) &#123; this-&gt;name = name; &#125; ~Cat();private : string name&#123;&quot;ttw&quot;&#125;;&#125;;Cat::Cat(string Name) : name(Name) &#123; cout &lt;&lt; this &lt;&lt; &quot; : constructor of Cat : &quot; &lt;&lt; name &lt;&lt; endl;&#125;Cat::~Cat() &#123; cout &lt;&lt; this &lt;&lt; &quot; : Destructor of Cat : &quot; &lt;&lt; name &lt;&lt; endl; &#125;ENDS(ttw)BEGINS(test1) int main() &#123; // å¸¸é‡ç±»å‹ shared_ptr&lt;int&gt; s_p1 = make_shared&lt;int&gt;(10); // shared_ptr&lt;int&gt; s_p1 = make_shared&lt;int&gt;(new int (10)); cout &lt;&lt; &quot;s_p1 value : &quot; &lt;&lt; *s_p1 &lt;&lt; endl; cout &lt;&lt; &quot;s_p1 use count : &quot; &lt;&lt; s_p1.use_count() &lt;&lt; endl; // copy shared_ptr&lt;int&gt; s_p2 = s_p1; cout &lt;&lt; &quot;s_p2 value : &quot; &lt;&lt; *s_p2 &lt;&lt; endl; cout &lt;&lt; &quot;s_p2 use count : &quot; &lt;&lt; s_p2.use_count() &lt;&lt; endl; *s_p2 = 30; cout &lt;&lt; &quot;*s_p2 = 30; out s_p1 value : &quot; &lt;&lt; *s_p1 &lt;&lt; endl; cout &lt;&lt; &quot;*s_p2 = 30; out s_p2 value : &quot; &lt;&lt; *s_p2 &lt;&lt; endl; shared_ptr&lt;int&gt; s_p3 = s_p1; s_p1 = nullptr; cout &lt;&lt; &quot;s_p1 use_count : &quot; &lt;&lt; s_p1.use_count() &lt;&lt; endl; cout &lt;&lt; &quot;s_p2 use_count : &quot; &lt;&lt; s_p2.use_count() &lt;&lt; endl; cout &lt;&lt; &quot;s_p3 use_count : &quot; &lt;&lt; s_p3.use_count() &lt;&lt; endl; cout &lt;&lt; &quot;------------------- åˆ†éš”ç¬¦ -------------------------&quot; &lt;&lt; endl; // è‡ªå®šä¹‰ç±»å‹ shared_ptr&lt;ttw::Cat&gt; c_p1 = make_shared&lt;ttw::Cat&gt;(); cout &lt;&lt; &quot;c_p1 use-count : &quot; &lt;&lt; c_p1.use_count() &lt;&lt; endl; shared_ptr&lt;ttw::Cat&gt; c_p2 = c_p1; shared_ptr&lt;ttw::Cat&gt; c_p3 = c_p1; cout &lt;&lt; &quot;c_p1 use-count : &quot; &lt;&lt; c_p1.use_count() &lt;&lt; endl; cout &lt;&lt; &quot;c_p2 use-count : &quot; &lt;&lt; c_p2.use_count() &lt;&lt; endl; cout &lt;&lt; &quot;c_p3 use-count : &quot; &lt;&lt; c_p3.use_count() &lt;&lt; endl; c_p1.reset(); cout &lt;&lt; &quot;reset c_p1 use-count : &quot; &lt;&lt; c_p1.use_count() &lt;&lt; endl; cout &lt;&lt; &quot; c_p2 use-count : &quot; &lt;&lt; c_p2.use_count() &lt;&lt; endl; cout &lt;&lt; &quot; c_p3 use-count : &quot; &lt;&lt; c_p3.use_count() &lt;&lt; endl; return 0;&#125;ENDS(test1)BEGINS(test2)void cat_by_value(shared_ptr&lt;ttw::Cat&gt; cat) &#123; cout &lt;&lt; cat-&gt;get_name() &lt;&lt; endl; cat-&gt;set_cat_name(&quot;qwe&quot;); cout &lt;&lt; &quot;func use count : &quot; &lt;&lt; cat.use_count() &lt;&lt; endl; return ;&#125;void cat_by_ref(const shared_ptr&lt;ttw::Cat&gt; &amp;cat) &#123; cout &lt;&lt; cat-&gt;get_name() &lt;&lt; endl; // cat.reset(); cout &lt;&lt; &quot;func use count : &quot; &lt;&lt; cat.use_count() &lt;&lt; endl; return ;&#125;int main() &#123; // Passing by value shared_ptr&lt;ttw::Cat&gt; c_p1 = make_shared&lt;ttw::Cat&gt;(&quot;dog&quot;); // å°±ä¸ç”¨æƒ³unique_ptr moveäº† cat_by_value(c_p1); cout &lt;&lt; &quot;c_p1 use count : &quot; &lt;&lt; c_p1.use_count() &lt;&lt; endl; c_p1-&gt;cat_info(); // Passing by reference cat_by_ref(c_p1); cout &lt;&lt; &quot;c_p1 use count : &quot; &lt;&lt; c_p1.use_count() &lt;&lt; endl; return 0;&#125;ENDS(test2)int main() &#123; // shared_ptr å¸¸é‡ç±»å‹ã€è‡ªå®šä¹‰ç±»å‹ // test1::main(); test2::main(); return 0;&#125; shared_pträ¸unique_ptr ä¸èƒ½å°†shared_ptrè½¬æ¢ä¸ºunique_ptr unique_ptrå¯ä»¥è½¬æ¢ä¸ºshared_ptr é€šè¿‡std::move å¸¸è§çš„è®¾è®¡æ¨¡å¼ å°†ä½ çš„å‡½æ•°è¿”å›unique_ptræ˜¯ä¸€ç§å¸¸è§çš„è®¾è®¡æ¨¡å¼ï¼Œè¿™æ ·å¯ä»¥æé«˜ä»£ç çš„å¤ç”¨åº¦ï¼Œä½ å¯ä»¥éšæ—¶æ”¹å˜ä¸ºshared_ptr unique_pträ¸shared_pträ»£ç å®ç°1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283/************************************************************************* &gt; File Name: shared_ptr_test.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´08æœˆ02æ—¥ æ˜ŸæœŸäºŒ 18æ—¶01åˆ†01ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;memory&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(ttw) class Cat &#123;public : Cat(string Name); Cat() = default; void cat_info() const &#123; cout &lt;&lt; this &lt;&lt; &quot; : cat info name : &quot; &lt;&lt; name &lt;&lt; endl; &#125; string get_name() const &#123; return this-&gt;name; &#125; void set_cat_name(const string &amp;name) &#123; this-&gt;name = name; &#125; ~Cat();private : string name&#123;&quot;ttw&quot;&#125;;&#125;;Cat::Cat(string Name) : name(Name) &#123; cout &lt;&lt; this &lt;&lt; &quot; : constructor of Cat : &quot; &lt;&lt; name &lt;&lt; endl;&#125;Cat::~Cat() &#123; cout &lt;&lt; this &lt;&lt; &quot; : Destructor of Cat : &quot; &lt;&lt; name &lt;&lt; endl; &#125;ENDS(ttw)BEGINS(test1) unique_ptr&lt;ttw::Cat&gt; get_unique_ptr() &#123; unique_ptr&lt;ttw::Cat&gt; cat_p = make_unique&lt;ttw::Cat&gt;(&quot;local cat&quot;); return cat_p;&#125;int main() &#123; unique_ptr&lt;ttw::Cat&gt; c_p1 = make_unique&lt;ttw::Cat&gt;(&quot;qwe&quot;); shared_ptr&lt;ttw::Cat&gt; c_p2 = move(c_p1); // cout &lt;&lt; &quot;c_p1(unioque) use count : &quot; &lt;&lt; c_p1.use_count(); cout &lt;&lt; &quot;c_p2(shared) use count : &quot; &lt;&lt; c_p2.use_count() &lt;&lt; endl; // func shared_ptr&lt;ttw::Cat&gt; c_p3 = get_unique_ptr(); // è½¬æ¢æˆåŠŸ if(c_p3) &#123; c_p3-&gt;cat_info(); cout &lt;&lt; &quot;c_p3(shared) use count : &quot; &lt;&lt; c_p3.use_count() &lt;&lt; endl; &#125; return 0;&#125;ENDS(test1)int main() &#123; test1::main(); return 0;&#125; weak_ptr(å¼±å¼•ç”¨) weak-ptrå¹¶ä¸æ‹¥æœ‰æ‰€æœ‰æƒ å¹¶ä¸èƒ½è°ƒç”¨-&gt;å’Œè§£å¼•ç”¨* weak_pträ¸ºä»€ä¹ˆä¼šå­˜åœ¨ Aç±»ä¸­æœ‰ä¸€ä¸ªéœ€æ±‚éœ€è¦å­˜å‚¨å…¶ä»–Aç±»å¯¹è±¡çš„ä¿¡æ¯ å¦‚æœä½¿ç”¨shared_ptrï¼Œé‚£ä¹ˆåœ¨é”€æ¯æ—¶ä¼šé‡åˆ°å¾ªç¯ä¾èµ–é—®é¢˜(cyclic dependency problem) æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œéœ€è¦ç”¨ä¸€ä¸ªä¸éœ€è¦æ‹¥æœ‰æ‰€æœ‰æƒçš„æŒ‡é’ˆæ¥æ ‡è®°è¯¥åŒç±»å¯¹è±¡ weak_ptrå¯ä»¥é€šè¿‡lock()å‡½æ•°æ¥æå‡ä¸ºshared_ptr(ç±»å‹è½¬æ¢) ä»£ç å®ç°1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889/************************************************************************* &gt; File Name: weak_ptr_test.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´08æœˆ02æ—¥ æ˜ŸæœŸäºŒ 09æ—¶44åˆ†12ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;memory&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(ttw) class Cat &#123;public : Cat(string Name); Cat() = default; void cat_info() const &#123; cout &lt;&lt; this &lt;&lt; &quot; : cat info name : &quot; &lt;&lt; name &lt;&lt; endl; &#125; string get_name() const &#123; return this-&gt;name; &#125; void set_cat_name(const string &amp;name) &#123; this-&gt;name = name; &#125; void set_friend(shared_ptr&lt;Cat&gt; c) &#123; m_friend = c; &#125; ~Cat();private : string name&#123;&quot;ttw&quot;&#125;; // shared_ptr&lt;Cat&gt; m_friend; // ä¿®æ”¹weak weak_ptr&lt;Cat&gt; m_friend;&#125;;Cat::Cat(string Name) : name(Name) &#123; cout &lt;&lt; this &lt;&lt; &quot; : constructor of Cat : &quot; &lt;&lt; name &lt;&lt; endl;&#125;Cat::~Cat() &#123; cout &lt;&lt; this &lt;&lt; &quot; : Destructor of Cat : &quot; &lt;&lt; name &lt;&lt; endl; &#125;ENDS(ttw)BEGINS(test1) int main() &#123; shared_ptr&lt;ttw::Cat&gt; s_p1 = make_shared&lt;ttw::Cat&gt;(); weak_ptr&lt;ttw::Cat&gt; w_p1(s_p1); // use count cout &lt;&lt; &quot;w_p1 use count : &quot; &lt;&lt; w_p1.use_count() &lt;&lt; endl; cout &lt;&lt; &quot;s_p1 use count : &quot; &lt;&lt; s_p1.use_count() &lt;&lt; endl; shared_ptr&lt;ttw::Cat&gt; s_p2 = w_p1.lock(); cout &lt;&lt; &quot;w_p1 use count : &quot; &lt;&lt; w_p1.use_count() &lt;&lt; endl; cout &lt;&lt; &quot;s_p1 use count : &quot; &lt;&lt; s_p1.use_count() &lt;&lt; endl; cout &lt;&lt; &quot;s_p2 use count : &quot; &lt;&lt; s_p2.use_count() &lt;&lt; endl; cout &lt;&lt; &quot;-------------------- åˆ†å‰²çº¿ --------------------------&quot; &lt;&lt; endl; // ç¯å½¢å¼•ç”¨é—®é¢˜ shared_ptr&lt;ttw::Cat&gt; c3 = make_shared&lt;ttw::Cat&gt;(&quot;c3&quot;); shared_ptr&lt;ttw::Cat&gt; c4 = make_shared&lt;ttw::Cat&gt;(&quot;c4&quot;); c3-&gt;set_friend(c3); c4-&gt;set_friend(c4); return 0;&#125;ENDS(test1)int main() &#123; test1::main(); return 0;&#125;","categories":[{"name":"OOP","slug":"OOP","permalink":"https://tutouwang.vercel.app/categories/OOP/"}],"tags":[]},{"title":"çº¿ç¨‹æ± ","slug":"OOP/çº¿ç¨‹æ± ","date":"2022-07-26T06:07:54.000Z","updated":"2022-09-22T08:19:59.111Z","comments":true,"path":"2022/07/26/OOP/çº¿ç¨‹æ± /","link":"","permalink":"https://tutouwang.vercel.app/2022/07/26/OOP/%E7%BA%BF%E7%A8%8B%E6%B1%A0/","excerpt":"","text":"å¤šçº¿ç¨‹ç¨‹åºè®¾è®¡åŠŸèƒ½å‡½æ•°å’Œçº¿ç¨‹å…¥å£å‡½æ•°è¦åˆ†å¼€å°±ä¼šæ»¡è¶³é«˜å†…èšä½è€¦åˆçš„æ€æƒ³ ä¸´ç•Œèµ„æºï¼šå¤§å®¶éƒ½èƒ½è®¿é—®åˆ°çš„èµ„æº 12345678// å…¨å±€å˜é‡ int ans = 0; ã€std::mutex m_mutex;// åŠ é”çš„åœ°æ–¹å°±æ˜¯ä¸´ç•ŒåŒº// æŠ¢å èƒ¡äº’æ–¥é”, å¦‚æœæŠ¢å ä¸Šäº†çš„è¯æ‰å¯¹ans + 1, å‡ºäº†ä½œç”¨åŸŸå°±ä¼šå‘—é‡Šæ”¾unique_lock&lt;mutex&gt; lock(m_mutex);ans += is_prime(i);lock.unlock();// å¯¹è¿™ç§åŠ æ“ä½œçš„æ—¶å€™,æœ‰å¯èƒ½ä¼šå‘ç”Ÿå¤šçº¿ç¨‹æŠ¢å èµ„æºçš„æ—¶å€™çš„æ—¶å€™å¯¼è‡´æ•°æ®ä¸æ­£ç¡®// ä¸´ç•Œèµ„æº 1g++ **.cpp -pthread 500Wä¸ªæ•°æŸ¥çœ‹ç´ æ•°ä¸ªæ•° prime_count_test_15s::main(); prime_count_test1_2m10s::main(); prime_count_test2_14s::main(); 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173/************************************************************************* &gt; File Name: 1.thredd_pool.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ25æ—¥ æ˜ŸæœŸä¸€ 18æ—¶08åˆ†16ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;thread&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125;BEGINS(thread_usage)void func() &#123; cout &lt;&lt; &quot;hello world&quot; &lt;&lt; endl;&#125;void print(int a, int b) &#123; cout &lt;&lt; a &lt;&lt; &quot; &quot; &lt;&lt; b &lt;&lt; endl; return ;&#125;int main() &#123; // çº¿ç¨‹ thread t1(func); t1.join(); thread t2(print, 1, 2); t2.join(); return 0;&#125;ENDS(thread_usage)BEGINS(prime_count_test_15s)bool is_prime(int x)&#123; for(int i = 2; i &lt;= x / i; i++) &#123; if(x % i == 0) return false; &#125; return true;&#125;int prime_count(int l, int r) &#123; int ans = 0; for(int i = l; i &lt;= r; i++) &#123; ans += is_prime(i); &#125; return ans;&#125;// ç»™å¤šçº¿ç¨‹æ‰§è¡Œçš„å…¥å£å‡½æ•°void worker(int l, int r, int &amp;ret) &#123; cout &lt;&lt; this_thread::get_id() &lt;&lt; &quot;begin&quot; &lt;&lt; endl; ret = prime_count(l, r); cout &lt;&lt; this_thread::get_id() &lt;&lt; &quot;done&quot; &lt;&lt; endl;&#125;int main() &#123; #define batch 5000000 thread *t[10]; int ret[10]; for(int i = 0,j = 1; i &lt; 10; i++, j += batch) &#123; t[i] = new thread(worker, j, j + batch - 1, ref(ret[i])); &#125; for (auto x : t) x-&gt;join(); int ans = 0; for(auto x : ret) ans += x; cout &lt;&lt; ans &lt;&lt; endl; for(auto x : t) delete x; #undef batch return 0;&#125;ENDS(prime_count_test)#include &lt;mutex&gt;BEGINS(prime_count_test1_2m10s)int ans = 0;std::mutex m_mutex;bool is_prime(int x)&#123; for(int i = 2; i &lt;= x / i; i++) &#123; if(x % i == 0) return false; &#125; return true;&#125;void prime_count(int l, int r) &#123; int ans = 0; for(int i = l; i &lt;= r; i++) &#123; // åŠ é”çš„åœ°æ–¹å°±æ˜¯ä¸´ç•ŒåŒº // æŠ¢å èƒ¡äº’æ–¥é”, å¦‚æœæŠ¢å ä¸Šäº†çš„è¯æ‰å¯¹ans + 1, å‡ºäº†ä½œç”¨åŸŸå°±ä¼šå‘—é‡Šæ”¾ unique_lock&lt;mutex&gt; lock(m_mutex); ans += is_prime(i); lock.unlock(); // å¯¹è¿™ç§åŠ æ“ä½œçš„æ—¶å€™,æœ‰å¯èƒ½ä¼šå‘ç”Ÿå¤šçº¿ç¨‹æŠ¢å èµ„æºçš„æ—¶å€™çš„æ—¶å€™å¯¼è‡´æ•°æ®ä¸æ­£ç¡® // ä¸´ç•Œèµ„æº &#125; return ;&#125;int main() &#123; #define batch 5000000 thread *t[10]; for(int i = 0,j = 1; i &lt; 10; i++, j += batch) &#123; t[i] = new thread(prime_count, j, j + batch - 1); &#125; for (auto x : t) x-&gt;join(); for(auto x : t) delete x; cout &lt;&lt; ans &lt;&lt; endl; #undef batch return 0;&#125;ENDS(prime_count_test1)// ç¬¬äºŒç§åŠ é”BEGINS(prime_count_test2_14s)int ans = 0;std::mutex m_mutex;bool is_prime(int x)&#123; for(int i = 2; i &lt;= x / i; i++) &#123; if(x % i == 0) return false; &#125; return true;&#125;void prime_count(int l, int r) &#123; int ans = 0; for(int i = l; i &lt;= r; i++) &#123; int ret = is_prime(i); __sync_fetch_and_add(&amp;ans, ret); &#125; return ;&#125;int main() &#123; #define batch 5000000 thread *t[10]; for(int i = 0,j = 1; i &lt; 10; i++, j += batch) &#123; t[i] = new thread(prime_count, j, j + batch - 1); &#125; for (auto x : t) x-&gt;join(); for(auto x : t) delete x; cout &lt;&lt; ans &lt;&lt; endl; #undef batch return 0;&#125;ENDS(prime_count_test1)int main() &#123; // thread_usage::main(); // prime_count_test_15s::main(); // prime_count_test1_2m10s::main(); prime_count_test2_14s::main(); return 0;&#125; çº¿ç¨‹æ± (ç®€ç‰ˆ)-ä»£ç å®ç°è¿›ç¨‹ï¼šè¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€åŸºæœ¬å•ä½ è¿›ç¨‹ç”³è¯·ä¸€ä»½çº¿ç¨‹å°±å 8mçš„ç©ºé—´ï¼Œè¿›ç¨‹åˆç”³è¯·ä¸€ä»½çº¿ç¨‹åˆå 8mçš„ç©ºé—´ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175/************************************************************************* &gt; File Name: 1.thredd_pool.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ25æ—¥ æ˜ŸæœŸä¸€ 18æ—¶08åˆ†16ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;thread&gt;using namespace std;#include &lt;vector&gt;#include &lt;unordered_map&gt;#include &lt;queue&gt;#include &lt;condition_variable&gt;BEGINS(thread_pool_test)// å‡½æ•°æ–¹æ³•ç»‘å®šåˆ°ä¸€èµ·çš„class Task &#123;public : template&lt;typename FUN_T, typename ...ARGS&gt; Task(FUN_T func, ARGS... args) &#123; // ç”¨forwardå‘ä¸‹ä¼ æ—¶å€™å¯ä»¥ä¿è¯å‡†ç¡®çš„å€¼ä¼ é€’ this-&gt;func = bind(func, forward&lt;ARGS&gt;(args)...); // å³å€¼ä¼ é€’æ—¶å€™å¯èƒ½å°±ä¼šå‡ºé”™ // this-&gt;func = bind(func, fargs...); &#125; void run() &#123; func(); return ; &#125;private : function&lt;void()&gt; func;&#125;;// çº¿ç¨‹æ± ç±»class ThreadPool &#123;public : ThreadPool(int n = 1) : thread_size(n), threads(n), starting(false) &#123; this-&gt;start(); &#125; // å–ä»»åŠ¡ã€æ‰§è¡Œä»»åŠ¡ void worker() &#123; auto id = this_thread::get_id(); running[id] = true; while(running[id]) &#123; Task *t = get_task(); t-&gt;run(); delete t; &#125; &#125; void start() &#123; if(starting == true) return ; for(int i = 0; i &lt; thread_size; i++) &#123; threads[i] = new thread(&amp;ThreadPool::worker, this); &#125; starting = true; return ; &#125; void stop() &#123; if(starting == false) return ; // æ·»åŠ æ¯’è¯ä»»åŠ¡ for(int i = 0; i &lt; threads.size(); i++) &#123; this-&gt;add_task(&amp;ThreadPool::stop_running, this); &#125; for(int i = 0; i &lt; threads.size(); i++) &#123; threads[i]-&gt;join(); &#125; for(int i = 0; i &lt; threads.size(); i++) &#123; delete threads[i]; threads[i] = nullptr; &#125; starting = false; return ; &#125; template&lt;typename FUNC_T, typename ...ARGS&gt; void add_task(FUNC_T func, ARGS... args) &#123; unique_lock&lt;mutex&gt; lock(m_mutex); tasks.push(new Task(func, forward&lt;ARGS&gt;(args)...)); // é€šçŸ¥æ‰€æœ‰ç­‰å¾…ç€ä»»åŠ¡çš„çº¿ç¨‹ m_cond.notify_one(); return ; &#125; ~ThreadPool() &#123; this-&gt;stop(); while(!tasks.empty()) &#123; delete tasks.front(); tasks.pop(); &#125; return ; &#125;private : Task *get_task() &#123; unique_lock&lt;mutex&gt; lock(m_mutex); // é˜²æ­¢è™šå‡å”¤é†’ wait ä¼šè‡ªåŠ¨é‡Šæ”¾é” while (tasks.empty()) m_cond.wait(lock); Task *t = tasks.front(); tasks.pop(); return t; &#125; // æ¯’è¯ä»»åŠ¡ void stop_running() &#123; auto id = this_thread::get_id(); running[id] = false; return ; &#125; bool starting; int thread_size; vector&lt;thread *&gt; threads; unordered_map&lt;decltype(this_thread::get_id()), bool&gt; running; queue&lt;Task *&gt; tasks; std::condition_variable m_cond; std::mutex m_mutex;&#125;;bool is_prime(int x)&#123; for(int i = 2; i &lt;= x / i; i++) &#123; if(x % i == 0) return false; &#125; return true;&#125;int prime_count(int l, int r) &#123; int ans = 0; for(int i = l; i &lt;= r; i++) &#123; ans += is_prime(i); &#125; return ans;&#125;// ç»™å¤šçº¿ç¨‹æ‰§è¡Œçš„å…¥å£å‡½æ•°void worker(int l, int r, int &amp;ret) &#123; cout &lt;&lt; this_thread::get_id() &lt;&lt; &quot;begin&quot; &lt;&lt; endl; ret = prime_count(l, r); cout &lt;&lt; this_thread::get_id() &lt;&lt; &quot;done&quot; &lt;&lt; endl;&#125;int main() &#123; ThreadPool tp(5); #define batch 5000000 thread *t[10]; int ret[10]; for(int i = 0,j = 1; i &lt; 10; i++, j += batch) &#123; tp.add_task(worker, j, j + batch - 1, ref(ret[i])); &#125; tp.stop(); int ans = 0; for(auto x : ret) ans +=x ; cout &lt;&lt; ans &lt;&lt; endl; #undef batch return 0;&#125;ENDS(thread_pool_test)int main() &#123; thread_pool_test::main(); return 0;&#125; çº¿ç¨‹æ± (æ‰©å……)-ä»£ç å®ç°å¢åŠ : å¢åŠ : çº¿ç¨‹æ—¥å¿—æ¨¡å— threadpoolPlus.h threadpoolPlus.h 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209/************************************************************************* &gt; File Name: threadpoolPlus.h &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ27æ—¥ æ˜ŸæœŸä¸‰ 15æ—¶37åˆ†13ç§’ ************************************************************************/#ifndef _THREADPOOLPLUS_H#define _THREADPOOLPLUS_H#include &lt;iostream&gt;#include &lt;thread&gt;#include &lt;mutex&gt;#include &lt;queue&gt;#include &lt;vector&gt;#include &lt;unordered_map&gt;#include &lt;condition_variable&gt;#include &lt;functional&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125;BEGINS(ttw)// å‡½æ•°æ–¹æ³•ç»‘å®šåˆ°ä¸€èµ·çš„class Task &#123;public : template&lt;typename FUN_T, typename ...ARGS&gt; Task(FUN_T func, ARGS... args); void run();private : function&lt;void()&gt; func;&#125;;template&lt;typename FUN_T, typename ...ARGS&gt;Task::Task(FUN_T func, ARGS... args) &#123; // ç”¨forwardå‘ä¸‹ä¼ æ—¶å€™å¯ä»¥ä¿è¯å‡†ç¡®çš„å€¼ä¼ é€’ this-&gt;func = bind(func, forward&lt;ARGS&gt;(args)...); // å³å€¼ä¼ é€’æ—¶å€™å¯èƒ½å°±ä¼šå‡ºé”™ // this-&gt;func = bind(func, fargs...);&#125;void Task::run() &#123; Task::func(); return ;&#125;// END Task// çº¿ç¨‹æ± ç±»class ThreadPool &#123;public : ThreadPool(int n = 1); // å–ä»»åŠ¡ã€æ‰§è¡Œä»»åŠ¡ void worker(); void start(); void stop(); template&lt;typename FUNC_T, typename ...ARGS&gt; void add_task(FUNC_T, ARGS...); ~ThreadPool();private : // è·å–ä»»åŠ¡ Task *get_task(); // æ¯’è¯ä»»åŠ¡ void stop_running(); bool starting; int thread_size; vector&lt;thread *&gt; threads; unordered_map&lt;decltype(this_thread::get_id()), bool&gt; running; queue&lt;Task *&gt; tasks; std::condition_variable m_cond; std::mutex m_mutex; &#125;;ThreadPool::ThreadPool(int n) : thread_size(n), threads(n), starting(false) &#123; this-&gt;start();&#125;// å–ä»»åŠ¡ã€æ‰§è¡Œä»»åŠ¡void ThreadPool::worker() &#123; auto id = this_thread::get_id(); running[id] = true; while(running[id]) &#123; Task *t = get_task(); t-&gt;run(); delete t; &#125; return ;&#125;void ThreadPool::start() &#123; if(starting == true) return ; for(int i = 0; i &lt; thread_size; i++) &#123; threads[i] = new thread(&amp;ThreadPool::worker, this); &#125; starting = true; return ;&#125;void ThreadPool::stop() &#123; if(starting == false) return ; for(int i = 0; i &lt; threads.size(); i++) &#123; this-&gt;add_task(&amp;ThreadPool::stop_running, this); &#125; for(int i = 0; i &lt; threads.size(); i++) &#123; threads[i]-&gt;join(); &#125; for(int i = 0; i &lt; threads.size(); i++) &#123; delete threads[i]; threads[i] = nullptr; &#125; starting = false; return ; &#125;template&lt;typename FUNC_T, typename ...ARGS&gt;void ThreadPool::add_task(FUNC_T func, ARGS... args) &#123; unique_lock&lt;mutex&gt; lock(m_mutex); tasks.push(new Task(func, forward&lt;ARGS&gt;(args)...)); // é€šçŸ¥æ‰€æœ‰ç­‰å¾…ç€ä»»åŠ¡çš„çº¿ç¨‹ m_cond.notify_one(); return ;&#125;ThreadPool::~ThreadPool() &#123; this-&gt;stop(); while(!tasks.empty()) &#123; delete tasks.front(); tasks.pop(); &#125; return ;&#125;// ThreadPool private beginTask *ThreadPool::get_task() &#123; unique_lock&lt;mutex&gt; lock(m_mutex); // é˜²æ­¢è™šå‡å”¤é†’ wait ä¼šè‡ªåŠ¨é‡Šæ”¾é” while (tasks.empty()) m_cond.wait(lock); Task *t = tasks.front(); tasks.pop(); return t;&#125;void ThreadPool::stop_running() &#123; auto id = this_thread::get_id(); running[id] = false; return ;&#125;// ThreadPool private end// END ThreadPoolbool is_prime(int x)&#123; for(int i = 2; i &lt;= x / i; i++) &#123; if(x % i == 0) return false; &#125; return true;&#125;int prime_count(int l, int r) &#123; int ans = 0; for(int i = l; i &lt;= r; i++) &#123; ans += is_prime(i); &#125; return ans;&#125;// ç»™å¤šçº¿ç¨‹æ‰§è¡Œçš„å…¥å£å‡½æ•°void worker(int l, int r, int &amp;ret) &#123; cout &lt;&lt; this_thread::get_id() &lt;&lt; &quot;begin&quot; &lt;&lt; endl; ret = prime_count(l, r); cout &lt;&lt; this_thread::get_id() &lt;&lt; &quot;done&quot; &lt;&lt; endl;&#125;int main() &#123; ThreadPool tp(5); #define batch 5000000 thread *t[10]; int ret[10]; for(int i = 0,j = 1; i &lt; 10; i++, j += batch) &#123; tp.add_task(worker, j, j + batch - 1, ref(ret[i])); &#125; tp.stop(); int ans = 0; for(auto x : ret) ans +=x ; cout &lt;&lt; ans &lt;&lt; endl; #undef batch return 0;&#125;ENDS(ttw)#endif logger.cpp 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132/************************************************************************* &gt; File Name: logger.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ27æ—¥ æ˜ŸæœŸä¸‰ 15æ—¶38åˆ†31ç§’ ************************************************************************//* * cout &lt;&lt; &quot;hellow world&quot; &lt;&lt; 123 &lt;&lt; endl; * å½“å¤šä¸ªçº¿ç¨‹éƒ½åœ¨æ“ä½œæ—¶å€™æœ‰çš„åœ¨æ‰“å°hello worldæœ‰çš„åœ¨æ‰“å°123 * å¦‚æœæŠŠè¿™è¿™ä¸ªè¯­å¥å˜æˆåŸå­æ“ä½œ * åŸå­æ“ä½œï¼šä¸å¯åˆ†å‰²çš„ä¸€ä¸ªå•ç‹¬çš„æ“ä½œ * åŸå­æ“ä½œå¿…åŠ é”ã€åŸå­æ“ä½œä½ ä¸åŠ é”åœ¨ä½œæ­» * * cout &lt;&lt; &quot;hellow world&quot; &lt;&lt; 123 &lt;&lt; endl; -&gt; å¯¹åº”äº†ä¸€ä¸ªå•ç‹¬çš„ç¼“å†²åŒº * cout &lt;&lt; &quot;hellow world&quot; &lt;&lt; 123 &lt;&lt; endl; -&gt; å¯¹åº”äº†ä¸€ä¸ªå•ç‹¬çš„ç¼“å†²åŒº * cout &lt;&lt; &quot;hellow world&quot; &lt;&lt; 123 &lt;&lt; endl; -&gt; å¯¹åº”äº†ä¸€ä¸ªå•ç‹¬çš„ç¼“å†²åŒº -&gt; å¯¹è±¡ * åœ¨ç°åœ¨è¿™ä¸ªåœºæ™¯ç§ cout å¯¹åº”çš„éƒ½æ˜¯ä¸€ä¸ªæ‰€ä»¥ä¸å®‰å…¨ * * ç”¨åˆ°ä¸´æ—¶å¯¹è±¡ *//* std::ostringstream s; s &lt;&lt; &quot;hellow world&quot; &lt;&lt; &quot; &quot; &lt;&lt; 123 &lt;&lt; std::endl; std::cout &lt;&lt; s.str();*/#include &lt;iostream&gt;#include &lt;sstream&gt;#include &lt;string&gt;#include &lt;map&gt;#include &lt;mutex&gt;#include &quot;threadpoolPlus.h&quot;/*#define LEVEL(str) ttw::LogLevel::##str#define LEVEL_INFO LEVEL(INFO)#define LEVEL_WARNING LEVEL(WARNING)#define LEVEL_DEBUG LEVEL(DEBUG)#define LEVEL_ERROR LEVEL(ERROR)#define LEVEL_FATAL LEVEL(FATAL)*/// __FILE__(æ–‡ä»¶å) __LINE__(è¡Œå“ˆ) level(æ—¥å¿—ç­‰çº§)#define LOG(level) ttw::Logger::LoggerStream(level, __FILE__, __LINE__, ttw::ttw_log)#define LOG_INFO LOG(ttw::LogLevel::INFO)#define LOG_WARNING LOG(ttw::LogLevel::WARNING)#define LOG_DEBUG LOG(ttw::LogLevel::DEBUG)#define LOG_ERROE LOG(ttw::LogLevel::ERROR)#define LOG_FATAL LOG(ttw::LogLevel::FATAL)#define SET_LEVEL(level) ttw::ttw_log.set_level(level)namespace ttw &#123; // æšä¸¾ç±» class LogLevel &#123; public : static const int INFO ; static const int WARNING; static const int DEBUG; static const int ERROR; static const int FATAL; &#125;; const int LogLevel::INFO = 1; const int LogLevel::WARNING = 2; const int LogLevel::DEBUG = 3; const int LogLevel::ERROR = 4; const int LogLevel::FATAL = 5; std::map&lt;int, std::string&gt; LevelString = &#123; &#123;LogLevel::INFO, &quot;INFO&quot;&#125;, &#123;LogLevel::WARNING, &quot;WARNING&quot;&#125;, &#123;LogLevel::DEBUG, &quot;DEBUG&quot;&#125;, &#123;LogLevel::ERROR, &quot;ERROR&quot;&#125;, &#123;LogLevel::FATAL, &quot;FATAL&quot;&#125; &#125;; class Logger &#123; public : Logger() : LOG_LEVEL(LogLevel::INFO) &#123;&#125; // ä¸´æ—¶å¯¹è±¡ class LoggerStream : public std::ostringstream &#123; public : LoggerStream(int level, const char *file_name, int line_no, Logger &amp;raw_log) : line_no(line_no),level(level), raw_log(raw_log) &#123; std::ostringstream &amp;now = *this; now &lt;&lt; &quot;[&quot; &lt;&lt; file_name &lt;&lt; &quot; : &quot; &lt;&lt; LevelString[level] &lt;&lt; &quot;]&quot;; &#125; ~LoggerStream() &#123; if(level &lt; raw_log.LOG_LEVEL) return ; // äº’æ–¥é” std::unique_lock&lt;std::mutex&gt; lock(raw_log.m_mutex); std::cout &lt;&lt; this-&gt;str() &lt;&lt; &quot;(&quot; &lt;&lt; line_no &lt;&lt; &quot;)&quot; &lt;&lt; std::endl; &#125; private : // è¡Œå·ã€æ—¥å¿—ç­‰çº§ int line_no, level; Logger &amp;raw_log; &#125;; void set_level(int level) &#123; this-&gt;LOG_LEVEL = level; &#125; int LOG_LEVEL; std::mutex m_mutex; &#125;; // è¾“å‡ºæµå¯¹è±¡ Logger ttw_log;&#125; // end of ttwvoid func(int a, int b, int c) &#123; //cout &lt;&lt; this_thread::get_id() &lt;&lt; &quot;begin&quot; &lt;&lt; endl; LOG_INFO &lt;&lt; a &lt;&lt; &quot; &quot; &lt;&lt; b &lt;&lt; c; return ;&#125;int main() &#123; // SET_LEVEL(ttw::LogLevel::DEBUG); LOG_INFO &lt;&lt; &quot;hellow world&quot; &lt;&lt; &quot; &quot; &lt;&lt; 123 ; LOG_WARNING &lt;&lt; &quot;hellow world&quot; &lt;&lt; &quot; &quot; &lt;&lt; 123; LOG_DEBUG &lt;&lt; &quot;hellow world&quot; &lt;&lt; &quot; &quot; &lt;&lt; 123; LOG_ERROE &lt;&lt; &quot;hellow world&quot; &lt;&lt; &quot; &quot; &lt;&lt; 123; LOG_FATAL &lt;&lt; &quot;hellow world&quot; &lt;&lt; &quot; &quot; &lt;&lt; 123; ttw::ThreadPool tp; for(int i = 0; i &lt; 100; i++) &#123; tp.add_task(func, i, 2 * i, 3 * i); &#125; tp.stop(); return 0;&#125; ä»£ç åˆé›†123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397/************************************************************************* &gt; File Name: 1.thredd_pool.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ25æ—¥ æ˜ŸæœŸä¸€ 18æ—¶08åˆ†16ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;thread&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125;BEGINS(thread_usage)void func() &#123; cout &lt;&lt; &quot;hello world&quot; &lt;&lt; endl;&#125;void print(int a, int b) &#123; cout &lt;&lt; a &lt;&lt; &quot; &quot; &lt;&lt; b &lt;&lt; endl; return ;&#125;int main() &#123; // çº¿ç¨‹ thread t1(func); t1.join(); thread t2(print, 1, 2); t2.join(); return 0;&#125;ENDS(thread_usage)BEGINS(prime_count_test)bool is_prime(int x)&#123; for(int i = 2; i &lt;= x / i; i++) &#123; if(x % i == 0) return false; &#125; return true;&#125;int prime_count(int l, int r) &#123; int ans = 0; for(int i = l; i &lt;= r; i++) &#123; ans += is_prime(i); &#125; return ans;&#125;// ç»™å¤šçº¿ç¨‹æ‰§è¡Œçš„å…¥å£å‡½æ•°void worker(int l, int r, int &amp;ret) &#123; cout &lt;&lt; this_thread::get_id() &lt;&lt; &quot;begin&quot; &lt;&lt; endl; ret = prime_count(l, r); cout &lt;&lt; this_thread::get_id() &lt;&lt; &quot;done&quot; &lt;&lt; endl;&#125;int main() &#123; #define batch 5000000 thread *t[10]; int ret[10]; for(int i = 0,j = 1; i &lt; 10; i++, j += batch) &#123; t[i] = new thread(worker, j, j + batch - 1, ref(ret[i])); &#125; for (auto x : t) x-&gt;join(); int ans = 0; for(auto x : ret) ans += x; cout &lt;&lt; ans &lt;&lt; endl; for(auto x : t) delete x; #undef batch return 0;&#125;ENDS(prime_count_test)#include &lt;mutex&gt;BEGINS(prime_count_test1)int ans = 0;std::mutex m_mutex;bool is_prime(int x)&#123; for(int i = 2; i &lt;= x / i; i++) &#123; if(x % i == 0) return false; &#125; return true;&#125;void prime_count(int l, int r) &#123; int ans = 0; for(int i = l; i &lt;= r; i++) &#123; // åŠ é”çš„åœ°æ–¹å°±æ˜¯ä¸´ç•ŒåŒº // æŠ¢å èƒ¡äº’æ–¥é”, å¦‚æœæŠ¢å ä¸Šäº†çš„è¯æ‰å¯¹ans + 1, å‡ºäº†ä½œç”¨åŸŸå°±ä¼šå‘—é‡Šæ”¾ unique_lock&lt;mutex&gt; lock(m_mutex); ans += is_prime(i); lock.unlock(); // å¯¹è¿™ç§åŠ æ“ä½œçš„æ—¶å€™,æœ‰å¯èƒ½ä¼šå‘ç”Ÿå¤šçº¿ç¨‹æŠ¢å èµ„æºçš„æ—¶å€™çš„æ—¶å€™å¯¼è‡´æ•°æ®ä¸æ­£ç¡® // ä¸´ç•Œèµ„æº &#125; return ;&#125;int main() &#123; #define batch 5000000 thread *t[10]; for(int i = 0,j = 1; i &lt; 10; i++, j += batch) &#123; t[i] = new thread(prime_count, j, j + batch - 1); &#125; for (auto x : t) x-&gt;join(); for(auto x : t) delete x; cout &lt;&lt; ans &lt;&lt; endl; #undef batch return 0;&#125;ENDS(prime_count_test1)// ç¬¬äºŒç§åŠ é”BEGINS(prime_count_test2)int ans = 0;std::mutex m_mutex;bool is_prime(int x)&#123; for(int i = 2; i &lt;= x / i; i++) &#123; if(x % i == 0) return false; &#125; return true;&#125;void prime_count(int l, int r) &#123; int ans = 0; for(int i = l; i &lt;= r; i++) &#123; int ret = is_prime(i); __sync_fetch_and_add(&amp;ans, ret); &#125; return ;&#125;int main() &#123; #define batch 5000000 thread *t[10]; for(int i = 0,j = 1; i &lt; 10; i++, j += batch) &#123; t[i] = new thread(prime_count, j, j + batch - 1); &#125; for (auto x : t) x-&gt;join(); for(auto x : t) delete x; cout &lt;&lt; ans &lt;&lt; endl; #undef batch return 0;&#125;ENDS(prime_count_test1)#include &lt;functional&gt;BEGINS(tast_test)// å‡½æ•°æ–¹æ³•ç»‘å®šåˆ°ä¸€èµ·çš„class Task &#123;public : template&lt;typename FUN_T, typename ...ARGS&gt; Task(FUN_T func, ARGS... args) &#123; // ç”¨forwardå‘ä¸‹ä¼ æ—¶å€™å¯ä»¥ä¿è¯å‡†ç¡®çš„å€¼ä¼ é€’ this-&gt;func = bind(func, forward&lt;ARGS&gt;(args)...); // å³å€¼ä¼ é€’æ—¶å€™å¯èƒ½å°±ä¼šå‡ºé”™ // this-&gt;func = bind(func, fargs...); &#125; void run() &#123; func(); return ; &#125;private : function&lt;void()&gt; func;&#125;;void test() &#123; cout &lt;&lt; &quot;hello world : function test&quot; &lt;&lt; endl; return ;&#125;void func(int a, int b) &#123; cout &lt;&lt; &quot;function &quot; &lt;&lt; a &lt;&lt; &quot; &quot; &lt;&lt; b &lt;&lt; endl; return ;&#125;void add_one(int &amp;n) &#123; n += 1; return ;&#125;int main() &#123; Task t(func, 3, 4); t.run(); Task t2(test); t2.run(); int n = 1; cout &lt;&lt; &quot;n = &quot; &lt;&lt; n &lt;&lt; endl; Task t3(add_one, n); // åŠ ä¸Š ref() ä¸ºå¼•ç”¨æ˜¯å› ä¸ºåœ¨æ¨¡æ¿åœ¨å‚æ•°æ¨å¯¼æ—¶å€™ä¼šå¸®ä½ æ¨åˆ°æˆå¼•ç”¨ Task t4(add_one, ref(n)); t4.run(); t3.run(); t3.run(); t3.run(); t3.run(); t3.run(); cout &lt;&lt; &quot;n = &quot; &lt;&lt; n &lt;&lt; endl; return 0;&#125;ENDS(task_test)#include &lt;vector&gt;#include &lt;unordered_map&gt;#include &lt;queue&gt;#include &lt;condition_variable&gt;BEGINS(thread_pool_test)// å‡½æ•°æ–¹æ³•ç»‘å®šåˆ°ä¸€èµ·çš„class Task &#123;public : template&lt;typename FUN_T, typename ...ARGS&gt; Task(FUN_T func, ARGS... args) &#123; // ç”¨forwardå‘ä¸‹ä¼ æ—¶å€™å¯ä»¥ä¿è¯å‡†ç¡®çš„å€¼ä¼ é€’ this-&gt;func = bind(func, forward&lt;ARGS&gt;(args)...); // å³å€¼ä¼ é€’æ—¶å€™å¯èƒ½å°±ä¼šå‡ºé”™ // this-&gt;func = bind(func, fargs...); &#125; void run() &#123; func(); return ; &#125;private : function&lt;void()&gt; func;&#125;;// çº¿ç¨‹æ± ç±»class ThreadPool &#123;public : ThreadPool(int n = 1) : thread_size(n), threads(n), starting(false) &#123; this-&gt;start(); &#125; // å–ä»»åŠ¡ã€æ‰§è¡Œä»»åŠ¡ void worker() &#123; auto id = this_thread::get_id(); running[id] = true; while(running[id]) &#123; Task *t = get_task(); t-&gt;run(); delete t; &#125; &#125; void start() &#123; if(starting == true) return ; for(int i = 0; i &lt; thread_size; i++) &#123; threads[i] = new thread(&amp;ThreadPool::worker, this); &#125; starting = true; return ; &#125; void stop() &#123; if(starting == false) return ; for(int i = 0; i &lt; threads.size(); i++) &#123; this-&gt;add_task(&amp;ThreadPool::stop_running, this); &#125; for(int i = 0; i &lt; threads.size(); i++) &#123; threads[i]-&gt;join(); &#125; for(int i = 0; i &lt; threads.size(); i++) &#123; delete threads[i]; threads[i] = nullptr; &#125; starting = false; return ; &#125; template&lt;typename FUNC_T, typename ...ARGS&gt; void add_task(FUNC_T func, ARGS... args) &#123; unique_lock&lt;mutex&gt; lock(m_mutex); tasks.push(new Task(func, forward&lt;ARGS&gt;(args)...)); // é€šçŸ¥æ‰€æœ‰ç­‰å¾…ç€ä»»åŠ¡çš„çº¿ç¨‹ m_cond.notify_one(); return ; &#125; ~ThreadPool() &#123; this-&gt;stop(); while(!tasks.empty()) &#123; delete tasks.front(); tasks.pop(); &#125; return ; &#125;private : Task *get_task() &#123; unique_lock&lt;mutex&gt; lock(m_mutex); // é˜²æ­¢è™šå‡å”¤é†’ wait ä¼šè‡ªåŠ¨é‡Šæ”¾é” while (tasks.empty()) m_cond.wait(lock); Task *t = tasks.front(); tasks.pop(); return t; &#125; void stop_running() &#123; auto id = this_thread::get_id(); running[id] = false; return ; &#125; bool starting; int thread_size; vector&lt;thread *&gt; threads; unordered_map&lt;decltype(this_thread::get_id()), bool&gt; running; queue&lt;Task *&gt; tasks; std::condition_variable m_cond; std::mutex m_mutex;&#125;;bool is_prime(int x)&#123; for(int i = 2; i &lt;= x / i; i++) &#123; if(x % i == 0) return false; &#125; return true;&#125;int prime_count(int l, int r) &#123; int ans = 0; for(int i = l; i &lt;= r; i++) &#123; ans += is_prime(i); &#125; return ans;&#125;// ç»™å¤šçº¿ç¨‹æ‰§è¡Œçš„å…¥å£å‡½æ•°void worker(int l, int r, int &amp;ret) &#123; cout &lt;&lt; this_thread::get_id() &lt;&lt; &quot;begin&quot; &lt;&lt; endl; ret = prime_count(l, r); cout &lt;&lt; this_thread::get_id() &lt;&lt; &quot;done&quot; &lt;&lt; endl;&#125;int main() &#123; ThreadPool tp(5); #define batch 5000000 thread *t[10]; int ret[10]; for(int i = 0,j = 1; i &lt; 10; i++, j += batch) &#123; tp.add_task(worker, j, j + batch - 1, ref(ret[i])); &#125; tp.stop(); int ans = 0; for(auto x : ret) ans +=x ; cout &lt;&lt; ans &lt;&lt; endl; #undef batch return 0;&#125;ENDS(thread_pool_test)int main() &#123; // thread_usage::main(); // prime_count_test::main(); // prime_count_test1::main(); // prime_count_test2::main(); // task_test::main(); thread_pool_test::main(); return 0;&#125; æºç æ–‡ä»¶*.cppç‚¹æˆ‘è·³è½¬:https://github.com/qzwl123/C-/tree/main/%E7%BA%BF%E7%A8%8B%E6%B1%A0","categories":[{"name":"OOP","slug":"OOP","permalink":"https://tutouwang.vercel.app/categories/OOP/"}],"tags":[]},{"title":"æ¨¡æ¿","slug":"OOP/æ¨¡æ¿","date":"2022-07-22T12:26:39.000Z","updated":"2022-09-24T10:10:29.856Z","comments":true,"path":"2022/07/22/OOP/æ¨¡æ¿/","link":"","permalink":"https://tutouwang.vercel.app/2022/07/22/OOP/%E6%A8%A1%E6%9D%BF/","excerpt":"","text":"å‰æœŸå›é¡¾$$ç¨‹åº &#x3D; ç®—æ³• + æ•°æ®ç»“æ„$$ æ•°æ®ç»“æ„: èƒ½å¤Ÿå­˜å‚¨ä»»æ„ç±»å‹ ç®— æ³•: èƒ½å¤Ÿæ“ä½œå­˜å‚¨ä»»æ„ç±»å‹æ•°æ®çš„æ•°æ®ç»“æ„ æ³›å‹ç¼–ç¨‹ æ³›å‹ç¼–ç¨‹ é¢å‘è¿‡ç¨‹ç¼–ç¨‹ ç”¨ æ¨¡æ¿ å®ç°å‡½æ•°è¿‡ç¨‹ é¢å‘å¯¹è±¡ç¼–ç¨‹ ç”¨ æ¨¡æ¿ å®ç°ç±» æŠ½è±¡åŒ–: é¢å‘è¿‡ç¨‹ 1234567891011121314151617181920212223#include &lt;iostream&gt;using namespace std;// å°†å‚æ•°ä»é—®é¢˜ä¸­æŠ½è±¡è¯å‡ºæ¥int f(int x) &#123; return x * 2 + 1;&#125;// ä»€ä¹ˆå«æŠ½è±¡åŒ–int main() &#123; // é—®x * 2 + 1 ç­‰äºå¤šå°‘ // x = 1; è¿™ä¸ªå«å…·ä½“è¯ cout &lt;&lt; 1 * 2 + 1; cout &lt;&lt; f(1); cout &lt;&lt; f(2); cout &lt;&lt; f(3); cout &lt;&lt; f(4); return 0;&#125; æ¨¡æ¿ å°†ã€ä»»æ„ç±»å‹ã€‘ä»ç¨‹åºè®¾è®¡ä¸­æŠ½è±¡å‡ºæ¥ æ¨¡æ¿æ¨¡æ¿å‡½æ•°123456789101112131415161718192021222324252627282930313233343536373839404142434445/************************************************************************* &gt; File Name: 1.template.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ22æ—¥ æ˜ŸæœŸäº” 20æ—¶47åˆ†36ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x&#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test1)// typename åªæ˜¯è¯´æ˜ T æ˜¯ä¸€ä¸ªç±»å‹// è¿™é‡Œtypename T è¿˜å¯ä»¥å†™æˆ class T ä½œç”¨æ˜¯ä¸€æ¨¡ä¸€æ ·çš„(æœªæ¥å¯èƒ½ä¼šæœ‰ åŒºåˆ«)// template&lt;class T&gt;template&lt;typename T&gt;T add(T a, T b) &#123; return a + b;&#125;/*ç¼–è¯‘å™¨è‡ªåŠ¨ç”Ÿæˆ å½“ç¼–è¯‘è°ƒç”¨çš„æ—¶å€™è°ƒç”¨çš„ä¸æ˜¯æ¨¡æ¿æ–¹æ³•è€Œæ˜¯ç¼–è¯‘å™¨è‡ªåŠ¨å®ä¾‹åŒ–çš„å‡ºæ¥è¿™ä¸ªä»£ç æ‰€æœ‰è¯´ï¼š æ¨¡æ¿ç±»å¯ä»¥ä½¿ç”¨è™šå‡½æ•°,æ¨¡æ¿å‡½æ•°ä¸èƒ½æ˜¯è™šå‡½æ•° int add(int a, int b) &#123; ret urn a + b;&#125;int main() &#123; /* æ¨¡æ¿å‡½æ•°æ˜¯æ€ä¹ˆå·¥ä½œçš„ ? è°ƒç”¨ add(3, 4) è¿™ä¸ªåœºæ™¯ æ—¢ç„¶æƒ³ä¼ å…¥ 3ï¼Œ 4 é‚£ä¹ˆ T ç±»å‹å°±æ˜¯ int æ‰€æœ‰ç¼–è¯‘å™¨ä¼šæ ¹æ® add(T a, T b) å‡½æ•°å®ä¾‹åŒ–å‡ºæ¥ä¸€ä¸ªä»£ç  */ cout &lt;&lt; &quot; add(3, 4) = &quot; &lt;&lt; add(3, 4) &lt;&lt; endl; return 0;&#125;ENDS(test1)int main() &#123; test1::main(); return 0;&#125; æŸ¥çœ‹æ¨¡æ¿å®ä¾‹åŒ–åçš„æ–¹æ³• æŸ¥çœ‹å¯æ‰§è¡Œç¨‹åºä¸­çš„è‹¥å¹²ä¸ªç¬¦å·çš„å®šä¹‰ 1nm -C a.out å½“æˆ‘ä»¬åœ¨ä½¿ç”¨æ¨¡æ¿æ–¹æ³•çš„æ—¶å€™,ä½¿ç”¨å…¶å®ä¸æ˜¯æ¨¡æ¿æ–¹æ³•è€Œæ˜¯æ¨¡æ¿ç”Ÿæˆçš„é‚£ä¸€æ®µå…·ä½“çš„ä»£ç  add(3, 4) è°ƒç”¨å½¢å¼ ä¸ºä»€ä¹ˆç¼–è¯‘å™¨å®ƒä¼šå®ä¾‹è¯å‡ºæ¥ $add$å°±æ˜¯é€šè¿‡è°ƒç”¨å½¢å¼å®Œæˆçš„æ¨¡æ¿ç±»å‹è‡ªåŠ¨æ¨åˆ°ï¼Œçœ‹3æ˜¯ä»€ä¹ˆç±»å‹åœ¨çœ‹4æ˜¯ä»€ä¹ˆç±»å‹(int)ï¼Œè¿™ä¸ªæ—¶å€™æ¨¡æ¿å½“ä¸­é‚£ä¸ªå‚æ•°æ¨åˆ°æ˜¯ä¸å­˜åœ¨å†²çªçš„è¿™æ—¶å€™æ‰ä¼šç”Ÿæˆä¸€ä¸ª$add$ 123456// å¯ä»¥çœ‹æˆc++é‡è½½çš„ä¸€ç§é«˜çº§è¡¨ç°int main() &#123; cout &lt;&lt; &quot; add(3, 4) = &quot; &lt;&lt; add(3, 4) &lt;&lt; endl; cout &lt;&lt; &quot;add(3.1, 4.2) = &quot; &lt;&lt; add(3.1, 4.2) &lt;&lt; endl; return 0;&#125; æ¨¡æ¿å‡½æ•°-ä»£ç åˆé›† decltype: æ ¹åŸºè¡¨è¾¾å¼æ¨å¯¼ç±»å‹(ä¸è¿›è¡Œè¡¨è¾¾å¼è®¡ç®—, ä¸è¿›è¡Œè¡¨ç¤ºæ‰§è¡Œ,ä¸æ‰§è¡Œä½†æ˜¯ä¹Ÿä¿è¯è¿™æ®µä»£ç æ˜¯ä¸è¿æ³•çš„) auto(å¯ä»¥åœ¨å£°æ˜å˜é‡çš„æ—¶å€™æ ¹æ®å˜é‡åˆå§‹å€¼çš„ç±»å‹è‡ªåŠ¨æ¨åˆ°) + decltype è¿”å›å€¼åç½® 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145/************************************************************************* &gt; File Name: 1.template.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ22æ—¥ æ˜ŸæœŸäº” 20æ—¶47åˆ†36ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x&#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test1)// typename åªæ˜¯è¯´æ˜ T æ˜¯ä¸€ä¸ªç±»å‹// è¿™é‡Œtypename T è¿˜å¯ä»¥å†™æˆ class T ä½œç”¨æ˜¯ä¸€æ¨¡ä¸€æ ·çš„(æœªæ¥å¯èƒ½ä¼š æœ‰åŒºåˆ«)// template&lt;class T&gt;template&lt;typename T&gt;T add(T a, T b) &#123; return a + b;&#125;int main() &#123; // æ¨åˆ°æ²¡æœ‰å†²çª cout &lt;&lt; &quot; add(3, 4) = &quot; &lt;&lt; add(3, 4) &lt;&lt; endl; cout &lt;&lt; &quot;add(3.1, 4.2) = &quot; &lt;&lt; add(3.1, 4.2) &lt;&lt; endl; // æ¨åˆ°æœ‰å†²çª // int double åŒä¸€ä¸ªç¼–è¯‘å™¨å‡½æ•°æœ‰ä¸¤ç§å«ä¹‰ ç¼–è¯‘å™¨å°±æ‡µé€¼äº† (éšå£«æ¨åˆ°) // cout &lt;&lt; &quot;add(3, 4.2) = &quot; &lt;&lt; add(3, 4.2) &lt;&lt; endl; // æ˜¾ç¤ºè°ƒç”¨ add&lt;double&gt;æ¨¡æ¿ cout &lt;&lt; &quot;add(3, 4.2) = &quot; &lt;&lt; add&lt;double&gt;(3, 4.2) &lt;&lt; endl; return 0;&#125;ENDS(test1)BEGINS(test2)class A &#123;public : A() = delete; A(int x) : x(x) &#123;&#125; int x;&#125;;class B &#123;public : B() = delete; B(int x) : x(x) &#123;&#125; int x;&#125;;class C &#123;public : C() = delete; C(int x): x(x) &#123;&#125; int x;&#125;;C operator+(const A &amp;a, const B &amp;b) &#123; return C(a.x + b.x);&#125;C operator+(const B &amp;a, const A &amp;b) &#123; return C(a.x + b.x);&#125;// ä½¿ç”¨ä¸¤ä¸ªå‚æ•°è¿™ç§, è¿”å›ç±»å‹æ²¡æ³•ç¡®å®š// decltype å¦‚æœTå’ŒUæ²¡æœ‰æ„é€ å‡½æ•°é‚£å°±å‡ºé”™äº†//template&lt;typename T, typename U&gt;// ä¸¤ä¸ªç±»å‹ä¸èƒ½+çš„ ä½†æ˜¯å¯ä»¥è°ƒç”¨æ„é€ å‡½æ•°/*decltype(T() + U()) add(T a, U b) &#123; return a + b;&#125;*/ostream &amp;operator&lt;&lt;(ostream &amp;out , const C &amp;c) &#123; out &lt;&lt; &quot;Class C.x = &quot; &lt;&lt; c.x; return out;&#125;template&lt;typename T, typename U&gt;// è¿”å›å€¼åç½®auto add(T a, U b) -&gt; decltype(a + b) &#123; return a + b;&#125;template&lt;typename T&gt;void judge(T a) &#123; cout &lt;&lt; &quot;unknow type&quot; &lt;&lt; endl; return ;&#125;template&lt;&gt;void judge(int a) &#123; cout &lt;&lt; &quot;int type&quot; &lt;&lt; endl; return ;&#125;template&lt;&gt;void judge(double a) &#123; cout &lt;&lt; &quot;double type&quot; &lt;&lt; endl;&#125;int main() &#123; cout &lt;&lt; &quot; add(3, 4) = &quot; &lt;&lt; add(3, 4) &lt;&lt; endl; cout &lt;&lt; &quot;add(3.1, 4.2) = &quot; &lt;&lt; add(3.1, 4.2) &lt;&lt; endl; cout &lt;&lt; &quot;add(3, 4.2) = &quot; &lt;&lt; add&lt;double&gt;(3, 4.2) &lt;&lt; endl; cout &lt;&lt; &quot;add(3, 4.2) = &quot; &lt;&lt; add(3, 4.2) &lt;&lt; endl; A a(56); B b(78); // decltype(T() + U()) ä¸æ‰§è¡Œä½†æ˜¯ä¹Ÿä¿è¯è¿™æ®µä»£ç æ˜¯ä¸è¿æ³•çš„ cout &lt;&lt; &quot;add(A, B) = &quot; &lt;&lt; add(a, b) &lt;&lt; endl; // ç±»å‹æœ½åŒ–: æ ¹åŸºè¡¨è¾¾å¼æ¨å¯¼ç±»å‹ // decltype ä¸è¿›è¡Œè¡¨è¾¾å¼è®¡ç®—, ä¸è¿›è¡Œè¡¨ç¤ºæ‰§è¡Œ // å®ƒåªçœ‹ä¸€çœ¼ä¸è¿›è¡Œè®¡ç®—æ‰§è¡Œ do &#123; decltype(3 + 4.2) a; decltype(4.2 + 3) b; decltype(3 + 4) c; decltype(string(&quot;abc&quot;) + string(&quot;def&quot;)) d; judge(a), judge(b), judge(c), judge(d); &#125; while(0); return 0;&#125;ENDS(test2)int main() &#123; // å‡½æ•°æ¨¡æ¿ // test1::main(); // æ²¡æœ‰bugçš„å‡½æ•°æ¨¡æ¿ test2::main(); return 0;&#125; æ¨¡æ¿ç±»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869// æ¨¡æ¿ç±»çš„å®šä¹‰ä½¿ç”¨BEGINS(test3)// å¯ä»¥æ‰“å°ä»»æ„ç±»å‹çš„æ¨¡æ¿ç±»å¯¹è±¡template&lt;typename T&gt;class PrintAnt &#123;public : PrintAnt(ostream &amp;out) : out(out) &#123;&#125; PrintAnt &amp;Print(T a) &#123; out &lt;&lt; a; return *this; &#125; PrintAnt &amp;endl() &#123; out &lt;&lt; std::endl; return *this; &#125;private : ostream &amp;out;&#125;;int main() &#123; // æ¨¡æ¿ç±»ä¸æ¨¡æ¿å‡½æ•°ä¸ä¸€æ ·è¦æ˜ç¡®ç±»å‹ PrintAnt&lt;int&gt; pint(cout); PrintAnt&lt;double&gt; pdouble(cout); PrintAnt&lt;string&gt; pstring(cout); pint.Print(3).endl(); pdouble.Print(3.3).endl(); pstring.Print(&quot;hello world&quot;).endl(); return 0;&#125;ENDS(test3)BEGINS(test4)// å¯ä»¥æ‰“å°ä»»æ„ç±»å‹çš„æ¨¡æ¿ç±»å¯¹è±¡class PrintAnt &#123;public : PrintAnt(ostream &amp;out) : out(out) &#123;&#125; // æ¨¡æ¿æ–¹æ³• template&lt;typename T&gt; PrintAnt &amp;Print(T a) &#123; out &lt;&lt; a; return *this; &#125; PrintAnt &amp;endl() &#123; out &lt;&lt; std::endl; return *this; &#125;private : ostream &amp;out;&#125;;int mian() &#123; PrintAnt p(cout); p.Print(3).endl().Print(3.3).endl().Print(&quot;hello world&quot;).endl(); return 0;&#125;ENDS(test4)int main() &#123; // æ¨¡æ¿ç±»çš„å®šä¹‰ä½¿ç”¨ // test3::main(); test4::mian(); return 0;&#125; å·¦å€¼ã€å³å€¼ã€ç§»åŠ¨æ„é€  å¸¸æ€ ä¸´æ—¶ å€¼ï¼š å·¦å€¼ å³å€¼ å¼•ç”¨ï¼š å·¦å€¼å¼•ç”¨ å³å€¼å¼•ç”¨ è¿™æ˜¯å››ä¸ªæ¦‚å¿µ å¦‚æœä¸€ä¸ªå€¼æ˜¯å·¦å€¼è¯é‚£ä¹ˆå®ƒå°†ä¼˜å…ˆç»‘å®šå‡½æ•°çš„ä½å€¼å¼•ç”¨ç‰ˆæœ¬ å¦‚æœä¸€ä¸ªå€¼æ˜¯å³å€¼è¯é‚£ä¹ˆå®ƒå°†ä¼˜å…ˆç»‘å®šå‡½æ•°çš„å³å€¼å¼•ç”¨ç‰ˆæœ¬ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273/************************************************************************* &gt; File Name: 2.rvalue_mov.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ23æ—¥ æ˜ŸæœŸå…­ 10æ—¶46åˆ†48ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespaceBEGINS(test1)void judge2(int &amp;x) &#123; cout &lt;&lt; &quot;(left value - 2) : &quot;; return ;&#125;// å³å€¼å¼•ç”¨void judge2(int &amp;&amp;x) &#123; cout &lt;&lt; &quot;(right valie - 2) : &quot;;&#125;// å·¦å€¼å¼•ç”¨void judge(int &amp;x) &#123; // å·¦å€¼æ˜¯å’Œå³å€¼æ˜¯æœ‰ä½œç”¨åŸŸ æ‰€ä»¥è¯´å½“åœ¨å‰ä½œç”¨åŸŸæ˜¯å·¦å€¼ // judge2(x); judge2(x); cout &lt;&lt; &quot;left value&quot; &lt;&lt; endl; return ;&#125;// å³å€¼å¼•ç”¨void judge(int &amp;&amp;x) &#123; // move ä¼šæŠŠä»»ä½•è¡¨è¾¾å¼ç›´æ¥å˜æˆå³å€¼ // judge2(move(x)); // forward æƒ³è¦å˜æˆå·¦å€¼æˆ–è€…å³å€¼ æ˜¾ç¤ºå½¢å¼è¡¨ç°å‡ºæ¥ judge2(forward&lt;int &amp;&amp;&gt;(x)); cout &lt;&lt; &quot;right valie&quot; &lt;&lt; endl;&#125;#define TEST(a) &#123; \\ cout &lt;&lt; &quot;judge &quot; &lt;&lt; #a &lt;&lt; &quot; : &quot;; \\ judge(a); \\&#125;int main() &#123; int n = 123; (n += 2) = 100; cout &lt;&lt; n &lt;&lt; endl; // å·¦å€¼ TEST(n); // å› ä¸º n + 1 ä¼šåˆ›å»ºä¸€ä¸ªä¸´æ—¶å˜é‡å­˜å‚¨ æ‰€ä»¥åœ¨ä»£ç ä¸‹ä¸€è¡Œæ— æ³•é€šè¿‡å•ä¸€å˜é‡nè®¿é—® TEST(n + 1); TEST(n++); TEST(++n); TEST(1 + 2); TEST(n += 2); return 0;&#125;ENDS(test1)int main() &#123; test1::main(); return 0;&#125; æ€ä¹ˆåˆ¤æ–­æ˜¯ä¸æ˜¯å·¦å€¼ï¼š â€‹ æœ€ç®€å•çš„åˆ¤æ–­ä¾æ®å°±æ˜¯å½“å‰è¡¨è¾¾å¼èƒ½ä¸èƒ½æ”¾åˆ°è¿ç®—ç¬¦çš„å·¦é¢ï¼Œå¦‚æœä¸€ä¸ªè¡¨è¾¾å¼èƒ½æ”¾åˆ°èµ‹å€¼è¿ç®—ç¬¦çš„å·¦é¢é‚£ä¹ˆä»–å°±æ˜¯ä¸€ä¸ªå·¦å€¼ å·¦å€¼è¡¨å¸¸æ€ã€å³å€¼è¡¨ä¸´æ—¶ å·¦å€¼ï¼š å½“ä»£ç åˆ°äº†ä¸‹ä¸€è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸Šä¸€è¡Œçš„è¡¨è¾¾çš„å€¼æˆ‘æ˜¯å¦è¿˜èƒ½é€šè¿‡å•ä¸€å˜é‡è®¿é—®é“ åˆ—ï¼š â€‹ int n &#x3D; 123; â€‹ n +&#x3D; 2; â€‹ å¯ä»¥ç”¨è¿‡ n è®¿é—®åˆ°ï¼ˆå·¦å€¼è¡¨å¸¸æ€ï¼‰ â€‹ int n &#x3D; 123; â€‹ n + 1ï¼› â€‹ å› ä¸ºï¼ˆn + 1ï¼‰ä¼šå­˜å‚¨åœ¨ä¸€ä¸ªä¸´æ—¶å˜é‡ä¸Šçš„ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªå³å€¼å› ä¸º(å³å€¼è¡¨ä¸´æ—¶) å·¦å€¼ï¼š-&gt; è¿”å›å¼•ç”¨ å³å€¼ï¼š-&gt; è¿”å›å€¼ è¿ç®—ç¬¦é‡è½½è¿”å›å·¦å€¼å³å€¼12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespacesBEGINS(test2)class Point;// å·¦å€¼å¼•ç”¨void judge(Point &amp;x) &#123; cout &lt;&lt; &quot;left value&quot; &lt;&lt; endl; return ;&#125;// å³å€¼å¼•ç”¨void judge(Point &amp;&amp;x) &#123; cout &lt;&lt; &quot;right valie&quot; &lt;&lt; endl;&#125;#define TEST(a) &#123; \\ cout &lt;&lt; &quot;judge &quot; &lt;&lt; #a &lt;&lt; &quot; : &quot;; \\ judge(a); \\&#125;class Point &#123;public : Point(int x = 0, int y = 0) : __x(x), __y(y) &#123;&#125; int x() &#123; return __x; &#125; int y() &#123; return __y; &#125; // è¦æ˜¯è¿”å› Point å°±æ˜¯å³å€¼ï¼Œè¦æ˜¯è¿”å›&amp;å°±æ˜¯å·¦å€¼ Point &amp;operator+=(int d) &#123; __x += d; __y += d; return *this; &#125; Point operator+(int d) &#123; return Point(__x + d, __y + d); &#125;private : int __x, __y;&#125;;int main() &#123; Point p(3, 4); TEST(p); TEST(p += 1); TEST(p + 1); return 0;&#125;ENDS(test2)int main() &#123; // test1::main(); test2::main(); return 0;&#125; å³å€¼-&gt;ç§»åŠ¨æ„é€ ç§»åŠ¨æ„é€ ç›¸å½“äº ä¸€ä¸ªå¸ˆå‚…ä¸€ä¸ªå¾’å¼Ÿï¼Œé‚£ä¹ˆå¸ˆå‚…è¦å››äº†è¯´è¦æŠŠæŠŠæ¯•ç”Ÿç»å­¦éƒ½ä¼ ç»™å¾’å¼Ÿé‚£ä¹ˆä¼ ç»™å¾’å¼Ÿä¸¤ç§æ–¹å¼ å˜´è¿°ï¼Œå®Œäº†å¾’å¼Ÿè‡ªå·±å»ç»ƒ(ç›¸å½“äºæ·±æ‹·è´)ã€(æ•ˆç‡åº•)ã€(O(n)) ç›´æ¥å†…åŠ›ä¼ é€å®Œï¼Œå¸ˆå‚…ä¹Ÿå°±æŒ‚æ‰äº†ä¸€èº«åŠŸåŠ›å°±å…¨éƒ½ä¼ ç»™å¾’å¼Ÿäº†å¸ˆå‚…å°±ä»€ä¹ˆéƒ½æ²¡æœ‰äº†(ç›¸å½“äºå³å€¼ç›´æ¥ç§»åŠ¨æ„é€ )ã€(æ•ˆç‡å¾ˆé«˜)ã€(O(1)) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384/************************************************************************* &gt; File Name: 2.rvalue_mov.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ23æ—¥ æ˜ŸæœŸå…­ 10æ—¶46åˆ†48ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespaceBEGINS(test3)// template&lt;typename T&gt;class Array &#123;public : Array(int n = 5) :__size(n), data(new int[n]) &#123; cout &lt;&lt; this &lt;&lt; &quot; : default constructor&quot; &lt;&lt; endl; &#125; // é’ˆå¯¹å·¦å€¼å¤„ç†çš„æ‹·è´æ„é€  Array(const Array &amp;a) : __size(a.__size), data(new int[__size]) &#123; for(int i = 0; i &lt; __size; i++) &#123; // data[i] = a[i]; new (data + i) int(a[i]); &#125; cout &lt;&lt; this &lt;&lt; &quot; : deep copy constructor&quot; &lt;&lt; endl; return ; &#125; // move constructor(ç§»åŠ¨æ„é€ ) Array(Array &amp;&amp;a) : __size(a.__size), data(a.data) &#123; a.data = nullptr; a.__size = 0; cout &lt;&lt; &quot;move constructor &quot; &lt;&lt; endl; return ; &#125; int size() &#123; return __size; &#125; int &amp;operator[](int ind) const &#123; return data[ind]; &#125; Array operator+(Array &amp;a) &#123; Array ret(__size + a.__size); for(int i = 0; i &lt; __size; i++) &#123; ret[i] = data[i]; &#125; for(int i = __size; i &lt; ret.size(); i++) &#123; ret[i] = a.data[i - __size]; &#125; return ret; &#125; ~Array() &#123; cout &lt;&lt; this &lt;&lt; &quot; : destructor&quot; &lt;&lt; endl; delete [] data; return ; &#125;private : int __size, *data;&#125;;int main() &#123; Array a, b; Array c = a + b; // å¦‚æœè¯´aåœ¨ä¹‹åå°±ä¸ä½¿ç”¨äº†é‚£ä¹ˆå°±å¯ä»¥å˜æˆå³å€¼çš„æ‹·è´ Array d(move(a)); return 0;&#125;ENDS(test3)int main() &#123; // test1::main(); // è¿ç®—ç¬¦é‡è½½è¿”å›å·¦å€¼å³å€¼ //test2::main(); test3::main(); return 0;&#125; æ¨¡æ¿çš„ç‰¹åŒ–ã€åç‰¹åŒ–ç±»æ¨¡æ¿ï¼šç‰¹åŒ– (å…¨ç‰¹åŒ–)ã€åç‰¹åŒ– å‡½æ•°æ¨¡æ¿ï¼šç‰¹åŒ– (å…¨ç‰¹åŒ–) ç‰¹åŒ–ï¼šå°±å¥½æ¯”æœºåœºçš„VIPé€šé“ç»™å°‘æ•°äººå‡†å¤‡ æ¨¡æ¿(å…¨ç‰¹åŒ–): æ‰€ä»¥çš„å‚æ°´éƒ½è¢«å›ºå®šäº† æœ‰templateå…³é”®å­—å°±æ˜¯ä¸€ä¸ªæ¨¡æ¿ æ¨¡æ¿çš„ç‰¹åŒ–ã€åç‰¹åŒ–-ä»£ç å®ç° test1-å‡½æ•°æ¨¡æ¿ã€(ç‰¹åŒ–)å…¨ç‰¹åŒ– test2-æ¨¡æ¿ç±»æ¨¡æ¿ã€(ç‰¹åŒ–)å…¨ç‰¹åŒ–ã€åç‰¹åŒ– test3-((ç‰¹åŒ–)å…¨ç‰¹åŒ–ã€åç‰¹åŒ–)å®ç°åˆ¤æ–­ç›¸å…³çš„ç±»å‹æœ‰æ²¡æœ‰æ„é€ å‡½æ•° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252/************************************************************************* &gt; File Name: 3.specialization.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ23æ—¥ æ˜ŸæœŸå…­ 15æ—¶08åˆ†41ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespaceBEGINS(test1)template&lt;typename T&gt;T add(T a, T b) &#123; return a + b;&#125;// æ¨¡æ¿çš„å…¨ç‰¹åŒ–ç‰ˆæœ¬ æ¨¡æ¿å‚æ•°éƒ½è¢«å›ºå®šä¸‹æ¥template&lt;&gt;int add(int a, int b) &#123; cout &lt;&lt; &quot;int template&quot; &lt;&lt; endl; return a + b;&#125;int main() &#123; // add&lt;int&gt; cout &lt;&lt; add(3, 4) &lt;&lt; endl; //add&lt;double&gt; cout &lt;&lt; add(3.1, 4.1) &lt;&lt; endl; return 0;&#125;ENDS(test1)BEGINS(test2)template&lt;typename T, typename U&gt;class Test &#123;public : Test() &#123; cout &lt;&lt; &quot;normal template&lt;T, U&gt; &quot; &lt;&lt; endl; &#125;&#125;;// å…¨ç‰¹åŒ–template&lt;&gt;class Test&lt;int, double&gt; &#123;public : Test() &#123; cout &lt;&lt; &quot;specialization template&lt;int, double&gt; &quot; &lt;&lt; endl; &#125;&#125;;// åç‰¹åŒ–template&lt;typename T&gt;class Test&lt;int, T&gt; &#123;public : Test() &#123; cout &lt;&lt; &quot;partial specialization template&lt;int, T&gt; &quot; &lt;&lt; endl; &#125;&#125;;int main() &#123; // æ­£å¸¸ Test&lt;string, int&gt; t1; // å…¨ç‰¹åŒ– Test&lt;int, double&gt; t2; // ? // åç‰¹åŒ– Test&lt;int, string&gt; t3; // ä¼˜å…ˆçº§: å…¨ -&gt; å -&gt; æ­£å¸¸æ¨¡æ¿ return 0;&#125;ENDS(test2)BEGINS(test3)class A &#123;&#125;;class B &#123;&#125;;class yes_constructor &#123;public : static const char *has_constructor;&#125;;const char *yes_constructor::has_constructor = &quot;yes&quot;;class no_constructor &#123;public : static const char *has_constructor;&#125;;const char *no_constructor::has_constructor = &quot;no&quot;;template &lt;typename T&gt;class type_trais : public yes_constructor &#123;&#125;;// *template &lt;typename T&gt;class type_trais&lt;T *&gt; : public no_constructor&#123;&#125;;// inttemplate &lt;&gt;class type_trais&lt;int&gt; : public no_constructor&#123;&#125;;// doubletemplate &lt;&gt;class type_trais&lt;double&gt; : public no_constructor &#123;&#125;;/*template &lt;typename T&gt;class type_trais &#123;public: static const char *has_constructor;&#125;;template&lt;typename T&gt;const char *type_trais&lt;T&gt;::has_constructor = &quot;yes&quot;;// *template &lt;typename T&gt;class type_trais&lt;T *&gt; &#123;public: static const char *has_constructor;&#125;;template&lt;typename T&gt;const char *type_trais&lt;T *&gt;::has_constructor = &quot;no&quot;;// inttemplate &lt;&gt;class type_trais&lt;int&gt; &#123;public: static const char *has_constructor;&#125;;const char *type_trais&lt;int&gt;::has_constructor = &quot;no&quot;;// doubletemplate &lt;&gt;class type_trais&lt;double&gt; &#123;public: static const char *has_constructor;&#125;;const char *type_trais&lt;double&gt;::has_constructor = &quot;no&quot;;*/#define TEST(type) \\ cout &lt;&lt; #type &lt;&lt; &quot; : &quot;&lt;&lt; type_trais&lt;type&gt;::has_constructor &lt;&lt; endl;int main() &#123; TEST(int); TEST(A); TEST(double); TEST(B); TEST(string); TEST(string *); // cout &lt;&lt; type_trais&lt;B&gt;::has_constructor &lt;&lt; endl; // yes return 0;&#125;#undef TESTENDS(test3)BEGINS(test4)class A &#123;&#125;;class B &#123;&#125;;class yes_constructor &#123;&#125;;class no_constructor &#123;&#125;;template &lt;typename T&gt;class type_trais &#123;public : typedef yes_constructor has_constructor;&#125;;// *template &lt;typename T&gt;class type_trais&lt;T *&gt; &#123;public : typedef no_constructor has_constructor;&#125;;// inttemplate &lt;&gt;class type_trais&lt;int&gt; &#123;public : typedef no_constructor has_constructor;&#125;;// doubletemplate &lt;&gt;class type_trais&lt;double&gt; &#123;public : typedef no_constructor has_constructor;&#125;;ostream &amp;operator&lt;&lt;(ostream &amp;out, const no_constructor &amp;) &#123; out &lt;&lt; &quot;yes&quot;; return out;&#125;ostream &amp;operator&lt;&lt;(ostream &amp;out, const yes_constructor &amp;) &#123; out &lt;&lt; &quot;no&quot;; return out;&#125;#define TEST(type) \\ cout &lt;&lt; #type &lt;&lt; &quot; : &quot;&lt;&lt; type_trais&lt;type&gt;::has_constructor() &lt;&lt; endl;int main() &#123; TEST(int); TEST(A); TEST(double); TEST(B); TEST(string); TEST(string *); // cout &lt;&lt; type_trais&lt;B&gt;::has_constructor &lt;&lt; endl; // yes return 0;&#125;ENDS(test4)int main() &#123; // å‡½æ•°æ¨¡æ¿å…¨ç‰¹åŒ– // test1::main(); // æ¨¡æ¿ç±» // test2::main(); // åˆ¤æ–­ç›¸å…³çš„ç±»å‹æœ‰æ²¡æœ‰æ„é€ å‡½æ•° //test3::main(); test4::main(); return 0;&#125; å¯å˜å‚æ•°æ¨¡æ¿1234567template&lt;typename T, typename ...ARGS&gt;// ARGS (ç±»å‹é›†åˆ)... args (å˜é‡é›†åˆ)void Print(const T &amp;a, ARGS... args) &#123; cout &lt;&lt; a &lt;&lt; endl; Print(args...); return ;&#125; ä»£ç è§£é‡Š: â€‹ **ARGS(ç±»å‹é›†åˆ)**ä»£è¡¨æ¨¡æ¿ä¸­å‰©ä½™éƒ¨åˆ†çš„ç±»å‹æ•°é‡æ˜¯å¯å˜çš„ï¼Œä½†æœ€å°‘ä¸º1ä¸ªã€‚ â€‹ æ­¤ä»£ç ä¼šé€’å½’å±•å¼€æ¨¡æ¿å‡½æ•°Print 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758/************************************************************************* &gt; File Name: 4.template_args.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ23æ—¥ æ˜ŸæœŸå…­ 22æ—¶03åˆ†13ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125;BEGINS(test1)class A &#123;public : A(int x, int y) : x(x), y(y) &#123;&#125; int x, y;&#125;;ostream &amp;operator&lt;&lt;(ostream &amp;out, const A &amp;a) &#123; out &lt;&lt; &quot;Class A : &quot; &lt;&lt; a.x &lt;&lt; &quot;, &quot; &lt;&lt; a.y; return out;&#125;template&lt;typename T&gt;void Print(T a) &#123; cout &lt;&lt; a &lt;&lt; endl; return ;&#125;template&lt;typename T, typename ...ARGS&gt;void Print(T a, ARGS... args) &#123; cout &lt;&lt; a &lt;&lt; &quot; | &quot;; // æ²¡æœ‰ç»ˆæ­¢æ¡ä»¶å®ç°ä¸€ä¸ªç±»ä¼¼é‡è½½ Print(args...); return ;&#125;int main() &#123; A a(5, 6); Print(&quot;hello world&quot;); Print(&quot;hello world&quot;, 3, 3.4, a); Print(3, a, 6.1, &quot;ttw&quot;); return 0;&#125;ENDS(test1)int main() &#123; // æ‰“å°ä»»æ„å‚æ•° test1::main(); return 0;&#125; ä»£ç åˆé›† test1::æ‰“å°ä»»æ„å‚æ•° test2::åˆ†æå˜å‚æ¨¡æ¿çš„å‚æ•° test3::å¯å˜å‚æ•°æ‰©å……å®ç°æ™ºèƒ½ä¼ å…¥3ä¸ªå‚æ•° test4::å¯å˜å‚æ•°æ‰©å…… ç±»ä¼¼function test5::ç¼–è¯‘æœŸå¸¸é‡ test6::å˜å‚æ¨¡æ¿ 123456&#x2F;&#x2F; æ‰“å°ä»»æ„å‚æ•°&#x2F;&#x2F; test1::main();&#x2F;&#x2F; åˆ†æå˜å‚æ¨¡æ¿çš„å‚æ•°&#x2F;&#x2F; test2::main();&#x2F;&#x2F; function&#x2F;&#x2F; test4::mian(); 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219BEGINS(test2)template&lt;typename T, typename ... ARGS&gt;class ARG &#123;public : typedef T type; typedef ARG&lt;ARGS...&gt; rest;&#125;;template&lt;typename T&gt;class ARG&lt;T&gt; &#123;public : typedef T type;&#125;;template&lt;typename T, typename ...ARGS&gt;class Test &#123;public : // ARG(ARGS) å·¥å…·æ¨¡æ¿ç±» åŠŸèƒ½ï¼šâ†“ // è·å–ARGSå˜å‚åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªç±»å‹å’Œç¬¬äºŒä¸ªç±»å‹ T operator()(typename ARG&lt;ARGS...&gt;::type a, typename ARG&lt;ARGS...&gt;::rest::type b) &#123; return a + b; &#125;&#125;;int main() &#123; // ä¼ å…¥2ä¸ªintè¿”å›ä¸€ä¸ªintç±»å‹ Test&lt;int, int, int&gt; t1; // ä¼ å…¥doubleç±»å‹intç±»å‹è¿”doubleç±»å‹ Test&lt;double, double, int&gt; t2; cout &lt;&lt; t1(3, 4) &lt;&lt; endl; cout &lt;&lt; t2(3.5, 4) &lt;&lt; endl; return 0;&#125;ENDS(test2)BEGINS(test3)template&lt;typename T, typename ... ARGS&gt;class ARG &#123;public : typedef T type; typedef ARG&lt;ARGS...&gt; rest;&#125;;template&lt;typename T&gt;class ARG&lt;T&gt; &#123;public : typedef T type; typedef T ftype;&#125;;template&lt;typename T, typename ...ARGS&gt;class Test &#123;public : // ARG(ARGS) å·¥å…·æ¨¡æ¿ç±» åŠŸèƒ½ï¼šâ†“ // è·å–ARGSå˜å‚åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªç±»å‹å’Œç¬¬äºŒä¸ªç±»å‹ T operator()(typename ARG&lt;ARGS...&gt;::type a, typename ARG&lt;ARGS...&gt;::rest::ftype b) &#123; return a + b; &#125;&#125;;int main() &#123; // ä¼ å…¥2ä¸ªintè¿”å›ä¸€ä¸ªintç±»å‹ Test&lt;int, int, int&gt; t1; // ä¼ å…¥doubleç±»å‹intç±»å‹è¿”doubleç±»å‹ Test&lt;double, double, int&gt; t2; // Test&lt;double, int, int, int&gt; t3; cout &lt;&lt; t1(3, 4) &lt;&lt; endl; cout &lt;&lt; t2(3.5, 4) &lt;&lt; endl; return 0;&#125;ENDS(test3)BEGINS(test4)template&lt;typename T, typename ... ARGS&gt;class ARG &#123;public : typedef T type; typedef ARG&lt;ARGS...&gt; rest;&#125;;template&lt;typename T&gt;class ARG&lt;T&gt; &#123;public : typedef T type; typedef T ftype;&#125;;template&lt;typename T, typename ...ARGS&gt; class Test;template&lt;typename T, typename ...ARGS&gt;class Test&lt;T(ARGS...)&gt; &#123;public : // ARG(ARGS) å·¥å…·æ¨¡æ¿ç±» åŠŸèƒ½ï¼šâ†“ // è·å–ARGSå˜å‚åˆ—è¡¨ä¸­ç¬¬ä¸€ä¸ªç±»å‹å’Œç¬¬äºŒä¸ªç±»å‹ T operator()(typename ARG&lt;ARGS...&gt;::type a, typename ARG&lt;ARGS...&gt;::rest::ftype b) &#123; return a + b; &#125;&#125;;int main() &#123; /* // ä¼ å…¥2ä¸ªintè¿”å›ä¸€ä¸ªintç±»å‹ Test&lt;int, int, int&gt; t1; // ä¼ å…¥doubleç±»å‹intç±»å‹è¿”doubleç±»å‹ Test&lt;double, double, int&gt; t2; // Test&lt;double, int, int, int&gt; t3; */ Test&lt;int(int, int)&gt; t1; Test&lt;double(int, int)&gt; t2; cout &lt;&lt; t1(3, 4) &lt;&lt; endl; cout &lt;&lt; t2(3.5, 4) &lt;&lt; endl; return 0;&#125;ENDS(test4)BEGINS(test5)template&lt;int M&gt;void Print() &#123; cout &lt;&lt; M &lt;&lt; &quot;, &quot;; Print&lt;M - 1&gt;();&#125;template&lt;&gt;void Print&lt;1&gt;() &#123; cout &lt;&lt; 1 &lt;&lt; endl; return ;&#125;int main() &#123; Print&lt;5&gt;(); Print&lt;15&gt;(); Print&lt;2&gt;(); Print&lt;10&gt;(); return 0;&#125;ENDS(test5)BEGINS(test6)template&lt;int N, typename T, typename ...ARGS&gt;struct ARG &#123; typedef typename ARG&lt;N - 1, ARGS...&gt;::type type;&#125;;template&lt;typename T, typename ...ARGS&gt;struct ARG&lt;1, T, ARGS...&gt; &#123; typedef T type;&#125;;template&lt;typename T&gt;struct ARG&lt;1, T&gt; &#123; typedef T type;&#125;;template&lt;typename T, typename ...ARGS&gt;struct NUM_ARGS &#123; static constexpr int r = NUM_ARGS&lt;ARGS...&gt;::r + 1;&#125;;template&lt;typename T&gt;struct NUM_ARGS&lt;T&gt; &#123; static constexpr int r = 1;&#125;;template&lt;int N&gt;struct Zero &#123; typedef int no;&#125;;template&lt;&gt;struct Zero&lt;0&gt; &#123; typedef int yes;&#125;;template&lt;typename T, typename ...ARGS&gt; class Test;template&lt;typename T, typename ...ARGS&gt;class Test&lt;T(ARGS...)&gt; &#123;public : typedef typename Zero&lt;2 - NUM_ARGS&lt;ARGS...&gt;::r&gt;::yes TYPE_NUM_2; T operator()( typename ARG&lt;1, ARGS...&gt;::type a, typename ARG&lt;2, ARGS...&gt;::type b) &#123; return a + b; &#125;&#125;;int main() &#123; Test&lt;int(int, int)&gt; t1; // Test&lt;bool(int, int, int)&gt; t2; cout &lt;&lt; t1(3, 2); return 0;&#125;ENDS(test6)int main() &#123; // æ‰“å°ä»»æ„å‚æ•° // test1::main(); // åˆ†æå˜å‚æ¨¡æ¿çš„å‚æ•° // test2::main(); // function // test4::mian(); // ç¼–è¯‘æœŸå¸¸é‡ //test5::main(); test6::main(); return 0;&#125; æ¨¡æ¿ç»ƒä¹ -ä»£ç  test1::å®ç°ä¸€ä¸ªæ¨¡æ¿è¿›è¡Œç´¯åŠ æ±‚å’Œ test2::åˆ¤æ–­ä¸€ä¸ªæ•°å­—æ˜¯ä¸æ˜¯å¶æ•° test3::åˆ¤æ–­ä¸€ä¸ªæ•°å­—çš„èŒƒå›´ test4::åˆ¤æ–­ä¸€ä¸ªæ•°å­—æ˜¯ä¸æ˜¯ç´ æ•° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139/************************************************************************* &gt; File Name: 5.final_template_test.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ24æ—¥ æ˜ŸæœŸæ—¥ 15æ—¶39åˆ†20ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace x// å®ç°ä¸€ä¸ªæ¨¡æ¿è¿›è¡Œç´¯åŠ æ±‚å’ŒBEGINS(test1)template&lt;int n&gt;class sum &#123;public : static constexpr int r = sum&lt;n - 1&gt;::r + n;&#125;;template &lt;&gt;class sum&lt;1&gt; &#123;public : static constexpr int r = 1;&#125;;int main() &#123; cout &lt;&lt; sum&lt;5&gt;::r &lt;&lt; endl; // sum of 1 - 5 cout &lt;&lt; sum&lt;7&gt;::r &lt;&lt; endl; // sum of 1 - 7 cout &lt;&lt; sum&lt;100&gt;::r &lt;&lt; endl; // sum of 1 - 100 return 0;&#125;ENDS(test1)// åˆ¤æ–­ä¸€ä¸ªæ•°å­—æ˜¯ä¸æ˜¯å¶æ•°BEGINS(test2)template&lt;int N&gt;struct YES_OR_NO &#123; static const char *r;&#125;;template&lt;int N&gt;const char *YES_OR_NO&lt;N&gt;::r = &quot;no&quot;;template&lt;&gt;const char *YES_OR_NO&lt;0&gt;::r = &quot;yes&quot;;template&lt;int n&gt;class is_even &#123;public : static const char *r;&#125;;template&lt;int N&gt;const char *is_even&lt;N&gt;::r = YES_OR_NO&lt;N % 2&gt;::r;int main() &#123; cout &lt;&lt; is_even&lt;5&gt;::r &lt;&lt; endl; // no cout &lt;&lt; is_even&lt;6&gt;::r &lt;&lt; endl; // yes return 0;&#125;ENDS(test2)// åˆ¤æ–­ä¸€ä¸ªæ•°å­—çš„èŒƒå›´BEGINS(test3)template&lt;int n&gt;class score_judge &#123;public : static constexpr const char *r = ( n&gt;= 60) ? &quot;good&quot; : &quot;bad&quot;;&#125;;int main() &#123; cout &lt;&lt; score_judge&lt;60&gt;::r &lt;&lt; endl; // good cout &lt;&lt; score_judge&lt;54&gt;::r &lt;&lt; endl; // bad return 0;&#125;ENDS(test3)// åˆ¤æ–­ä¸€ä¸ªæ•°å­—æ˜¯ä¸æ˜¯ç´ æ•°BEGINS(test4)template&lt;int i, int N&gt;class getNext &#123;public : static constexpr int r = (N % i ? i + 1 : 0);&#125;;template&lt;int i, int N&gt;class test &#123;public: static constexpr const char *r = ((i * i) &gt; N ? &quot;yes&quot; : test&lt;getNext&lt;i, N&gt;::r, N&gt;::r);&#125;;template&lt;int N&gt;class test&lt;0, N&gt; &#123;public : static constexpr const char *r = &quot;no&quot;;&#125;;template&lt;int N&gt;class is_prime &#123;public : static constexpr const char *r = test&lt;2, N&gt;::r;&#125;;int main() &#123; cout &lt;&lt; &quot;2 : &quot;&lt;&lt; is_prime&lt;2&gt;::r &lt;&lt; endl; // yes cout &lt;&lt; &quot;3 : &quot;&lt;&lt; is_prime&lt;3&gt;::r &lt;&lt; endl; // yes cout &lt;&lt; &quot;4 : &quot;&lt;&lt; is_prime&lt;5&gt;::r &lt;&lt; endl; // yes cout &lt;&lt; &quot;8 : &quot;&lt;&lt; is_prime&lt;8&gt;::r &lt;&lt; endl; // no cout &lt;&lt; &quot;103 : &quot;&lt;&lt; is_prime&lt;103&gt;::r &lt;&lt; endl; // yes return 0;&#125;ENDS(test4)int main() &#123; // å®ç°ä¸€ä¸ªæ¨¡æ¿è¿›è¡Œç´¯åŠ æ±‚å’Œ test1::main(); cout &lt;&lt; &quot;---------------- åˆ†å‰²çº¿ -------------------&quot; &lt;&lt; endl; // åˆ¤æ–­ä¸€ä¸ªæ•°å­—æ˜¯ä¸æ˜¯å¶æ•° test2::main(); cout &lt;&lt; &quot;---------------- åˆ†å‰²çº¿ -------------------&quot; &lt;&lt; endl; // åˆ¤æ–­ä¸€ä¸ªæ•°å­—çš„èŒƒå›´ test3::main(); cout &lt;&lt; &quot;---------------- åˆ†å‰²çº¿ -------------------&quot; &lt;&lt; endl; // åˆ¤æ–­ä¸€ä¸ªæ•°å­—æ˜¯ä¸æ˜¯ç´ æ•° test4::main(); return 0;&#125; æ¨¡æ¿å¼•ç”¨å¼•ç”¨æŠ˜å  â€‹ å†æ¨¡æ¿ä¸­å¦‚æœæ˜¯å¥‡æ•°ä¸ªå°±æ˜¯å·¦å€¼å¼•ç”¨ï¼Œå¶æ•°ä¸ªæ˜¯å³å€¼å¼•ç”¨ &#x2F;&#x2F; æ¨¡æ¿ä¸­æ¥æ”¶çš„æ˜¯ä¸€ä¸ªå¼•ç”¨æ˜¯&amp;&amp;, è€Œä¸æ˜¯ä¼ ç»Ÿæ„ä¹‰ä¸Šå³å€¼å¼•ç”¨ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespactemplate&lt;typename T&gt;// æ¨¡æ¿ä¸­æ¥æ”¶çš„æ˜¯ä¸€ä¸ªå¼•ç”¨æ˜¯&amp;&amp;, ä¸æ˜¯å·¦å€¼å¼•ç”¨æˆ–è€…æ˜¯å³å€¼å¼•ç”¨BEGINS(reference_param)template&lt;typename T&gt;struct remove_reference &#123; typedef T type;&#125;;template&lt;typename T&gt;struct remove_reference&lt;T &amp;&gt; &#123; typedef T type;&#125;;template&lt;typename T&gt;struct remove_reference&lt;T &amp;&amp;&gt; &#123; typedef T type;&#125;;template&lt;typename T&gt;// å½“å‰è¿™ä¸ªæ¨¡æ¿æ¥æ”¶çš„æ˜¯ä¸€ä¸ªå¼•ç”¨, ä¸æ˜¯å·¦å€¼å¼•ç”¨æˆ–è€…æ˜¯å³å€¼å¼•ç”¨void func(T &amp;&amp;a) &#123; typename remove_reference&lt;T&gt;::type c; cout &lt;&lt; &quot;function T&amp; a = &quot; &lt;&lt; a &lt;&lt; endl; return ;&#125;int main() &#123; int n = 123; func(n); func(123); // å·¦å€¼å¼•ç”¨ å»æ‰&amp; typename remove_reference&lt;int &amp;&amp;&gt;::type a; // å³å€¼å¼•ç”¨ å»æ‰&amp;&amp; typename remove_reference&lt;int &amp;&gt;::type b; typename remove_reference&lt;int&gt;::type c; return 0;&#125;ENDS(reference_param) ä»£ç åˆé›†-function(æ‰‹åŠ¨å®ç°) reference_param::å»æ‰&amp; bind_usage::bind æ–¹æ³• å°†å‡½æ•°å’Œç›¸å…³çš„å‚æ•°æ‰“åŒ…ç»‘å®š addConst::æ·»åŠ consté™å®š addLvalueReference::è½¬æ¢æˆå·¦å€¼å¼•ç”¨ removePointer::å»æ‰ * function_impl::function_æ‰‹åŠ¨å®ç° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289/************************************************************************* &gt; File Name: 6.function.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ24æ—¥ æ˜ŸæœŸæ—¥ 21æ—¶18åˆ†55ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;functional&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace x/*BEGINS(reference_param)template&lt;typename T&gt;struct remove_reference &#123; typedef T type;&#125;;template&lt;typename T&gt;struct remove_reference&lt;T &amp;&gt; &#123; typedef T type;&#125;;template&lt;typename T&gt;struct remove_reference&lt;T &amp;&amp;&gt; &#123; typedef T type;&#125;;template&lt;typename T&gt;// å½“å‰è¿™ä¸ªæ¨¡æ¿æ¥æ”¶çš„æ˜¯ä¸€ä¸ªå¼•ç”¨, ä¸æ˜¯å·¦å€¼å¼•ç”¨æˆ–è€…æ˜¯å³å€¼å¼•ç”¨void func(T &amp;&amp;a) &#123; typename remove_reference&lt;T&gt;::type c; cout &lt;&lt; &quot;function T&amp; a = &quot; &lt;&lt; a &lt;&lt; endl; return ;&#125;int main() &#123; int n = 123; func(n); func(123); // å·¦å€¼å¼•ç”¨ å»æ‰&amp; typename remove_reference&lt;int &amp;&amp;&gt;::type a; // å³å€¼å¼•ç”¨ å»æ‰&amp;&amp; typename remove_reference&lt;int &amp;&gt;::type b; typename remove_reference&lt;int&gt;::type c; return 0;&#125;ENDS(reference_param)// æ·»åŠ consté™å®šBEGINS(addConst)template&lt;typename T&gt;struct add_const &#123; typedef const T type;&#125;;// ä¸ºä»€ä¹ˆè¿˜æœ‰ä¸ªåç‰¹åŒ– const T ä¼ å…¥ä¸Šé¢çš„ç±»æ¨¡æ¿ä¸­ä¸­å°± ä¼šå˜å‚ const const Ttemplate&lt;typename T&gt;struct add_const&lt;const T&gt; &#123; typedef const T type;&#125;;template&lt;typename T&gt;void func(T a) &#123; typename add_const&lt;T&gt;::type c = 456; // c = 890; cout &lt;&lt; &quot;function T&amp; a = &quot; &lt;&lt; a &lt;&lt; endl; return ;&#125;;int main() &#123; int n = 123; func(n); return 0;&#125;ENDS(addConst)// è½¬æ¢æˆå·¦å€¼å¼•ç”¨BEGINS(addLvalueReference)template&lt;typename T&gt;struct add_lvalue_reference &#123; typedef T &amp; type;&#125;;template&lt;typename T&gt;struct add_lvalue_reference&lt;T &amp;&gt; &#123; typedef T &amp; type;&#125;;template&lt;typename T&gt;struct add_lvalue_reference&lt;T &amp;&amp;&gt; &#123; typedef T &amp; type;&#125;;template&lt;typename T&gt;void func(T &amp;&amp;a) &#123; cout &lt;&lt; &quot;function T&amp; a = &quot; &lt;&lt; a &lt;&lt; endl; return ;&#125;int main() &#123; func(123); return 0;&#125;ENDS(addLvaluerReference)// å»æ‰ *BEGINS(removePointer)template&lt;typename T&gt;struct remove_pointer &#123; typedef T type;&#125;;template&lt;typename T&gt;struct remove_pointer&lt;T *&gt; &#123; // å§Tç±»å‹çš„ä¹Ÿå»æ‰ typedef typename remove_pointer&lt;T&gt;::type type;&#125;;int main() &#123; cout &lt;&lt; sizeof(typename remove_pointer&lt;int&gt;::type) &lt;&lt; endl; cout &lt;&lt; sizeof(typename remove_pointer&lt;int *&gt;::type) &lt;&lt; endl; cout &lt;&lt; sizeof(typename remove_pointer&lt;int **&gt;::type) &lt;&lt; endl; cout &lt;&lt; sizeof(typename remove_pointer&lt;int ***&gt;::type) &lt;&lt; endl; return 0;&#125;ENDS(removePointer)// bind æ–¹æ³• å°†å‡½æ•°å’Œç›¸å…³çš„å‚æ•°æ‰“åŒ…ç»‘å®šBEGINS(bind_usage)int add(int a, int b) &#123; cout &lt;&lt; &quot;add(a, b) = &quot;; return a + b;&#125;void add_one(int &amp;n) &#123; n += 1; return ;&#125;void func(int n, const char *msg) &#123; cout &lt;&lt; n &lt;&lt; &quot; &quot; &lt;&lt; msg &lt;&lt; endl; return ;&#125;int main() &#123; // bind ä½¿ç”¨ auto t1 = bind(add, 3, 4); cout &lt;&lt; t1() &lt;&lt; endl; cout &lt;&lt; t1() &lt;&lt; endl; cout &lt;&lt; t1() &lt;&lt; endl; int n = 1; cout &lt;&lt; &quot;n = &quot; &lt;&lt; n &lt;&lt; endl; // åŠ ä¸Š ref() æ‰æ˜¯å¼•ç”¨ä¼ é€’è€Œä¸æ˜¯å€¼ä¼ é€’ auto t2 = bind(add_one, ref(n)); t2(); t2(); t2(); cout &lt;&lt; &quot;after three times t2 function call,n = &quot; &lt;&lt; n &lt;&lt; endl; func(3, &quot;hello world&quot;); // bind è°ƒæ•´å‡½æ•°å‚æ•°é¡ºåº auto t3 = bind(func, std::placeholders::_4, std::placeholders::_1); t3(&quot;hello world&quot;, 3, 5, 6, 7); return 0;&#125;ENDS(bind_usage)*/BEGINS(function_impl)template&lt;typename T, typename ...ARGS&gt;class Base &#123;public : virtual T run(ARGS...) = 0; virtual Base&lt;T, ARGS...&gt; *getCopy() = 0; virtual ~Base()&#123;&#125;&#125;;template&lt;typename T, typename ...ARGS&gt;class normal_function : public Base&lt;T, ARGS...&gt; &#123;public : normal_function(T(*ptr)(ARGS...)) : func(ptr) &#123;&#125; T run(ARGS... args) override &#123; return func(forward&lt;ARGS&gt;(args)...); &#125; Base&lt;T, ARGS...&gt; *getCopy() override &#123; return new normal_function(*this); &#125;private : T (*func)(ARGS...);&#125;;template&lt;typename CLASS_T, typename T, typename ...ARGS&gt;class functor : public Base&lt;T, ARGS...&gt; &#123;public : functor(CLASS_T obj) : obj(obj) &#123;&#125; T run(ARGS... args) override&#123; return obj(forward&lt;ARGS&gt;(args)...); &#125; Base&lt;T, ARGS...&gt; *getCopy() override &#123; return new functor(*this); &#125;private : CLASS_T obj;&#125;;template&lt;typename T, typename ...ARGS&gt; class function;template&lt;typename T, typename ...ARGS&gt;class function&lt;T(ARGS...)&gt; &#123;public : // ptr æ™®é€šå‡½æ•°æŒ‡é’ˆ function(T (*ptr)(ARGS...)) : ptr(new normal_function&lt;T, ARGS...&gt;(ptr)) &#123;&#125; // obj å¯è°ƒç”¨å¯¹è±¡ template&lt;typename CLASS_T&gt; function(CLASS_T obj) : ptr(new functor&lt;CLASS_T, T, ARGS...&gt;(obj))&#123;&#125; T operator()(ARGS... args) &#123; return ptr-&gt;run(forward&lt;ARGS&gt;(args)...); &#125; function &amp;operator=(const function&lt;T(ARGS...)&gt; &amp;func) &#123; delete this-&gt;ptr; this-&gt;ptr = func.ptr-&gt;getCopy(); return *this; &#125; ~function() &#123; delete this-&gt;ptr; &#125;private : Base&lt;T, ARGS...&gt; *ptr;&#125;;int func(int a, int b) &#123; cout &lt;&lt; &quot;normal function : &quot;; return a + b;&#125;;class ADD_MULT &#123;public : ADD_MULT(int x) : x(x) &#123;&#125; int operator()(int a, int b) &#123; cout &lt;&lt; &quot;functor : &quot;; return (a + b) * 2; &#125;private : int x;&#125;;int main() &#123; ADD_MULT add_mult(2); function&lt;int(int, int)&gt; f1 = func; function&lt;int(int, int)&gt; f2 = add_mult; cout &lt;&lt; f1(3, 4) &lt;&lt; endl; cout &lt;&lt; f2(3, 4) &lt;&lt; endl; f1 = f2; cout &lt;&lt; f1(3, 4); return 0;&#125;ENDS(function_impl)int main() &#123; // reference_param::main(); // bind_usage::main(); // addConst::main(); // addLvalueReference::main(); // removePointer::main(); function_impl::main(); return 0;&#125; æºç æ–‡ä»¶*.cppç‚¹æˆ‘è·³è½¬:https://github.com/qzwl123/C-/tree/main/%E6%A8%A1%E6%9D%BF","categories":[{"name":"OOP","slug":"OOP","permalink":"https://tutouwang.vercel.app/categories/OOP/"}],"tags":[]},{"title":"å¤–ä¼ ","slug":"å¤–ä¼ ","date":"2022-07-21T02:23:16.000Z","updated":"2022-07-21T07:33:24.403Z","comments":true,"path":"2022/07/21/å¤–ä¼ /","link":"","permalink":"https://tutouwang.vercel.app/2022/07/21/%E5%A4%96%E4%BC%A0/","excerpt":"","text":"å¼‚å¸¸ exccpticnå¼‚å¸¸å¤„ç† æ–­è¨€&#x2F;if-else â€‹ assert() â€‹ ä¸­æ–­ç¨‹åºæ‰§è¡Œï¼ˆç›´æ¥ä¸­æ–­ä¸ç»™ä¿®å¤çš„æœºä¼šï¼‰ â€‹ assert æŠ¥é”™åªæœ‰ç¨‹åºèƒ½çœ‹æ‡‚çš„ä¿¡æ¯(æ•°æ®ç»“æ„çš„)å¯¹ç”¨æˆ·ä¸æ˜¯å¾ˆå‹å¥½ é”™è¯¯ç  sgrt(1) &gt;&#x3D; 0 å¼‚å¸¸ï¼ˆC++) try catch {} åœ¨æ ˆä¸Šå¯»æ‰¾ä»£ç -&gt; raise&#x2F;throvo c++å¼‚å¸¸C++ æä¾›çš„å¼‚å¸¸ç±» 12#include &lt;stdexcept&gt;#include &lt;exception&gt; 12345678910111213141516171819202122232425262728/************************************************************************* &gt; File Name: 1.tryCatch.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ21æ—¥ æ˜ŸæœŸå›› 10æ—¶41åˆ†00ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;int main() &#123; try &#123; // å¯èƒ½å«æœ‰å¼‚å¸¸çš„ä»£ç  cout &lt;&lt; &quot;throwing&quot; &lt;&lt; endl; throw(1); // å¼‚å¸¸å,åé¢çš„ä»£ç å°±ä¸ä¼šæ‰§è¡Œäº† cout &lt;&lt; &quot;lalalala&quot; &lt;&lt; endl; // ... æ•è·å…¨éƒ¨å¼‚å¸¸ &#125; catch (int &amp;e) &#123; cout &lt;&lt; &quot;caught an integer&quot; &lt;&lt; endl; &#125; catch(...) &#123; cout &lt;&lt; &quot;exception caught&quot; &lt;&lt; endl; &#125; return 0;&#125; 123456789101112131415161718192021222324252627282930313233343536#include &lt;iostream&gt;using namespace std;// å®šä¹‰ä¸€ä¸ªè‡ªå·±çš„å¼‚å¸¸class MyException : public runtime_error &#123;public : // runtime_error åˆå§‹åŒ–çˆ¶ç±»å¼‚å¸¸ MyException(const string &amp;s) : runtime_error(s) &#123; cout &lt;&lt; &quot;MyException ctor&quot; &lt;&lt; endl; &#125; // noexcept ä¸ä¼šå†æŠ›å‡ºå¼‚å¸¸äº† // è‡ªå®šä¹‰å¼‚å¸¸ä¿¡æ¯ const char *what() const noexcept override &#123; return &quot;123&quot;; &#125;&#125;;int main() &#123; try &#123; // å¯èƒ½å«æœ‰å¼‚å¸¸çš„ä»£ç  cout &lt;&lt; &quot;throwing&quot; &lt;&lt; endl; throw(MyException(&quot;hello world&quot;)); // å¼‚å¸¸å,åé¢çš„ä»£ç å°±ä¸ä¼šæ‰§è¡Œäº† cout &lt;&lt; &quot;lalalala&quot; &lt;&lt; endl; // ... æ•è·å…¨éƒ¨å¼‚å¸¸ å¼•ç”¨ä¼ é€’å› ä¸ºå†å‘ä¸Šä¼ é€’æ—¶å€™å¯èƒ½ä¼šå‘ç”Ÿä¸€äº›æ·±æ‹·è´çš„æƒ…å†µ &#125; catch (runtime_error &amp;e) &#123; cout &lt;&lt; e.what() &lt;&lt; endl; &#125; catch(...) &#123; cout &lt;&lt; &quot;exception caught&quot; &lt;&lt; endl; &#125; return 0;&#125; æ ˆå †-å¼‚å¸¸ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116/************************************************************************* &gt; File Name: 1.tryCatch.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ21æ—¥ æ˜ŸæœŸå›› 10æ—¶41åˆ†00ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test1)// å®šä¹‰ä¸€ä¸ªè‡ªå·±çš„å¼‚å¸¸class MyException : public runtime_error &#123;public : MyException(const string &amp;s) : runtime_error(s) &#123; cout &lt;&lt; &quot;MyException ctor&quot; &lt;&lt; endl; &#125; // noexcept ä¸ä¼šå†æŠ›å‡ºå¼‚å¸¸äº† const char *what() const noexcept override &#123; return &quot;123&quot;; &#125;&#125;;int main() &#123; try &#123; // å¯èƒ½å«æœ‰å¼‚å¸¸çš„ä»£ç  cout &lt;&lt; &quot;throwing&quot; &lt;&lt; endl; throw(MyException(&quot;hello world&quot;)); // å¼‚å¸¸å,åé¢çš„ä»£ç å°±ä¸ä¼šæ‰§è¡Œäº† cout &lt;&lt; &quot;lalalala&quot; &lt;&lt; endl; // ... æ•è·å…¨éƒ¨å¼‚å¸¸ &#125; catch (runtime_error &amp;e) &#123; cout &lt;&lt; e.what() &lt;&lt; endl; &#125; catch(...) &#123; cout &lt;&lt; &quot;exception caught&quot; &lt;&lt; endl; &#125; return 0;&#125;ENDS(test1)BEGINS(test2)// å·¥å…·äººclass Helper &#123;public : /* Helper(const char *s) &#123; // cout &lt;&lt; this &lt;&lt; s &lt;&lt; &quot; ï¼š Helper ctor&quot; &lt;&lt; endl; &#125; */ Helper() &#123; cout &lt;&lt; this &lt;&lt; &quot; : Helper ctor&quot; &lt;&lt; endl; &#125; ~Helper() &#123; cout &lt;&lt; &quot;Helper dtor&quot; &lt;&lt; endl; &#125; void boom() &#123; cout &lt;&lt; &quot;boom&quot; &lt;&lt; endl; &#125;&#125;;void inner() &#123; // Helper p1[3] = &#123;Helper(&quot;p1&quot;), Helper(&quot;p1&quot;), Helper(&quot;p1&quot;)&#125;; // stack æ ˆä¸Š ä¼šå‘—è‡ªåŠ¨ææ„æ‰ å†æŠ›å‡ºå¼‚å¸¸å‰å°±ä¼šææ„æ‰ // Helper p1[3] = &#123;&quot;p1&quot;, &quot;p1&quot;, &quot;p1&quot;&#125;; // stack æ ˆä¸Š ä¼šå‘—è‡ªåŠ¨ææ„æ‰ å†æŠ›å‡ºå¼‚å¸¸å‰å°±ä¼šææ„æ‰ // Helper *p2 = new Helper[3]&#123;&quot;p2&quot;, &quot;p2&quot;, &quot;p2&quot;&#125;; // åœ¨å †ä¸Šå¼€è¾Ÿææ„å‡½æ•°å°±ä¸ä¼šå‘—è°ƒç”¨ // åªæ¸…ç†æ ˆä¸Šå†…å®¹ stack unwind æ ˆå±•å¼€ Helper p1[3]; // stack æ ˆä¸Š ä¼šå‘—è‡ªåŠ¨ææ„æ‰ å†æŠ›å‡ºå¼‚å¸¸å‰ å°±ä¼šææ„æ‰ Helper *p2 = new Helper[3]; // åœ¨å †ä¸Šå¼€è¾Ÿææ„å‡½æ•°å°±ä¸ä¼š å‘—è°ƒç”¨ å†…å­˜æ³„æ¼ throw(1); // å‘ä¸Šå»æ‰¾æ ˆä¸Šå¤„ç†å‡½æ•° main &lt;- outer &lt;- inner (æ²¡æ‰¾åˆ°å°±å‘ä¸Šæ‰¾ å®Œäº†ä¼šæŠŠæœ¬å±‚æ¸…æ‰) p1[0].boom();&#125;void outer() &#123; try &#123; inner(); &#125; catch(...) &#123; cout &lt;&lt; &quot;exception caught&quot; &lt;&lt; endl; &#125;&#125;int main() &#123; outer(); return 0;&#125;ENDS(test2)int main() &#123; // å¼‚å¸¸å¤„ç†å³è‡ªå®šä¹‰å¼‚å¸¸å¤„ç† // test1::main(); // æ ˆ-å † test2::main(); return 0;&#125; å‡½æ•°è°ƒç”¨è¿‡ç¨‹ å¤„ç†å‡½æ•°å‚æ•° ä¸€èˆ¬æ¥æ‰€ (å‹æ ˆ)å®ç° å°†è¿”å›åœ°å€ â€‹ å‹æ ˆ å¤‡ä»½åŸæ ˆå¸§ å‹æ ˆ å¼€è¾Ÿä¿¡æ ˆå¸§ 4ç§å‡½æ•°è°ƒç”¨æ–¹å¼ codecl (c++&#x2F;cé»˜è®¤) stdcall fastcall ç±»(thiscall) codeclæ”¾å‚æ•°(æ ˆ)ã€è°ƒç”¨å‡½æ•°ã€æ¸…ç†å‚æ•° ç‰¹ç‚¹ï¼šå‚æ•°æ”¾åœ¨æ ˆä¸Šã€å‚æ•°ç”±å¤–å±‚æ¸…ç† æ±‡ç¼–æµç¨‹ å‘æ ˆä¸Šåå‘pushå‚æ•° callè°ƒç”¨(è‡ªåŠ¨pushè¿”å›åœ°å€) push ebp (å¤‡ä»½åŸæ ˆåº•) mov ebp, eso (æé«˜æ ˆåº•) sub esp, _ (æé«˜æ ˆé¡¶) add esp, _ (æ¢å¤æ ˆé¡¶) mov esp, ebp (æ¢å¤æ ˆé¡¶) pop ebp (æ¢å¤æ ˆåº•) ret æ¸…è¿”å›åœ°å€å¹¶è¿”å› åœ¨å‡½æ•°å¤–æ¸…ç†å‚æ•°","categories":[],"tags":[]},{"title":"å¤šæ€","slug":"OOP/å¤šæ€","date":"2022-07-19T13:47:48.000Z","updated":"2022-09-24T06:47:35.082Z","comments":true,"path":"2022/07/19/OOP/å¤šæ€/","link":"","permalink":"https://tutouwang.vercel.app/2022/07/19/OOP/%E5%A4%9A%E6%80%81/","excerpt":"","text":"å¤šæ€å¤šæ€ï¼šç®€å•çš„æ¥è¯´å°±æ˜¯ä½ è·Ÿä½ çˆ¸çˆ¸æœ‰ç›¸åŒçš„è¡Œä¸ºæ¨¡å¼ï¼Œä½†æ˜¯å…·ä½“çš„è¡Œä¸ºä¸ä¸€æ ·å°±åƒæ˜¯è¯´ä½ çˆ¸ä¸Šç­ä½ ä¹Ÿä¸Šç­ï¼Œä½†æ˜¯å·¥ä½œå†…å®¹ä¸ä¸€æ ·ï¼Œä½ çˆ¸ä¹Ÿä¼šè·‘ä½ ä¹Ÿä¼šè·‘ä½†æ˜¯ä½ ä¿©è·‘çš„å§¿åŠ¿ä¸ä¸€æ · - è¿™ä¸ªåœºæ™¯åé¦ˆçš„æ˜¯çˆ¶ç±»å’Œå­ç±»åŠŸèƒ½ä¸Šçš„å·®åˆ« æ™®é€šçš„æˆå‘˜æ–¹æ³•æ˜¯è·Ÿç€ç±»èµ°çš„ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455/************************************************************************* &gt; File Name: 1.Animal.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ19æ—¥ æ˜ŸæœŸäºŒ 22æ—¶37åˆ†39ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test1)class Animal &#123;public : void run() &#123; cout &lt;&lt; &quot;I don&#x27;t know to run&quot; &lt;&lt; endl; return ; &#125;&#125;;class Cat : public Animal &#123;public : void run() &#123; cout &lt;&lt; &quot;I can run with fout legs&quot; &lt;&lt; endl; return ; &#125;&#125;;int main() &#123; // æ™®é€šçš„æˆå‘˜æ–¹æ³•æ˜¯è·Ÿç€ç±»èµ°çš„ Cat a; Animal &amp;b = a; Animal *c = &amp;b; a.run(); // let this cat good // cat ç±» æ‰€ä»¥è°ƒç”¨catç±»ä¸­runæ–¹æ³• b.run(); // let this animal go // animal ç±»çš„å¼•ç”¨ æ‰€ä»¥è°ƒç”¨ animalç±»ä¸­runæ–¹æ³• c-&gt;run(); // let this animal go // animal ç±»çš„æŒ‡é’ˆ æ‰€ä»¥è°ƒç”¨ animalç±»ä¸­runæ–¹æ³• return 0;&#125;ENDS(test1)int main() &#123; test1::main(); return 0;&#125; è™šå‡½æ•° c++ä¸­çš„è™šå‡½æ•°çš„ä½œç”¨ä¸»è¦æ˜¯å®ç°äº†å¤šæ€çš„æœºåˆ¶ã€‚å…³äºå¤šæ€ï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯ç”¨çˆ¶ç±»çš„æŒ‡é’ˆæŒ‡å‘å…¶å­ç±»çš„å®ä¾‹ï¼Œç„¶åé€šè¿‡çˆ¶ç±»çš„æŒ‡é’ˆè°ƒç”¨å®é™…å­ç±»çš„æˆå‘˜å‡½æ•°ã€‚è¿™ç§æŠ€æœ¯å¯ä»¥è®©çˆ¶ç±»çš„æŒ‡é’ˆæœ‰â€å¤šç§å½¢æ€â€ï¼Œè¿™æ˜¯ä¸€ç§æ³›å‹æŠ€æœ¯ã€‚ å¦‚æœè°ƒç”¨éè™šå‡½æ•°ï¼Œåˆ™æ— è®ºå®é™…å¯¹è±¡æ˜¯ä»€ä¹ˆç±»å‹ï¼Œéƒ½æ‰§è¡ŒåŸºç±»çš„ç±»å‹æ‰€å®šä¹‰çš„å‡½æ•°ã€‚ éè™šå‡½æ•°æ€»æ˜¯åœ¨ç¼–è¯‘æ—¶æ ¹æ®è°ƒç”¨è¯¥å‡½æ•°å¯¹è±¡ï¼Œå¼•ç”¨æˆ–æŒ‡é’ˆçš„ç±»å‹è€Œå®šã€‚å¦‚æœæ‰è™šå‡½æ•°ï¼Œåˆ™ç›´åˆ°è¿è¡Œæ—¶æ‰èƒ½æ­£ç¡®è°ƒç”¨é‚£ä¸ªå‡½æ•°ï¼Œè¿è¡Œçš„è™šå‡½æ•°æ˜¯å¼•ç”¨æ‰€ç»‘å®šæˆ–æŒ‡é’ˆæ‰€æŒ‡å‘çš„å¯¹è±¡æ‰€å±ç±»å‹å®šä¹‰çš„ç‰ˆæœ¬ã€‚è™šå‡½æ•°å¿…é¡»æ˜¯åŸºç±»çš„éé™æ€æˆå‘˜å‡½æ•°ã€‚è™šå‡½æ•°çš„ä½œç”¨æ˜¯å®ç°åŠ¨æ€è”ç¼–ï¼Œä¹Ÿå°±æ˜¯åœ¨ç¨‹åºçš„è¿è¡Œé˜¶æ®µåŠ¨æ€åœ°é€‰æ‹©åˆé€‚çš„æˆå‘˜å‡½æ•°ï¼Œåœ¨å®šä¹‰äº†è™šå‡½æ•°åï¼Œå¯ä»¥åœ¨åŸºç±»çš„æ´¾ç”Ÿç±»ä¸­å¯¹è™šå‡½æ•°é‡æ–°å®šä¹‰ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­é‡æ–°å®šä¹‰çš„å‡½æ•°åº”ä¸è™šå‡½æ•°å…·æœ‰ç›¸åŒçš„å½¢å‚ä¸ªæ•°å’Œå½¢å‚ç±»å‹ã€‚ä»¥å®ç°ç»Ÿä¸€çš„æ¥å£ï¼Œä¸åŒå®šä¹‰è¿‡ç¨‹ã€‚å¦‚æœåœ¨æ´¾ç”Ÿç±»ä¸­æ²¡æœ‰å¯¹è™šå‡½æ•°é‡æ–°å®šä¹‰ï¼Œåˆ™å®ƒç»§æ‰¿å…¶åŸºç±»çš„è™šå‡½æ•°ã€‚ è™šå‡½æ•°ï¼ˆVirtual Functionï¼‰æ˜¯é€šè¿‡ä¸€å¼ è™šå‡½æ•°è¡¨ï¼ˆVirtual Tableï¼‰æ¥å®ç°çš„ã€‚ç®€ç§°ä¸ºV-Tableã€‚åœ¨è¿™ä¸ªè¡¨ä¸­ï¼Œä¸»æ˜¯è¦ä¸€ä¸ªç±»çš„è™šå‡½æ•°çš„åœ°å€è¡¨ï¼Œè¿™å¼ è¡¨è§£å†³äº†ç»§æ‰¿ã€è¦†ç›–çš„é—®é¢˜ï¼Œä¿è¯å…¶å®¹çœŸå®ååº”å®é™…çš„å‡½æ•°ã€‚è¿™æ ·ï¼Œåœ¨æœ‰è™šå‡½æ•°çš„ç±»çš„å®ä¾‹ä¸­è¿™ä¸ªè¡¨è¢«åˆ†é…åœ¨äº†è¿™ä¸ªå®ä¾‹çš„å†…å­˜ä¸­ï¼Œæ‰€ä»¥ï¼Œå½“æˆ‘ä»¬ç”¨çˆ¶ç±»çš„æŒ‡é’ˆæ¥æ“ä½œä¸€ä¸ªå­ç±»çš„æ—¶å€™ï¼Œè¿™å¼ è™šå‡½æ•°è¡¨å°±æ˜¾å¾—ç”±ä¸ºé‡è¦äº†ï¼Œå®ƒå°±åƒä¸€ä¸ªåœ°å›¾ä¸€æ ·ï¼ŒæŒ‡æ˜äº†å®é™…æ‰€åº”è¯¥è°ƒç”¨çš„å‡½æ•°ã€‚ åœ¨çˆ¶ç±»ä¸­å¦‚æœæŸä¸ªæˆå‘˜æ–¹æ³•æ˜¯è™šçš„,é‚£ä¹ˆåœ¨å­ç±»ä¸­ç›¸åŒçš„å‡½æ•°è‡ªåŠ¨å˜æˆè™šçš„ æ„é€ å‡½æ•°æ˜¯ä¸èƒ½æ˜¯è™šæ„é€ å‡½æ•°çš„ä¸ºä»€ä¹ˆæ„é€ å‡½æ•°ä¸èƒ½æ˜¯è™šå‡½æ•°å‘¢ï¼Ÿè¿™é‡Œä½ éœ€è¦çŸ¥é“ä¸€ä¸ªæ¦‚å¿µï¼Œé‚£å°±æ˜¯è™šå‡½æ•°è¡¨vtblï¼Œæ¯ä¸€ä¸ªæ‹¥æœ‰è™šæˆå‘˜å‡½æ•°çš„ç±»éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘è™šå‡½æ•°è¡¨çš„æŒ‡é’ˆã€‚å¯¹è±¡é€šè¿‡è™šå‡½æ•°è¡¨é‡Œå­˜å‚¨çš„è™šå‡½æ•°åœ°å€æ¥è°ƒç”¨è™šå‡½æ•°ã€‚ é‚£è™šå‡½æ•°è¡¨æŒ‡é’ˆæ˜¯ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–çš„å‘¢ï¼Ÿå½“ç„¶æ˜¯æ„é€ å‡½æ•°ã€‚å½“æˆ‘ä»¬é€šè¿‡newæ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œç¬¬ä¸€æ­¥æ˜¯ç”³è¯·éœ€è¦çš„å†…å­˜ï¼Œç¬¬äºŒæ­¥å°±æ˜¯è°ƒç”¨æ„é€ å‡½æ•°ã€‚è¯•æƒ³ï¼Œå¦‚æœæ„é€ å‡½æ•°æ˜¯è™šå‡½æ•°ï¼Œé‚£å¿…ç„¶éœ€è¦é€šè¿‡vtblæ¥æ‰¾åˆ°è™šæ„é€ å‡½æ•°çš„å…¥å£åœ°å€ï¼Œæ˜¾ç„¶ï¼Œæˆ‘ä»¬ç”³è¯·çš„å†…å­˜è¿˜æ²¡æœ‰åšä»»ä½•åˆå§‹åŒ–ï¼Œä¸å¯èƒ½æœ‰vtblçš„ã€‚å› æ­¤ï¼Œæ„é€ å‡½æ•°ä¸èƒ½æ˜¯è™šå‡½æ•°ã€‚ è™šå‡½æ•°æ˜¯è·Ÿç€å¯¹è±¡èµ°çš„ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test2)class Animal &#123;public : // åŠ ä¸Š virtual åšåŠŸèƒ½æ€§ä¿è¯ virtual void run() &#123; cout &lt;&lt; &quot;I don&#x27;t know to run&quot; &lt;&lt; endl; return ; &#125;&#125;;class Cat : public Animal &#123;public : // override ä¸åšåŠŸèƒ½æ€§çš„ä¿è¯ -&gt; ä½“ç°äº†c++è®¾è®¡çš„å“²å­¦ï¼Œc++æ ¸å¿ƒç†å¿µè®©è¿è¡Œæ—¶å€™é”™è¯¯å˜æˆç¼–è¯‘æ—¶å€™é”™è¯¯ï¼Œç”¨æ›´åŠ çš„ä¸¥æ ¼çš„ç¼–ç è¯­ä¹‰,ç”¨æ›´åŠ çš„ä¸¥æ ¼çš„ç¼– ç è§„èŒƒï¼Œæ˜¯é”™è¯¯æš´éœ²åœ¨ç¼–è¯‘é˜¶æ®µè€Œä¸æ˜¯è¿è¡Œé˜¶æ®µ void run() override &#123; cout &lt;&lt; &quot;I can run with fout legs&quot; &lt;&lt; endl; return ; &#125;&#125;;int main() &#123; // æ™®é€šçš„æˆå‘˜æ–¹æ³•æ˜¯è·Ÿç€ç±»èµ°çš„ Cat a; Animal &amp;b = a; Animal *c = &amp;b; a.run(); // let this cat good // cat ç±» æ‰€ä»¥è°ƒç”¨catç±»ä¸­runæ–¹æ³• b.run(); // let this animal go // animal ç±»çš„å¼•ç”¨ æŒ‡å‘Catå¯¹è±¡ æ‰€ä»¥è°ƒç”¨ Catç±»ä¸­runæ–¹æ³• c-&gt;run(); // let this animal go // animal ç±»çš„æŒ‡é’ˆ æŒ‡å‘Catå¯¹è±¡ æ‰€ä»¥è°ƒç”¨ Catç±»ä¸­runæ–¹æ³• return 0;&#125;ENDS(test2)int main() &#123; // æ™®é€šçš„æˆå‘˜æ–¹æ³•æ˜¯è·Ÿç€ç±»èµ°çš„ // test1::main(); // è™šå‡½æ•°æ˜¯è·Ÿç€å¯¹è±¡èµ°çš„ test2::main();&#125; è¿è¡Œç»“æœ 123I can run with fout legsI can run with fout legsI can run with fout legs è™šå‡½æ•°-&gt;å¯¹è±¡-&gt; è¿è¡ŒæœŸ(è¿è¡Œæ—¶å€™æ‰çŸ¥é“åŠŸèƒ½)-ä»£ç å®ç°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test3)class Animal &#123;public : // åŠ ä¸Š virtual åšåŠŸèƒ½æ€§ä¿è¯ virtual void run() &#123; cout &lt;&lt; &quot;I don&#x27;t know to run&quot; &lt;&lt; endl; return ; &#125; virtual void foo() &#123; cout &lt;&lt; &quot;foo function&quot; &lt;&lt; endl; return ; &#125;&#125;;class Cat : public Animal &#123;public : // override ä¸åšåŠŸèƒ½æ€§çš„ä¿è¯ -&gt; ä½“ç°äº†c++è®¾è®¡çš„å“²å­¦ï¼Œc++æ ¸å¿ƒç†å¿µè®©è¿è¡Œæ—¶å€™é”™è¯¯å˜æˆç¼–è¯‘æ—¶å€™é”™è¯¯ï¼Œç”¨æ›´åŠ çš„ä¸¥æ ¼çš„ç¼–ç è¯­ä¹‰,ç”¨æ›´åŠ çš„ä¸¥æ ¼çš„ç¼– ç è§„èŒƒï¼Œæ˜¯é”™è¯¯æš´éœ²åœ¨ç¼–è¯‘é˜¶æ®µè€Œä¸æ˜¯è¿è¡Œé˜¶æ®µ void run() override &#123; cout &lt;&lt; &quot;I can run with fout legs&quot; &lt;&lt; endl; return ; &#125;&#125;;class Human : public Animal &#123;public : void run() override &#123; cout &lt;&lt; &quot;I can run with two legs&quot; &lt;&lt; endl; return ; &#125;&#125;;class Bird : public Animal &#123;public : void run() override &#123; cout &lt;&lt; &quot;I can fly&quot; &lt;&lt; endl; return ; &#125;&#125;;int main() &#123; srand(time(0)); Animal *arr[10]; for(int i = 0; i &lt; 10; i++) &#123; switch(rand() % 3) &#123; case 0 : arr[i] = new Cat(); break; case 1 : arr[i] = new Human(); break; case 2 : arr[i] = new Bird(); break; &#125; &#125; for(int i = 0; i &lt; 10; i++) &#123; arr[i]-&gt;run(); &#125; return 0;&#125;ENDS(test3)int main() &#123; // è™šå‡½æ•°æ˜¯è·Ÿç€å¯¹è±¡èµ°çš„ è™šå‡½æ•°-&gt;å¯¹è±¡-&gt; è¿è¡ŒæœŸ(è¿è¡Œæ—¶å€™æ‰çŸ¥é“åŠŸèƒ½) test3::main(); return 0;&#125; ä¸€å®šå½“åŸºç±»çš„å‡½æ•°å˜æˆè™šå‡½æ•°(ææ„å‡½æ•°)ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„æ´¾ç”Ÿç±»çš„å‡½æ•°(ææ„å‡½æ•°)ä¹Ÿä¼šå˜æˆè™šå‡½æ•° è™šææ„-ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102/************************************************************************* &gt; File Name: 1.Animal.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ19æ—¥ æ˜ŸæœŸäºŒ 22æ—¶37åˆ†39ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test4)class Animal &#123;public : // åŠ ä¸Š virtual åšåŠŸèƒ½æ€§ä¿è¯ virtual void run() &#123; cout &lt;&lt; &quot;I don&#x27;t know to run&quot; &lt;&lt; endl; return ; &#125; virtual ~Animal() &#123; cout &lt;&lt; &quot;Animal destructor&quot; &lt;&lt; endl; &#125;&#125;;class Cat : public Animal &#123;public : // override ä¸åšåŠŸèƒ½æ€§çš„ä¿è¯ -&gt; ä½“ç°äº†c++è®¾è®¡çš„å“²å­¦ï¼Œc++æ ¸å¿ƒç†å¿µè®©è¿è¡Œæ—¶å€™é”™è¯¯å˜æˆç¼–è¯‘æ—¶å€™é”™è¯¯ï¼Œç”¨æ›´åŠ çš„ä¸¥æ ¼çš„ç¼–ç è¯­ä¹‰,ç”¨æ›´åŠ çš„ ä¸¥æ ¼çš„ç¼–ç è§„èŒƒï¼Œæ˜¯é”™è¯¯æš´éœ²åœ¨ç¼–è¯‘é˜¶æ®µè€Œä¸æ˜¯è¿è¡Œé˜¶æ®µ void run() override &#123; cout &lt;&lt; &quot;I can run with fout legs&quot; &lt;&lt; endl; return ; &#125; ~Cat() &#123; cout &lt;&lt; &quot;Cat destructor&quot; &lt;&lt; endl; &#125;&#125;;class Human : public Animal &#123;public : void run() override &#123; cout &lt;&lt; &quot;I can run with two legs&quot; &lt;&lt; endl; return ; &#125; ~Human() &#123; cout &lt;&lt; &quot;Human destructor&quot; &lt;&lt; endl; &#125;&#125;;class Bird : public Animal &#123;public : void run() override &#123; cout &lt;&lt; &quot;I can fly&quot; &lt;&lt; endl; return ; &#125; ~Bird() &#123; cout &lt;&lt; &quot;Bird destructor&quot; &lt;&lt; endl; &#125;&#125;;int main() &#123; srand(time(0)); Animal *p; switch(rand() % 3) &#123; case 0: p = new Cat(); break; case 1: p = new Human(); break; case 2: p = new Bird(); break; &#125; p-&gt;run(); // å¦‚æœåŸºç±»ææ„ä¸åŠ  virtual ææ„å°±ä¼šå‡ºç°é—®é¢˜ // å› ä¸º æ™®é€šçš„æˆå‘˜æ–¹æ³•æ˜¯è·Ÿç€ç±»èµ°çš„ delete p; return 0;&#125;ENDS(test4)int main() &#123; // æ™®é€šçš„æˆå‘˜æ–¹æ³•æ˜¯è·Ÿç€ç±»èµ°çš„ æ™®é€š-&gt;ç±»-&gt;ç¼–è¯‘æœŸ(ä½ ä¸ç¼–è¯‘è¿è¡Œä¹Ÿ çŸ¥é“ä»–æ˜¯ä»€ä¹ˆ) // test1::main(); // è™šå‡½æ•°æ˜¯è·Ÿç€å¯¹è±¡èµ°çš„ è™šå‡½æ•°-&gt;å¯¹è±¡-&gt; è¿è¡ŒæœŸ(è¿è¡Œæ—¶å€™æ‰çŸ¥é“åŠŸèƒ½) // test2::main(); // è¿è¡ŒæœŸçŠ¶æ€ // test3::main(); test4::main(); return 0;&#125; çº¯è™šå‡½æ•° çº¯è™šå‡½æ•°æ˜¯åœ¨åŸºç±»ä¸­å£°æ˜çš„è™šå‡½æ•°ï¼Œå®ƒåœ¨åŸºç±»ä¸­æ²¡æœ‰å®šä¹‰ï¼Œä½†è¦æ±‚ä»»ä½•æ´¾ç”Ÿç±»éƒ½è¦å®šä¹‰è‡ªå·±çš„å®ç°æ–¹æ³•ã€‚åœ¨åŸºç±»ä¸­å®ç°çº¯è™šå‡½æ•°çš„æ–¹æ³•æ˜¯åœ¨å‡½æ•°åŸå‹ååŠ â€œ&#x3D;0â€ virtualvoid GetName() &#x3D;0ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼ŒåŸºç±»æœ¬èº«ç”Ÿæˆå¯¹è±¡æ˜¯ä¸åˆæƒ…ç†çš„ã€‚ä¾‹å¦‚ï¼ŒåŠ¨ç‰©ä½œä¸ºä¸€ä¸ªåŸºç±»å¯ä»¥æ´¾ç”Ÿå‡ºè€è™ã€å­”é›€ç­‰å­ç±»ï¼Œä½†åŠ¨ç‰©æœ¬èº«ç”Ÿæˆå¯¹è±¡æ˜æ˜¾ä¸åˆå¸¸ç†ã€‚ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜ï¼Œå°†å‡½æ•°å®šä¹‰ä¸ºçº¯è™šå‡½æ•°ï¼Œåˆ™ç¼–è¯‘å™¨è¦æ±‚åœ¨æ´¾ç”Ÿç±»ä¸­å¿…é¡»äºˆä»¥é‡å†™ä»¥å®ç°å¤šæ€æ€§ã€‚åŒæ—¶å«æœ‰çº¯è™šæ‹Ÿå‡½æ•°çš„ç±»ç§°ä¸ºæŠ½è±¡ç±»ï¼Œå®ƒä¸èƒ½ç”Ÿæˆå¯¹è±¡ã€‚è¿™æ ·å°±å¾ˆå¥½åœ°è§£å†³äº†ä¸Šè¿°ä¸¤ä¸ªé—®é¢˜ã€‚å°†å‡½æ•°å®šä¹‰ä¸ºçº¯è™šå‡½æ•°èƒ½å¤Ÿè¯´æ˜ï¼Œè¯¥å‡½æ•°ä¸ºåä»£ç±»å‹æä¾›äº†å¯ä»¥è¦†ç›–çš„æ¥å£ï¼Œä½†æ˜¯è¿™ä¸ªç±»ä¸­çš„å‡½æ•°ç»ä¸ä¼šè°ƒç”¨ã€‚å£°æ˜äº†çº¯è™šå‡½æ•°çš„ç±»æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚æ‰€ä»¥ï¼Œç”¨æˆ·ä¸èƒ½åˆ›å»ºç±»çš„å®ä¾‹ï¼Œåªèƒ½åˆ›å»ºå®ƒçš„æ´¾ç”Ÿç±»çš„å®ä¾‹ã€‚å¿…é¡»åœ¨ç»§æ‰¿ç±»ä¸­é‡æ–°å£°æ˜å‡½æ•°ï¼ˆä¸è¦åé¢çš„ï¼0ï¼‰å¦åˆ™è¯¥æ´¾ç”Ÿç±»ä¹Ÿä¸èƒ½å®ä¾‹åŒ–ï¼Œè€Œä¸”å®ƒä»¬åœ¨æŠ½è±¡ç±»ä¸­å¾€å¾€æ²¡æœ‰å®šä¹‰ã€‚å®šä¹‰çº¯è™šå‡½æ•°çš„ç›®çš„åœ¨äºï¼Œä½¿æ´¾ç”Ÿç±»ä»…ä»…åªæ˜¯ç»§æ‰¿å‡½æ•°çš„æ¥å£ã€‚çº¯è™šå‡½æ•°çš„æ„ä¹‰ï¼Œè®©æ‰€æœ‰çš„ç±»å¯¹è±¡ï¼ˆä¸»è¦æ˜¯æ´¾ç”Ÿç±»å¯¹è±¡ï¼‰éƒ½å¯ä»¥æ‰§è¡Œçº¯è™šå‡½æ•°çš„åŠ¨ä½œï¼Œä½†ç±»æ— æ³•ä¸ºçº¯è™šå‡½æ•°æä¾›ä¸€ä¸ªåˆç†çš„ç¼ºçœå®ç°ã€‚æ‰€ä»¥ç±»çº¯è™šå‡½æ•°çš„å£°æ˜å°±æ˜¯åœ¨å‘Šè¯‰å­ç±»çš„è®¾è®¡è€…ï¼Œâ€œä½ å¿…é¡»æä¾›ä¸€ä¸ªçº¯è™šå‡½æ•°çš„å®ç°ï¼Œä½†æˆ‘ä¸çŸ¥é“ä½ ä¼šæ€æ ·å®ç°å®ƒâ€ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test5) //æŠ½è±¡ç±» - é€šå¸¸ç”¨ä½œæ¥å£ - æŠ½è±¡ç±»ä¸ç”Ÿæˆå¯¹è±¡class Animal &#123;public : //çº¯è™šå‡½æ•° - å¦‚æœè¦è®©Catäº§ç”Ÿå¯¹è±¡çš„è¯å°±ä¸€å®šåœ¨å­ç±»ä¸­å®ç°è¿™ä¸ªæ–¹æ³• virtual void run() = 0;&#125;;class Cat : public Animal &#123;public : void run() override &#123; cout &lt;&lt; &quot;I can run with four legs&quot; &lt;&lt; endl; return ; &#125;&#125;;int main() &#123; Cat a; return 0;&#125;ENDS(test5)int main() &#123; test5::main(); return 0;&#125;// åœ¨é€»è¾‘ä¸Šæˆ‘ä»¬ä¸çŸ¥é“è¿™ä¸ªæ–¹æ³•åœ¨çˆ¶ç±»ä¸­æ˜¯æ€ä¹ˆå®ç°çš„ï¼Œæˆ–è€…è¿™ä¸ªæ–¹æ³•åœ¨åœ¨è¿™ä¸ªçˆ¶ç±»ä¸­å®ç°æ˜¯æ²¡æœ‰æ„ä¹‰çš„ virtual å…³é”®å­— è¯­ä¹‰: å­ç±»çš„è¿™ä¸ªæ–¹æ³•å¯èƒ½ä¼šè·Ÿçˆ¶ç±»çš„æœ‰æ‰€ä¸åŒ æˆå‘˜æ–¹æ³•è°ƒç”¨æ—¶: virtualå…³é”®å­—çš„æ–¹æ³•è·Ÿç€ã€å¯¹è±¡ã€‘ évirtualå…³é”®å­—çš„æ–¹æ³•è·Ÿç€ã€ç±»ã€‘ é™åˆ¶: ä¸èƒ½ç”¨æ¥ä¿®é¥°ã€ç±»æ–¹æ³•-staticã€‘ ä¸ºä»€ä¹ˆè™šå‡½æ•°å¯ä»¥è·Ÿç€å¯¹è±¡èµ°ï¼Ÿ è™šå‡½æ•°è¡¨è™šå‡½æ•°è¡¨ç»™ç±»å¸¦æ¥çš„æ”¹å˜1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/************************************************************************* &gt; File Name: 2.vtable.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ20æ—¥ æ˜ŸæœŸä¸‰ 14æ—¶55åˆ†29ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINES(x) namespace x &#123; // namespace of x&lt;F4&gt;#define ENDS(x) &#125; // end of namespace xBEGINES(test1)class Base &#123;public : // 8 å­—èŠ‚æ˜¯å­˜å‚¨è™šå‡½æ•°è¡¨åœ°å€çš„ virtual ~Base()&#123;&#125;&#125;;class A : public Base &#123;public : int x;&#125;;class B &#123;public : int x;&#125;;int main() &#123; // 8 å­—èŠ‚æ˜¯å­˜å‚¨è™šå‡½æ•°è¡¨åœ°å€çš„ cout &lt;&lt; &quot;sizeof(Base) = &quot;&lt;&lt; sizeof(Base) &lt;&lt; endl; // Aç±»ç»§æ‰¿Baseç±» 8 å­—èŠ‚æ˜¯è™šå‡½æ•°è¡¨åœ°å€çš„,ä½†æ˜¯å’ŒBaseç±»ä¸­è™šå‡½æ•°è¡¨åœ°å€å’ŒAç±»ä¸­è™šå‡½æ•°è¡¨çš„åœ°å€æ˜¯ä¸ä¸€æ ·çš„ // ä½†æ˜¯Aç±»ä¸­è¿˜æœ‰ä¸€ä¸ªæ•´å½¢çš„å˜é‡ (æœ€å¤§æ•°æ®ç±»å‹æ˜¯8å­—èŠ‚)å†…å­˜å¯¹é½ cout &lt;&lt; &quot;sizeof(A) = &quot;&lt;&lt; sizeof(A) &lt;&lt; endl; // Bç±»åªæœ‰ä¸€ä¸ªintç±»å‹ æ‰€ä»¥åªå 4ä¸ªå­—èŠ‚ cout &lt;&lt; &quot;sizeof(B) = &quot;&lt;&lt; sizeof(B) &lt;&lt; endl; return 0;&#125;ENDS(test1)int main() &#123; test1::main(); return 0;&#125; è™šå‡½æ•°é‡å†™æ–¹æ³•å†…å­˜ç®¡ç†12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788#include &lt;iostream&gt;using namespace std;#define BEGINES(x) namespace x &#123; // namespace of x&lt;F4&gt;#define ENDS(x) &#125; // end of namespace xBEGINES(test2)class Base &#123;public : virtual void func1() &#123; cout &lt;&lt; &quot;Base func1&quot; &lt;&lt; endl; return ; &#125; virtual void func2() &#123; cout &lt;&lt; &quot;Base func2&quot; &lt;&lt; endl; return ; &#125; virtual void func3() &#123; cout &lt;&lt; &quot;Base func3&quot; &lt;&lt; endl; return ; &#125; // 8 å­—èŠ‚æ˜¯å­˜å‚¨è™šå‡½æ•°è¡¨åœ°å€çš„ virtual ~Base()&#123;&#125;&#125;;class A : public Base &#123;public : // é‡å†™ void func2() override &#123; cout &lt;&lt; &quot;A func2&quot; &lt;&lt; endl; return ; &#125; int x;&#125;;class B : Base &#123;public : void func1() override &#123; cout &lt;&lt; &quot;B func1&quot; &lt;&lt; endl; return ; &#125; void func3() override &#123; cout &lt;&lt; &quot;B func3&quot; &lt;&lt; endl; return ; &#125; int x;&#125;;int main() &#123; A a; B b; a.func1(); a.func2(); a.func3(); b.func1(); b.func2(); b.func3(); // è°ƒç”¨è™šå‡½æ•°è¡¨çš„ç¬¬ä¸€ä¸ªä½ç½® // func ** ç¬¬ä¸€åœ°å€(è™šå‡½æ•°è¡¨) [1]è™šå‡½æ•°è¡¨å°±æ˜¯ç¬¬äºŒä¸ªå‡½æ•° ((func **)(&amp;a))[0][1](); // ((func **)(&amp;a))[0][0] = ((func **)(&amp;b))[0][0]; // äº¤æ¢è™šå‡½æ•°è¡¨çš„é¦–åœ°å€ swap(((func **)(&amp;a))[0], ((func **)(&amp;b))[0]); cout &lt;&lt; &quot;--------------------------&quot; &lt;&lt; endl; ((func **)(&amp;a))[0][0](); ((func **)(&amp;a))[0][1](); // c è¯­è¨€åŸç”ŸæŒ‡é’ˆ ((func **)(&amp;a))[0][2](); return 0;&#125;ENDS(test2)int main() &#123; // ç±»ä¸­è™šå‡½æ•°è¡¨å¤§å°ä»¥åŠç»§æ‰¿åçš„å¤§å° // test1::main(); test2::main(); return 0;&#125; è™šå‡½æ•°è¡¨-ä»£ç åˆé›† 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172/************************************************************************* &gt; File Name: 2.vtable.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ20æ—¥ æ˜ŸæœŸä¸‰ 14æ—¶55åˆ†29ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINES(x) namespace x &#123; // namespace of x&lt;F4&gt;#define ENDS(x) &#125; // end of namespace xBEGINES(test1)class Base &#123;public : // 8 å­—èŠ‚æ˜¯å­˜å‚¨è™šå‡½æ•°è¡¨åœ°å€çš„ virtual ~Base()&#123;&#125;&#125;;class A : public Base &#123;public : int x;&#125;;class B &#123;public : int x;&#125;;int main() &#123; // 8 å­—èŠ‚æ˜¯å­˜å‚¨è™šå‡½æ•°è¡¨åœ°å€çš„ cout &lt;&lt; &quot;sizeof(Base) = &quot;&lt;&lt; sizeof(Base) &lt;&lt; endl; // Aç±»ç»§æ‰¿Baseç±» 8 å­—èŠ‚æ˜¯è™šå‡½æ•°è¡¨åœ°å€çš„,ä½†æ˜¯å’ŒBaseç±»ä¸­è™šå‡½æ•°è¡¨åœ°å€å’ŒAç±»ä¸­è™šå‡½æ•°è¡¨çš„åœ°å€æ˜¯ä¸ä¸€æ ·çš„ // ä½†æ˜¯Aç±»ä¸­è¿˜æœ‰ä¸€ä¸ªæ•´å½¢çš„å˜é‡ (æœ€å¤§æ•°æ®ç±»å‹æ˜¯8å­—èŠ‚)å†…å­˜å¯¹é½ cout &lt;&lt; &quot;sizeof(A) = &quot;&lt;&lt; sizeof(A) &lt;&lt; endl; // Bç±»åªæœ‰ä¸€ä¸ªintç±»å‹ æ‰€ä»¥åªå 4ä¸ªå­—èŠ‚ cout &lt;&lt; &quot;sizeof(B) = &quot;&lt;&lt; sizeof(B) &lt;&lt; endl; return 0;&#125;ENDS(test1)BEGINES(test2)class Base &#123;public : virtual void func1() &#123; cout &lt;&lt; &quot;Base func1&quot; &lt;&lt; endl; return ; &#125; virtual void func2() &#123; cout &lt;&lt; &quot;Base func2&quot; &lt;&lt; endl; &#125; virtual void func3() &#123; cout &lt;&lt; &quot;Base func3&quot; &lt;&lt; endl; return ; &#125; // 8 å­—èŠ‚æ˜¯å­˜å‚¨è™šå‡½æ•°è¡¨åœ°å€çš„ virtual ~Base()&#123;&#125;&#125;;class A : public Base &#123;public : // é‡å†™ void func2() override &#123; cout &lt;&lt; &quot;A func2&quot; &lt;&lt; endl; return ; &#125; int x;&#125;;class B : public Base &#123;public : void func1() override &#123; cout &lt;&lt; &quot;B func1&quot; &lt;&lt; endl; return ; &#125; void func3() override &#123; cout &lt;&lt; &quot;B func3&quot; &lt;&lt; endl; return ; &#125; int x;&#125;;typedef void (*func)();int main() &#123; A a; B b; a.func1(); a.func2(); a.func3(); b.func1(); b.func2(); b.func3(); // è°ƒç”¨è™šå‡½æ•°è¡¨çš„ç¬¬ä¸€ä¸ªä½ç½® // func ** ç¬¬ä¸€åœ°å€(è™šå‡½æ•°è¡¨) [1]è™šå‡½æ•°è¡¨å°±æ˜¯ç¬¬äºŒä¸ªå‡½æ•° ((func **)(&amp;a))[0][1](); // ((func **)(&amp;a))[0][0] = ((func **)(&amp;b))[0][0]; // äº¤æ¢è™šå‡½æ•°è¡¨çš„é¦–åœ°å€ swap(((func **)(&amp;a))[0], ((func **)(&amp;b))[0]); cout &lt;&lt; &quot;--------------------------&quot; &lt;&lt; endl; ((func **)(&amp;a))[0][0](); ((func **)(&amp;a))[0][1](); ((func **)(&amp;a))[0][2](); return 0;&#125;ENDS(test2)BEGINES(test3)class Base &#123;public : virtual void func(int x) &#123; cout &lt;&lt; this &lt;&lt; &quot; : Class Base : &quot; &lt;&lt; x &lt;&lt; endl; return ; &#125; // 8 å­—èŠ‚æ˜¯å­˜å‚¨è™šå‡½æ•°è¡¨åœ°å€çš„ virtual ~Base()&#123;&#125;&#125;;class A : public Base &#123;public : // é‡å†™ void func(int x) override &#123; cout &lt;&lt; &quot;this-&gt;x = &quot; &lt;&lt; this-&gt;x &lt;&lt; endl; cout &lt;&lt; this &lt;&lt; &quot; : Class A : &quot; &lt;&lt; x &lt;&lt; endl; return ; &#125; int x;&#125;;typedef void (*func)(void *, int x);int main() &#123; A a, b; a.x = 1333; b.x = 12345; a.func(123); // æœ‰ä¸€ä¸ªéšè—å‚æ•° this, int x ((func **)(&amp;a))[0][0](&amp;a, 123); ((func **)(&amp;a))[0][0](&amp;b, 123); return 0;&#125;ENDS(test3)int main() &#123; // ç±»ä¸­è™šå‡½æ•°è¡¨å¤§å°ä»¥åŠç»§æ‰¿åçš„å¤§å° // test1::main(); // test2::main(); test3::main(); return 0;&#125; å¤šæ€ä¸‹ç±»å‹è½¬æ¢ (åŠ¨æ€ç±»å‹è½¬å‹)1234// æ˜¯é€šè¿‡è™šå‡½æ•°è¡¨æ¥åˆ¤æ–­ä»€ä¹ˆç±»å‹çš„dynamic_cast&lt;&gt;()// dynamic_cast æ˜¯æ€ä¹ˆåˆ¤æ–­ æ­£å¸¸è™šå‡½æ•°è¡¨ï¼Œçš„ç¬¬ä¸€æ˜¯è™šå‡½æ•°ï¼Œä½†æ˜¯è™šå‡½æ•°è¡¨æœ‰ä¸€ä¸ª-1çš„ä½ç½®ï¼Œå½“å®šä½é“è™šå‡½æ•°è¡¨çš„ç¬¬ä¸€ä½æ—¶å€™åœ¨å‘ä¸Šæ‰¾ä¸€ä½ï¼Œåœ¨å‘ä¸Šæ‰¾ä¸€ä½è®°ç±»çš„ä¿¡æ¯æ˜¯ä»€ä¹ˆå‘¢ï¼Œå°±æ˜¯å½“å‰ç±»å‹çš„ä¿¡æ¯ dynamic_cast å°±æ˜¯åˆ¤æ–­-1ä½ç½®åˆ°åº•æ˜¯ä»€ä¹ˆæ¥åˆ¤æ–­å½“å‰ç±»å‹æ˜¯ä»€ä¹ˆ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061/************************************************************************* &gt; File Name: 3.dynamic_cast.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ20æ—¥ æ˜ŸæœŸä¸‰ 22æ—¶44åˆ†39ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test1)class Base &#123;public : virtual ~Base()&#123;&#125;&#125;;class A : public Base &#123;&#125;;class B : public Base &#123;&#125;;class C : public Base &#123;&#125;;int main() &#123; srand(time(0)); Base *p; switch(rand() % 4) &#123; case 0 : p = new A(); break; case 1 : p = new B(); break; case 2 : p = new C(); break; case 3 : p = nullptr; break; &#125; A a; // if(p) ç©ºåœ°å€ // ä¸ç®¡ dynamic_cast æ€ä¹ˆåˆ¤æ–­æˆ‘éƒ½å¸Œæœ› dynamic_cast æŒ‡å‘Aå¯¹è±¡ if(p) ((void **)(p))[0] = ((void **)(&amp;a))[0]; if(dynamic_cast&lt;A*&gt;(p) != nullptr) &#123; cout &lt;&lt; &quot;p pointer A class Object&quot; &lt;&lt; endl; &#125; else if (dynamic_cast&lt;B *&gt;(p) != nullptr) &#123; cout &lt;&lt; &quot;p pointer B class Object&quot; &lt;&lt; endl; &#125; else if (dynamic_cast&lt;C *&gt;(p) != nullptr) &#123; cout &lt;&lt; &quot;p pointer C class Object&quot; &lt;&lt; endl; &#125; else &#123; cout &lt;&lt; &quot;p is nullptr&quot; &lt;&lt; endl; &#125; return 0;&#125;ENDS(test1)int main() &#123; test1::main(); return 0;&#125; dynamic_castä»–ä¸ºä»€ä¹ˆè¦ç”¨è™šå‡½æ•°è¡¨çš„-1ä½ç½®ç±»å‹ä¿¡æ¯å»ä½œä¸ºç±»å‹è½¬æ¢åˆ¤æ–­çš„ä¾æ®ï¼Ÿ ä¸ºä»€ä¹ˆè™šå‡½æ•°è¡¨çš„ç±»å‹ä¿¡æ¯è¦æ”¾åœ¨-1? ç±»å‹ä¿¡æ¯å¤§å°æ˜¯ä¸å›ºå®šçš„ï¼Œä¸ºä»€ä¹ˆæ”¾åœ¨ä¸Šé¢å› ä¸ºå–çš„æ—¶å€™æ–¹ä¾¿ æ‰‹åŠ¨å®ç°-queuã€priority_queueå®ç° queue (é˜Ÿåˆ—)ï¼š å¾ªç¯é˜Ÿåˆ— è‡ªåŠ¨æ‰©å®¹ (2å€æ‰©å®¹æ³•) æ’å…¥ã€åˆ é™¤ æŸ¥çœ‹é˜Ÿå¤´ å¤§å° å®ç° priority_queue (ä¼˜å…ˆé˜Ÿåˆ—)ï¼šé»˜è®¤å¤§é¡¶å † è‡ªåŠ¨æ‰©å®¹ (2å€æ‰©å®¹æ³•) æ’å…¥ã€åˆ é™¤ æŸ¥çœ‹é˜Ÿå¤´ å¤§å° è‡ªå®šä¹‰ä¼˜å…ˆæ¯”è¾ƒè§„åˆ™ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271/************************************************************************* &gt; File Name: 4.priority_queue.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ21æ—¥ æ˜ŸæœŸå›› 16æ—¶33åˆ†12ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;string&gt;#include &lt;functional&gt;#include &lt;stdlib.h&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace x// BEGINS(ttw)class IQueue &#123;public : virtual void push(int) = 0; virtual void pop() = 0; // virtual bool empty() = 0; virtual int top() = 0; /* virtual int front() = 0; virtual int size() = 0; */ virtual bool empty() const = 0; virtual int top() const = 0; virtual int front() const = 0; virtual int size() const = 0; virtual ~IQueue() &#123;&#125;&#125;;class queue : public IQueue &#123;public : queue(const int n = 10) : data((int *)calloc(sizeof(int), n)), head(0), tall(0),count(0), __size(n) &#123; &#125; void push(const int val) override &#123; if(count == __size) &#123; expand(); &#125; data[tall++] = val; tall %= __size; count += 1; return ; &#125; void pop() override &#123; if(empty()) return ; head += 1; head %= __size; count -= 1; return ; &#125; bool empty() const override &#123; return count == 0; &#125; int front() const override &#123; return this-&gt;empty() ? false : data[head]; &#125; int size() const override &#123; return count; &#125; void swap(queue &amp;q) &#123; std::swap(this-&gt;data, q.data); std::swap(this-&gt;head, q.head); std::swap(this-&gt;tall, q.tall); std::swap(this-&gt;count, q.count); std::swap(this-&gt;__size, q.__size); return ; &#125; /* bool empty() override &#123; return count == 0; &#125; int front() override &#123; return this-&gt;empty() ? false : data[head]; &#125; int size() override &#123; return count; &#125; */ ~queue() &#123; if(data) delete [] data; return ; &#125;private : int *data; int head, tall, count, __size; void expand() &#123; queue q(2 * __size); while(!empty()) &#123; q.push(this-&gt;top()); this-&gt;pop(); &#125; this-&gt;swap(q); return ; &#125; int top() override &#123; return this-&gt;empty() ? false : data[head]; &#125; int top() const override &#123; return this-&gt;empty() ? false : data[head]; &#125; friend ostream &amp;operator&lt;&lt;(ostream &amp;out, const queue &amp;);&#125;;class priority_queue : public IQueue &#123;private : // æ­£å¸¸ä¸‹æ ‡ä»1å¼€å§‹çš„è¯å°±æ˜¯ å·¦å­©å­: 2 * i å³å­©å­: 2 * i + 1 // ä¸‹æ ‡ä»0å¼€å§‹çš„è¯ å·¦å­©å­: 2 * i + 1 // data åœ¨åˆå§‹åŒ–æ—¶åšçš„åç§»é‡ è®¿é—®data[1] == raw_data[0] int *raw_data, *data; int count, __size; function&lt;int(int, int)&gt; cmp; void expand() &#123; priority_queue q(2 * __size, cmp); while(!empty()) &#123; q.push(this-&gt;top()); this-&gt;pop(); &#125; this-&gt;swap(q); return ; &#125; friend ostream &amp;operator&lt;&lt;(ostream &amp;out, const priority_queue &amp;);public : priority_queue(int n = 10, function&lt;int(int, int)&gt; cmp = less&lt;int&gt;()) : raw_data(new int[n]), data(raw_data - 1), count(0), __size(n), cmp(cmp) &#123;&#125; int top() const override &#123; return this-&gt;empty() ? false : data[1]; &#125; int top() override &#123; return this-&gt;empty() ? false : data[1]; &#125; void push(const int val) override &#123; if(count == __size) &#123; expand(); &#125; count += 1; data[count] = val; up_maintain(count); return ; &#125; void pop() override &#123; if(empty()) return ; data[1] = data[count]; count -= 1; down_maintain(1); return ; &#125; void up_maintain(int ind) &#123; if (ind == 1) return ; // if(data[int] &gt; data[ind &gt;&gt; 1]) &#123; if (cmp(data[ind &gt;&gt; 1], data[ind])) &#123; std::swap(data[ind], data[ind &gt;&gt; 1]); up_maintain(ind &gt;&gt; 1); &#125; return ; &#125; void down_maintain(int ind) &#123; if((ind &lt;&lt; 1) &gt; count) return ; int temp = ind; #define LIND(x) (x &lt;&lt; 1) #define RIND(x) (x &lt;&lt; 1 | 1) /* if(data[temp] &lt; data[ind &lt;&lt; 1]) temp = ind &lt;&lt; 1; if((ind &lt;&lt; 1 | 1) &lt;= count &amp;&amp; data[temp] &lt; data[ind &lt;&lt; 1 | 1]) temp = data[ind &lt;&lt; 1 | 1]; */ if(cmp(data[temp], data[LIND(ind)])) temp = LIND(ind); // if(data[temp] &lt; data[LIND(ind)]) temp = LIND(ind); if(RIND(ind) &lt;= count &amp;&amp; cmp(data[temp], data[RIND(ind)])) temp = data[RIND(ind)]; //if((RIND(ind)) &lt;= count &amp;&amp; data[temp] &lt; data[RIND(ind)]) temp = data[RIND(ind)]; if(temp == ind) return ; std::swap(data[temp], data[ind]); down_maintain(temp); return ; &#125; bool empty() const override &#123; return count == 0; &#125; int front() const override &#123; return this-&gt;empty() ? false : data[1]; &#125; int size() const override &#123; return count; &#125; void swap(priority_queue &amp;q) &#123; std::swap(this-&gt;raw_data, q.raw_data); std::swap(this-&gt;data, q.data); std::swap(this-&gt;count, q.count); std::swap(this-&gt;__size, q.__size); return ; &#125; ~priority_queue() &#123; if(data) delete [] raw_data; return ; &#125;&#125;;// ENDS(ttw)ostream &amp;operator&lt;&lt;(ostream &amp;out, const queue &amp;q) &#123; out &lt;&lt; &quot;queue : &quot;; for(int i = 0, j = q.head; i &lt; q.count; i += 1, j += 1) &#123; j %= q.__size; out &lt;&lt; q.data[i] &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return out;&#125;ostream &amp;operator&lt;&lt;(ostream &amp;out, const priority_queue &amp;q) &#123; out &lt;&lt; &quot;priority_queue : &quot;; for(int i = 0; i &lt; q.count; i += 1) &#123; out &lt;&lt; q.raw_data[i] &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return out;&#125;/* * 1: å®ç° queue æ™®é€šé˜Ÿåˆ— * 2: å®ç° priority_queue ä¼˜å…ˆé˜Ÿåˆ— * 3: å®ç°ã€ä¼˜å…ˆé˜Ÿåˆ—ã€‘è‡ªå®šä¹‰ä¼˜å…ˆè§„åˆ™ */bool cmp(int x, int y) &#123; return x &gt; y;&#125;int main() &#123; int op, val; // ttw:: queue q1; // ttw:: priority_queue q2; priority_queue q3(1, cmp); while(cin &gt;&gt; op) &#123; switch(op) &#123; case 0: &#123; cin &gt;&gt; val; q1.push(val); q2.push(val); q3.push(val); &#125; break; case 1: &#123; cout &lt;&lt; &quot; queue front : &quot; &lt;&lt; q1.front() &lt;&lt; endl; cout &lt;&lt; &quot; priority_less : &quot; &lt;&lt; q2.top() &lt;&lt; endl; cout &lt;&lt; &quot;priority_greate : &quot; &lt;&lt; q3.top() &lt;&lt; endl; q1.pop(); q2.pop(); q3.pop(); &#125; break; &#125; cout &lt;&lt; q1; cout &lt;&lt; q2; cout &lt;&lt; q3; &#125; return 0;&#125; æºç æ–‡ä»¶*.cppç‚¹æˆ‘è·³è½¬:https://github.com/qzwl123/C-/tree/main/%E5%A4%9A%E6%80%81","categories":[{"name":"OOP","slug":"OOP","permalink":"https://tutouwang.vercel.app/categories/OOP/"}],"tags":[]},{"title":"ç»§æ‰¿","slug":"OOP/ç»§æ‰¿","date":"2022-07-18T01:38:10.000Z","updated":"2022-07-28T02:00:50.604Z","comments":true,"path":"2022/07/18/OOP/ç»§æ‰¿/","link":"","permalink":"https://tutouwang.vercel.app/2022/07/18/OOP/%E7%BB%A7%E6%89%BF/","excerpt":"","text":"æ€»è§ˆå°è£…ï¼šæˆ‘è¯¥æœ‰çš„(å±æ€§)å’Œæˆ‘è¯¥åšçš„(æ–¹æ³•) ç»§æ‰¿ï¼šå«ä¸€å£°çˆ¸çˆ¸ï¼Œå¼€å¯è´¢å¯Œä¹‹é—¨ å¤šæ€ï¼šæˆ‘å°±æ˜¯æˆ‘ï¼Œæ˜¯ä¸ä¸€æ ·çš„çƒŸç« ç»§æ‰¿ç»§æ‰¿å¾€å¾€è¡¨ç°äºæ¦‚å¿µä¸Šçš„é€’è¿›å…³ç³» 12345678910class Animal &#123;public : string name() &#123; return this-&gt;__name; &#125;private : string __name;&#125;;// å®ç°ç»§æ‰¿çš„è¯­æ³• public(ç»§æ‰¿çš„æƒé™)class Cat : public Animal &#123; // æ‰€æœ‰åŠ¨ç‰©ç±»ä¸­æœ‰çš„ï¼ŒçŒ«ç±»éƒ½æœ‰&#125;; ç»§æ‰¿çš„å¥½å¤„ï¼š å‡å°‘ç¼–ç é‡ é€»è¾‘æ¸…æ™° åŸºç±»\\æ´¾ç”Ÿç±» åŸºç±»(çˆ¶ç±») -&gt; Animal æ´¾ç”Ÿç±» -&gt; Cat åç»­ä¼šåœ¨ä»£ç ä¸­æ ‡æ³¨åŸºç±»\\æ´¾ç”Ÿç±» ç»§æ‰¿-å­ç±»çš„è®¿é—®æƒé™å­ç±»å¯¹äºçˆ¶ç±»çš„ç»§æ‰¿æƒé™åˆ°åº•å½±å“ä»€ä¹ˆï¼Ÿ å­ç±»ç»§æ‰¿çˆ¶ç±»çš„å…¨éƒ¨ &lt;- çˆ¶ç±» çˆ¶ç±»\\ç»§æ‰¿æƒé™ public protected private public âœ… âœ… â protected âœ… âœ… âœ… private âŒ âŒ âŒ çˆ¶ç±»\\ç»§æ‰¿æƒé™ public protected private public public protected private protected protected protected private private âŒ âŒ âŒ ç»§æ‰¿æƒé™ç›¸å½“äºä¸¤é“ä»¬å åŠ åœ¨ä¸€èµ·é‚£ä¸ªæ›´ä¸¥æ ¼å°±æ‰§è¡Œé‚£ä¸ª ç»§æ‰¿æƒé™çš„ä½œç”¨å½±å“çš„æ˜¯ä»€ä¹ˆï¼Ÿ å½±å“çš„æ˜¯ç±»å¤–å¯¹äºå­ç±»ä¸­ç»§æ‰¿äºçˆ¶ç±»çˆ¶ç±»ä¸­è¿™äº›å±æ€§å’Œæ–¹æ³•çš„è®¿é—®æƒé™ ç»§æ‰¿-æ„é€ å‡½æ•°éšå£«ç±»å‹è½¬æ¢-é€»è¾‘ä¸Šçš„é€’è¿›å…³ç³»å­ç±» -&gt; çˆ¶ç±» çš„éšå£«ç±»å‹è½¬æ¢ä½†æ˜¯çˆ¶ç±»åˆ°å­ç±»æ˜¯ä¸å…è®¸ä»¥éšå£«ç±»å‹è½¬æ¢çš„, ä¹Ÿå°±æ˜¯è¯´å­ç±»ä¸€å®šåŒ…å«çˆ¶ç±»ä½†æ˜¯çˆ¶ç±»ä¸ä¸€å®šåŒ…å«å­ç±» æ— è®ºæ˜¯Baseç±»çš„(Base &amp;)å¼•ç”¨ä¹Ÿå¥½(Base *)æŒ‡é’ˆä¹Ÿå¥½,éƒ½å¯ä»¥é‚¦è¾¾åˆ°æ‰€æœ‰æ´¾ç”Ÿç±»ä¸­Aã€Bã€C 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778BEGINS(test2)class Base &#123;public : Base(string name) : class_name(name) &#123;&#125; int x; string class_name;private : int y;&#125;;class A :public Base &#123;public : // æ˜¾æ€§çš„è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€å¦‚æœæ²¡æœ‰å°±é»˜è®¤çš„è°ƒç”¨çˆ¶ç±»çš„é»˜è®¤æ„é€ å‡½æ•° A() : Base(&quot;class_A&quot;) &#123;&#125;&#125;;class B : public Base &#123;public : B() : Base(&quot;class_B&quot;) &#123;&#125;&#125;;class C : public Base &#123;public : C() : Base(&quot;class_C&quot;) &#123;&#125;&#125;;void func(Base &amp;b) &#123; cout &lt;&lt; &quot;input class &quot; &lt;&lt; b.class_name &lt;&lt; endl; return ;&#125;int main() &#123; // å­ç±» -&gt; çˆ¶ç±» çš„éšå£«ç±»å‹è½¬æ¢ // ä½†æ˜¯çˆ¶ç±»åˆ°å­ç±»æ˜¯ä¸å…è®¸ä»¥éšå£«ç±»å‹è½¬æ¢çš„ A a; B b; C c; func(a); func(b); func(c); return 0;&#125;ENDS(test2) BEFINES(test3)using namespace test2;void func(Base *b) &#123; cout &lt;&lt; &quot;input class &quot; &lt;&lt; b-&gt;class_name &lt;&lt; endl; return ;&#125;int main() &#123; // å­ç±» -&gt; çˆ¶ç±» çš„éšå£«ç±»å‹è½¬æ¢ // ä½†æ˜¯çˆ¶ç±»åˆ°å­ç±»æ˜¯ä¸å…è®¸ä»¥éšå£«ç±»å‹è½¬æ¢çš„ A a; B b; C c; func(&amp;a); func(&amp;b); func(&amp;c); return 0;&#125;ENDS(test3)int main() &#123; // test1::main(); test2::main(); return 0;&#125; ç»§æ‰¿çš„æ„é€ é¡ºåº æ„é€  å…ˆæ˜¯å­ç±»è°ƒç”¨åŸºç±»çš„æ„é€ å‡½æ•°ï¼Œåœ¨è°ƒç”¨å­ç±»å­ä»€ä¹ˆçš„æ„é€ å‡½æ•° åŸºç±» -&gt; å­ç±» ææ„ æ„é€ é¡ºåºæ°¸è¿œå’Œææ„é¡ºåºæ˜¯ç›¸åå…ˆæ„é€ ä¸€å®šåææ„ â€‹ å…ˆææ„å­ç±»çš„å±æ€§ï¼Œåœ¨ææ„çˆ¶ç±»çš„ è±å½¢ç»§æ‰¿ é¢å‘å¯¹è±¡æ˜¯å…è®¸å¤šç»§æ‰¿ä½†æ˜¯æœ‰è¯­è¨€ä¹Ÿæ˜¯ä¸æ”¯æŒçš„å¦‚ï¼š C#ã€JAVA -&gt; ä¸å…è®¸å¤šç»§æ‰¿ D:æ–¹æ³•æ˜¯è°ƒç”¨Bç±»çš„runæ–¹æ³•è¿˜æ˜¯æ˜¯Cç±»runæ–¹æ³• ç‚¹æˆ‘-å¤šç»§æ‰¿ ç»§æ‰¿-æ‹·è´&amp;èµ‹å€¼æ‹·è´è¡Œä¸ºï¼š-&gt; å…ˆå®Œæˆçˆ¶ç±»çš„æ‹·è´è¡Œä¸ºåœ¨å®Œæˆå­ç±»çš„æ‹·è´è¡Œä¸º æ‹·è´æ„é€ å‡½æ•°ï¼š æ˜¾ç¤ºè°ƒç”¨çˆ¶ç±»æ‹·è´æ„é€  èµ‹å€¼è¿ç®—ç¬¦ æ˜¾ç¤ºè°ƒç”¨çˆ¶ç±»çš„èµ‹å€¼è¿ç®—ç¬¦å‡½æ•° ä»£ç åˆé›† ç»§æ‰¿è®¿é—®æƒé™ éšå£«ç±»å‹è½¬æ¢ æ„é€ &amp;ææ„-é¡ºåº 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253/************************************************************************* &gt; File Name: 1.Cat.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ18æ—¥ æ˜ŸæœŸä¸€ 13æ—¶47åˆ†00ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test1)class Base &#123;public : int x;protected : int y;private : int z;&#125;;class public_Base : public Base &#123;public : void main()&#123; x = 2; // ok, x public y = 3; // ok, y protected // z = 4; // no, z private &#125;&#125;;class protected_Base : protected Base &#123;public : void main()&#123; x = 2; // ok, x public y = 3; // ok, y protected // z = 4; // no, z private &#125;&#125;;class private_Base : private Base &#123;public : void main()&#123; x = 2; // ok, x public y = 3; // ok, y protected // z = 4; // no, z private &#125;&#125;;int main() &#123; public_Base a; a.x = 3; // public(ç»§æ‰¿) public(çˆ¶ç±») - &gt; public (è¡¨ç°å‡ºæ¥ çš„) // a.y = 4; // public(ç»§æ‰¿) protected(çˆ¶ç±») - &gt; protected // a.z = 5; // public(ç»§æ‰¿) private(çˆ¶ç±») - &gt; private protected_Base b; // b.x = 3; // protected(ç»§æ‰¿) public(çˆ¶ç±») - &gt; protected (è¡¨ ç°å‡ºæ¥çš„) // b.y = 4; // protected(ç»§æ‰¿) protected(çˆ¶ç±») - &gt; protected // b.z = 5; // protected(ç»§æ‰¿) private(çˆ¶ç±») - &gt; private private_Base c; // c.x = 3; // private(ç»§æ‰¿) public(çˆ¶ç±») - &gt; private (è¡¨ç°å‡º æ¥çš„) // c.y = 4; // private(ç»§æ‰¿) protected(çˆ¶ç±») - &gt; private // c.z = 5; // private(ç»§æ‰¿) private(çˆ¶ç±») - &gt; private return 0;&#125;ENDS(test1)BEGINS(test2)class Base &#123;public : Base(string name) : class_name(name) &#123;&#125; int x; string class_name;private : int y;&#125;;class A :public Base &#123;public : // æ˜¾æ€§çš„è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€å¦‚æœæ²¡æœ‰å°±é»˜è®¤çš„è°ƒç”¨çˆ¶ç±»çš„é»˜è®¤æ„é€ å‡½æ•° A() : Base(&quot;class_A&quot;) &#123;&#125;&#125;;class B : public Base &#123;public : B() : Base(&quot;class_B&quot;) &#123;&#125;&#125;;class C : public Base &#123;public : C() : Base(&quot;class_C&quot;) &#123;&#125;&#125;;void func(Base &amp;b) &#123; cout &lt;&lt; &quot;input class &quot; &lt;&lt; b.class_name &lt;&lt; endl; return ;&#125;int main() &#123; // å­ç±» -&gt; çˆ¶ç±» çš„éšå£«ç±»å‹è½¬æ¢ // ä½†æ˜¯çˆ¶ç±»åˆ°å­ç±»æ˜¯ä¸å…è®¸ä»¥éšå£«ç±»å‹è½¬æ¢çš„ A a; B b; C c; func(a); func(b); func(c); cout &lt;&lt; &quot;sizeof(Base) = &quot; &lt;&lt; sizeof(Base) &lt;&lt; endl; cout &lt;&lt; &quot;sizeof(A) = &quot; &lt;&lt; sizeof(A) &lt;&lt; endl; return 0;&#125;ENDS(test2)BEGINS(test3)class Base &#123;public : Base(string name) : class_name(name) &#123;&#125; int x; string class_name;private : int y;&#125;;class A :public Base &#123;public : // æ˜¾æ€§çš„è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€å¦‚æœæ²¡æœ‰å°±é»˜è®¤çš„è°ƒç”¨çˆ¶ç±»çš„é»˜è®¤æ„é€ å‡½æ•° A() : Base(&quot;class_A&quot;) &#123;&#125;&#125;;class B : public Base &#123;public : B() : Base(&quot;class_B&quot;) &#123;&#125;&#125;;class C : public Base &#123;public : C() : Base(&quot;class_C&quot;) &#123;&#125;&#125;;void func(Base *b) &#123; cout &lt;&lt; &quot;input class &quot; &lt;&lt; b-&gt;class_name &lt;&lt; endl; return ;&#125;int main() &#123; // å­ç±» -&gt; çˆ¶ç±» çš„éšå£«ç±»å‹è½¬æ¢ // ä½†æ˜¯çˆ¶ç±»åˆ°å­ç±»æ˜¯ä¸å…è®¸ä»¥éšå£«ç±»å‹è½¬æ¢çš„ A a; B b; C c; func(&amp;a); func(&amp;b); func(&amp;c); return 0;&#125;ENDS(test3)// çˆ¶ç±»å’Œå­ç±»çš„æ„é€ é¡ºåºBEGINS(test4)class ATTR_BASE &#123;public : ATTR_BASE(string name) : name(name) &#123; cout &lt;&lt; &quot;construct : &quot; &lt;&lt; name &lt;&lt; endl; &#125; ~ATTR_BASE() &#123; cout &lt;&lt; &quot;destructor : &quot; &lt;&lt; name &lt;&lt; endl; &#125; string name;&#125;;// å±æ€§class ATTR1 : public ATTR_BASE &#123;public : ATTR1(string name) : ATTR_BASE(name) &#123;&#125;&#125;;// å±æ€§class ATTR2 : public ATTR_BASE &#123;public : ATTR2(string name) : ATTR_BASE(name) &#123;&#125;&#125;;class Base &#123;public : Base() : attr1(&quot;attr1 in Base&quot;), attr2(&quot;attr2 in Base&quot;) &#123; cout &lt;&lt; &quot;Base constructor done&quot; &lt;&lt; endl; &#125; ~Base() &#123; cout &lt;&lt; &quot;Base destructor done&quot; &lt;&lt; endl; &#125;private : ATTR1 attr1; ATTR2 attr2;&#125;;class A : Base &#123;public : // æ˜¾æ€§çš„è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•° A() : Base(), attr1(&quot;attr1 in A&quot;), attr2(&quot;attr2 in A&quot;) &#123; cout &lt;&lt; &quot;A constructor done&quot; &lt;&lt; endl; &#125; ~A() &#123; cout &lt;&lt; &quot;A destructor done&quot; &lt;&lt; endl; &#125;private : ATTR1 attr1; ATTR2 attr2;&#125;;int main() &#123; A a; return 0;&#125;ENDS(test4)int main() &#123; // test1::main(); // éšå£«ç±»å‹è½¬æ¢ // test2::main(); // test3::main(); // æ„é€ &amp;ææ„-é¡ºåº test4::main(); return 0;&#125; ç»§æ‰¿çš„æ„é€ é¡ºåº-ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113/************************************************************************* &gt; File Name: 2.succeed_copy.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ18æ—¥ æ˜ŸæœŸä¸€ 18æ—¶07åˆ†06ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test1)class ATTR_BASE &#123;public : ATTR_BASE(string name) : name(name) &#123; cout &lt;&lt; &quot;construct : &quot; &lt;&lt; name &lt;&lt; endl; &#125; ~ATTR_BASE() &#123; cout &lt;&lt; &quot;destructor : &quot; &lt;&lt; name &lt;&lt; endl; &#125; ATTR_BASE operator=(const ATTR_BASE &amp;a) &#123; name = a.name; cout &lt;&lt; &quot;operator= : &quot; &lt;&lt; name &lt;&lt; endl; return *this; &#125; ATTR_BASE(const ATTR_BASE &amp;a) : name(a.name) &#123; cout &lt;&lt; &quot;default copy constructor : &quot; &lt;&lt; name &lt;&lt; endl; &#125; string name;&#125;;// å±æ€§class ATTR1 : public ATTR_BASE &#123;public : ATTR1(string name = &quot;none&quot;) : ATTR_BASE(name) &#123;&#125;&#125;;// å±æ€§class ATTR2 : public ATTR_BASE &#123;public : ATTR2(string name = &quot;none&quot;) : ATTR_BASE(name) &#123;&#125;&#125;;class Base &#123;public : Base() : attr1(&quot;attr1 in Base&quot;), attr2(&quot;attr2 in Base&quot;) &#123; cout &lt;&lt; &quot;Base constructor done&quot; &lt;&lt; endl; &#125; Base(const Base &amp;b) : attr1(b.attr1), attr2(b.attr2) &#123; cout &lt;&lt; &quot;Base copy constructor done&quot; &lt;&lt; endl; &#125; Base &amp;operator=(const Base &amp;b) &#123; attr1 = b.attr1; attr2 = b.attr2; cout &lt;&lt; &quot;Base operator= done&quot; &lt;&lt; endl; return *this; &#125; ~Base() &#123; cout &lt;&lt; &quot;Base destructor done&quot; &lt;&lt; endl; &#125;private : ATTR1 attr1; ATTR2 attr2;&#125;;class A : Base &#123;public : // æ˜¾æ€§çš„è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•° A() : Base(), attr1(&quot;attr1 in A&quot;), attr2(&quot;attr2 in A&quot;) &#123; cout &lt;&lt; &quot;A constructor done&quot; &lt;&lt; endl; &#125; A(const A &amp;a) : Base(a), attr1(a.attr1), attr2(a.attr2)&#123; cout &lt;&lt; &quot;A copy constructor done&quot; &lt;&lt; endl; &#125; A &amp;operator=(const A &amp;a) &#123; this-&gt;Base::operator=(a); // è°ƒç”¨çˆ¶ç±»çš„é»˜è®¤å¤åˆ¶è¿ç®—ç¬¦ attr1 = a.attr1; attr2 = a.attr2; cout &lt;&lt; &quot;A operator= done&quot; &lt;&lt; endl; return *this; &#125; ~A() &#123; cout &lt;&lt; &quot;A destructor done&quot; &lt;&lt; endl; &#125;private : ATTR1 attr1; ATTR2 attr2;&#125;;int main() &#123; A a; cout &lt;&lt; &quot; ---------------- default constructor ----------------- &quot; &lt;&lt; endl &lt;&lt; endl; A b(a); cout &lt;&lt; &quot; ---------------- copy constructor ----------------- &quot; &lt;&lt; endl &lt;&lt; endl; b = a; cout &lt;&lt; &quot; ---------------- operator constructor ----------------- &quot; &lt;&lt; endl &lt;&lt; endl; return 0;&#125;ENDS(test1)int main() &#123; test1::main(); return 0;&#125; å¤šç»§æ‰¿ ä¸å»ºè®®å¤šç»§æ‰¿ å·¥ç¨‹è®¾è®¡æå€¡ : å•ç»§æ‰¿å®ä½“ç±»ã€å¤šç»§æ‰¿æ¥å£(æŠ½è±¡)ç±» å®ä½“ç±»ï¼šèƒ½å¤Ÿäº§ç”Ÿå¯¹è±¡çš„ç±»å°±å«å®ä½“ç±» 123456789101112131415161718192021222324252627282930#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace x// ä¸èƒ½äº§ç”Ÿå¯¹è±¡çš„ç±»BEGINS(test2)class NoObject &#123;public : NoObject() = delete; NoObject(const NoObject &amp;) = delete;&#125;;int main() &#123; NoObject *p = (NoObject *)malloc(sizeof(NoObject)); // NoObject b(*p); return 0;&#125;ENDS(test2)int main() &#123; // å¤šç»§æ‰¿ // test1::main(); // ä¸å‘¢äº§ç”Ÿå¯¹è±¡çš„ç±» test2::main(); return 0;&#125; å†…å­˜å­˜å‚¨åŒº123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263/************************************************************************* &gt; File Name: 3.multi_succeed.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ18æ—¥ æ˜ŸæœŸä¸€ 22æ—¶09åˆ†02ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test1)class A &#123;protected : A() : x(9973) &#123;&#125; int x;&#125;;class B : public A &#123;public : void setX(int x) &#123; cout &lt;&lt; &quot;set x : &quot; &lt;&lt; &amp;(this-&gt;x) &lt;&lt; endl; this-&gt;x = x; return ; &#125;&#125;;class C : public A &#123;public : int getX() &#123; cout &lt;&lt; &quot;get x : &quot; &lt;&lt; &amp;(this-&gt;x) &lt;&lt; endl; return this-&gt;x; &#125;&#125;;class D : public B, public C &#123;&#125;;int main() &#123; D d; cout &lt;&lt; d.getX() &lt;&lt; endl; d.setX(10000); cout &lt;&lt; d.getX() &lt;&lt; endl; return 0;&#125;ENDS(test1)int main() &#123; test1::main(); return 0;&#125; å†…å­˜å­˜å‚¨åŒº-è™šç»§æ‰¿è™šç»§æ‰¿: å½“c++åº•å±‚ç”Ÿæˆå¯¹è±¡æ¨¡å‹æ—¶å€™ä¼šå¯¹ç›¸åŒçš„è¿›è¡Œåˆå¹¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263/************************************************************************* &gt; File Name: 3.multi_succeed.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ18æ—¥ æ˜ŸæœŸä¸€ 22æ—¶09åˆ†02ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test1)class A &#123;protected : A() : x(9973) &#123;&#125; int x;&#125;;class B : virtual public A &#123;public : void setX(int x) &#123; cout &lt;&lt; &quot;set x : &quot; &lt;&lt; &amp;(this-&gt;x) &lt;&lt; endl; this-&gt;x = x; return ; &#125;&#125;;class C : virtual public A &#123;public : int getX() &#123; cout &lt;&lt; &quot;get x : &quot; &lt;&lt; &amp;(this-&gt;x) &lt;&lt; endl; return this-&gt;x; &#125;&#125;;class D : public B, public C &#123;&#125;;int main() &#123; D d; cout &lt;&lt; d.getX() &lt;&lt; endl; d.setX(10000); cout &lt;&lt; d.getX() &lt;&lt; endl; return 0;&#125;ENDS(test1)int main() &#123; test1::main(); return 0;&#125; åŠŸèƒ½ç±»é…åˆé‡è½½ã€ä¸èƒ½è¢«æ‹·è´è¡Œä¸ºåŠŸèƒ½ç±»é…åˆé‡è½½å¯ä»¥é€šè¿‡ç»§æ‰¿æ ‡è®°æŸä¸ªç±»çš„æ€§è´¨ STLä¸­ç±»å‹èƒå–å°±æ˜¯ç”¨çš„è¿™ç§ç¼–ç¨‹æŠ€å·§ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128/************************************************************************* &gt; File Name: 4.uncopyable.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ19æ—¥ æ˜ŸæœŸäºŒ 14æ—¶28åˆ†05ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test1)// åŠŸèƒ½ç±»class UNCOPYABLE &#123;public : // é»˜è®¤æ„é€ ä¸èƒ½åˆ é™¤æ‰è¦ä¸Aç±»çš„é»˜è®¤ä¹Ÿå°±æ²¡æœ‰äº† // UNCOPYABLE() = delete; UNCOPYABLE(const UNCOPYABLE &amp;) = delete; UNCOPYABLE &amp;operator=(const UNCOPYABLE &amp;) = delete; UNCOPYABLE &amp;operator=(const UNCOPYABLE &amp;) const = delete;protected : UNCOPYABLE() = default;&#125;;// æ ‡è®°ç±»çš„æ€§è´¨ A ä¸èƒ½è¢«æ‹·è´class A : public UNCOPYABLE &#123;public :&#125;;int main() &#123; A a; A b; // b = a; // no, operator= delete // A b(a); // no, copy construtor delete return 0;&#125;ENDS(test1)BEGINS(test2)// åŠŸèƒ½ç±»class HAS_XY &#123;public : int x, y;&#125;;class HAS_XYZ : public HAS_XY &#123;public : int z;&#125;;class A : public HAS_XY &#123;public : A() &#123; x = y =1; &#125;&#125;;class B : public HAS_XY &#123;public : B() &#123; x = y = 2; &#125;&#125;;class C : public HAS_XYZ &#123;public : C() &#123; x = y = z = 3; &#125;&#125;;class D : public HAS_XY &#123;public : D() &#123; x = y = 4; &#125;&#125;;class E : public HAS_XYZ &#123;public : E() &#123; x = y = z = 5; &#125;&#125;;void func(HAS_XY &amp;a) &#123; cout &lt;&lt; &quot;has xy : &quot;; cout &lt;&lt; a.x &lt;&lt; &quot;, &quot; &lt;&lt; a.y &lt;&lt; endl; return ;&#125;void func(HAS_XYZ &amp;a) &#123; cout &lt;&lt; &quot;hax_xyz : &quot;; cout &lt;&lt; a.x &lt;&lt; &quot;, &quot; &lt;&lt; a.y &lt;&lt; &quot;, &quot; &lt;&lt; a.z &lt;&lt; endl; return ;&#125;int main() &#123; A a; B b; C c; D d; E e; func(a); func(b); func(c); func(d); func(e); return 0;&#125;ENDS(test2)int main() &#123; // ä¸èƒ½è¢«æ‹·è´è¡Œä¸º -&gt; æ‹·è´æ„é€ ã€å¤åˆ¶è¿ç®— // test1::main(); // æ ‡è®°æ¯ä¸€ç§ç±»çš„æ€§è´¨ // é…åˆé‡è½½å°±å¯ä»¥é’ˆå¯¹å¤„ç†æ¯ç§æ€§è´¨çš„ç±» test2::main(); return 0;&#125; æºç æ–‡ä»¶*.cppç‚¹æˆ‘è·³è½¬:https://github.com/qzwl123/C-/tree/main/%E7%BB%A7%E6%89%BF","categories":[{"name":"OOP","slug":"OOP","permalink":"https://tutouwang.vercel.app/categories/OOP/"}],"tags":[]},{"title":"å°è£…äºŒ","slug":"OOP/å°è£…äºŒ","date":"2022-07-14T10:33:24.000Z","updated":"2022-07-28T02:00:10.663Z","comments":true,"path":"2022/07/14/OOP/å°è£…äºŒ/","link":"","permalink":"https://tutouwang.vercel.app/2022/07/14/OOP/%E5%B0%81%E8%A3%85%E4%BA%8C/","excerpt":"","text":"å‡½æ•°é‡è½½å¦‚æœä¸€ä¸ªä½œç”¨åŸŸå†…å‡ ä¸ªå‡½æ•°åå­—ç›¸åŒä½†æ˜¯å‚æ•°åˆ—è¡¨ä¸åŒ, ç§°ä¸ºå‡½æ•°é‡è½½ä¸è¿”å›å€¼æ²¡æœ‰å…³ç³» 12345678910111213141516171819202122232425262728293031/************************************************************************* &gt; File Name: 11.reload.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ14æ—¥ æ˜ŸæœŸå›› 18æ—¶53åˆ†58ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;int func(int x) &#123; return 2 * x;&#125;// è¦æŠŠç¼ºçœå€¼è€ƒè™‘è¿›å» å¦‚ï¼šfunc(int x, int y = 2)int func(int x, int y) &#123; return x * y;&#125;double func(double x) &#123; return x + 1000;&#125;int main() &#123; // æŠŠä¸€ç±»å¯ä»¥é€šè¿‡å‚æ•°åŒºåˆ†çš„åŠŸèƒ½å‘½åæˆåŒä¸€ä¸ªå‡½æ•°å-&gt;ç²¾ç»†åŒ–çš„å¤„ç†æµç¨‹ // å‚æ•°ç›¸åŒè¿”å›å€¼ä¸é€š == ä¸å¯ä»¥ // å‚æ•°ç±»å‹ä¸åŒorå‚æ•°ä¸ªæ•°ä¸åŒ == å¯ä»¥ cout &lt;&lt; func(2) &lt;&lt; endl; // é€šè¿‡å‚æ•° è°ƒç”¨ç¬¬ä¸€ä¸ª cout &lt;&lt; func(2.0) &lt;&lt; endl; // è°ƒç”¨ç¬¬äºŒä¸ª return 0;&#125; é‡è½½çš„æ„ä¹‰ é€šè¿‡å‡½æ•°åå¯¹å‡½æ•°åŠŸèƒ½è¿›è¡Œæç¤º â‘  é€šè¿‡å‡½æ•°å‚æ•°åˆ—è¡¨å¯¹å‡½æ•°çš„ç”¨æ³•è¿›è¡Œæç¤º â‘¡ æ‰©å±•å·²æœ‰çš„åŠŸèƒ½ â‘¢ â‘  â‘¢ å¦‚ abs(æ±‚æ•´å½¢ç»å¯¹å€¼)ã€fabs(æµ®ç‚¹æ•°ç»å¯¹å€¼)å¦‚æœç”¨é‡è½½å®ç° 123456789101112131415161718#include &lt;iostream&gt;#include &lt;math.h&gt;using namespace std;int ABS(int x) &#123; return abs(x);&#125;double ABS(double x) &#123; return fabs(x);&#125;int main() &#123; // ABS cout &lt;&lt; ABS(-3) &lt;&lt; endl; cout &lt;&lt; ABS(-4.4) &lt;&lt; endl; return 0;&#125; â‘¡ è¾“å‡ºä¸€ä¸ªNä¸ªæ•°å­—çš„å…¨æ’åˆ— 1234567891011121314151617181920212223242526272829303132333435363738#include &lt;iostream&gt;#include &lt;math.h&gt;#include &lt;string.h&gt;using namespace std;void output_permutation(int ind, int n, int *buff, int *num) &#123; if(ind == n) &#123; for(int i = 0; i &lt; n; ++i) &#123; cout &lt;&lt; buff[i] &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return ; &#125; for(int i = 1; i &lt;= n; i++) &#123; if(num[i]) continue; buff[ind] = i; num[i] = 1; output_permutation(ind + 1,n ,buff, num); num[i] = 0; &#125; return ;&#125;void output_permutation(int n) &#123; // æ¥å£ int num[n + 1], buff[n]; memset(num, 0, sizeof(num)); memset(buff, 0, sizeof(buff)); // ä»0å¼€å§‹ä¸€ä¸ªè¦æšä¸¾nä½,æŠŠä¸­é—´æšä¸¾çš„æ•°å­—æ”¾åœ¨buffä¸­numæ ‡è®°é‚£ä¸ªæ•°å­—è¢«ä½¿ç”¨äº† output_permutation(0, n, buff, num); // åŠŸèƒ½å®ç° return ;&#125;int main() &#123; // å…¨æ’åˆ— output_permutation(4); return 0;&#125; å‡½æ•°é‡è½½-ä»£ç åˆé›†12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576/************************************************************************* &gt; File Name: 11.reload.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ14æ—¥ æ˜ŸæœŸå›› 18æ—¶53åˆ†58ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;math.h&gt;#include &lt;string.h&gt;using namespace std;int func(int x) &#123; return 2 * x;&#125;int func(int x, int y) &#123; return x * y;&#125;double func(double x) &#123; return x + 1000;&#125;int ABS(int x) &#123; return abs(x);&#125;double ABS(double x) &#123; return fabs(x);&#125;void output_permutation(int ind, int n, int *buff, int *num) &#123; if(ind == n) &#123; for(int i = 0; i &lt; n; ++i) &#123; cout &lt;&lt; buff[i] &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return ; &#125; for(int i = 1; i &lt;= n; i++) &#123; if(num[i]) continue; buff[ind] = i; num[i] = 1; output_permutation(ind + 1,n ,buff, num); num[i] = 0; &#125; return ;&#125;// æ¥å£void output_permutation(int n) &#123; int num[n + 1], buff[n]; memset(num, 0, sizeof(num)); memset(buff, 0, sizeof(buff)); // ä»0å¼€å§‹ä¸€ä¸ªè¦æšä¸¾nä½,æŠŠä¸­é—´æšä¸¾çš„æ•°å­—æ”¾åœ¨buffä¸­numæ ‡è®°é‚£ä¸ªæ•°å­—è¢«ä½¿ç”¨äº† output_permutation(0, n, buff, num); // åŠŸèƒ½å®ç° return ;&#125;int main() &#123; // æŠŠä¸€ç±»å¯ä»¥é€šè¿‡å‚æ•°åŒºåˆ†çš„åŠŸèƒ½å‘½åæˆåŒä¸€ä¸ªå‡½æ•°å-&gt;ç²¾ç»†åŒ–çš„å¤„ç†æµç¨‹ // å‚æ•°ç›¸åŒè¿”å›å€¼ä¸é€š == ä¸å¯ä»¥ // å‚æ•°ç±»å‹ä¸åŒorå‚æ•°ä¸ªæ•°ä¸åŒ == å¯ä»¥ cout &lt;&lt; func(2) &lt;&lt; endl; // é€šè¿‡å‚æ•° è°ƒç”¨ç¬¬ä¸€ä¸ª cout &lt;&lt; func(2.0) &lt;&lt; endl; // è°ƒç”¨ç¬¬äºŒä¸ª // ABS cout &lt;&lt; ABS(-3) &lt;&lt; endl; cout &lt;&lt; ABS(-4.4) &lt;&lt; endl; // å…¨æ’åˆ— output_permutation(4); return 0;&#125; å‹å…ƒè‹¥ç±»å¤–çš„ä¸€ä¸ªå‡½æ•°æƒ³è¦è®¿é—®ç±»å†…éƒ¨æˆå‘˜, éœ€è¦å°†è¯¥å‡½æ•°å£°æ˜æˆç±»çš„ä¸€ä¸ªå‹å…ƒå‡½æ•° 12345678910111213141516171819202122232425262728293031323334353637383940414243444546/************************************************************************* &gt; File Name: 12.friend.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ14æ—¥ æ˜ŸæœŸå›› 22æ—¶25åˆ†20ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;class Point &#123;public : Point(int x, int y) : x(x), y(y) &#123;&#125; void output() &#123; cout &lt;&lt; &quot;inner : &quot; &lt;&lt; x &lt;&lt; &quot; &quot; &lt;&lt; y &lt;&lt; endl; return ; &#125; // å£°æ˜ç±»å¤–éš”å£è€ç‹ å°±å¯ä»¥åœ¨ç±»å¤–è®¿é—®ç§æœ‰æˆå‘˜äº† friend void output(Point &amp;a); friend ostream &amp;operator&lt;&lt;(ostream &amp;out, const Point &amp;p);private : int x, y;&#125;;void output(Point &amp;a) &#123; cout &lt;&lt; &quot;outer : &quot; &lt;&lt; a.x &lt;&lt; &quot; &quot; &lt;&lt; a.y &lt;&lt; endl;&#125;// cout(å·¦é¢çš„å‚æ•°) &lt;&lt; p(å³é¢çš„å‚æ•°)ostream &amp;operator&lt;&lt;(ostream &amp;out, const Point &amp;p) &#123; out &lt;&lt; &quot;Point(&quot; &lt;&lt; p.x &lt;&lt; &quot;, &quot; &lt;&lt; p.y &lt;&lt; &quot;)&quot;; return out;&#125;int main() &#123; // è¾“å‡ºç‚¹ç±», å¯¹è±¡ä¿¡æ¯ Point p(3, 4); p.output(); output(p); cout &lt;&lt; p; return 0;&#125; ä¸ºä»€ä¹ˆæœ‰å…ƒå‡½æ•°è¦å£°æ˜åœ¨ç±»å†…éƒ¨å‘¢ï¼Ÿ å¯¹æ–¹æ˜¯å¦æ˜¯â€œéš”å£è€ç‹â€è¿™ä¸ªäº‹æƒ…ä¸å–å†³äºå¯¹æ–¹è€Œå–å†³äºè‡ªå·± â€” ä¸»è¦ä¹Ÿæ˜¯éµå®ˆä»£ç çš„å®‰å…¨æ€§ è¿ç®—ç¬¦é‡è½½(éæˆå‘˜) C++ä¸­é‡è½½èƒ½å¤Ÿæ‰©å±•è¿ç®—ç¬¦çš„åŠŸèƒ½ è¿ç®—ç¬¦é‡è½½ä»¥å‡½æ•°çš„æ–¹å¼è¿›è¡Œ ç”¨ç‰¹æ®Šå½¢å¼çš„å‡½æ•°æ‰©å±•è¿ç®—ç¬¦çš„åŠŸèƒ½ æ€»ç»“ï¼šé‡è½½è¿ç®—ç¬¦æ˜¯æ‰©å±•å·²æœ‰çš„åŠŸèƒ½ï¼Œè€Œä¸æ˜¯æ–°é€ ä¸€ä¸ªè¿ç®—ç¬¦ã€‚ 12345Type operater Sign(type &amp;obj1, type &amp;obj2) &#123; Type ret; // do something return ret;&#125; Sign æ˜¯ +, -, *, &#x2F;ç­‰ å•ç›®è¿ç®—ç¬¦åªæœ‰ä¸€ä¸ªå‚æ•°ï¼ŒåŒé¢è¿ç®—ç¬¦æœ‰ä¸ªå‚æ•° åŒç›®ï¼š +ï¼Œ-ï¼Œ*ï¼Œ&#x2F;ï¼Œ&lt;&lt; å•ç›®ï¼š ++ï¼Œâ€“ï¼Œ*(å–å€¼è¿ç®—ç¬¦) ä¸‰ç›®ï¼š ? :(é—®å·å†’å·è¡¨è¾¾å¼) ä»€ä¹ˆç¬¦å·èƒ½è¢«é‡è½½ï¼Ÿ + - * &#x2F; % ^ &amp; | ~ ! , &#x3D; &lt; &gt; &lt;&#x3D; &gt;&#x3D; ++ â€“ &lt;&lt; &gt;&gt; &#x3D;&#x3D; !&#x3D; &amp;&amp; || +&#x3D; -&#x3D; *&#x3D; &#x2F;&#x3D; ^&#x3D; &amp;&#x3D; |&#x3D; %&#x3D; &lt;&lt;&#x3D; &gt;&gt;&#x3D; [] () -&gt; -&gt;* (é—´æ¥å¼•ç”¨æˆå‘˜è¿ç®—ç¬¦) new new[] delete delete[] è¿ç®—ç¬¦é‡è½½æ˜¯å¦‚ä½•åŒºåˆ†å‰++ å’Œ å++ çš„ å¦‚æœæœ‰ä¸€ä¸ªé¢å¤–çš„å‚æ•°é‚£ä¹ˆå°±æ˜¯ååŠ ++ã€‚ void operator ++(int); &#x2F;&#x2F; å++ void operator ++(); &#x2F;&#x2F; ++å‰ ä¸èƒ½è¢«é‡è½½ :: (åŸŸè¿ç®—ç¬¦) .* (ç‚¹æ˜Ÿè¿ç®—ç¬¦) . (ç›´æ¥å¼•ç”¨è¿ç®—ç¬¦) ?:(ä¸‰ç›®è¿ç®—ç¬¦) sizeof è¿ç®—ç¬¦é‡è½½ &#x2F;&#x2F; test2-ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164/************************************************************************* &gt; File Name: 12.friend.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ14æ—¥ æ˜ŸæœŸå›› 22æ—¶25åˆ†20ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(ttw)class Point &#123;public : Point operator+(const int &amp;a) const &#123; // åˆ›å»ºä¸€ä¸ªä¸´æ—¶å˜é‡,å°±ä¸èƒ½è¿”å›å¼•ç”¨ --- ç”»ä¸ªé‡ç‚¹å¯èƒ½è¦è€ƒ å“ˆ å“ˆå“ˆ! return Point(this-&gt;x + a, this-&gt;y + a); &#125; Point(int x, int y) : x(x), y(y) &#123; z1 = rand() % 100; z2 = z1 + 1; z3 = z2 + 1; cout &lt;&lt; this &lt;&lt; &quot; : rand value : &quot; &lt;&lt; z1 &lt;&lt; endl; &#125; void output() &#123; cout &lt;&lt; &quot;inner : &quot; &lt;&lt; x &lt;&lt; &quot; &quot; &lt;&lt; y &lt;&lt; endl; return ; &#125; // += // å¦‚æœä¸è¿”å›å¼•ç”¨ ç»“æœå°±ä¼šæ‹·è´ç»™ä¸€ä¸ªä¸´æ—¶å˜é‡è¿”å› Point &amp;operator +=(const int &amp;x) &#123; this-&gt;x += x; this-&gt;y += x; return *this; &#125; // æ³¨æ„ è¿™æ˜¯å++ åˆ—: p++ å¦‚æœæœ‰ä¸€ä¸ªé¢å¤–çš„å‚æ•°é‚£ä¹ˆå°±æ˜¯ååŠ ++ Point operator ++(int ) &#123; Point ret(*this); this-&gt;x += 1; this-&gt;y += 1; return ret; &#125; Point &amp;operator++() &#123; this-&gt;x += 1; this-&gt;y += 1; return *this; &#125; // å£°æ˜ç±»å¤–éš”å£è€ç‹ å°±å¯ä»¥åœ¨ç±»å¤–è®¿é—®ç§æœ‰æˆå‘˜äº† friend void output(Point &amp;a); friend ostream &amp;operator&lt;&lt;(ostream &amp;, const Point &amp;); friend Point operator+(const Point &amp;, const Point &amp;); int z1, z2, z3;private : int x, y;&#125;;void output(Point &amp;a) &#123; cout &lt;&lt; &quot;outer : &quot; &lt;&lt; a.x &lt;&lt; &quot; &quot; &lt;&lt; a.y &lt;&lt; endl;&#125;// cout(å·¦é¢çš„å‚æ•°) &lt;&lt; p(å³é¢çš„å‚æ•°)ostream &amp;operator&lt;&lt;(ostream &amp;out, const Point &amp;p) &#123; out &lt;&lt; &quot;Point(&quot; &lt;&lt; p.x &lt;&lt; &quot;, &quot; &lt;&lt; p.y &lt;&lt; &quot;)&quot;; return out;&#125;// ç±»å¤–é‡è½½åŠ æ³•è¿ç®—ç¬¦Point operator+(const Point &amp;a, const Point &amp;b) &#123; /* Point c(a.x + b.x, a.y + b.y); return c; */ return Point(a.x + b.x, a.y + b.y);&#125;ENDS(ttw)BEGINS(test1)using namespace ttw;int main() &#123; srand(time(NULL)); // è¾“å‡ºç‚¹ç±», å¯¹è±¡ä¿¡æ¯ Point p(3, 4), q(5, 6); p.output(); output(p); cout &lt;&lt; p &lt;&lt; endl; cout &lt;&lt; (p + q) &lt;&lt; endl; // å»æ‰const ä¸å¯¹ p + q ä¼šè¿”å›ä¸€ä¸ªä¸´æ—¶å˜é‡ã€å› ä¸ºä¸´æ—¶å˜é‡æ˜¯ç»‘å®š ä¸ä¸Šçš„ cout &lt;&lt; (p + (p + q)) &lt;&lt; endl; // (3, 4) + 5 == (8, 9); // p + 5 =&gt; p.operator+(5) cout &lt;&lt; (p + 5) &lt;&lt; endl; // const å¯¹è±¡ åªèƒ½è°ƒç”¨ const æ–¹æ³• const Point z(1111, 123); cout &lt;&lt; z + 5 &lt;&lt; endl; // é—´æ¥å¼•ç”¨è¿ç®—ç¬¦ Point *pp = &amp;p; int Point::* px = &amp;Point::z1; cout &lt;&lt; pp-&gt;*px &lt;&lt; endl; px = &amp;Point::z2; cout &lt;&lt; pp-&gt;*px &lt;&lt; endl; px = &amp;Point::z3; cout &lt;&lt; pp-&gt;*px &lt;&lt; endl; return 0;&#125;ENDS(test1)BEGINS(test2)using namespace ttw;int mian() &#123; // += Point p(3, 4); cout &lt;&lt; ((p += 2) += 3) &lt;&lt; endl; // p++ã€++p cout &lt;&lt; &quot;p++ : &quot; &lt;&lt; (p++) &lt;&lt; endl; cout &lt;&lt; &quot;p : &quot; &lt;&lt; p &lt;&lt; endl; // n = 4; è€ƒè™‘(++n)++; cout &lt;&lt; &quot;++p : &quot; &lt;&lt; (++p) &lt;&lt; endl; (++p)++; cout &lt;&lt; &quot;(++p)++ : &quot; &lt;&lt; p &lt;&lt; endl; return 0;&#125;ENDS(test2)int main() &#123; // å‹å…ƒ // test1::main(); // é‡è½½è¿ç®—ç¬¦ test2::mian(); return 0;&#125; 1.æ•°ç»„å¯¹è±¡(å¤–åœ¨è¡¨ç°åƒä¸ªæ•°ç»„) &#x2F;&#x2F; test3-ä»£ç å®ç° -&gt; ä¸»è¦é‡è½½[]1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162#include &lt;iostream&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test3)using namespace ttw;class Array &#123;public : Array(int n = 100) :n(n), data(new int[n]) &#123;&#125; int &amp;operator[](const int &amp;ind) &#123; return data[ind]; &#125; int &amp;operator[](const char *s) &#123; int ind = atoi(s); return data[ind]; &#125; const int &amp;operator[](const int &amp;ind) const &#123; return data[ind]; &#125;private : int n; int *data;&#125;;int main() &#123; Array arr; for(int i = 0;i &lt; 10; i++) &#123; arr[i] = i; &#125; for(int i = 0; i &lt; 10; i++) &#123; cout &lt;&lt; arr[i] &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; const Array arr2; for(int i = 0; i &lt; 10; i++) &#123; cout &lt;&lt; arr2[i] &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; cout &lt;&lt; arr[&quot;0&quot;] &lt;&lt; &quot; &quot; &lt;&lt; arr[&quot;1&quot;] &lt;&lt; &quot; &quot; &lt;&lt; arr[&quot;2&quot;] &lt;&lt; endl; return 0;&#125;ENDS(test3)int main() &#123; // 1.æ•°ç»„å¯¹è±¡ // test3 // 2.å‡½æ•°å¯¹è±¡ // 3.æŒ‡é’ˆå¯¹è±¡ test3::main(); return 0;&#125; 2.å‡½æ•°å¯¹è±¡(å¤–å’‹è¡¨ç°åƒä¸ªå‡½æ•°) &#x2F;&#x2F; test4-ä»£ç å®ç° -&gt; ä¸»è¦é‡è½½ ()1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859#include &lt;iostream&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;#include &lt;functional&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test4)class Function &#123;public : int operator()(const int &amp;a, const int &amp;b) &#123; cout &lt;&lt; &quot;inner class : &quot;; return a + b; &#125;private :&#125;;int fubc1(int a, int b) &#123; cout &lt;&lt; &quot;inner func1 : &quot;; return a + b;&#125;// ç±»å‹ä¸é‡è¦ï¼Œå¤–åœ¨è¡¨ç°å¾ˆé‡è¦int main() &#123; Function fuc; cout &lt;&lt; fuc(3, 4) &lt;&lt; endl; // å‡½æ•°æŒ‡é’ˆ, æœ¬è´¨ä¸Šå®ƒåœ¨æŒ‡å‘æ‹¥æœ‰ç›¸åŒè¡¨ç°çš„ int (*p)(int ,int) = fubc1; cout &lt;&lt; p(3, 4) &lt;&lt; endl; // q å‡½æ•°æŒ‡é’ˆå¯¹è±¡ function&lt;int (int, int)&gt; q; q = fubc1; cout &lt;&lt; &quot;q pointer : &quot; &lt;&lt; q(3, 4) &lt;&lt; endl; q = fuc; cout &lt;&lt; &quot;q Point : &quot; &lt;&lt; q(3, 4) &lt;&lt; endl; return 0;&#125;ENDS(test4)int main() &#123; // 1.æ•°ç»„å¯¹è±¡ // test3 // 2.å‡½æ•°å¯¹è±¡ // test4 // 3.æŒ‡é’ˆå¯¹è±¡ //test3::main(); test4::main(); return 0;&#125; 3.æŒ‡é’ˆå¯¹è±¡(å¤–åœ¨è¡¨ç°åƒä¸ªæŒ‡é’ˆ) &#x2F;&#x2F; test5-ä»£ç å®ç° -&gt; 1.-&gt;ã€2.*ï¼ˆå–å€¼ï¼‰ã€3.+ã€4.-5.[]123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687#include &lt;iostream&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;#include &lt;functional&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace x// pointer_objectBEGINS(test5)struct A&#123; A() : x(0), y(0) &#123;&#125; int x, y;&#125;;ostream &amp;operator&lt;&lt;(ostream &amp;out, const A &amp;a) &#123; out &lt;&lt; a.x &lt;&lt; &quot; &quot; &lt;&lt; a.y &lt;&lt; endl; return out;&#125;class Pointer &#123;public : Pointer(A *p = nullptr) : p(p)&#123;&#125; A *operator-&gt;() &#123; return p; &#125; A &amp;operator *() &#123; return *p;&#125; A &amp;operator *() const &#123; return *p;&#125; A *operator+(const int &amp;n) const &#123; return p + n; &#125; A *operator-(const int &amp;n) const &#123; return p - n; &#125; A *operator+(const int &amp;n) &#123; return p + n; &#125; A *operator-(const int &amp;n) &#123; return p - n; &#125; int operator-(const Pointer &amp;p) &#123; return this-&gt;p - p.p; &#125; A &amp;operator[](int ind) &#123; return *(p + ind); &#125; A &amp;operator[](int ind) const &#123; return *(p + ind); &#125; friend ostream &amp;operator&lt;&lt;(ostream &amp;, const Pointer &amp;);private : A *p;&#125;;ostream &amp;operator &lt;&lt;(ostream &amp;out, const Pointer &amp;a) &#123; out &lt;&lt; a.p &lt;&lt; endl; return out;&#125;void main() &#123; A a, b; Pointer p = &amp;a, q = &amp;b; cout &lt;&lt; a; p-&gt;x = 3; p-&gt;y = 4; cout &lt;&lt; a; cout &lt;&lt; *p; cout &lt;&lt; p; cout &lt;&lt; (p + 1) &lt;&lt; endl; cout &lt;&lt; (p - 1) &lt;&lt; endl; cout &lt;&lt; &quot; p : &quot; &lt;&lt; p; cout &lt;&lt; &quot; q : &quot; &lt;&lt; q; cout &lt;&lt; &quot;(p - q) : &quot;&lt;&lt; (p - q) &lt;&lt; endl; cout &lt;&lt; &quot;p[0] : &quot;&lt;&lt; p[0] &lt;&lt; endl; const Pointer cp = &amp;a; cout &lt;&lt; *cp &lt;&lt; endl; cout &lt;&lt; (cp + 1) &lt;&lt; endl; cout &lt;&lt; (cp - 1) &lt;&lt; endl; cout &lt;&lt; cp[0] &lt;&lt; endl; return ;&#125;ENDS(test5)int main() &#123; // 1.æ•°ç»„å¯¹è±¡ // test3 // 2.å‡½æ•°å¯¹è±¡ // test4 // 3.æŒ‡é’ˆå¯¹è±¡ // test5 //test3::main(); // test4::main(); test5::main(); return 0;&#125; ä»£ç åˆé›†-å‹å…ƒã€é‡è½½è¿ç®—ç¬¦ã€æ•°ç»„å¯¹è±¡ã€å‡½æ•°å¯¹è±¡ã€æŒ‡é’ˆå¯¹è±¡123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329/************************************************************************* &gt; File Name: 12.friend.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ14æ—¥ æ˜ŸæœŸå›› 22æ—¶25åˆ†20ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;#include &lt;functional&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(ttw)class Point &#123;public : Point operator+(const int &amp;a) const &#123; // åˆ›å»ºä¸€ä¸ªä¸´æ—¶å˜é‡,å°±ä¸èƒ½è¿”å›å¼•ç”¨ --- ç”»ä¸ªé‡ç‚¹å¯èƒ½è¦è€ƒ å“ˆå“ˆå“ˆ! return Point(this-&gt;x + a, this-&gt;y + a); &#125; Point(int x, int y) : x(x), y(y) &#123; z1 = rand() % 100; z2 = z1 + 1; z3 = z2 + 1; cout &lt;&lt; this &lt;&lt; &quot; : rand value : &quot; &lt;&lt; z1 &lt;&lt; endl; &#125; void output() &#123; cout &lt;&lt; &quot;inner : &quot; &lt;&lt; x &lt;&lt; &quot; &quot; &lt;&lt; y &lt;&lt; endl; return ; &#125; // += // å¦‚æœä¸è¿”å›å¼•ç”¨ ç»“æœå°±ä¼šæ‹·è´ç»™ä¸€ä¸ªä¸´æ—¶å˜é‡è¿”å› Point &amp;operator +=(const int &amp;x) &#123; this-&gt;x += x; this-&gt;y += x; return *this; &#125; // æ³¨æ„ è¿™æ˜¯å++ åˆ—: p++ å¦‚æœæœ‰ä¸€ä¸ªé¢å¤–çš„å‚æ•°é‚£ä¹ˆå°±æ˜¯ååŠ ++ Point operator ++(int ) &#123; Point ret(*this); this-&gt;x += 1; this-&gt;y += 1; return ret; &#125; Point &amp;operator++() &#123; this-&gt;x += 1; this-&gt;y += 1; return *this; &#125; // å£°æ˜ç±»å¤–éš”å£è€ç‹ å°±å¯ä»¥åœ¨ç±»å¤–è®¿é—®ç§æœ‰æˆå‘˜äº† friend void output(Point &amp;a); friend ostream &amp;operator&lt;&lt;(ostream &amp;, const Point &amp;); friend Point operator+(const Point &amp;, const Point &amp;); int z1, z2, z3;private : int x, y;&#125;;void output(Point &amp;a) &#123; cout &lt;&lt; &quot;outer : &quot; &lt;&lt; a.x &lt;&lt; &quot; &quot; &lt;&lt; a.y &lt;&lt; endl;&#125;// cout(å·¦é¢çš„å‚æ•°) &lt;&lt; p(å³é¢çš„å‚æ•°)ostream &amp;operator&lt;&lt;(ostream &amp;out, const Point &amp;p) &#123; out &lt;&lt; &quot;Point(&quot; &lt;&lt; p.x &lt;&lt; &quot;, &quot; &lt;&lt; p.y &lt;&lt; &quot;)&quot;; return out;&#125;// ç±»å¤–é‡è½½åŠ æ³•è¿ç®—ç¬¦Point operator+(const Point &amp;a, const Point &amp;b) &#123; /* Point c(a.x + b.x, a.y + b.y); return c; */ return Point(a.x + b.x, a.y + b.y);&#125;ENDS(ttw)BEGINS(test1)using namespace ttw;int main() &#123; srand(time(NULL)); // è¾“å‡ºç‚¹ç±», å¯¹è±¡ä¿¡æ¯ Point p(3, 4), q(5, 6); p.output(); output(p); cout &lt;&lt; p &lt;&lt; endl; cout &lt;&lt; (p + q) &lt;&lt; endl; // å»æ‰const ä¸å¯¹ p + q ä¼šè¿”å›ä¸€ä¸ªä¸´æ—¶å˜é‡ã€å› ä¸ºä¸´æ—¶å˜é‡æ˜¯ç»‘å®šä¸ä¸Š çš„ cout &lt;&lt; (p + (p + q)) &lt;&lt; endl; // (3, 4) + 5 == (8, 9); // p + 5 =&gt; p.operator+(5) cout &lt;&lt; (p + 5) &lt;&lt; endl; // const å¯¹è±¡ åªèƒ½è°ƒç”¨ const æ–¹æ³• const Point z(1111, 123); cout &lt;&lt; z + 5 &lt;&lt; endl; // é—´æ¥å¼•ç”¨è¿ç®—ç¬¦ Point *pp = &amp;p; int Point::* px = &amp;Point::z1; cout &lt;&lt; pp-&gt;*px &lt;&lt; endl; px = &amp;Point::z2; cout &lt;&lt; pp-&gt;*px &lt;&lt; endl; px = &amp;Point::z3; cout &lt;&lt; pp-&gt;*px &lt;&lt; endl; return 0;&#125;ENDS(test1)BEGINS(test2)using namespace ttw;int main() &#123; // += Point p(3, 4); cout &lt;&lt; ((p += 2) += 3) &lt;&lt; endl; // p++ã€++p cout &lt;&lt; &quot;p++ : &quot; &lt;&lt; (p++) &lt;&lt; endl; cout &lt;&lt; &quot;p : &quot; &lt;&lt; p &lt;&lt; endl; // n = 4; è€ƒè™‘(++n)++; cout &lt;&lt; &quot;++p : &quot; &lt;&lt; (++p) &lt;&lt; endl; (++p)++; cout &lt;&lt; &quot;(++p)++ : &quot; &lt;&lt; p &lt;&lt; endl; return 0;&#125;ENDS(test2)// array_objectBEGINS(test3)using namespace ttw;class Array &#123;public : Array(int n = 100) :n(n), data(new int[n]) &#123;&#125; int &amp;operator[](const int &amp;ind) &#123; return data[ind]; &#125; int &amp;operator[](const char *s) &#123; int ind = atoi(s); return data[ind]; &#125; const int &amp;operator[](const int &amp;ind) const &#123; return data[ind]; &#125;private : int n; int *data;&#125;;int main() &#123; Array arr; for(int i = 0;i &lt; 10; i++) &#123; arr[i] = i; &#125; for(int i = 0; i &lt; 10; i++) &#123; cout &lt;&lt; arr[i] &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; const Array arr2; for(int i = 0; i &lt; 10; i++) &#123; cout &lt;&lt; arr2[i] &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; cout &lt;&lt; arr[&quot;0&quot;] &lt;&lt; &quot; &quot; &lt;&lt; arr[&quot;1&quot;] &lt;&lt; &quot; &quot; &lt;&lt; arr[&quot;2&quot;] &lt;&lt; endl; return 0;&#125;ENDS(test3)// function_objectBEGINS(test4)class Function &#123;public : int operator()(const int &amp;a, const int &amp;b) &#123; cout &lt;&lt; &quot;inner class : &quot;; return a + b; &#125;private :&#125;;int fubc1(int a, int b) &#123; cout &lt;&lt; &quot;inner func1 : &quot;; return a + b;&#125;// ç±»å‹ä¸é‡è¦ï¼Œå¤–åœ¨è¡¨ç°å¾ˆé‡è¦int main() &#123; Function fuc; cout &lt;&lt; fuc(3, 4) &lt;&lt; endl; // å‡½æ•°æŒ‡é’ˆ, æœ¬è´¨ä¸Šå®ƒåœ¨æŒ‡å‘æ‹¥æœ‰ç›¸åŒè¡¨ç°çš„ int (*p)(int ,int) = fubc1; cout &lt;&lt; p(3, 4) &lt;&lt; endl; // q å‡½æ•°æŒ‡é’ˆå¯¹è±¡ function&lt;int (int, int)&gt; q; q = fubc1; cout &lt;&lt; &quot;q pointer : &quot; &lt;&lt; q(3, 4) &lt;&lt; endl; q = fuc; cout &lt;&lt; &quot;q Point : &quot; &lt;&lt; q(3, 4) &lt;&lt; endl; return 0;&#125;ENDS(test4)// pointer_objectBEGINS(test5)struct A&#123; A() : x(0), y(0) &#123;&#125; int x, y;&#125;;ostream &amp;operator&lt;&lt;(ostream &amp;out, const A &amp;a) &#123; out &lt;&lt; a.x &lt;&lt; &quot; &quot; &lt;&lt; a.y &lt;&lt; endl; return out;&#125;class Pointer &#123;public : Pointer(A *p = nullptr) : p(p)&#123;&#125; A *operator-&gt;() &#123; return p; &#125; A &amp;operator *() &#123; return *p;&#125; A &amp;operator *() const &#123; return *p;&#125; A *operator+(const int &amp;n) const &#123; return p + n; &#125; A *operator-(const int &amp;n) const &#123; return p - n; &#125; A *operator+(const int &amp;n) &#123; return p + n; &#125; A *operator-(const int &amp;n) &#123; return p - n; &#125; int operator-(const Pointer &amp;p) &#123; return this-&gt;p - p.p; &#125; A &amp;operator[](int ind) &#123; return *(p + ind); &#125; A &amp;operator[](int ind) const &#123; return *(p + ind); &#125; friend ostream &amp;operator&lt;&lt;(ostream &amp;, const Pointer &amp;);private : A *p;&#125;;ostream &amp;operator &lt;&lt;(ostream &amp;out, const Pointer &amp;a) &#123; out &lt;&lt; a.p &lt;&lt; endl; return out;&#125;void main() &#123; A a, b; Pointer p = &amp;a, q = &amp;b; cout &lt;&lt; a; p-&gt;x = 3; p-&gt;y = 4; cout &lt;&lt; a; cout &lt;&lt; *p; cout &lt;&lt; p; cout &lt;&lt; (p + 1) &lt;&lt; endl; cout &lt;&lt; (p - 1) &lt;&lt; endl; cout &lt;&lt; &quot; p : &quot; &lt;&lt; p; cout &lt;&lt; &quot; q : &quot; &lt;&lt; q; cout &lt;&lt; &quot;(p - q) : &quot;&lt;&lt; (p - q) &lt;&lt; endl; cout &lt;&lt; &quot;p[0] : &quot;&lt;&lt; p[0] &lt;&lt; endl; const Pointer cp = &amp;a; cout &lt;&lt; *cp &lt;&lt; endl; cout &lt;&lt; (cp + 1) &lt;&lt; endl; cout &lt;&lt; (cp - 1) &lt;&lt; endl; cout &lt;&lt; cp[0] &lt;&lt; endl; return ;&#125;ENDS(test5)int main() &#123; // å‹å…ƒ // test1::main(); // é‡è½½è¿ç®—ç¬¦ // test2::main(); // 1.æ•°ç»„å¯¹è±¡ // test3 // 2.å‡½æ•°å¯¹è±¡ // test4 // 3.æŒ‡é’ˆå¯¹è±¡ // test5 //test3::main(); // test4::main(); test5::main(); return 0;&#125; vectoræºç èµæpush_back _M_insert_aux_M_insert_auxï¼šä¸ºä»€ä¹ˆä¼šæ‹·è´ä¸¤æ¬¡å› ä¸ºå®ƒä¸ä»…å…¼å®¹push_back()æ–¹æ³• ä¹Ÿå…¼å®¹insert() æ–¹æ³• 2å€æ‰©å®¹æ³•ä¸ºä»€ä¹ˆæ˜¯o(1)æ—¶é—´å¤æ‚åº¦ shared_ptrå†…å­˜æ³„æ¼ ç®€å•åœ°è¯´å°±æ˜¯ç”³è¯·äº†ä¸€å—å†…å­˜ç©ºé—´ï¼Œä½¿ç”¨å®Œæ¯•åæ²¡æœ‰é‡Šæ”¾æ‰ã€‚ newå’Œmallocç”³è¯·èµ„æºä½¿ç”¨åï¼Œæ²¡æœ‰ç”¨deleteå’Œfreeé‡Šæ”¾ å­ç±»ç»§æ‰¿çˆ¶ç±»æ—¶ï¼Œçˆ¶ç±»ææ„å‡½æ•°ä¸æ˜¯è™šå‡½æ•° Windowså¥æŸ„èµ„æºä½¿ç”¨åæ²¡æœ‰é‡Šæ”¾ æ™ºèƒ½æŒ‡é’ˆå¼•ç”¨è®¡æ•° ç¯å½¢å¼•ç”¨123456789101112131415161718192021222324252627282930313233343536373839404142434445#include &lt;iostream&gt;#include &lt;memory&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespac// ç¯å½¢å¼•ç”¨BEGINS(test2)class A &#123;public : A() &#123; cout &lt;&lt; &quot;defaulr constructor&quot; &lt;&lt; endl; &#125; ~A() &#123; cout &lt;&lt; &quot;destructor&quot; &lt;&lt; endl; &#125; shared_ptr&lt;A&gt; p;&#125;;int main() &#123; shared_ptr&lt;A&gt; p = make_shared&lt;A&gt;(); shared_ptr&lt;A&gt; q = make_shared&lt;A&gt;(); p-&gt;p = q; q-&gt;p = p; p = nullptr; q = nullptr; cout &lt;&lt; &quot;end main&quot; &lt;&lt; endl; return 0;&#125;ENDS(test2) int main() &#123; // test1::main(); test2::main(); return 0;&#125; å®ç°è‡ªå·±çš„â€”shared_ptr123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166/************************************************************************* &gt; File Name: 13.shared_ptr.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ16æ—¥ æ˜ŸæœŸå…­ 21æ—¶35åˆ†20ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;memory&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test1)class A &#123;public : A() &#123; cout &lt;&lt; &quot;defaulr constructor&quot; &lt;&lt; endl; &#125; ~A() &#123; cout &lt;&lt; &quot;destructor&quot; &lt;&lt; endl; &#125;&#125;;int main() &#123; A *p = new A(); // å¦‚æœä¸deleteå°±ä¼šå‡ºç°å†…å­˜æ³„æ¼ // ä½¿ç”¨åŸç”ŸæŒ‡é’ˆæ˜¯æ–¹å¼æ–¹æ³• å¸¦* delete p; // shared_ptr&lt;A&gt; ç­‰ä»·äº A *p // make_shared&lt;A&gt;() ç­‰ä»·äº new A(); shared_ptr&lt;A&gt; p1 = make_shared&lt;A&gt;(); cout &lt;&lt; &quot;p.use_count = &quot; &lt;&lt; p1.use_count() &lt;&lt; endl; shared_ptr&lt;A&gt; q = p1; cout &lt;&lt; &quot;p1.use_count = &quot; &lt;&lt; p1.use_count() &lt;&lt; endl; cout &lt;&lt; &quot;q.use_count = &quot; &lt;&lt; q.use_count() &lt;&lt; endl; p1 = nullptr; cout &lt;&lt; &quot;q.use_count = &quot; &lt;&lt; q.use_count() &lt;&lt; endl; q = nullptr; cout &lt;&lt; &quot;end main&quot; &lt;&lt; endl; return 0;&#125;ENDS(test1)BEGINS(test3)class A &#123;public : A() &#123; cout &lt;&lt; &quot;defaulr constructor&quot; &lt;&lt; endl; &#125; int x, y; ~A() &#123; cout &lt;&lt; &quot;destructor&quot; &lt;&lt; endl; &#125; shared_ptr&lt;A&gt; p;&#125;;class ptr_data &#123;public : ptr_data(A *ptr, int *cnt = nullptr) : ptr(ptr), cnt(cnt) &#123; if(this-&gt;cnt == nullptr) &#123; this-&gt;cnt = new int(1); &#125; &#125; void increase_one() &#123; *cnt += 1; return ; &#125; void decrease_one() &#123; *cnt -= 1; if(*cnt == 0) delete ptr; return ; &#125; // åŠ ä¸Šconst ä¸»è¦æ˜¯æä¾›ç»™constç±»å‹å»ç”¨ä¹Ÿæä¾›ç»™éconst bool operator==(const ptr_data &amp;p) const &#123; return p.ptr == this-&gt;ptr &amp;&amp; p.cnt == this-&gt;cnt; &#125; ~ptr_data() &#123; decrease_one(); if(*cnt == 0) delete cnt; &#125; A *ptr; int *cnt;&#125;;class shared_ptr &#123;public : shared_ptr(A *ptr) : p(ptr)&#123;&#125; shared_ptr(const shared_ptr &amp;p) : p(p.p) &#123; // cnt å¼•ç”¨è®¡æ•° +1 this-&gt;p.increase_one(); &#125; shared_ptr &amp;operator=(const shared_ptr &amp;obj) &#123; if(obj.p == p) return *this; p.decrease_one(); p = obj.p; p.increase_one(); return *this; &#125; A *operator-&gt;() &#123;return p.ptr; &#125;; A &amp;operator*() &#123; return *(p.ptr); &#125; int use_count() &#123; return *p.cnt; &#125; ~shared_ptr() &#123; p.decrease_one(); &#125;private : ptr_data p;&#125;;shared_ptr make_shared() &#123; return shared_ptr(new A());&#125;ostream &amp;operator&lt;&lt;(ostream &amp;out, const A &amp;p) &#123; out &lt;&lt; &quot;class A : &quot; &lt;&lt; p.x &lt;&lt; &quot;, &quot; &lt;&lt; p.y &lt;&lt; endl; return out;&#125;int main() &#123; shared_ptr p = make_shared(); p-&gt;x = 3, p-&gt;y = 4; cout &lt;&lt; *p &lt;&lt; endl; cout &lt;&lt; &quot;p.use_count = &quot; &lt;&lt; p.use_count() &lt;&lt; endl; shared_ptr q = p; cout &lt;&lt; &quot;p.use_count = &quot; &lt;&lt; p.use_count() &lt;&lt; endl; cout &lt;&lt; &quot;q.use_count = &quot; &lt;&lt; q.use_count() &lt;&lt; endl; p = nullptr; cout &lt;&lt; &quot;q.use_count = &quot; &lt;&lt; q.use_count() &lt;&lt; endl; q = nullptr; cout &lt;&lt; &quot;end main&quot; &lt;&lt; endl; return 0;&#125;ENDS(test3)int main() &#123; // æ­£å¸¸ shared_ptr test1::main(); cout &lt;&lt; endl &lt;&lt; &quot; -------------------------------------- &quot;; // è‡ªå·±å®ç°çš„ shared_ptr test3::main(); return 0;&#125; ä»£ç åˆé›† æ™ºèƒ½æŒ‡é’ˆ ç¯å½¢å¼•ç”¨ è‡ªå·±çš„shared_ptr 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197/************************************************************************* &gt; File Name: 13.shared_ptr.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ16æ—¥ æ˜ŸæœŸå…­ 21æ—¶35åˆ†20ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;memory&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test1)class A &#123;public : A() &#123; cout &lt;&lt; &quot;defaulr constructor&quot; &lt;&lt; endl; &#125; ~A() &#123; cout &lt;&lt; &quot;destructor&quot; &lt;&lt; endl; &#125;&#125;;int main() &#123; A *p = new A(); // å¦‚æœä¸deleteå°±ä¼šå‡ºç°å†…å­˜æ³„æ¼ // ä½¿ç”¨åŸç”ŸæŒ‡é’ˆæ˜¯æ–¹å¼æ–¹æ³• å¸¦* delete p; // shared_ptr&lt;A&gt; ç­‰ä»·äº A *p // make_shared&lt;A&gt;() ç­‰ä»·äº new A(); shared_ptr&lt;A&gt; p1 = make_shared&lt;A&gt;(); cout &lt;&lt; &quot;p.use_count = &quot; &lt;&lt; p1.use_count() &lt;&lt; endl; shared_ptr&lt;A&gt; q = p1; cout &lt;&lt; &quot;p1.use_count = &quot; &lt;&lt; p1.use_count() &lt;&lt; endl; cout &lt;&lt; &quot;q.use_count = &quot; &lt;&lt; q.use_count() &lt;&lt; endl; p1 = nullptr; cout &lt;&lt; &quot;q.use_count = &quot; &lt;&lt; q.use_count() &lt;&lt; endl; q = nullptr; cout &lt;&lt; &quot;end main&quot; &lt;&lt; endl; return 0;&#125;ENDS(test1)// ç¯å½¢å¼•ç”¨BEGINS(test2)class A &#123;public : A() &#123; cout &lt;&lt; &quot;defaulr constructor&quot; &lt;&lt; endl; &#125; ~A() &#123; cout &lt;&lt; &quot;destructor&quot; &lt;&lt; endl; &#125; shared_ptr&lt;A&gt; p;&#125;;int main() &#123; shared_ptr&lt;A&gt; p = make_shared&lt;A&gt;(); shared_ptr&lt;A&gt; q = make_shared&lt;A&gt;(); p-&gt;p = q; q-&gt;p = p; p = nullptr; q = nullptr; cout &lt;&lt; &quot;end main&quot; &lt;&lt; endl; return 0;&#125;ENDS(test2)BEGINS(test3)class A &#123;public : A() &#123; cout &lt;&lt; &quot;defaulr constructor&quot; &lt;&lt; endl; &#125; int x, y; ~A() &#123; cout &lt;&lt; &quot;destructor&quot; &lt;&lt; endl; &#125; shared_ptr&lt;A&gt; p;&#125;;class ptr_data &#123;public : ptr_data(A *ptr, int *cnt = nullptr) : ptr(ptr), cnt(cnt) &#123; if(this-&gt;cnt == nullptr) &#123; this-&gt;cnt = new int(1); &#125; &#125; void increase_one() &#123; *cnt += 1; return ; &#125; void decrease_one() &#123; *cnt -= 1; if(*cnt == 0) delete ptr; return ; &#125; // åŠ ä¸Šconst ä¸»è¦æ˜¯æä¾›ç»™constç±»å‹å»ç”¨ä¹Ÿæä¾›ç»™éconst bool operator==(const ptr_data &amp;p) const &#123; return p.ptr == this-&gt;ptr &amp;&amp; p.cnt == this-&gt;cnt; &#125; ~ptr_data() &#123; if(*cnt == 0) delete cnt; &#125; A *ptr; int *cnt;&#125;;class shared_ptr &#123;public : shared_ptr(A *ptr) : p(ptr)&#123;&#125; shared_ptr(const shared_ptr &amp;p) : p(p.p) &#123; // cnt å¼•ç”¨è®¡æ•° +1 this-&gt;p.increase_one(); &#125; shared_ptr &amp;operator=(const shared_ptr &amp;obj) &#123; if(obj.p == p) return *this; p.decrease_one(); p = obj.p; p.increase_one(); return *this; &#125; A *operator-&gt;() &#123;return p.ptr; &#125;; A &amp;operator*() &#123; return *(p.ptr); &#125; int use_count() &#123; return *p.cnt; &#125; ~shared_ptr() &#123; p.decrease_one(); &#125;private : ptr_data p;&#125;;shared_ptr make_shared() &#123; return shared_ptr(new A());&#125;ostream &amp;operator&lt;&lt;(ostream &amp;out, const A &amp;p) &#123; out &lt;&lt; &quot;class A : &quot; &lt;&lt; p.x &lt;&lt; &quot;, &quot; &lt;&lt; p.y &lt;&lt; endl; return out;&#125;int main() &#123; shared_ptr p = make_shared(); p-&gt;x = 3, p-&gt;y = 4; cout &lt;&lt; *p &lt;&lt; endl; cout &lt;&lt; &quot;p.use_count = &quot; &lt;&lt; p.use_count() &lt;&lt; endl; shared_ptr q = p; cout &lt;&lt; &quot;p.use_count = &quot; &lt;&lt; p.use_count() &lt;&lt; endl; cout &lt;&lt; &quot;q.use_count = &quot; &lt;&lt; q.use_count() &lt;&lt; endl; p = nullptr; cout &lt;&lt; &quot;q.use_count = &quot; &lt;&lt; q.use_count() &lt;&lt; endl; q = nullptr; cout &lt;&lt; &quot;end main&quot; &lt;&lt; endl; return 0;&#125;ENDS(test3)int main() &#123; test1::main(); // test2::main(); cout &lt;&lt; endl &lt;&lt; &quot; -------------------------------------- &quot;; test3::main(); return 0;&#125; sortæ–¹æ³•å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379/************************************************************************* &gt; File Name: 14.sort.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ17æ—¥ æ˜ŸæœŸæ—¥ 17æ—¶47åˆ†20ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;stdlib.h&gt;#include &lt;functional&gt;#include &lt;time.h&gt;#include &lt;algorithm&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(test1)bool cmp1(int x, int y) &#123; return x &gt; y;&#125;class CMP &#123;public : bool operator()(const int &amp;a, const int &amp;b) &#123; return a &lt; b; &#125;&#125;;void output(int *first, int *last, const char *s) &#123; cout &lt;&lt; s; while(first != last) &#123; cout &lt;&lt; *first &lt;&lt; &quot; &quot;; ++first; &#125; cout &lt;&lt; endl; return ;&#125;int main() &#123; srand(time(NULL)); int arr[100], n = 10; for(int i = 0; i &lt; n; ++i) &#123; i &amp;&amp; cout &lt;&lt; &quot; &quot;; arr[i] = rand() % 100; cout &lt;&lt; arr[i]; &#125; cout &lt;&lt; endl; sort(arr, arr + n); output(arr, arr + n, &quot;none : &quot;); sort(arr, arr + n, cmp1); output(arr, arr + n, &quot;cmp1 : &quot;); CMP cmp2; sort(arr, arr + n, cmp2); output(arr, arr + n, &quot;Class cmp2 : &quot;); return 0;&#125;ENDS(test1)BEGINS(test2)bool cmp1(int x, int y) &#123; return x &gt; y;&#125;class CMP &#123;public : bool operator()(const int &amp;a, const int &amp;b) &#123; return a &lt; b; &#125;&#125;;// æ™®é€švoid sort2(int *first, int *last, function&lt;int(int, int)&gt; cmp = less&lt;int&gt;()) &#123; if (first &gt;= last) return ; int *x = first, *y = last - 1, z = *first; while(x &lt; y) &#123; while(x &lt; y &amp;&amp; cmp(z, *y)) --y; if(x &lt; y) *(x++) = *y; while(x &lt; y &amp;&amp; cmp(*x, z)) ++x; if(x &lt; y) *(y--) = *x; &#125; *x = z; sort2(first, x, cmp); sort2(x + 1, last, cmp); return ;&#125;const int threshold = 16;// å•è¾¹é€’å½’æ³•-æ— ç›‘ç£void intor_loop(int *first, int *last, function&lt;int(int ,int)&gt; cmp = less&lt;int&gt;()) &#123; while(last - first &gt; threshold) &#123; int *x = first, *y = last - 1, z = *first; do &#123; while(cmp(*x, z)) ++x; while(cmp(z, *y)) --y; if(x &lt;= y) &#123; swap(*x, *y); ++x, --y; &#125; &#125; while(x &lt;= y); intor_loop(x, last, cmp); last = y + 1; &#125; return ;&#125;// å•è¾¹é€’å½’æ³•-æ— ç›‘ç£void sort1(int *first, int *last, function&lt;int(int ,int)&gt; cmp = less&lt;int&gt;()) &#123; while(first &lt; last) &#123; int *x = first, *y = last - 1, z = *first; do &#123; while(cmp(*x, z)) ++x; while(cmp(z, *y)) --y; if(x &lt;= y) &#123; swap(*x, *y); ++x, --y; &#125; &#125; while(x &lt;= y); sort1(x, last, cmp); last = y + 1; &#125; return ;&#125;void insertion_sort(int *first, int *last,function&lt;int(int, int)&gt; cmp = less&lt;int&gt;()) &#123; int *ind = first; for(int *x = first + 1; x &lt; last; ++x) &#123; if(cmp(*x, *ind)) ind = x; &#125; while(ind != first) &#123; swap(*ind, *(ind - 1)); ind--; &#125; for(int *x = first + 2; x &lt; last; ++x) &#123; int *j = x; while(cmp(*j, *(j -1))) &#123; swap(*j, *(j - 1)); --j; &#125; &#125; return ;&#125;void sort(int *first, int *last,function&lt;int(int, int)&gt; cmp = less&lt;int&gt;()) &#123; intor_loop(first, last, cmp); insertion_sort(first, last, cmp); return ;&#125;void output(int *first, int *last, const char *s) &#123; cout &lt;&lt; s; while(first != last) &#123; cout &lt;&lt; *first &lt;&lt; &quot; &quot;; ++first; &#125; cout &lt;&lt; endl; return ;&#125;int main() &#123; srand(time(NULL)); int arr[100], n = 10; for(int i = 0; i &lt; n; ++i) &#123; i &amp;&amp; cout &lt;&lt; &quot; &quot;; arr[i] = rand() % 100; cout &lt;&lt; arr[i]; &#125; cout &lt;&lt; endl; sort(arr, arr + n); output(arr, arr + n, &quot;none : &quot;); sort(arr, arr + n, cmp1); output(arr, arr + n, &quot;cmp1 : &quot;); CMP cmp2; sort(arr, arr + n, cmp2); output(arr, arr + n, &quot;Class cmp2 : &quot;); return 0;&#125;ENDS(test2)BEGINS(test3)using namespace test2;int main() &#123; srand(time(NULL)); int arr[100], n = 10; for(int i = 0; i &lt; n; ++i) &#123; i &amp;&amp; cout &lt;&lt; &quot; &quot;; arr[i] = rand() % 100; cout &lt;&lt; arr[i]; &#125; cout &lt;&lt; endl; sort1(arr, arr + n); output(arr, arr + n, &quot;none : &quot;); sort1(arr, arr + n, cmp1); output(arr, arr + n, &quot;cmp1 : &quot;); CMP cmp2; sort1(arr, arr + n, cmp2); output(arr, arr + n, &quot;Class cmp2 : &quot;); return 0;&#125;ENDS(test3)// åŸºäºè¿­ä»£å™¨çš„SortBEGINS(test4)bool cmp1(int x, int y) &#123; return x &gt; y;&#125;class CMP &#123;public : bool operator()(const int &amp;a, const int &amp;b) &#123; return a &lt; b; &#125;&#125;;const int threshold = 16;class RandomIter &#123;public : RandomIter(int *ptr) : ptr(ptr) &#123;&#125; int &amp;operator*() &#123; return *ptr; &#125; RandomIter operator-(int x) &#123;return RandomIter(ptr - x); &#125; RandomIter operator+(int x) &#123;return RandomIter(ptr + x); &#125; int operator-(const RandomIter &amp;iter) &#123; return ptr - iter.ptr; &#125; RandomIter &amp;operator++() &#123; ++ptr; return *this; &#125; RandomIter &amp;operator--() &#123; --ptr; return *this; &#125; bool operator &lt;(const RandomIter &amp;iter) const &#123; return ptr &lt; iter.ptr; &#125; bool operator&gt;(const RandomIter &amp;iter) const &#123; return iter &lt; *this; &#125; bool operator&lt;=(const RandomIter &amp;iter) &#123; return !(iter &lt; *this); &#125; bool operator&gt;=(const RandomIter &amp;iter) &#123; return !(*this &lt; iter); &#125; bool operator==(const RandomIter &amp;iter) &#123; return !(*this &lt; iter) &amp;&amp; !(iter &lt; *this); &#125; bool operator!=(const RandomIter &amp;iter) &#123; return !(*this == iter); &#125;private : int *ptr;&#125;;// å•è¾¹é€’å½’æ³•-æ— ç›‘ç£void intor_loop(RandomIter first, RandomIter last, function&lt;bool(int ,int)&gt; cmp = less&lt;int&gt;()) &#123; while(last - first &gt; threshold) &#123; RandomIter x = first, y = last - 1; int z = *first; do &#123; while(cmp(*x, z)) ++x; while(cmp(z, *y)) --y; if(x &lt;= y) &#123; swap(*x, *y); ++x, --y; &#125; &#125; while(x &lt;= y); intor_loop(x, last, cmp); last = y + 1; &#125; return ;&#125;void insertion_sort(RandomIter first, RandomIter last,function&lt;int(int, int)&gt; cmp = less&lt;int&gt;()) &#123; RandomIter ind = first; for(RandomIter x = first + 1; x &lt; last; ++x) &#123; if(cmp(*x, *ind)) ind = x; &#125; while(ind != first) &#123; swap(*ind, *(ind - 1)); --ind; &#125; for(RandomIter x = first + 2; x &lt; last; ++x) &#123; RandomIter j = x; while(cmp(*j, *(j -1))) &#123; swap(*j, *(j - 1)); --j; &#125; &#125; return ;&#125;void sort(RandomIter first, RandomIter last,function&lt;int(int, int)&gt; cmp = less&lt;int&gt;()) &#123; intor_loop(first, last, cmp); insertion_sort(first, last, cmp); return ;&#125;void output(int *first, int *last, const char *s) &#123; cout &lt;&lt; s; while(first != last) &#123; cout &lt;&lt; *first &lt;&lt; &quot; &quot;; ++first; &#125; cout &lt;&lt; endl; return ;&#125;int main() &#123; srand(time(NULL)); int arr[100], n = 10; for(int i = 0; i &lt; n; ++i) &#123; i &amp;&amp; cout &lt;&lt; &quot; &quot;; arr[i] = rand() % 100; cout &lt;&lt; arr[i]; &#125; cout &lt;&lt; endl; sort(arr, arr + n); output(arr, arr + n, &quot;none : &quot;); sort(arr, arr + n, cmp1); output(arr, arr + n, &quot;cmp1 : &quot;); CMP cmp2; sort(arr, arr + n, cmp2); output(arr, arr + n, &quot;Class cmp2 : &quot;); return 0;&#125;ENDS(test4)int main() &#123; test1::main(); cout &lt;&lt; &quot; ---------------- åˆ†å‰²çº¿ ------------------ &quot; &lt;&lt; endl; test2::main(); cout &lt;&lt; &quot; ---------------- åˆ†å‰²çº¿ ------------------ &quot; &lt;&lt; endl; test3::main(); cout &lt;&lt; &quot; ---------------- åˆ†å‰²çº¿ ------------------ &quot; &lt;&lt; endl; test4::main(); return 0;&#125; æºç æ–‡ä»¶*.cppç‚¹æˆ‘è·³è½¬:https://github.com/qzwl123/C-/tree/main/%E5%B0%81%E8%A3%85","categories":[{"name":"OOP","slug":"OOP","permalink":"https://tutouwang.vercel.app/categories/OOP/"}],"tags":[]},{"title":"å°è£…ä¸€","slug":"OOP/å°è£…ä¸€","date":"2022-07-12T07:06:52.000Z","updated":"2022-09-07T08:54:41.385Z","comments":true,"path":"2022/07/12/OOP/å°è£…ä¸€/","link":"","permalink":"https://tutouwang.vercel.app/2022/07/12/OOP/%E5%B0%81%E8%A3%85%E4%B8%80/","excerpt":"","text":"ç±»å‹ä¸å˜é‡ ç±»å‹ å˜é‡ æœ€å°ä½æ•° int a 16 long long b 64 char c 8 double d N&#x2F;A float e N&#x2F;A 12345int a;long long b;char c;double d;float e; $$ç±»å‹ &#x3D; æ•°æ®ç±»å‹ + æ•°æ®æ“ä½œ$$ ç±»ä¸å¯¹è±¡$$æ•°æ® + è¡Œä¸º &#x3D; å°è£…$$ ä»€ä¹ˆæ˜¯é¢å‘å¯¹è±¡ï¼Ÿ é¢å‘å¯¹è±¡æ˜¯ä¸€ç§ç¼–ç¨‹æ€æƒ³, æŠŠä¸€åˆ‡ä¸œè¥¿çœ‹å‡ºä¸€ä¸ªä¸ªå¯¹è±¡,æ¯”å¦‚äººã€è€³æœºã€é¼ æ ‡ã€æ°´æ¯ç­‰â€¦ â€¦ä»–ä»¬å„è‡ªéƒ½æœ‰å±æ€§,æ¯”å¦‚è€³æœºæ˜¯ç™½è‰²çš„,é¼ æ ‡æ˜¯é»‘è‰²çš„ç­‰ç­‰,æŠŠè¿™äº›å¯¹è±¡æ‹¥æœ‰çš„å±æ€§å˜é‡å’Œæ“ä½œè¿™äº›å±æ€§çš„å‡½æ•°æ‰“åŒ…æˆä¸€ä¸ªç±»æ¥è¡¨ç¤º é¢å‘è¿‡ç¨‹å’Œé¢å‘å¯¹è±¡çš„åŒºåˆ« é¢å‘è¿‡ç¨‹: æ ¹æ®ä¸šåŠ¡é€»è¾‘ä»ä¸Šåˆ°ä¸‹å†™ä»£ç ã€‚ é¢å‘å¯¹è±¡: å°†æ•°æ®ä¸å‡½æ•°ç»‘å®šåˆ°ä¸€èµ·,è¿›è¡Œå°è£…, è¿™æ ·èƒ½å¤Ÿæ›´å¿«é€Ÿçš„å¼€å‘ç¨‹åº,å‡å°‘äº†é‡å¤ä»£ç çš„é‡å†™è¿‡ç¨‹ ç±»(ç±»å‹) å¯¹è±¡(å˜é‡) Cat garfield Dog odie People qz 123456class Cat &#123; &#125;;class Dog &#123; &#125;;class People &#123; &#125;; 123Cat garfield;Dog odie;People qz; æˆå‘˜å±æ€§æ–¹æ³•12345678910class People &#123; // æˆå‘˜å±æ€§ string name; Day birthday; double height; double weight; // æˆå‘˜æ–¹æ³• void say(string word); void run(Location &amp;Ioc)&#125;; è®¿é—®æƒé™æ•°æ®å®‰å…¨æ€§ å æè¿° public å…¬å…±è®¿é—®æƒé™ private ç§æœ‰è®¿é—®æƒé™ protected å—ä¿æŠ¤çš„è®¿é—®æƒé™ friend å‹å…ƒ è®¿é—®æƒé™å°±ç›¸å½“äºç±»å¤–å¯¹è®¿é—®ç±»å†…éƒ¨çš„å±æ€§å’Œæ–¹æ³•çš„æ—¶å€™æ‰èµ·åˆ°ä½œç”¨ public : ç±»å¤–éƒ¨å¯ä»¥éšæ„è®¿é—®çš„ private ï¼š ç±»å¤–éƒ¨æ˜¯è®¿é—®ä¸äº†çš„ protected ï¼š åªæœ‰å­ç±»æ‰èƒ½è®¿é—®çš„ friend ï¼šéš”å£è€ç‹ 123456789class People &#123; public : string name(); string birthdat(); double heigprivate : &#125;; å‘½åç©ºé—´å‘½åç©ºé—´å¯ä»¥: åµŒå¥— è¿½åŠ  å£°å®š(å£°æ˜å®šä¹‰)åˆ†ç¦» å‘½åç©ºé—´çš„å®šä¹‰123456789101112131415161718192021222324252627/************************************************************************* &gt; File Name: class.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ12æ—¥ æ˜ŸæœŸäºŒ 17æ—¶39åˆ†32ç§’ ************************************************************************/#include &lt;iostream&gt;// å‰æœŸ ä¸å»ºè®®ä½¿ç”¨å‘½åç©ºé—´using namespace std;// å®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ttw - å‘Šè¯‰ç¼–è¯‘å™¨æˆ‘æƒ³æŠŠa,bæ‰“åŒ…çš„å‘½åç©ºé—´ä¸­(å˜é‡ã€å‡½æ•°)namespace ttw &#123; int a, b;&#125; // end of namespace ttwnamespace qz &#123; int a, b;&#125; // end of namespace qzint main() &#123; // è®¿é—®å‘½åç©ºé—´ ttw ä¸­çš„ aã€b ttw::a = ttw::b = 1; qz::a = qz::b = 2; cout &lt;&lt; ttw::a &lt;&lt; qz::a &lt;&lt; endl; return 0;&#125; å»æ‰ using namespace ***;123456789101112131415161718192021#include &lt;iostream&gt;using namespace ttw;// å®šä¹‰ä¸€ä¸ªå‘½åç©ºé—´ttw - å‘Šè¯‰ç¼–è¯‘å™¨æˆ‘æƒ³æŠŠa,bæ‰“åŒ…çš„å‘½åç©ºé—´ä¸­(å˜é‡ã€å‡½æ•°)namespace ttw &#123; int a, b;&#125; // end of namespace ttwnamespace qz &#123; int a, b;&#125; // end of namespace qzint main() &#123; // è®¿é—®å‘½åç©ºé—´ ttw ä¸­çš„ aã€b // ttw::a = ttw::b = 1; a = b = 1; qz::a = qz::b = 2; cout &lt;&lt; a &lt;&lt; qz::a &lt;&lt; endl; return 0;&#125; å‘½åç©ºé—´åµŒå¥—12345678910111213141516#include &lt;iostream&gt;using namespace ttw;namespace ttw &#123; int a = 1; namespace qz &#123; int a = 2; &#125; // end of namespace qz&#125; // end of namespace ttwint main() &#123; cout &lt;&lt;&quot;ttw ä¸­çš„ a : &quot; &lt;&lt; ttw::a &lt;&lt; endl; // out 1 cout &lt;&lt;&quot;q z ä¸­çš„ a : &quot; &lt;&lt; ttw::qz::a &lt;&lt; endl; // out 2 return 0;&#125; å‘½åç©ºé—´æ˜¯å¼€æ”¾çš„ï¼Œæ—¢å¯ä»¥éšæ—¶æŠŠæ–°çš„æˆå‘˜åŠ å…¥å·²æœ‰çš„å‘½åç©ºé—´ä¸­(å‘å‘½åç©ºé—´ä¸­è¿½åŠ )1234567891011121314151617#include &lt;iostream&gt;using namespace ttw;namespace ttw &#123; int a = 1;&#125; // end of namespace ttwnamespace ttw &#123; int b = 2;&#125; // end of namespace ttwint main() &#123; cout &lt;&lt; ttw::a &lt;&lt; endl; // out 1 cout &lt;&lt; ttw::b &lt;&lt; endl; // out 2 return 0;&#125; ç±»å…ˆæ„é€ åææ„, ä¸ä»…ä½œç”¨åœ¨æˆå‘˜å±æ€§ä¹‹é—´ä¹Ÿä½œç”¨åœ¨ç±»ä¹‹é—´ ç±»-ä»£ç å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100/************************************************************************* &gt; File Name: 2.class.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ12æ—¥ æ˜ŸæœŸäºŒ 17æ—¶50åˆ†29ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(TEST1)// å†…å­˜å¤§å° å¯¹é½æ–¹å¼class A_with_int &#123; // åªæœ‰ä¸€ä¸ª int sizeof(A_with_int) = 4 int a; // a å’Œ b éƒ½æœ‰å°±å  16 double b; // æ•°æ®åŒºã€æ–¹æ³•åŒº // a å’Œ båŠ ä¸Šå‡½æ•°, å¤§å°æ˜¯ä¸å˜çš„ å› ä¸ºå­˜æ”¾çš„åŒºåŸŸçš„ä¸åŒ void say();&#125;;class People &#123;public : // æˆå‘˜å±æ€§ string name; int age; double height; double weight; // æˆå‘˜æ–¹æ³• // è¡Œä¸º è¯´è¯ void say(string name); /* &#123; // å£°æ˜ + å®šä¹‰ æ­£å¸¸å·¥ç¨‹æ˜¯æ‹†å¼€çš„ // this æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ cout &lt;&lt; &quot;my first name is&quot; &lt;&lt; this-&gt;name &lt;&lt; endl; cout &lt;&lt; &quot;my second name is &quot; &lt;&lt; name &lt;&lt; endl; return ; &#125; */ void run();&#125;;/*// ç±»å¤–å®šä¹‰void People::say(string name) &#123; cout &lt;&lt; &quot;my first name is&quot; &lt;&lt; this-&gt;name &lt;&lt; endl; cout &lt;&lt; &quot;my second name is &quot; &lt;&lt; name &lt;&lt; endl; return ;&#125;*/ENDS(TEST1)// å‘½åç©ºé—´å¤–å®šä¹‰void TEST1::People::say(string name) &#123; cout &lt;&lt; &quot;my first name is&quot; &lt;&lt; this-&gt;name &lt;&lt; endl; cout &lt;&lt; &quot;my second name is &quot; &lt;&lt; name &lt;&lt; endl; return ;&#125;int main() &#123; cout &lt;&lt; &quot;class A int &quot; &lt;&lt; sizeof(TEST1::A_with_int) &lt;&lt; endl; TEST1::People ttw; TEST1::People laojia; TEST1::People jgouba; TEST1::People jdp; ttw.name = &quot;Tu tou wang&quot;; laojia.name = &quot;Lao jia&quot;; jgouba.name = &quot;Jia gou ba&quot;; jdp.name = &quot;Jia da pao&quot;; /* ttw.say(); laojia.say(); jgouba.say(); jdp.say(); */ ttw.say(&quot;TTW&quot;); laojia.say(&quot;LJ&quot;); jgouba.say(&quot;JGB&quot;); jdp.say(&quot;JDP&quot;); return 0;&#125; ç±»å¯¹è±¡çš„ å¤§å°é—®é¢˜ sizeof() ç®—çš„æ˜¯ä»€ä¹ˆï¼Ÿ â€‹ ç›¸å…³ç±»å‹åœ¨æ•°æ®åŒºä¸­çš„å­˜å‚¨ç©ºé—´ ä¸ºä»€ä¹ˆsizeof() è®¡ç®—æ—¶å€™åªå…³æ³¨æ•°æ®çš„å¤§å° â€‹ å› ä¸ºæ–¹æ³•åŒºçš„å¤§å°ä¸ä¼šéšç€å¯¹è±¡çš„æ›¾åŠ è€Œå¢åŠ  sizeof() åªè®¡ç®—å’Œå¯¹è±¡æ•°é‡æˆæ­£æ¯”çš„æ•°æ®åŒºçš„å¤§å° å®ç°è‡ªå·±çš„coutã€cin12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970/************************************************************************* &gt; File Name: 3.class.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ12æ—¥ æ˜ŸæœŸäºŒ 20æ—¶35åˆ†16ç§’ ************************************************************************/#include &lt;iostream&gt;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(ttw)class istream &#123;public : istream &amp;operator&gt;&gt;(int &amp;x);&#125;;istream &amp;istream::operator&gt;&gt;(int &amp;x) &#123; scanf(&quot;%d&quot;, &amp;x); return *this;&#125;istream cin;// coutclass ostream &#123;public : ostream &amp;operator&lt;&lt;(int x); ostream &amp;operator&lt;&lt;(char ch);&#125;;ostream &amp;ostream::operator&lt;&lt;(int x) &#123; printf(&quot;%d&quot;,x); return *this;&#125;ostream &amp;ostream::operator&lt;&lt;(char ch) &#123; printf(&quot;%c&quot;, ch); return *this;&#125;ostream cout;const char endl = &#x27;\\n&#x27;;ENDS(ttw)int main() &#123; int n = 123; // cout æœ¬è´¨æ˜¯ä¸€ä¸ªå¯¹è±¡ std::cout &lt;&lt; n &lt;&lt; std::endl; // è‡ªå·±çš„ cout ttw::cout &lt;&lt; n &lt;&lt; ttw::endl; // è‡ªå·±çš„ cin ttw::cin &gt;&gt; n; ttw::cout &lt;&lt; n &lt;&lt; ttw::endl; return 0;&#125; ä¸ºä»€ä¹ˆé‡è½½å·¦ç§»è¿ç®—ç¬¦è¦è¿”å›å¼•ç”¨ï¼Ÿ æ˜¯ä¸ºäº†è¿ç»­è¾“å‡º æ¯”å¦‚ 1 + 2 + 3 + 5 å…ˆ 1 + 2 &#x3D; 3 3(ç”¨çš„æ˜¯1 + 2çš„ç»“æœçš„è¿”å›å€¼) + 3 è¿™æ˜¯ä¸ºäº†å®ç°è¿ç»­åŠ  &#x2F;&#x2F; cout(å·¦é¢çš„å‚æ•°) &lt;&lt; p(å³é¢çš„å‚æ•°)ostream &amp;operator&lt;&lt;(ostream &amp;out, const Point &amp;p) {} å¼•ç”¨-ä»£ç 123456789101112131415161718192021222324/************************************************************************* &gt; File Name: 4.constructo.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ13æ—¥ æ˜ŸæœŸä¸‰ 13æ—¶12åˆ†06ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;// å¼•ç”¨æµ‹è¯• å¼•ç”¨ç›¸å½“äºæ ‡ç­¾æ˜¯è´´åœ¨å®å‚ä¸Šé¢void add_one(int &amp;n) &#123; n += 1; return ;&#125;int main() &#123; int a = 1, b = 3; cout &lt;&lt; &quot;normal param : &quot; &lt;&lt; a &lt;&lt; &quot; &quot; &lt;&lt; b &lt;&lt; endl; add_one(a); add_one(b); return 0;&#125; æ„é€ å‡½æ•°ä¸ææ„å‡½æ•° æ„é€ &#x2F;ææ„å‡½æ•° ä½¿ç”¨æ–¹æ³• é»˜è®¤æ„é€ å‡½æ•° People a; People(string name); People(â€œttwâ€); People(consst People &amp;a) æ‹·è´æ„é€ ï¼Œä¸&#x3D;ä¸ç­‰ä»· ~People æ—  ä»»ä½•ä¸€ä¸ªå¯¹è±¡äº§ç”Ÿçš„æ—¶å€™éƒ½ä¼šè°ƒç”¨æ„é€ å‡½æ•°ï¼Œé”€æ¯çš„æ—¶å€™ä¸€å®šä¼šè°ƒç”¨ææ„å‡½æ•° æ„é€ å‡½æ•°æœ‰å‚æ•°: ä¸€ä¸ªå‚æ•°: é€šå¸¸å«è½¬æ¢æ„é€  å¤šä¸ªå‚æ•°ï¼š æ„é€ å‡½æ•°â€”ä»£ç å®ç°åœ¨ç±»é‡Œé¢ç¼–è¯‘å™¨ä¼šå‡ ç±»é»˜è®¤çš„è¡Œä¸º: é»˜è®¤æ„é€ å‡½æ•° é»˜è®¤ææ„å‡½æ•° é»˜è®¤æ‹·è´æ„é€  é»˜è®¤å¤åˆ¶è¿ç®—ç¬¦ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120/************************************************************************* &gt; File Name: 4.constructo.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ13æ—¥ æ˜ŸæœŸä¸‰ 13æ—¶12åˆ†06ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;class B1 &#123;public : B1() = default; // ä½¿ç”¨é»˜è®¤çš„æ— å‚æ„é€ (default/delete) B1(const B1 &amp;) &#123; // æ‹·è´æ„é€ å‡½æ•° cout &lt;&lt; &quot;B1 copy constructor&quot; &lt;&lt; endl; &#125;&#125;;class B2 &#123;public : B2() = default; B2(const B2 &amp;) &#123; cout &lt;&lt; &quot;B2 copy constructor&quot; &lt;&lt; endl; &#125;&#125;;class B3 &#123;public : B3() = default; B3(const B3 &amp;) &#123; cout &lt;&lt; &quot;B3 copy constructor&quot; &lt;&lt; endl; &#125;&#125;;class B &#123;public : B1 b1; B2 b2; B3 b3;&#125;;class A &#123;public : // å·¦é¢xæ˜¯æˆå‘˜å±æ€§ï¼Œè€Œå³é¢çš„xæ˜¯å‚æ•°x - æœ‰å‚æ„é€ å‡ºç°ã€é»˜è®¤æ— å‚æ„ é€ å°±ä¼šè¢«åˆ é™¤æ‰äº† A(int x) : x(x) &#123; // x(x) åˆå§‹åŒ–åˆ—è¡¨ cout &lt;&lt; this &lt;&lt; &quot; : Class A :&quot; &lt;&lt; x &lt;&lt; endl; &#125; // é»˜è®¤ä¹Ÿæ˜¯æœ‰æ‹·è´æ„é€ çš„ A(const A &amp;a) &#123; cout &lt;&lt; this &lt;&lt; &quot; : copy from &quot; &lt;&lt; &amp;a &lt;&lt; endl; &#125; void operator=(const A &amp;a) &#123; cout &lt;&lt; this &lt;&lt; &quot; assign from &quot; &lt;&lt; &amp;a &lt;&lt; endl; &#125; // æˆå‘˜å±æ€§ int x;&#125;;class Data &#123;public : /* é»˜è®¤æ„é€ ç›¸å½“äºè¿™ä¸ªæ— å‚ åˆå§‹åŒ–åˆ—è¡¨_æ“…äºä½¿ç”¨åˆå§‹åŒ–åˆ—è¡¨ åˆå§‹åŒ–åˆ—è¡¨çš„é¡ºåºå’Œå£°æ˜çš„é¡ºåºæœ‰å…³ç³» å¦‚ Data() : __y(100), __x(__y + 1) &#123;&#125; è§„å®šäº†æ¯ä¸€ä¸ªæˆå‘˜çš„å±æ€§çš„æ„é€ å½¢å¼ ä¼šä¸€æ¬¡æ„é€ æˆå‘˜å±æ€§ __x __y a(3) // æ˜¾æ€§çš„è°ƒç”¨äº† */ Data() : __x(0), __y(0), a(3) &#123; /* ä¸å®Œç¾çš„åˆå§‹åŒ– this-&gt;__x = 0; this-&gt;__y = 0; */ // ä¸ºäº†ç¡®å®šèµ°çš„è¿™ä¸ªæ„é€ å‚æ•° cout &lt;&lt; &quot;default constructor&quot; &lt;&lt; endl; &#125; int x() &#123; return __x ;&#125; int y() &#123; return __y; &#125; ~Data() &#123; cout &lt;&lt; &quot;destrcutor&quot; &lt;&lt; endl; &#125;private : int __x, __y; A a;&#125;;int main() &#123; B b1; B b2 = b1; // è°ƒç”¨äº†é»˜è®¤æ„é€ å‡½æ•° Data d; cout &lt;&lt; d.x() &lt;&lt; &quot; &quot; &lt;&lt; d.y() &lt;&lt; endl; // æœ‰å‚æ„é€ _è½¬æ¢æ„é€  A a(56); // è°ƒç”¨äº†2æ¬¡æ„é€ å‡½æ•° A b = 45; cout &lt;&lt; &quot;address b : &quot; &lt;&lt; &amp;b &lt;&lt; endl; // ä¸€æ¬¡è°ƒç”¨ b = 78; return 0;&#125; ä¸ºä»€ä¹ˆæ‹·è´æ„é€ è¦ä¼ å¼•ç”¨ï¼Ÿä¸åŠ è¡Œä¸è¡Œï¼Ÿ æ‹·è´æ„é€ ä¸ºä»€ä¹ˆä¸èƒ½å»æ‰const?int &amp; æ˜¯ä¸èƒ½ç»‘å®šåˆ°åŒ¿åå¯¹è±¡èº«ä¸Šçš„ ä¸¤ç‚¹ä¸ºä»€ä¹ˆè¦åŠ : åŠ ä¸Šconstä¸ºäº†å…¼å®¹åŒ¿åå¯¹è±¡ é€»è¾‘ä¸Šçš„å¸¸é‡é™åˆ¶ å…¼å®¹constç±»å‹çš„æ‹·è´ const A a(45); A b &#x3D; a; æ‹·è´æ‰§è¡Œæµç¨‹ä¸ºä»€ä¹ˆå¤šä¸€ä¸ªç›¸å½“äº 45 åˆ›å»ºäº†ä¸€å…±åŒ¿åå¯¹è±¡ å–æ¶ˆè¿”å›å€¼ä¼˜åŒ–1g++ -fno-elide-constructors test.cpp ææ„å‡½æ•°12345678910111213141516171819202122232425262728293031323334353637383940414243444546/************************************************************************* &gt; File Name: 6.constructo_order.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ13æ—¥ æ˜ŸæœŸä¸‰ 17æ—¶58åˆ†41ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;class A &#123;public : A() &#123; cout &lt;&lt; this &lt;&lt; &quot; default cosntructor&quot; &lt;&lt; endl; &#125; A(int n, int m) : n(n), m(m), arr(nullptr), size(nullptr), offset(nullptr) &#123; cout &lt;&lt; &quot;A(int) constructor&quot; &lt;&lt; endl; &#125; A(int *size, int *offset) : size(size), offset(offset) &#123; arr = new int[*size]; arr += *offset; cout &lt;&lt; &quot;A(int *size) constructor&quot; &lt;&lt; endl; &#125; ~A() &#123; cout &lt;&lt; this &lt;&lt; &quot; destructor&quot; &lt;&lt; endl; if(arr == nullptr) return ; arr -= *offset; delete []arr; arr = nullptr; &#125; int *arr, *size, *offset ; int n, m;&#125;;int main() &#123; A a(3, 4); A b(&amp;a.n, &amp;a.m); cout &lt;&lt; &quot;&amp;a : &quot; &lt;&lt; &amp;a &lt;&lt; &quot; &amp;b :&quot; &lt;&lt; &amp;b &lt;&lt; endl; return 0;&#125; æ„é€ å‡½æ•°ä¸ææ„å‡½æ•°é¡ºåºç›¸åæ˜¯ç‰¹ä¾‹ä¹ˆï¼Ÿè¿˜æ˜¯ä¸€èˆ¬æƒ…å†µï¼Ÿ ä¸€å®šæ˜¯ä¸€èˆ¬æƒ…å†µã€‚ aå¯¹è±¡å®šä¹‰åœ¨bå‰é¢ï¼Œæ„å‘³ç€bæ„é€ å¯èƒ½ä¾èµ–äºaå¯¹è±¡ï¼Œæ‰€ä»¥aä¸€å®šå…ˆæ„é€  ææ„-ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107/************************************************************************* &gt; File Name: 6.constructo_order.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ13æ—¥ æ˜ŸæœŸä¸‰ 17æ—¶58åˆ†41ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // ned of namespace xBEGINS(test1)class A &#123;public : A() &#123; cout &lt;&lt; this &lt;&lt; &quot; default cosntructor&quot; &lt;&lt; endl; &#125; A(int n, int m) : n(n), m(m), arr(nullptr), size(nullptr), offset(nullptr) &#123; cout &lt;&lt; &quot;A(int) constructor&quot; &lt;&lt; endl; &#125; A(int *size, int *offset) : size(size), offset(offset) &#123; arr = new int[*size]; arr += *offset; cout &lt;&lt; &quot;A(int *size) constructor&quot; &lt;&lt; endl; &#125; ~A() &#123; cout &lt;&lt; this &lt;&lt; &quot; destructor&quot; &lt;&lt; endl; if(arr == nullptr) return ; arr -= *offset; delete []arr; arr = nullptr; &#125; int *arr, *size, *offset ; int n, m;&#125;;void main() &#123; A a(3, 4); A b(&amp;a.n, &amp;a.m); cout &lt;&lt; &quot;&amp;a : &quot; &lt;&lt; &amp;a &lt;&lt; &quot; &amp;b :&quot; &lt;&lt; &amp;b &lt;&lt; endl; return ;&#125;ENDS(test1);BEGINS(test2)// 4ä¸ªå±æ€§ç±»#define ATTR_CLASS(x) class ATTR_##x &#123;\\public :\\ ATTR_##x() &#123; \\ cout &lt;&lt; &quot;ATTR_&quot; #x &quot; default constructor&quot; &lt;&lt; endl; \\ &#125; \\ ~ATTR_##x() &#123; \\ cout &lt;&lt; &quot;ATTR_&quot; #x &quot;destructor&quot; &lt;&lt; endl;\\ &#125;\\&#125;;ATTR_CLASS(1);ATTR_CLASS(2);ATTR_CLASS(3);ATTR_CLASS(4);class A &#123;public : A() &#123; cout &lt;&lt; &quot;Class A constructor&quot; &lt;&lt; endl; &#125; ~A() &#123; cout &lt;&lt; &quot;Class A destructor&quot; &lt;&lt; endl; &#125; ATTR_1 a1; ATTR_2 a2; ATTR_3 a3; ATTR_4 a4;&#125;;void main() &#123; A a; return ;&#125;ENDS(test2)int main() &#123; test1::main(); cout &lt;&lt; &quot; ------------------------------------ &quot; &lt;&lt; endl; test2::main(); return 0;&#125; ç±»å±æ€§ä¸æ–¹æ³•å¦‚æœæŠŠæˆå‘˜å±æ€§å˜æˆç±»å±æ€§ï¼Ÿ åœ¨å±æ€§å‰é¢æ·»åŠ staticå…³é”®å­—å³å¯ ç±»å±æ€§ å…¨å±€åªæœ‰ä¸€ä»½ï¼Œ ç‰µä¸€å‘è€ŒåŠ¨å…¨èº«, ä¸€ä¸ªç±»å¯¹è±¡å¯¹ç±»å±æ€§çš„ä¿®æ”¹ï¼Œå…¶ä»–å¯¹è±¡éƒ½ä¼šæ„ŸçŸ¥åˆ° æˆå‘˜å±æ€§ æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä»½ï¼Œéšç€å¯¹è±¡çš„å¢åŠ è€Œå¢åŠ  æˆå‘˜å±æ€§ï¼Œæ¯ä¸ªå¯¹è±¡ä¿®æ”¹è‡ªå·±çš„æˆå‘˜å±æ€§åˆ«æ˜¯ä¸çŸ¥é“çš„å› ä¸ºæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä»½ ä»–ä»¬ä¸»è¦æ˜¯æ€§è´¨ä¸Šçš„å·®åˆ«,å°±å¯¼è‡´ä¸Šäº†åŠŸèƒ½ä¸Šçš„å·®åˆ« ç±»æ–¹æ³• â€‹ éå¯¹è±¡è¡Œä¸ºï¼š â€‹ åˆ—å¦‚ï¼šæ¯ç­å…¨äººç±» â€‹ ä¸èƒ½è®¿é—®thisæŒ‡é’ˆ (ç›¸å½“äºéå¯¹è±¡æ–¹æ³•) æˆå‘˜æ–¹æ³• å¯¹è±¡è¡Œä¸ºï¼š â€‹ åˆ—å¦‚ï¼šäººç±» â€‹ è¯´è¯ã€è·‘ã€ ä»–ä»¬ä¸»è¦çš„å·®åˆ«æ˜¯é€»è¾‘ä¸Šçš„å·®åˆ« å¾ˆå¤šåŠŸèƒ½æˆ‘ä»¬å¯ä»¥è®¾è®¡æˆç±»æ–¹æ³•æˆ–è€…æ˜¯æˆå‘˜æ–¹æ³•ï¼Œä¸»è¦æ˜¯çœ‹ç›¸åº”æ–¹æ³•çš„å†…éƒ¨ä½¿ä¸ä½¿ç”¨thisæŒ‡é’ˆ 12345678910class People &#123;public : // ç±»å‡½æ•° -&gt; å­˜å‚¨åœ¨ é™æ€å­˜å‚¨åŒº static void is_valid_height(double height);private : // ç±»å±æ€§ åªæœ‰ä¸€ä»½ ç‰µä¸€å‘è€ŒåŠ¨å…¨èº« static int total_num; // æˆå‘˜å±æ€§ double __height;&#125;; constæ–¹æ³•const æ”¾åˆ°æ–¹æ³•åé¢ 1234class People &#123; public : string &amp;name() const; // constæ–¹æ³•ï¼Œæ˜¯ä¸èƒ½ä¿®æ”¹ä»»ä½•æˆå‘˜å±æ€§çš„å€¼çš„ --- åœ¨ç‰¹æ®Šçš„åŠŸèƒ½ä¸‹è´¹æ”¹ä¸å¯ å¯ä»¥æŠŠå±æ€§ ç¼–ç¨‹ mutable int x;&#125;; constå¯¹è±¡åªèƒ½è°ƒç”¨constæ–¹æ³• 123456789101112131415161718192021222324252627282930313233343536373839/************************************************************************* &gt; File Name: 7.const_method.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ13æ—¥ æ˜ŸæœŸä¸‰ 21æ—¶12åˆ†55ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // ned of namespace xBEGINS(test1)class A &#123;public : A() &#123; x = 200; &#125; // constæ–¹æ³•ï¼Œæ˜¯ä¸èƒ½ä¿®æ”¹ä»»ä½•æˆå‘˜å±æ€§çš„å€¼çš„ --- åœ¨ç‰¹æ®Šçš„åŠŸèƒ½ä¸‹è´¹æ”¹ä¸å¯ å¯ä»¥æŠŠå±æ€§ ç¼–ç¨‹ mutable void say() const &#123; x = 123; cout &lt;&lt; x &lt;&lt; endl; &#125; mutable int x;&#125;;void main() &#123; const A a; a.say(); return ;&#125;ENDS(test1);int main() &#123; test1::main(); return 0;&#125; C++ä¸­çš„ç»“æ„ä½“ä¸ç±» C++ â€‹ struct è®¿é—®æƒé™é»˜è®¤ public â€‹ class è®¿é—®æƒé™é»˜è®¤ private c&#x2F;c++ç»“æ„ä½“çš„åŒºåˆ« C C++ æˆå‘˜å‡½æ•° ä¸èƒ½æœ‰ å¯ä»¥ é™æ€æˆå‘˜ ä¸èƒ½æœ‰ å¯ä»¥ è®¿é—®æ§åˆ¶ é»˜è®¤public,ä¸èƒ½ä¿®æ”¹ public&#x2F;private&#x2F;protected ç»§æ‰¿å…³ç³» ä¸å¯ä»¥ç»§æ‰¿ å¯ä»¥ä»ç±»æˆ–è€…å…¶ä»–ç»“æ„ä½“ç»§æ‰¿ åˆå§‹åŒ– ä¸èƒ½ç›´æ¥åˆå§‹åŒ–æ•°æ®æˆå‘˜ å¯ä»¥ ä¸ºä»€ä¹ˆC++è¿˜ä¼šä¿ç•™structå…³é”®å­—æ›´å¥½çš„å…¼å®¹ ç”¨ä¸¥æ ¼å‡†ç¡®çš„é€»è¾‘, å°†é”™è¯¯æš´éœ²åœ¨ç¼–è¯‘é˜¶æ®µ C++ æ ¸å¿ƒç²¾é«“ï¼šä¸ä»…è¦è¯´è¯ï¼Œè¿˜è¦è¯´çš„æ¼‚äº®è¯ æµ…æ‹·è´ä¸æ·±æ‹·è´ æµ…æ‹·è´ï¼š åˆç§°å€¼æ‹·è´ï¼Œå°†åŸå¯¹è±¡çš„å€¼æ‹·è´åˆ°ç›®æ ‡å¯¹è±¡ä¸­å»ï¼Œæœ¬è´¨ä¸Šæ¥è¯´æºå¯¹è±¡å’Œç›®æ ‡å¯¹è±¡å…¬ç”¨ä¸€ä»½å®ä½“ï¼Œåªæ˜¯æ‰€å¼•ç”¨çš„å˜é‡åä¸åŒï¼Œåœ°å€å…¶å®è¿˜æ˜¯ç›¸åŒçš„ã€‚ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œä½ çš„å°åå­—å«å˜»å˜»ï¼Œå¤§åå«å“ˆå“ˆï¼Œå½“åˆ«äººå«ä½ å˜»å˜»æˆ–è€…å“ˆå“ˆçš„æ—¶å€™ä½ éƒ½ä¼šåº”ç­”ï¼Œè¿™ä¸ªä¸¤ä¸ªåå­—è™½ç„¶ä¸åŒï¼Œä½†æ˜¯éƒ½æŒ‡çš„æ˜¯ä½  æ·±æ‹·è´ï¼š æ‹·è´çš„æ—¶å€™å…ˆå¼€è¾Ÿå‡ºå’Œæºå¯¹è±¡å¤§å°ä¸€æ ·çš„ç©ºé—´ï¼Œç„¶åå°†æºå¯¹è±¡é‡Œçš„å†…å®¹æ‹·è´åˆ°ç›®æ ‡å¯¹è±¡ä¸­å»ï¼Œè¿™æ ·ä¸¤ä¸ªæŒ‡é’ˆå°±æŒ‡å‘äº†ä¸åŒçš„å†…å­˜ä½ç½®ã€‚å¹¶ä¸”é‡Œé¢çš„å†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·ä¸ä½†è¾¾åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„ç›®çš„ï¼Œè¿˜ä¸ä¼šå‡ºç°é—®é¢˜ï¼Œä¸¤ä¸ªæŒ‡é’ˆå…ˆåè°ƒç”¨ææ„å‡½æ•°ï¼Œåˆ†åˆ«é‡Šæ”¾è‡ªå·±æ‰€æŒ‡å‘çš„ä½ç½®ï¼Œå³ä¸ºæ¯æ¬¡å¢åŠ ä¸€ä¸ªæŒ‡é’ˆï¼Œä¾¿ç”³è¯·ä¸€å—æ–°çš„å†…å­˜ï¼Œå¹¶è®©è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘æ–°çš„å†…å­˜ï¼Œæ·±æ‹·è´æƒ…å†µä¸‹ï¼Œä¸ä¼šå‡ºç°é‡å¤é‡Šæ”¾åŒä¸€å—å†…å­˜çš„é”™è¯¯ æµ…æ‹·è´12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455/************************************************************************* &gt; File Name: 8.deep_copy.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ14æ—¥ æ˜ŸæœŸå›› 09æ—¶55åˆ†27ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;class Vector &#123;public : Vector(int n = 100) : n(n), data(new int[n]) &#123;&#125; // è¿”å›æ•°ç»„ç¬¬iä½çš„å¼•ç”¨ int &amp;at(int ind) &#123; return data[ind]; &#125; int &amp;operator[](int ind) &#123; return data[ind]; &#125; void output(int m = -1) &#123; if(m == -1) m = n; cout &lt;&lt; &quot;arr &quot; &lt;&lt; this &lt;&lt; &quot; : &quot;; for(int i = 0; i &lt; m; ++i) &#123; cout &lt;&lt; data[i] &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return ; &#125;private : int n; int *data;&#125;;int main() &#123; Vector arr; for(int i = 0; i &lt; 10; i++) &#123; // arr.at(i) = i; // æ—§ç‰ˆ arr[i] = i; // é‡è½½[]æ–¹æ‹¬å·è¿ç®—ç¬¦ &#125; arr.output(10); Vector arr2(arr); arr2.output(10); // ä¿®æ”¹arr2çš„å€¼ arr2[3] = 777; // è¾“å‡ºarr arr.output(10); arr2.output(10); return 0;&#125; æ­£å¸¸æ˜¯æ€ç»´:æˆ‘æƒ³æŠŠarræ‹·è´ç»™arr2, arr2æ˜¯åº”è¯¥ä¸å½±å“arr1çš„ é—®é¢˜å°±å¤„åœ¨é»˜è®¤çš„æ‹·è´è¡Œä¸º æ·±æ‹·è´ æ·±æ‹·è´ä½¿ç”¨ memcpy æ˜¯ä¸å¯¹çš„,å› ä¸ºæ•°æ®å­˜å‚¨åŒºä¹Ÿéœ€è¦æ·±æ‹·è´æ—¶å€™ memcpy(data, a.data, sizeof(int) * n); è´´ä¸ªæœ‰é”™è¯¯çš„ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147/************************************************************************* &gt; File Name: 8.deep_copy.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ14æ—¥ æ˜ŸæœŸå›› 09æ—¶55åˆ†27ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;string.h&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(ttw)class A &#123;public : int x, y;&#125;;ostream &amp;operator&lt;&lt;(ostream &amp;out, const A &amp;a) &#123; out &lt;&lt; &quot;(&quot; &lt;&lt; a.x &lt;&lt; &quot;,&quot; &lt;&lt; a.y &lt;&lt; &quot;)&quot;; return out;&#125;template&lt;typename T&gt;class Vector &#123;public : Vector(int n = 100) : n(n), data(new T[n]) &#123;&#125; Vector(const Vector &amp;a) : n(a.n) &#123; data = new T[n]; memcpy(data, a.data, sizeof(T) * n); /* for(int i = 0; i &lt; n; i++) &#123; data[i] = a.data[i]; &#125; */ return ; &#125; // è¿”å›æ•°ç»„ç¬¬iä½çš„å¼•ç”¨ T &amp;at(int ind) &#123; return data[ind]; &#125; T &amp;operator[](int ind) &#123; return data[ind]; &#125; void output(int m = -1) &#123; if(m == -1) m = n; cout &lt;&lt; &quot;arr &quot; &lt;&lt; this &lt;&lt; &quot; : &quot;; for(int i = 0; i &lt; m; i++) &#123; cout &lt;&lt; data[i] &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return ; &#125;private : int n; T *data;&#125;;ENDS(ttw)BEGINS(test1)int main() &#123; ttw::Vector&lt;int&gt; arr1; for(int i = 0; i &lt; 10; i++) &#123; // arr.at(i) = i; // æ—§ç‰ˆ arr1[i] = i; // é‡è½½[]æ–¹æ‹¬å·è¿ç®—ç¬¦ &#125; arr1.output(10); ttw::Vector&lt;int&gt; arr2(arr1); arr2.output(10); // ä¿®æ”¹arr2çš„å€¼ arr2[3] = 777; // è¾“å‡ºarr arr1.output(10); arr2.output(10); return 0;&#125;ENDS(test1)BEGINS(test2)using namespace ttw;int main() &#123; Vector&lt;A&gt; arr1; for(int i = 0; i &lt; 10; i++) &#123; arr1[i].x = i; arr1[i].y = 2 * i; &#125; arr1.output(10); Vector&lt;A&gt; arr2(arr1); arr2[3] = (A)&#123;4, 1000&#125;; arr1.output(10); arr2.output(10); return 0;&#125;ENDS(test2)BEGINS(test3)using namespace ttw;int main() &#123; Vector&lt;Vector&lt;int&gt;&gt; arr1; Vector&lt;Vector&lt;int&gt;&gt; arr2(arr1); arr2[2][2] = 100; for(int i = 0; i &lt; 3; i++) &#123; arr1[i].output(3); &#125; for(int i = 0; i &lt; 3; i++) &#123; arr2[i].output(3); &#125; return 0;&#125;ENDS(test3)int main() &#123; test1::main(); cout &lt;&lt; &quot; ------------------------------ &quot; &lt;&lt; endl; test2::main(); cout &lt;&lt; &quot; ------------------------------ &quot; &lt;&lt; endl; test3::main(); return 0;&#125; è´´ä¸€ä¸ªæ— é”™è¯¯çš„123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152/************************************************************************* &gt; File Name: 8.deep_copy.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ14æ—¥ æ˜ŸæœŸå›› 09æ—¶55åˆ†27ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;string.h&gt;using namespace std;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace xBEGINS(ttw)class A &#123;public : int x, y;&#125;;ostream &amp;operator&lt;&lt;(ostream &amp;out, const A &amp;a) &#123; out &lt;&lt; &quot;(&quot; &lt;&lt; a.x &lt;&lt; &quot;,&quot; &lt;&lt; a.y &lt;&lt; &quot;)&quot;; return out;&#125;template&lt;typename T&gt;class Vector &#123;public : Vector(int n = 100) : n(n), data((T *)calloc(sizeof(T), n)) &#123;&#125; Vector(const Vector &amp;a) : n(a.n) &#123; // data = new T[n]; -&gt; ä¼šè°ƒç”¨è‹¥å¹²æ¬¡æ„é€ å‡½æ•° // memcpy(data, a.data, sizeof(T) * n); // æœ‰é—®é¢˜ä¸èƒ½ç”¨memcpy data = (T *)malloc(sizeof(T) * n); for(int i = 0; i &lt; n; i++) &#123; // åŸåœ°æ„é€  new(åœ°å€) -&gt; æ„é€ å‡½æ•° // T ç±»å‹çš„æ‹·è´æ„é€  new (data + i) T(a.data[i]); &#125; return ; &#125; // è¿”å›æ•°ç»„ç¬¬iä½çš„å¼•ç”¨ T &amp;at(int ind) &#123; return data[ind]; &#125; T &amp;operator[](int ind) &#123; return data[ind]; &#125; void output(int m = -1) &#123; if(data == nullptr) return ; if(m == -1) m = n; cout &lt;&lt; &quot;arr &quot; &lt;&lt; this &lt;&lt; &quot; : &quot;; for(int i = 0; i &lt; m; i++) &#123; cout &lt;&lt; data[i] &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; return ; &#125;private : int n; T *data;&#125;;ENDS(ttw)BEGINS(test1)int main() &#123; ttw::Vector&lt;int&gt; arr1; for(int i = 0; i &lt; 10; i++) &#123; // arr.at(i) = i; // æ—§ç‰ˆ arr1[i] = i; // é‡è½½[]æ–¹æ‹¬å·è¿ç®—ç¬¦ &#125; arr1.output(10); ttw::Vector&lt;int&gt; arr2(arr1); arr2.output(10); // ä¿®æ”¹arr2çš„å€¼ arr2[3] = 777; // è¾“å‡ºarr arr1.output(10); arr2.output(10); return 0;&#125;ENDS(test1)BEGINS(test2)using namespace ttw;int main() &#123; Vector&lt;A&gt; arr1; for(int i = 0; i &lt; 10; i++) &#123; arr1[i].x = i; arr1[i].y = 2 * i; &#125; arr1.output(10); Vector&lt;A&gt; arr2(arr1); arr2[3] = (A)&#123;4, 1000&#125;; arr1.output(10); arr2.output(10); return 0;&#125;ENDS(test2)BEGINS(test3)using namespace ttw;int main() &#123; Vector&lt;Vector&lt;int&gt;&gt; arr1; Vector&lt;Vector&lt;int&gt;&gt; arr2(arr1); arr2[2][2] = 100; for(int i = 0; i &lt; 3; i++) &#123; arr1[i].output(3); &#125; for(int i = 0; i &lt; 3; i++) &#123; arr2[i].output(3); &#125; return 0;&#125;ENDS(test3)int main() &#123; test1::main(); cout &lt;&lt; &quot; ------------------------------ &quot; &lt;&lt; endl; test2::main(); cout &lt;&lt; &quot; ------------------------------ &quot; &lt;&lt; endl; test3::main(); return 0;&#125; è¿”å›å€¼ä¼˜åŒ–(RVO)å¯¹è±¡çš„åˆå§‹åŒ–ä»€ä¹ˆæ˜¯æˆ‘ä»¬è®¤ä¸ºå†…å­˜ä¸­å®Œæ•´çš„å¯¹è±¡ï¼Ÿ â€‹ é‚£å°±æ˜¯ç»å†äº†æ„é€ è¿‡ç¨‹çš„æ•°æ®å­˜å‚¨åŒº æ‹·è´æ„é€  è¿”å›å€¼ä¼˜åŒ– (RVO)123456789101112131415161718192021222324252627282930313233343536/************************************************************************* &gt; File Name: 9.rvo.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ14æ—¥ æ˜ŸæœŸå›› 17æ—¶30åˆ†39ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;class A &#123;public : A() &#123; cout &lt;&lt; this &lt;&lt; &quot; : default constructor&quot; &lt;&lt; endl; &#125; A(int x) &#123; cout &lt;&lt; this &lt;&lt; &quot; : param constructor&quot; &lt;&lt; endl; &#125; A(const A &amp;a) &#123; cout &lt;&lt; this &lt;&lt; &quot; : copy constructor&quot; &lt;&lt; endl; &#125;&#125;;A func() &#123; A temp(3); // æ­£å¸¸è°ƒç”¨ æœ‰å‚æ„é€  cout &lt;&lt; &quot;object temp : &quot; &lt;&lt; &amp;temp &lt;&lt; endl; return temp;&#125;int main() &#123; A a = func(); // æ­£å¸¸ä¼šè¢« è°ƒç”¨æ‹·è´æ„é€  cout &lt;&lt; &quot;object a : &quot; &lt;&lt; &amp;a &lt;&lt; endl; return 0;&#125; æ­£å¸¸æƒ…å†µä¸‹ä¼šè¢«è°ƒç”¨3æ¬¡æ„é€ å‡½æ•°ä½†æ˜¯è¾“å‡ºåªè°ƒç”¨äº†ä¸€æ¬¡ï¼Œè€Œä¸”ç”¨çš„è¿˜æ˜¯æœ‰å‚æ„é€  Step 1:å¼€è¾Ÿaå¯¹è±¡æ•°æ®åŒº Step 2âˆ¶è°ƒç”¨å‡½æ•°func Step 3:å¼€è¾Ÿå¯¹è±¡tempæ•°æ®åŒº Step 4âˆ¶è°ƒç”¨tempå¯¹è±¡çš„æ„é€ å‡½æ•° Step 5âˆ¶ä½¿ç”¨tempè°ƒç”¨açš„æ‹·è´æ„é€ å‡½æ•° Step 6âˆ¶é”€æ¯tempå¯¹è±¡ã€ Step 7âˆ¶é”€æ¯aå¯¹è±¡ å–æ¶ˆè¿”å›å€¼ä¼˜åŒ– 1g++ -fno-elide-constructors 9.rvo.cpp default&#x2F;delete1234567891011121314151617181920212223242526272829303132333435/************************************************************************* &gt; File Name: 10.default_delete.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ14æ—¥ æ˜ŸæœŸå›› 18æ—¶06åˆ†32ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;class A &#123;public : // éšæ€§çš„è§„åˆ™å˜æˆæ˜¾æ€§çš„è§„åˆ™ A() = default; /* A() = default; A()&#123;&#125; è¿™ä¸¤ä¸ªæ˜¯æ²¡æœ‰å·®åˆ«çš„ */ A(const A &amp;a) = delete; // åœ¨å½“å‰ç±»æŠŠè¿™ä¸ªæ–¹æ³•/æ„é€ å‡½æ•°åˆ é™¤ /* A(const A &amp;a) = default; A(const A &amp;a) &#123;&#125; // æ²¡æœ‰ä¾æ¬¡çš„æ‹·è´æˆå‘˜å±æ€§çš„è¡Œä¸º ä¸¤è€…å®Œå…¨ä¸ä¸€æ · */&#125;;int main() &#123; return 0;&#125; æºç æ–‡ä»¶*.cppç‚¹æˆ‘è·³è½¬:https://github.com/qzwl123/C-/tree/main/%E5%B0%81%E8%A3%85","categories":[{"name":"OOP","slug":"OOP","permalink":"https://tutouwang.vercel.app/categories/OOP/"}],"tags":[]},{"title":"Linux é«˜å¹¶å‘WebæœåŠ¡å™¨","slug":"Linux é«˜å¹¶å‘WebæœåŠ¡å™¨","date":"2022-07-05T13:07:56.000Z","updated":"2022-07-09T06:55:48.320Z","comments":true,"path":"2022/07/05/Linux é«˜å¹¶å‘WebæœåŠ¡å™¨/","link":"","permalink":"https://tutouwang.vercel.app/2022/07/05/Linux%20%E9%AB%98%E5%B9%B6%E5%8F%91Web%E6%9C%8D%E5%8A%A1%E5%99%A8/","excerpt":"","text":"1.é˜»å¡&#x2F;éé˜»å¡ã€åŒæ­¥&#x2F;å¼‚æ­¥ (ç½‘ç»œIO) å…¸å‹çš„ä¸€æ¬¡IOçš„ä¸¤ä¸ªé˜¶æ®µæ˜¯ä»€ä¹ˆï¼Ÿæ•°æ®å°±ç»ª å’Œ æ•°æ®è¯»å†™ æ•°æ®å°±ç»ªï¼šæ ¹æ®ç³»ç»ŸIOæ“ä½œçš„å°±ç»ªçŠ¶æ€ é˜»å¡ éé˜»å¡ æ•°æ®è¯»å†™ï¼šæ ¹æ®åº”ç”¨ç¨‹åºå’Œå†…æ ¸çš„äº¤äº’æ–¹å¼ åŒæ­¥ å¼‚æ­¥ å›¾è§£-åŒæ­¥ã€å¼‚æ­¥-é˜»å¡ã€éé˜»å¡ é™ˆç¡•ï¼šåœ¨å¤„ç† IO çš„æ—¶å€™ï¼Œé˜»å¡å’Œéé˜»å¡éƒ½æ˜¯åŒæ­¥ IOï¼Œåªæœ‰ä½¿ç”¨äº†ç‰¹æ®Šçš„ API æ‰æ˜¯å¼‚æ­¥ IOã€‚ ä¸€ä¸ªå…¸å‹çš„ç½‘ç»œIOæ¥å£è°ƒç”¨ï¼Œåˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯â€œæ•°æ®å°±ç»ªâ€ å’Œ â€œæ•°æ®è¯»å†™â€ï¼Œæ•°æ®å°±ç»ªé˜¶æ®µåˆ†ä¸º é˜»å¡å’Œéé˜»å¡ï¼Œè¡¨ç°å¾—ç»“æœå°±æ˜¯ï¼Œé˜»å¡å½“å‰çº¿ç¨‹æˆ–æ˜¯ç›´æ¥è¿”å›ã€‚ åŒæ­¥è¡¨ç¤ºAå‘Bè¯·æ±‚è°ƒç”¨ä¸€ä¸ªç½‘ç»œIOæ¥å£æ—¶ï¼ˆæˆ–è€…è°ƒç”¨æŸä¸ªä¸šåŠ¡é€»è¾‘APIæ¥å£æ—¶ï¼‰ï¼Œæ•°æ®çš„è¯»å†™éƒ½æ˜¯ ç”±è¯·æ±‚æ–¹Aè‡ªå·±æ¥å®Œæˆçš„ï¼ˆä¸ç®¡æ˜¯é˜»å¡è¿˜æ˜¯éé˜»å¡ï¼‰ï¼›å¼‚æ­¥è¡¨ç¤ºAå‘Bè¯·æ±‚è°ƒç”¨ä¸€ä¸ªç½‘ç»œIOæ¥å£æ—¶ ï¼ˆæˆ–è€…è°ƒç”¨æŸä¸ªä¸šåŠ¡é€»è¾‘APIæ¥å£æ—¶ï¼‰ï¼Œå‘Bä¼ å…¥è¯·æ±‚çš„äº‹ä»¶ä»¥åŠäº‹ä»¶å‘ç”Ÿæ—¶é€šçŸ¥çš„æ–¹å¼ï¼ŒAå°±å¯ä»¥ å¤„ç†å…¶å®ƒé€»è¾‘äº†ï¼Œå½“Bç›‘å¬åˆ°äº‹ä»¶å¤„ç†å®Œæˆåï¼Œä¼šç”¨äº‹å…ˆçº¦å®šå¥½çš„é€šçŸ¥æ–¹å¼ï¼Œé€šçŸ¥Aå¤„ç†ç»“æœã€‚ 2.Unix&#x2F;Linuxä¸Šçš„äº”ç§IOæ¨¡å‹a.é˜»å¡ blockingè°ƒç”¨è€…è°ƒç”¨äº†æŸä¸ªå‡½æ•°ï¼Œç­‰å¾…è¿™ä¸ªå‡½æ•°è¿”å›ï¼ŒæœŸé—´ä»€ä¹ˆä¹Ÿä¸åšï¼Œä¸åœçš„å»æ£€æŸ¥è¿™ä¸ªå‡½æ•°æœ‰æ²¡æœ‰è¿”å›ï¼Œå¿… é¡»ç­‰è¿™ä¸ªå‡½æ•°è¿”å›æ‰èƒ½è¿›è¡Œä¸‹ä¸€æ­¥åŠ¨ä½œã€‚ b.éé˜»å¡ non-blockingï¼ˆNIOï¼‰éé˜»å¡ç­‰å¾…ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å°±å»æ£€æµ‹IOäº‹ä»¶æ˜¯å¦å°±ç»ªã€‚æ²¡æœ‰å°±ç»ªå°±å¯ä»¥åšå…¶ä»–äº‹ã€‚éé˜»å¡I&#x2F;Oæ‰§è¡Œç³»ç»Ÿè°ƒ ç”¨æ€»æ˜¯ç«‹å³è¿”å›ï¼Œä¸ç®¡äº‹ä»¶æ˜¯å¦å·²ç»å‘ç”Ÿï¼Œè‹¥äº‹ä»¶æ²¡æœ‰å‘ç”Ÿï¼Œåˆ™è¿”å›-1ï¼Œæ­¤æ—¶å¯ä»¥æ ¹æ® errno åŒºåˆ†è¿™ä¸¤ ç§æƒ…å†µï¼Œå¯¹äºacceptï¼Œrecv å’Œ sendï¼Œäº‹ä»¶æœªå‘ç”Ÿæ—¶ï¼Œerrno é€šå¸¸è¢«è®¾ç½®æˆ EAGAIN(æ²¡æœ‰è·å–åˆ°æ•°æ®)ã€‚ c.IOå¤ç”¨ï¼ˆIO multiplexingï¼‰Linux ç”¨ select&#x2F;poll&#x2F;epoll å‡½æ•°å®ç° IO å¤ç”¨æ¨¡å‹ï¼Œè¿™äº›å‡½æ•°ä¹Ÿä¼šä½¿è¿›ç¨‹é˜»å¡ï¼Œä½†æ˜¯å’Œé˜»å¡IOæ‰€ä¸åŒçš„æ˜¯ è¿™äº›å‡½æ•°å¯ä»¥åŒæ—¶é˜»å¡å¤šä¸ªIOæ“ä½œã€‚è€Œä¸”å¯ä»¥åŒæ—¶å¯¹å¤šä¸ªè¯»æ“ä½œã€å†™æ“ä½œçš„IOå‡½æ•°è¿›è¡Œæ£€æµ‹ã€‚ç›´åˆ°æœ‰æ•° æ®å¯è¯»æˆ–å¯å†™æ—¶ï¼Œæ‰çœŸæ­£è°ƒç”¨IOæ“ä½œå‡½æ•°ã€‚ d.ä¿¡å·é©±åŠ¨ï¼ˆsignal-drivenï¼‰Linux ç”¨å¥—æ¥å£è¿›è¡Œä¿¡å·é©±åŠ¨ IOï¼Œå®‰è£…ä¸€ä¸ªä¿¡å·å¤„ç†å‡½æ•°ï¼Œè¿›ç¨‹ç»§ç»­è¿è¡Œå¹¶ä¸é˜»å¡ï¼Œå½“IOäº‹ä»¶å°±ç»ªï¼Œè¿› ç¨‹æ”¶åˆ°SIGIO ä¿¡å·ï¼Œç„¶åå¤„ç† IO äº‹ä»¶ã€‚ å†…æ ¸åœ¨ç¬¬ä¸€ä¸ªé˜¶æ®µæ˜¯å¼‚æ­¥ï¼Œåœ¨ç¬¬äºŒä¸ªé˜¶æ®µæ˜¯åŒæ­¥ï¼›ä¸éé˜»å¡IOçš„åŒºåˆ«åœ¨äºå®ƒæä¾›äº†æ¶ˆæ¯é€šçŸ¥æœºåˆ¶ï¼Œä¸éœ€ è¦ç”¨æˆ·è¿›ç¨‹ä¸æ–­çš„è½®è¯¢æ£€æŸ¥ï¼Œå‡å°‘äº†ç³»ç»ŸAPIçš„è°ƒç”¨æ¬¡æ•°ï¼Œæé«˜äº†æ•ˆç‡ã€‚ e.å¼‚æ­¥ï¼ˆasynchronousï¼‰Linuxä¸­ï¼Œå¯ä»¥è°ƒç”¨ aio_read å‡½æ•°å‘Šè¯‰å†…æ ¸æè¿°å­—ç¼“å†²åŒºæŒ‡é’ˆå’Œç¼“å†²åŒºçš„å¤§å°ã€æ–‡ä»¶åç§»åŠé€šçŸ¥çš„æ–¹ å¼ï¼Œç„¶åç«‹å³è¿”å›ï¼Œå½“å†…æ ¸å°†æ•°æ®æ‹·è´åˆ°ç¼“å†²åŒºåï¼Œå†é€šçŸ¥åº”ç”¨ç¨‹åºã€‚ 12345678910111213141516171819202122/* Asynchronous I/O control block. */struct aiocb &#123; int aio_fildes; /* File desriptor. */ int aio_lio_opcode; /* Operation to be performed. */ int aio_reqprio; /* Request priority offset. */ volatile void *aio_buf; /* Location of buffer. */ size_t aio_nbytes; /* Length of transfer. */ struct sigevent aio_sigevent; /* Signal number and value. */ /* Internal members. */ struct aiocb *__next_prio; int __abs_prio; int __policy; int __error_code; __ssize_t __return_value; #ifndef __USE_FILE_OFFSET64 __off_t aio_offset; /* File offset. */ char __pad[sizeof (__off64_t) - sizeof (__off_t)]; #else __off64_t aio_offset; /* File offset. */ #endif char __glibc_reserved[32];&#125;; 3.Web Serverï¼ˆç½‘é¡µæœåŠ¡å™¨ï¼‰ä¸€ä¸ª Web Server å°±æ˜¯ä¸€ä¸ªæœåŠ¡å™¨è½¯ä»¶ï¼ˆç¨‹åºï¼‰ï¼Œæˆ–è€…æ˜¯è¿è¡Œè¿™ä¸ªæœåŠ¡å™¨è½¯ä»¶çš„ç¡¬ä»¶ï¼ˆè®¡ç®—æœºï¼‰ã€‚å…¶ä¸» è¦åŠŸèƒ½æ˜¯é€šè¿‡ HTTP åè®®ä¸å®¢æˆ·ç«¯ï¼ˆé€šå¸¸æ˜¯æµè§ˆå™¨ï¼ˆBrowserï¼‰ï¼‰è¿›è¡Œé€šä¿¡ï¼Œæ¥æ¥æ”¶ï¼Œå­˜å‚¨ï¼Œå¤„ç†æ¥è‡ª å®¢æˆ·ç«¯çš„ HTTP è¯·æ±‚ï¼Œå¹¶å¯¹å…¶è¯·æ±‚åšå‡º HTTP å“åº”ï¼Œè¿”å›ç»™å®¢æˆ·ç«¯å…¶è¯·æ±‚çš„å†…å®¹ï¼ˆæ–‡ä»¶ã€ç½‘é¡µç­‰ï¼‰æˆ–è¿” å›ä¸€ä¸ª Error ä¿¡æ¯ã€‚ 4.HTTPåè®®(åº”ç”¨å±‚çš„åè®®)ç®€ä»‹è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHypertext Transfer Protocolï¼ŒHTTPï¼‰æ˜¯ä¸€ä¸ªç®€å•çš„è¯·æ±‚ - å“åº”åè®®ï¼Œå®ƒé€šå¸¸è¿è¡Œåœ¨ TCP ä¹‹ä¸Šã€‚å®ƒæŒ‡å®šäº†å®¢æˆ·ç«¯å¯èƒ½å‘é€ç»™æœåŠ¡å™¨ä»€ä¹ˆæ ·çš„æ¶ˆæ¯ä»¥åŠå¾—åˆ°ä»€ä¹ˆæ ·çš„å“åº”ã€‚è¯·æ±‚å’Œå“åº”æ¶ˆæ¯çš„ å¤´ä»¥ ASCII å½¢å¼ç»™å‡ºï¼›è€Œæ¶ˆæ¯å†…å®¹åˆ™å…·æœ‰ä¸€ä¸ªç±»ä¼¼ MIME çš„æ ¼å¼ã€‚HTTPæ˜¯ä¸‡ç»´ç½‘çš„æ•°æ®é€šä¿¡çš„åŸºç¡€ã€‚ HTTPçš„å‘å±•æ˜¯ç”±è’‚å§†Â·ä¼¯çº³æ–¯-æäº1989å¹´åœ¨æ¬§æ´²æ ¸å­ç ”ç©¶ç»„ç»‡ï¼ˆCERNï¼‰æ‰€å‘èµ·ã€‚HTTPçš„æ ‡å‡†åˆ¶å®šç”±ä¸‡ ç»´ç½‘åä¼šï¼ˆWorld Wide Web Consortiumï¼ŒW3Cï¼‰å’Œäº’è”ç½‘å·¥ç¨‹ä»»åŠ¡ç»„ï¼ˆInternet Engineering Task Forceï¼ŒIETFï¼‰è¿›è¡Œåè°ƒï¼Œæœ€ç»ˆå‘å¸ƒäº†ä¸€ç³»åˆ—çš„RFCï¼Œå…¶ä¸­æœ€è‘—åçš„æ˜¯1999å¹´6æœˆå…¬å¸ƒçš„ RFC 2616ï¼Œå®š ä¹‰äº†HTTPåè®®ä¸­ç°ä»Šå¹¿æ³›ä½¿ç”¨çš„ä¸€ä¸ªç‰ˆæœ¬â€”â€”HTTP 1.1ã€‚ æ¦‚è¿°HTTP æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ç»ˆç«¯ï¼ˆç”¨æˆ·ï¼‰å’ŒæœåŠ¡å™¨ç«¯ï¼ˆç½‘ç«™ï¼‰è¯·æ±‚å’Œåº”ç­”çš„æ ‡å‡†ï¼ˆTCPï¼‰ã€‚é€šè¿‡ä½¿ç”¨ç½‘é¡µæµè§ˆ å™¨ã€ç½‘ç»œçˆ¬è™«æˆ–è€…å…¶å®ƒçš„å·¥å…·ï¼Œå®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªHTTPè¯·æ±‚åˆ°æœåŠ¡å™¨ä¸ŠæŒ‡å®šç«¯å£ï¼ˆé»˜è®¤ç«¯å£ä¸º80ï¼‰ã€‚æˆ‘ä»¬ ç§°è¿™ä¸ªå®¢æˆ·ç«¯ä¸ºç”¨æˆ·ä»£ç†ç¨‹åºï¼ˆuser agentï¼‰ã€‚åº”ç­”çš„æœåŠ¡å™¨ä¸Šå­˜å‚¨ç€ä¸€äº›èµ„æºï¼Œæ¯”å¦‚ HTML æ–‡ä»¶å’Œå›¾ åƒã€‚æˆ‘ä»¬ç§°è¿™ä¸ªåº”ç­”æœåŠ¡å™¨ä¸ºæºæœåŠ¡å™¨ï¼ˆorigin serverï¼‰ã€‚åœ¨ç”¨æˆ·ä»£ç†å’ŒæºæœåŠ¡å™¨ä¸­é—´å¯èƒ½å­˜åœ¨å¤šä¸ªâ€œä¸­ é—´å±‚â€ï¼Œæ¯”å¦‚ä»£ç†æœåŠ¡å™¨ã€ç½‘å…³æˆ–è€…éš§é“ï¼ˆtunnelï¼‰ã€‚ å°½ç®¡ TCP&#x2F;IP åè®®æ˜¯äº’è”ç½‘ä¸Šæœ€æµè¡Œçš„åº”ç”¨ï¼ŒHTTP åè®®ä¸­ï¼Œå¹¶æ²¡æœ‰è§„å®šå¿…é¡»ä½¿ç”¨å®ƒæˆ–å®ƒæ”¯æŒçš„å±‚ã€‚äº‹å® ä¸Šï¼ŒHTTPå¯ä»¥åœ¨ä»»ä½•äº’è”ç½‘åè®®ä¸Šï¼Œæˆ–å…¶ä»–ç½‘ç»œä¸Šå®ç°ã€‚HTTP å‡å®šå…¶ä¸‹å±‚åè®®æä¾›å¯é çš„ä¼ è¾“ã€‚å›  æ­¤ï¼Œä»»ä½•èƒ½å¤Ÿæä¾›è¿™ç§ä¿è¯çš„åè®®éƒ½å¯ä»¥è¢«å…¶ä½¿ç”¨ã€‚å› æ­¤ä¹Ÿå°±æ˜¯å…¶åœ¨ TCP&#x2F;IP åè®®æ—ä½¿ç”¨ TCP ä½œä¸ºå…¶ä¼  è¾“å±‚ã€‚ é€šå¸¸ï¼Œç”±HTTPå®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œåˆ›å»ºä¸€ä¸ªåˆ°æœåŠ¡å™¨æŒ‡å®šç«¯å£ï¼ˆé»˜è®¤æ˜¯80ç«¯å£ï¼‰çš„ TCP è¿æ¥ã€‚HTTP æœåŠ¡å™¨åˆ™åœ¨é‚£ä¸ªç«¯å£ç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚ä¸€æ—¦æ”¶åˆ°è¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¼šå‘å®¢æˆ·ç«¯è¿”å›ä¸€ä¸ªçŠ¶æ€ï¼Œæ¯” å¦‚â€HTTP&#x2F;1.1 200 OKâ€ï¼Œä»¥åŠè¿”å›çš„å†…å®¹ï¼Œå¦‚è¯·æ±‚çš„æ–‡ä»¶ã€é”™è¯¯æ¶ˆæ¯ã€æˆ–è€…å…¶å®ƒä¿¡æ¯ã€‚ å·¥ä½œåŸç†HTTP åè®®å®šä¹‰ Web å®¢æˆ·ç«¯å¦‚ä½•ä» Web æœåŠ¡å™¨è¯·æ±‚ Web é¡µé¢ï¼Œä»¥åŠæœåŠ¡å™¨å¦‚ä½•æŠŠ Web é¡µé¢ä¼ é€ç»™å®¢ æˆ·ç«¯ã€‚HTTP åè®®é‡‡ç”¨äº†è¯·æ±‚&#x2F;å“åº”æ¨¡å‹ã€‚å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªè¯·æ±‚æŠ¥æ–‡ï¼Œè¯·æ±‚æŠ¥æ–‡åŒ…å«è¯·æ±‚çš„æ–¹ æ³•ã€URLã€åè®®ç‰ˆæœ¬ã€è¯·æ±‚å¤´éƒ¨å’Œè¯·æ±‚æ•°æ®ã€‚æœåŠ¡å™¨ä»¥ä¸€ä¸ªçŠ¶æ€è¡Œä½œä¸ºå“åº”ï¼Œå“åº”çš„å†…å®¹åŒ…æ‹¬åè®®çš„ç‰ˆ æœ¬ã€æˆåŠŸæˆ–è€…é”™è¯¯ä»£ç ã€æœåŠ¡å™¨ä¿¡æ¯ã€å“åº”å¤´éƒ¨å’Œå“åº”æ•°æ®ä»¥ä¸‹æ˜¯ HTTP è¯·æ±‚&#x2F;å“åº”çš„æ­¥éª¤ï¼š å®¢æˆ·ç«¯è¿æ¥åˆ° Web æœåŠ¡å™¨ä¸€ä¸ªHTTPå®¢æˆ·ç«¯ï¼Œé€šå¸¸æ˜¯æµè§ˆå™¨ï¼Œä¸ Web æœåŠ¡å™¨çš„ HTTP ç«¯å£ï¼ˆé»˜è®¤ä¸º 80 ï¼‰å»ºç«‹ä¸€ä¸ª TCP å¥—æ¥å­—è¿æ¥ã€‚ä¾‹å¦‚ï¼Œhttp://www.baidu.comã€‚ï¼ˆURLï¼‰ å‘é€ HTTP è¯·æ±‚ â€‹ é€šè¿‡ TCP å¥—æ¥å­—ï¼Œå®¢æˆ·ç«¯å‘ Web æœåŠ¡å™¨å‘é€ä¸€ä¸ªæ–‡æœ¬çš„è¯·æ±‚æŠ¥æ–‡ï¼Œä¸€ä¸ªè¯·æ±‚æŠ¥æ–‡ç”±è¯·æ±‚è¡Œã€è¯·æ±‚å¤´éƒ¨ã€ç©ºè¡Œå’Œè¯·æ±‚æ•°æ® 4 éƒ¨åˆ†ç»„æˆã€‚ æœåŠ¡å™¨æ¥å—è¯·æ±‚å¹¶è¿”å› HTTP å“åº” â€‹ Web æœåŠ¡å™¨è§£æè¯·æ±‚ï¼Œå®šä½è¯·æ±‚èµ„æºã€‚æœåŠ¡å™¨å°†èµ„æºå¤æœ¬å†™åˆ° TCP å¥—æ¥å­—ï¼Œç”±å®¢æˆ·ç«¯è¯»å–ã€‚ä¸€ä¸ªå“åº”ç”±çŠ¶æ€è¡Œã€å“åº”å¤´éƒ¨ã€ç©ºè¡Œå’Œå“åº”æ•°æ® 4 éƒ¨åˆ†ç»„æˆã€‚ é‡Šæ”¾è¿æ¥ TCP è¿æ¥ â€‹ è‹¥ connection æ¨¡å¼ä¸º closeï¼Œåˆ™æœåŠ¡å™¨ä¸»åŠ¨å…³é—­ TCPè¿æ¥ï¼Œå®¢æˆ·ç«¯è¢«åŠ¨å…³é—­è¿æ¥ï¼Œé‡Šæ”¾ TCP è¿æ¥ï¼›è‹¥connection æ¨¡å¼ä¸º keepaliveï¼Œåˆ™è¯¥è¿æ¥ä¼šä¿æŒä¸€æ®µæ—¶é—´ï¼Œåœ¨è¯¥æ—¶é—´å†…å¯ä»¥ç»§ç»­æ¥æ”¶è¯·æ±‚; å®¢æˆ·ç«¯æµè§ˆå™¨è§£æ HTML å†…å®¹ â€‹ å®¢æˆ·ç«¯æµè§ˆå™¨é¦–å…ˆè§£æçŠ¶æ€è¡Œï¼ŒæŸ¥çœ‹è¡¨æ˜è¯·æ±‚æ˜¯å¦æˆåŠŸçš„çŠ¶æ€ä»£ç ã€‚ç„¶åè§£ææ¯ä¸€ä¸ªå“åº”å¤´ï¼Œå“åº” å¤´å‘ŠçŸ¥ä»¥ä¸‹ä¸ºè‹¥å¹²å­—èŠ‚çš„ HTML æ–‡æ¡£å’Œæ–‡æ¡£çš„å­—ç¬¦é›†ã€‚å®¢æˆ·ç«¯æµè§ˆå™¨è¯»å–å“åº”æ•°æ® HTMLï¼Œæ ¹æ®HTML çš„è¯­æ³•å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–ï¼Œå¹¶åœ¨æµè§ˆå™¨çª—å£ä¸­æ˜¾ç¤ºã€‚ ä¾‹å¦‚ï¼šåœ¨æµè§ˆå™¨åœ°å€æ é”®å…¥URLï¼ŒæŒ‰ä¸‹å›è½¦ä¹‹åä¼šç»å†ä»¥ä¸‹æµç¨‹ï¼š æµè§ˆå™¨å‘ DNS æœåŠ¡å™¨è¯·æ±‚è§£æè¯¥ URL ä¸­çš„åŸŸåæ‰€å¯¹åº”çš„ IP åœ°å€; è§£æå‡º IP åœ°å€åï¼Œæ ¹æ®è¯¥ IP åœ°å€å’Œé»˜è®¤ç«¯å£ 80ï¼Œå’ŒæœåŠ¡å™¨å»ºç«‹ TCP è¿æ¥; æµè§ˆå™¨å‘å‡ºè¯»å–æ–‡ä»¶ï¼ˆ URL ä¸­åŸŸååé¢éƒ¨åˆ†å¯¹åº”çš„æ–‡ä»¶ï¼‰çš„ HTTP è¯·æ±‚ï¼Œè¯¥è¯·æ±‚æŠ¥æ–‡ä½œä¸º TCP ä¸‰æ¬¡æ¡æ‰‹çš„ç¬¬ä¸‰ä¸ªæŠ¥æ–‡çš„æ•°æ®å‘é€ç»™æœåŠ¡å™¨; æœåŠ¡å™¨å¯¹æµè§ˆå™¨è¯·æ±‚ä½œå‡ºå“åº”ï¼Œå¹¶æŠŠå¯¹åº”çš„ HTML æ–‡æœ¬å‘é€ç»™æµè§ˆå™¨; é‡Šæ”¾ TCP è¿æ¥; æµè§ˆå™¨å°†è¯¥ HTML æ–‡æœ¬å¹¶æ˜¾ç¤ºå†…å®¹ã€‚ HTTP åè®®æ˜¯åŸºäº TCP&#x2F;IP åè®®ä¹‹ä¸Šçš„åº”ç”¨å±‚åè®®ï¼ŒåŸºäº è¯·æ±‚-å“åº” çš„æ¨¡å¼ã€‚HTTP åè®®è§„å®šï¼Œè¯·æ±‚ä»å®¢æˆ·ç«¯å‘å‡ºï¼Œæœ€åæœåŠ¡å™¨ç«¯å“åº”è¯¥è¯·æ±‚å¹¶è¿”å›ã€‚æ¢å¥è¯è¯´ï¼Œè‚¯å®šæ˜¯å…ˆä»å®¢æˆ·ç«¯å¼€å§‹å»ºç«‹é€šä¿¡çš„ï¼ŒæœåŠ¡å™¨ç«¯ åœ¨æ²¡æœ‰æ¥æ”¶åˆ°è¯·æ±‚ä¹‹å‰ä¸ä¼šå‘é€å“åº”ã€‚ HTTP è¯·æ±‚æŠ¥æ–‡æ ¼å¼ GET &#x2F; HTTP&#x2F;1.1 &#x2F;&#x2F; æœ¬æœº è¯·æ±‚çš„åœ°å€ Host: www.baidu.com &#x2F;&#x2F; å‘Šè¯‰æœåŠ¡å™¨ å‘Šè¯‰æœåŠ¡å™¨æˆ‘çš„ä¸»æœºæ˜¯ä»€ä¹ˆ ç‰ˆæœ¬å· User-Agent: Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64; rv:86.0) Gecko&#x2F;20100101 Firefox&#x2F;86.0 Accept: text&#x2F;html,application&#x2F;xhtml+xml,application&#x2F;xml;q&#x3D;0.9,image&#x2F;webp,&#x2F;;q&#x3D;0.8 &#x2F;&#x2F; å‘Šè¯‰æœåŠ¡å™¨ æˆ‘èƒ½è§£æä»€ä¹ˆæ ·çš„æ•°æ® Accept-Language: zh-CN,zh;q&#x3D;0.8,zh-TW;q&#x3D;0.7,zh-HK;q&#x3D;0.5,en-US;q&#x3D;0.3,en;q&#x3D;0.2 &#x2F;&#x2F; å®¢æˆ·ç«¯æ”¯æŒçš„å‹ç¼©æ–¹å¼ Accept-Encoding: gzip, deflate, br &#x2F;&#x2F; å‘Šè¯‰æœåŠ¡å™¨ä¿æŒè¿æ¥ä¸è¦æ–­å¼€ Connection: keep-alive Cookie: BAIDUID&#x3D;6729CB682DADC2CF738F533E35162D98:FG&#x3D;1; BIDUPSID&#x3D;6729CB682DADC2CFE015A8099199557E; PSTM&#x3D;1614320692; BD_UPN&#x3D;13314752; BDORZ&#x3D;FFFB88E999055A3F8A630C64834BD6D0;yjs_duid&#x3D;1_d05d52b14af4a 339210722080a668ec21614320694782; BD_HOME&#x3D;1; H_PS_PSSID&#x3D;33514_33257_33273_31660_33570_26350; BA_HECTOR&#x3D;8h2001alag0lag85nk1g3hcm60q Upgrade-Insecure- Requests: 1 Cache-Control: max-age&#x3D;0 TTPå“åº”æŠ¥æ–‡æ ¼å¼ HTTP&#x2F;1.1 200 OK Bdpagetype: 1 Bdqid: 0xf3c9743300024ee4 Cache-Control: private Connection: keep-alive Content-Encoding: gzip Content-Type: text&#x2F;html;charset&#x3D;utf-8 Date: Fri, 26 Feb 2021 08:44:35 GMT Expires: Fri, 26 Feb 2021 08:44:35 GMT Server: BWS&#x2F;1.1 Set-Cookie: BDSVRTM&#x3D;13; path&#x3D;&#x2F; Set-Cookie: BD_HOME&#x3D;1; path&#x3D;&#x2F; Set-Cookie: H_PS_PSSID&#x3D;33514_33257_33273_31660_33570_26350; path&#x3D;&#x2F;; domain&#x3D;.baidu.com Strict-Transport-Security: max-age&#x3D;172800 Traceid: 1614329075128412289017566699583927635684 X-Ua-Compatible: IE&#x3D;Edge,chrome&#x3D;1 Transfer-Encoding: chunked HTTPè¯·æ±‚æ–¹æ³•HTTP&#x2F;1.1 åè®®ä¸­å…±å®šä¹‰äº†å…«ç§æ–¹æ³•ï¼ˆä¹Ÿå«â€œåŠ¨ä½œâ€ï¼‰æ¥ä»¥ä¸åŒæ–¹å¼æ“ä½œæŒ‡å®šçš„èµ„æºï¼š GETï¼šå‘æŒ‡å®šçš„èµ„æºå‘å‡ºâ€œæ˜¾ç¤ºâ€è¯·æ±‚ã€‚ä½¿ç”¨ GET æ–¹æ³•åº”è¯¥åªç”¨åœ¨è¯»å–æ•°æ®ï¼Œè€Œä¸åº”å½“è¢«ç”¨äºäº§ç”Ÿâ€œå‰¯ä½œç”¨â€çš„æ“ä½œä¸­ï¼Œä¾‹å¦‚åœ¨ Web Application ä¸­ã€‚å…¶ä¸­ä¸€ä¸ªåŸå› æ˜¯ GET å¯èƒ½ä¼šè¢«ç½‘ç»œèœ˜è››ç­‰éšæ„è®¿ é—®ã€‚ HEADï¼šä¸ GET æ–¹æ³•ä¸€æ ·ï¼Œéƒ½æ˜¯å‘æœåŠ¡å™¨å‘å‡ºæŒ‡å®šèµ„æºçš„è¯·æ±‚ã€‚åªä¸è¿‡æœåŠ¡å™¨å°†ä¸ä¼ å›èµ„æºçš„æœ¬æ–‡éƒ¨åˆ†ã€‚å®ƒçš„å¥½å¤„åœ¨äºï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥åœ¨ä¸å¿…ä¼ è¾“å…¨éƒ¨å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è·å–å…¶ä¸­â€œå…³äºè¯¥ èµ„æºçš„ä¿¡æ¯â€ï¼ˆå…ƒä¿¡æ¯æˆ–ç§°å…ƒæ•°æ®ï¼‰ã€‚ POSTï¼šå‘æŒ‡å®šèµ„æºæäº¤æ•°æ®ï¼Œè¯·æ±‚æœåŠ¡å™¨è¿›è¡Œå¤„ç†ï¼ˆä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚æœ¬æ–‡ä¸­ã€‚è¿™ä¸ªè¯·æ±‚å¯èƒ½ä¼šåˆ›å»ºæ–°çš„èµ„æºæˆ–ä¿®æ”¹ç°æœ‰èµ„æºï¼Œæˆ–äºŒè€…çš†æœ‰ã€‚ PUTï¼šå‘æŒ‡å®šèµ„æºä½ç½®ä¸Šä¼ å…¶æœ€æ–°å†…å®¹ã€‚ DELETEï¼šè¯·æ±‚æœåŠ¡å™¨åˆ é™¤ Request-URI æ‰€æ ‡è¯†çš„èµ„æºã€‚ TRACEï¼šå›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­ã€‚ OPTIONSï¼šè¿™ä¸ªæ–¹æ³•å¯ä½¿æœåŠ¡å™¨ä¼ å›è¯¥èµ„æºæ‰€æ”¯æŒçš„æ‰€æœ‰ HTTP è¯·æ±‚æ–¹æ³•ã€‚ç”¨â€™*â€™æ¥ä»£æ›¿èµ„æºåç§°ï¼Œ å‘ Web æœåŠ¡å™¨å‘é€ OPTIONS è¯·æ±‚ï¼Œå¯ä»¥æµ‹è¯•æœåŠ¡å™¨åŠŸèƒ½æ˜¯å¦æ­£å¸¸è¿ä½œã€‚ CONNECTï¼šHTTP&#x2F;1.1 åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ã€‚é€šå¸¸ç”¨äºSSLåŠ å¯†æœåŠ¡å™¨çš„é“¾æ¥ï¼ˆç»ç”±éåŠ å¯†çš„ HTTP ä»£ç†æœåŠ¡å™¨ï¼‰ã€‚ HTTPçŠ¶æ€ç æ‰€æœ‰HTTPå“åº”çš„ç¬¬ä¸€è¡Œéƒ½æ˜¯çŠ¶æ€è¡Œï¼Œä¾æ¬¡æ˜¯å½“å‰HTTPç‰ˆæœ¬å·ï¼Œ3ä½æ•°å­—ç»„æˆçš„çŠ¶æ€ä»£ç ï¼Œä»¥åŠæè¿°çŠ¶æ€ çš„çŸ­è¯­ï¼Œå½¼æ­¤ç”±ç©ºæ ¼åˆ†éš”ã€‚ çŠ¶æ€ä»£ç çš„ç¬¬ä¸€ä¸ªæ•°å­—ä»£è¡¨å½“å‰å“åº”çš„ç±»å‹ï¼š 1xxæ¶ˆæ¯â€”â€”è¯·æ±‚å·²è¢«æœåŠ¡å™¨æ¥æ”¶ï¼Œç»§ç»­å¤„ç† 2xxæˆåŠŸâ€”â€”è¯·æ±‚å·²æˆåŠŸè¢«æœåŠ¡å™¨æ¥æ”¶ã€ç†è§£ã€å¹¶æ¥å— 3xxé‡å®šå‘â€”â€”éœ€è¦åç»­æ“ä½œæ‰èƒ½å®Œæˆè¿™ä¸€è¯·æ±‚ 4xxè¯·æ±‚é”™è¯¯â€”â€”è¯·æ±‚å«æœ‰è¯æ³•é”™è¯¯æˆ–è€…æ— æ³•è¢«æ‰§è¡Œ 5xxæœåŠ¡å™¨é”™è¯¯â€”â€”æœåŠ¡å™¨åœ¨å¤„ç†æŸä¸ªæ­£ç¡®è¯·æ±‚æ—¶å‘ç”Ÿé”™è¯¯ è™½ç„¶ RFC 2616 ä¸­å·²ç»æ¨èäº†æè¿°çŠ¶æ€çš„çŸ­è¯­ï¼Œä¾‹å¦‚â€200 OKâ€ï¼Œâ€404 Not Foundâ€ï¼Œä½†æ˜¯WEBå¼€å‘è€…ä» ç„¶èƒ½å¤Ÿè‡ªè¡Œå†³å®šé‡‡ç”¨ä½•ç§çŸ­è¯­ï¼Œç”¨ä»¥æ˜¾ç¤ºæœ¬åœ°åŒ–çš„çŠ¶æ€æè¿°æˆ–è€…è‡ªå®šä¹‰ä¿¡æ¯ã€‚ æ›´å¤šçŠ¶æ€ç ï¼šhttps://baike.baidu.com/item/HTTP%E7%8A%B6%E6%80%81%E7%A0%81/5053660?fr=aladdin 5.æœåŠ¡å™¨ç¼–ç¨‹åŸºæœ¬è™½ç„¶æœåŠ¡å™¨ç¨‹åºç§ç±»ç¹å¤šï¼Œä½†å…¶åŸºæœ¬æ¡†æ¶éƒ½ä¸€æ ·ï¼Œä¸åŒä¹‹å¤„åœ¨äºé€»è¾‘å¤„ç†ã€‚ æ¨¡å— åŠŸèƒ½ I&#x2F;O å¤„ç†å•å…ƒ å¤„ç†å®¢æˆ·è¿æ¥ï¼Œè¯»å†™ç½‘ç»œæ•°æ® é€»è¾‘å•å…ƒ ä¸šåŠ¡è¿›ç¨‹æˆ–çº¿ç¨‹ ç½‘ç»œå­˜å‚¨å•å…ƒ æ•°æ®åº“ã€æ–‡ä»¶æˆ–ç¼“å­˜ è¯·æ±‚é˜Ÿåˆ— å„å•å…ƒä¹‹é—´çš„é€šä¿¡æ–¹å¼ I&#x2F;O å¤„ç†å•å…ƒæ˜¯æœåŠ¡å™¨ç®¡ç†å®¢æˆ·è¿æ¥çš„æ¨¡å—ã€‚å®ƒé€šå¸¸è¦å®Œæˆä»¥ä¸‹å·¥ä½œï¼šç­‰å¾…å¹¶æ¥å—æ–°çš„å®¢æˆ·è¿æ¥ï¼Œæ¥æ”¶ å®¢æˆ·æ•°æ®ï¼Œå°†æœåŠ¡å™¨å“åº”æ•°æ®è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ä½†æ˜¯æ•°æ®çš„æ”¶å‘ä¸ä¸€å®šåœ¨ I&#x2F;O å¤„ç†å•å…ƒä¸­æ‰§è¡Œï¼Œä¹Ÿå¯èƒ½åœ¨ é€»è¾‘å•å…ƒä¸­æ‰§è¡Œï¼Œå…·ä½“åœ¨ä½•å¤„æ‰§è¡Œå–å†³äºäº‹ä»¶å¤„ç†æ¨¡å¼ã€‚ ä¸€ä¸ªé€»è¾‘å•å…ƒé€šå¸¸æ˜¯ä¸€ä¸ªè¿›ç¨‹æˆ–çº¿ç¨‹ã€‚å®ƒåˆ†æå¹¶å¤„ç†å®¢æˆ·æ•°æ®ï¼Œç„¶åå°†ç»“æœä¼ é€’ç»™ I&#x2F;O å¤„ç†å•å…ƒæˆ–è€…ç›´ æ¥å‘é€ç»™å®¢æˆ·ç«¯ï¼ˆå…·ä½“ä½¿ç”¨å“ªç§æ–¹å¼å–å†³äºäº‹ä»¶å¤„ç†æ¨¡å¼ï¼‰ã€‚æœåŠ¡å™¨é€šå¸¸æ‹¥æœ‰å¤šä¸ªé€»è¾‘å•å…ƒï¼Œä»¥å®ç°å¯¹ å¤šä¸ªå®¢æˆ·ä»»åŠ¡çš„å¹¶å‘å¤„ç†ã€‚ ç½‘ç»œå­˜å‚¨å•å…ƒå¯ä»¥æ˜¯æ•°æ®åº“ã€ç¼“å­˜å’Œæ–‡ä»¶ï¼Œä½†ä¸æ˜¯å¿…é¡»çš„ã€‚ è¯·æ±‚é˜Ÿåˆ—æ˜¯å„å•å…ƒä¹‹é—´çš„é€šä¿¡æ–¹å¼çš„æŠ½è±¡ã€‚I&#x2F;O å¤„ç†å•å…ƒæ¥æ”¶åˆ°å®¢æˆ·è¯·æ±‚æ—¶ï¼Œéœ€è¦ä»¥æŸç§æ–¹å¼é€šçŸ¥ä¸€ä¸ª é€»è¾‘å•å…ƒæ¥å¤„ç†è¯¥è¯·æ±‚ã€‚åŒæ ·ï¼Œå¤šä¸ªé€»è¾‘å•å…ƒåŒæ—¶è®¿é—®ä¸€ä¸ªå­˜å‚¨å•å…ƒæ—¶ï¼Œä¹Ÿéœ€è¦é‡‡ç”¨æŸç§æœºåˆ¶æ¥åè°ƒå¤„ ç†ç«æ€æ¡ä»¶ã€‚è¯·æ±‚é˜Ÿåˆ—é€šå¸¸è¢«å®ç°ä¸ºæ± çš„ä¸€éƒ¨åˆ†ã€‚ 6.ä¸¤ç§é«˜æ•ˆçš„äº‹ä»¶å¤„ç†æ¨¡å¼æœåŠ¡å™¨ç¨‹åºé€šå¸¸éœ€è¦å¤„ç†ä¸‰ç±»äº‹ä»¶ï¼šI&#x2F;O äº‹ä»¶ã€ä¿¡å·åŠå®šæ—¶äº‹ä»¶ã€‚æœ‰ä¸¤ç§é«˜æ•ˆçš„äº‹ä»¶å¤„ç†æ¨¡å¼ï¼šReactor å’Œ Proactorï¼ŒåŒæ­¥ I&#x2F;O æ¨¡å‹é€šå¸¸ç”¨äºå®ç° Reactor æ¨¡å¼ï¼Œå¼‚æ­¥ I&#x2F;O æ¨¡å‹é€šå¸¸ç”¨äºå®ç° Proactor æ¨¡å¼ã€‚ è¦æ±‚ä¸»çº¿ç¨‹ï¼ˆI&#x2F;Oå¤„ç†å•å…ƒï¼‰åªè´Ÿè´£ç›‘å¬æ–‡ä»¶æè¿°ç¬¦ä¸Šæ˜¯å¦æœ‰äº‹ä»¶å‘ç”Ÿï¼Œæœ‰çš„è¯å°±ç«‹å³å°†è¯¥äº‹ä»¶é€šçŸ¥å·¥ä½œ çº¿ç¨‹ï¼ˆé€»è¾‘å•å…ƒï¼‰ï¼Œå°† socket å¯è¯»å¯å†™äº‹ä»¶æ”¾å…¥è¯·æ±‚é˜Ÿåˆ—ï¼Œäº¤ç»™å·¥ä½œçº¿ç¨‹å¤„ç†ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä¸»çº¿ç¨‹ä¸åš ä»»ä½•å…¶ä»–å®è´¨æ€§çš„å·¥ä½œã€‚è¯»å†™æ•°æ®ï¼Œæ¥å—æ–°çš„è¿æ¥ï¼Œä»¥åŠå¤„ç†å®¢æˆ·è¯·æ±‚å‡åœ¨å·¥ä½œçº¿ç¨‹ä¸­å®Œæˆã€‚ ä½¿ç”¨åŒæ­¥ I&#x2F;Oï¼ˆä»¥ epoll_wait ä¸ºä¾‹ï¼‰å®ç°çš„ Reactor æ¨¡å¼çš„å·¥ä½œæµç¨‹æ˜¯ï¼š ä¸»çº¿ç¨‹å¾€ epoll å†…æ ¸äº‹ä»¶è¡¨ä¸­æ³¨å†Œ socket ä¸Šçš„è¯»å°±ç»ªäº‹ä»¶ã€‚ ä¸»çº¿ç¨‹è°ƒç”¨ epoll_wait ç­‰å¾… socket ä¸Šæœ‰æ•°æ®å¯è¯»ã€‚ å½“ socket ä¸Šæœ‰æ•°æ®å¯è¯»æ—¶ï¼Œ epoll_wait é€šçŸ¥ä¸»çº¿ç¨‹ã€‚ä¸»çº¿ç¨‹åˆ™å°† socket å¯è¯»äº‹ä»¶æ”¾å…¥è¯·æ±‚é˜Ÿåˆ—ã€‚ ç¡çœ åœ¨è¯·æ±‚é˜Ÿåˆ—ä¸Šçš„æŸä¸ªå·¥ä½œçº¿ç¨‹è¢«å”¤é†’ï¼Œå®ƒä» socket è¯»å–æ•°æ®ï¼Œå¹¶å¤„ç†å®¢æˆ·è¯·æ±‚ï¼Œç„¶åå¾€ epoll å†…æ ¸äº‹ä»¶è¡¨ä¸­æ³¨å†Œè¯¥ socket ä¸Šçš„å†™å°±ç»ªäº‹ä»¶ã€‚ å½“ä¸»çº¿ç¨‹è°ƒç”¨ epoll_wait ç­‰å¾… socket å¯å†™ã€‚ å½“ socket å¯å†™æ—¶ï¼Œepoll_wait é€šçŸ¥ä¸»çº¿ç¨‹ã€‚ä¸»çº¿ç¨‹å°† socket å¯å†™äº‹ä»¶æ”¾å…¥è¯·æ±‚é˜Ÿåˆ—ã€‚ ç¡çœ åœ¨è¯·æ±‚é˜Ÿåˆ—ä¸Šçš„æŸä¸ªå·¥ä½œçº¿ç¨‹è¢«å”¤é†’ï¼Œå®ƒå¾€ socket ä¸Šå†™å…¥æœåŠ¡å™¨å¤„ç†å®¢æˆ·è¯·æ±‚çš„ç»“æœã€‚ Reactor æ¨¡å¼çš„å·¥ä½œæµç¨‹ï¼š Proactoræ¨¡å¼Proactor æ¨¡å¼å°†æ‰€æœ‰ I&#x2F;O æ“ä½œéƒ½äº¤ç»™ä¸»çº¿ç¨‹å’Œå†…æ ¸æ¥å¤„ç†ï¼ˆè¿›è¡Œè¯»ã€å†™ï¼‰ï¼Œå·¥ä½œçº¿ç¨‹ä»…ä»…è´Ÿè´£ä¸šåŠ¡é€» è¾‘ã€‚ä½¿ç”¨å¼‚æ­¥ I&#x2F;O æ¨¡å‹ï¼ˆä»¥ aio_read å’Œ aio_write ä¸ºä¾‹ï¼‰å®ç°çš„ Proactor æ¨¡å¼çš„å·¥ä½œæµç¨‹æ˜¯ï¼š ä¸»çº¿ç¨‹è°ƒç”¨ aio_read å‡½æ•°å‘å†…æ ¸æ³¨å†Œ socket ä¸Šçš„è¯»å®Œæˆäº‹ä»¶ï¼Œå¹¶å‘Šè¯‰å†…æ ¸ç”¨æˆ·è¯»ç¼“å†²åŒºçš„ä½ç½®ï¼Œ ä»¥åŠè¯»æ“ä½œå®Œæˆæ—¶å¦‚ä½•é€šçŸ¥åº”ç”¨ç¨‹åºï¼ˆè¿™é‡Œä»¥ä¿¡å·ä¸ºä¾‹ï¼‰ã€‚ ä¸»çº¿ç¨‹ç»§ç»­å¤„ç†å…¶ä»–é€»è¾‘ã€‚ å½“ socket ä¸Šçš„æ•°æ®è¢«è¯»å…¥ç”¨æˆ·ç¼“å†²åŒºåï¼Œå†…æ ¸å°†å‘åº”ç”¨ç¨‹åºå‘é€ä¸€ä¸ªä¿¡å·ï¼Œä»¥é€šçŸ¥åº”ç”¨ç¨‹åºæ•°æ®å·²ç»å¯ç”¨ã€‚ åº”ç”¨ç¨‹åºé¢„å…ˆå®šä¹‰å¥½çš„ä¿¡å·å¤„ç†å‡½æ•°é€‰æ‹©ä¸€ä¸ªå·¥ä½œçº¿ç¨‹æ¥å¤„ç†å®¢æˆ·è¯·æ±‚ã€‚å·¥ä½œçº¿ç¨‹å¤„ç†å®Œå®¢æˆ·è¯·æ±‚ åï¼Œè°ƒç”¨ aio_write å‡½æ•°å‘å†…æ ¸æ³¨å†Œ socket ä¸Šçš„å†™å®Œæˆäº‹ä»¶ï¼Œå¹¶å‘Šè¯‰å†…æ ¸ç”¨æˆ·å†™ç¼“å†²åŒºçš„ä½ç½®ï¼Œä»¥åŠå†™æ“ä½œå®Œæˆæ—¶å¦‚ä½•é€šçŸ¥åº”ç”¨ç¨‹åºã€‚ ä¸»çº¿ç¨‹ç»§ç»­å¤„ç†å…¶ä»–é€»è¾‘ã€‚ å½“ç”¨æˆ·ç¼“å†²åŒºçš„æ•°æ®è¢«å†™å…¥ socket ä¹‹åï¼Œå†…æ ¸å°†å‘åº”ç”¨ç¨‹åºå‘é€ä¸€ä¸ªä¿¡å·ï¼Œä»¥é€šçŸ¥åº”ç”¨ç¨‹åºæ•°æ®å·²ç»å‘é€å®Œæ¯•ã€‚ åº”ç”¨ç¨‹åºé¢„å…ˆå®šä¹‰å¥½çš„ä¿¡å·å¤„ç†å‡½æ•°é€‰æ‹©ä¸€ä¸ªå·¥ä½œçº¿ç¨‹æ¥åšå–„åå¤„ç†ï¼Œæ¯”å¦‚å†³å®šæ˜¯å¦å…³é—­ socketã€‚ Proactor æ¨¡å¼çš„å·¥ä½œæµç¨‹ï¼š æ¨¡æ‹Ÿ Proactor æ¨¡å¼ä½¿ç”¨åŒæ­¥ I&#x2F;O æ–¹å¼æ¨¡æ‹Ÿå‡º Proactor æ¨¡å¼ã€‚åŸç†æ˜¯ï¼šä¸»çº¿ç¨‹æ‰§è¡Œæ•°æ®è¯»å†™æ“ä½œï¼Œè¯»å†™å®Œæˆä¹‹åï¼Œä¸»çº¿ç¨‹å‘ å·¥ä½œçº¿ç¨‹é€šçŸ¥è¿™ä¸€â€å®Œæˆäº‹ä»¶â€œã€‚é‚£ä¹ˆä»å·¥ä½œçº¿ç¨‹çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒä»¬å°±ç›´æ¥è·å¾—äº†æ•°æ®è¯»å†™çš„ç»“æœï¼Œæ¥ä¸‹ æ¥è¦åšçš„åªæ˜¯å¯¹è¯»å†™çš„ç»“æœè¿›è¡Œé€»è¾‘å¤„ç†ã€‚ ä½¿ç”¨åŒæ­¥ I&#x2F;O æ¨¡å‹ï¼ˆä»¥ epoll_waitä¸ºä¾‹ï¼‰æ¨¡æ‹Ÿå‡ºçš„ Proactor æ¨¡å¼çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š ä¸»çº¿ç¨‹å¾€ epoll å†…æ ¸äº‹ä»¶è¡¨ä¸­æ³¨å†Œ socket ä¸Šçš„è¯»å°±ç»ªäº‹ä»¶ã€‚ ä¸»çº¿ç¨‹è°ƒç”¨ epoll_wait ç­‰å¾… socket ä¸Šæœ‰æ•°æ®å¯è¯»ã€‚ å½“ socket ä¸Šæœ‰æ•°æ®å¯è¯»æ—¶ï¼Œepoll_wait é€šçŸ¥ä¸»çº¿ç¨‹ã€‚ä¸»çº¿ç¨‹ä» socket å¾ªç¯è¯»å–æ•°æ®ï¼Œç›´åˆ°æ²¡æœ‰æ›´å¤šæ•°æ®å¯è¯»ï¼Œç„¶åå°†è¯»å–åˆ°çš„æ•°æ®å°è£…æˆä¸€ä¸ªè¯·æ±‚å¯¹è±¡å¹¶æ’å…¥è¯·æ±‚é˜Ÿåˆ—ã€‚ ç¡çœ åœ¨è¯·æ±‚é˜Ÿåˆ—ä¸Šçš„æŸä¸ªå·¥ä½œçº¿ç¨‹è¢«å”¤é†’ï¼Œå®ƒè·å¾—è¯·æ±‚å¯¹è±¡å¹¶å¤„ç†å®¢æˆ·è¯·æ±‚ï¼Œç„¶åå¾€ epoll å†…æ ¸äº‹ä»¶è¡¨ä¸­æ³¨å†Œ socket ä¸Šçš„å†™å°±ç»ªäº‹ä»¶ã€‚ ä¸»çº¿ç¨‹è°ƒç”¨ epoll_wait ç­‰å¾… socket å¯å†™ã€‚ å½“ socket å¯å†™æ—¶ï¼Œepoll_wait é€šçŸ¥ä¸»çº¿ç¨‹ã€‚ä¸»çº¿ç¨‹å¾€ socket ä¸Šå†™å…¥æœåŠ¡å™¨å¤„ç†å®¢æˆ·è¯·æ±‚çš„ç»“æœã€‚ åŒæ­¥ I&#x2F;O æ¨¡æ‹Ÿ Proactor æ¨¡å¼çš„å·¥ä½œæµç¨‹ï¼š 7.çº¿ç¨‹æ± çº¿ç¨‹æ± æ˜¯ç”±æœåŠ¡å™¨é¢„å…ˆåˆ›å»ºçš„ä¸€ç»„å­çº¿ç¨‹ï¼Œçº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡åº”è¯¥å’Œ CPU æ•°é‡å·®ä¸å¤šã€‚çº¿ç¨‹æ± ä¸­çš„æ‰€ æœ‰å­çº¿ç¨‹éƒ½è¿è¡Œç€ç›¸åŒçš„ä»£ç ã€‚å½“æœ‰æ–°çš„ä»»åŠ¡åˆ°æ¥æ—¶ï¼Œä¸»çº¿ç¨‹å°†é€šè¿‡æŸç§æ–¹å¼é€‰æ‹©çº¿ç¨‹æ± ä¸­çš„æŸä¸€ä¸ªå­ çº¿ç¨‹æ¥ä¸ºä¹‹æœåŠ¡ã€‚ç›¸æ¯”ä¸åŠ¨æ€çš„åˆ›å»ºå­çº¿ç¨‹ï¼Œé€‰æ‹©ä¸€ä¸ªå·²ç»å­˜åœ¨çš„å­çº¿ç¨‹çš„ä»£ä»·æ˜¾ç„¶è¦å°å¾—å¤šã€‚è‡³äºä¸» çº¿ç¨‹é€‰æ‹©å“ªä¸ªå­çº¿ç¨‹æ¥ä¸ºæ–°ä»»åŠ¡æœåŠ¡ï¼Œåˆ™æœ‰å¤šç§æ–¹å¼ï¼š ä¸»çº¿ç¨‹ä½¿ç”¨æŸç§ç®—æ³•æ¥ä¸»åŠ¨é€‰æ‹©å­çº¿ç¨‹ã€‚æœ€ç®€å•ã€æœ€å¸¸ç”¨çš„ç®—æ³•æ˜¯éšæœºç®—æ³•å’Œ Round Robinï¼ˆè½®æµ é€‰å–ï¼‰ç®—æ³•ï¼Œä½†æ›´ä¼˜ç§€ã€æ›´æ™ºèƒ½çš„ç®—æ³•å°†ä½¿ä»»åŠ¡åœ¨å„ä¸ªå·¥ä½œçº¿ç¨‹ä¸­æ›´å‡åŒ€åœ°åˆ†é…ï¼Œä»è€Œå‡è½»æœåŠ¡å™¨ çš„æ•´ä½“å‹åŠ›ã€‚ ä¸»çº¿ç¨‹å’Œæ‰€æœ‰å­çº¿ç¨‹é€šè¿‡ä¸€ä¸ªå…±äº«çš„å·¥ä½œé˜Ÿåˆ—æ¥åŒæ­¥ï¼Œå­çº¿ç¨‹éƒ½ç¡çœ åœ¨è¯¥å·¥ä½œé˜Ÿåˆ—ä¸Šã€‚å½“æœ‰æ–°çš„ä»» åŠ¡åˆ°æ¥æ—¶ï¼Œä¸»çº¿ç¨‹å°†ä»»åŠ¡æ·»åŠ åˆ°å·¥ä½œé˜Ÿåˆ—ä¸­ã€‚è¿™å°†å”¤é†’æ­£åœ¨ç­‰å¾…ä»»åŠ¡çš„å­çº¿ç¨‹ï¼Œä¸è¿‡åªæœ‰ä¸€ä¸ªå­çº¿ ç¨‹å°†è·å¾—æ–°ä»»åŠ¡çš„â€æ¥ç®¡æƒâ€œï¼Œå®ƒå¯ä»¥ä»å·¥ä½œé˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡å¹¶æ‰§è¡Œä¹‹ï¼Œè€Œå…¶ä»–å­çº¿ç¨‹å°†ç»§ç»­ç¡çœ åœ¨ å·¥ä½œé˜Ÿåˆ—ä¸Šã€‚ çº¿ç¨‹æ± çš„ä¸€èˆ¬æ¨¡å‹ä¸ºï¼š çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡æœ€ç›´æ¥çš„é™åˆ¶å› ç´ æ˜¯ä¸­å¤®å¤„ç†å™¨(CPU)çš„å¤„ç†å™¨(processors&#x2F;cores)çš„æ•°é‡ N ï¼šå¦‚æœä½ çš„CPUæ˜¯4-coresçš„ï¼Œå¯¹äºCPUå¯†é›†å‹çš„ä»»åŠ¡(å¦‚è§†é¢‘å‰ªè¾‘ç­‰æ¶ˆè€—CPUè®¡ç®—èµ„æºçš„ä»»åŠ¡)æ¥ è¯´ï¼Œé‚£çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹æ•°é‡æœ€å¥½ä¹Ÿè®¾ç½®ä¸º4ï¼ˆæˆ–è€…+1é˜²æ­¢å…¶ä»–å› ç´ é€ æˆçš„çº¿ç¨‹é˜»å¡ï¼‰ï¼›å¯¹äºIOå¯†é›† å‹çš„ä»»åŠ¡ï¼Œä¸€èˆ¬è¦å¤šäºCPUçš„æ ¸æ•°ï¼Œå› ä¸ºçº¿ç¨‹é—´ç«äº‰çš„ä¸æ˜¯CPUçš„è®¡ç®—èµ„æºè€Œæ˜¯IOï¼ŒIOçš„å¤„ç†ä¸€ èˆ¬è¾ƒæ…¢ï¼Œå¤šäºcoresæ•°çš„çº¿ç¨‹å°†ä¸ºCPUäº‰å–æ›´å¤šçš„ä»»åŠ¡ï¼Œä¸è‡³åœ¨çº¿ç¨‹å¤„ç†IOçš„è¿‡ç¨‹é€ æˆCPUç©ºé—²å¯¼ è‡´èµ„æºæµªè´¹ã€‚ ç©ºé—´æ¢æ—¶é—´ï¼Œæµªè´¹æœåŠ¡å™¨çš„ç¡¬ä»¶èµ„æºï¼Œæ¢å–è¿è¡Œæ•ˆç‡ã€‚ æ± æ˜¯ä¸€ç»„èµ„æºçš„é›†åˆï¼Œè¿™ç»„èµ„æºåœ¨æœåŠ¡å™¨å¯åŠ¨ä¹‹åˆå°±è¢«å®Œå…¨åˆ›å»ºå¥½å¹¶åˆå§‹åŒ–ï¼Œè¿™ç§°ä¸ºé™æ€èµ„æºã€‚ å½“æœåŠ¡å™¨è¿›å…¥æ­£å¼è¿è¡Œé˜¶æ®µï¼Œå¼€å§‹å¤„ç†å®¢æˆ·è¯·æ±‚çš„æ—¶å€™ï¼Œå¦‚æœå®ƒéœ€è¦ç›¸å…³çš„èµ„æºï¼Œå¯ä»¥ç›´æ¥ä»æ± ä¸­ è·å–ï¼Œæ— éœ€åŠ¨æ€åˆ†é…ã€‚ å½“æœåŠ¡å™¨å¤„ç†å®Œä¸€ä¸ªå®¢æˆ·è¿æ¥åï¼Œå¯ä»¥æŠŠç›¸å…³çš„èµ„æºæ”¾å›æ± ä¸­ï¼Œæ— éœ€æ‰§è¡Œç³»ç»Ÿè°ƒç”¨é‡Šæ”¾èµ„æºã€‚","categories":[],"tags":[]},{"title":"Ubuntuè·å–IP/é‡Šæ”¾IP","slug":"æœ‰è¶£çš„çŸ¥è¯†/Ubuntuè·å–IP-é‡Šæ”¾IP","date":"2022-07-05T02:44:59.000Z","updated":"2022-07-05T02:46:05.581Z","comments":true,"path":"2022/07/05/æœ‰è¶£çš„çŸ¥è¯†/Ubuntuè·å–IP-é‡Šæ”¾IP/","link":"","permalink":"https://tutouwang.vercel.app/2022/07/05/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/Ubuntu%E8%8E%B7%E5%8F%96IP-%E9%87%8A%E6%94%BEIP/","excerpt":"","text":"sudo dhclient -r é‡Šæ”¾IP sudo dhclient é‡æ–°è·å–IP","categories":[{"name":"æœ‰è¶£çš„çŸ¥è¯†","slug":"æœ‰è¶£çš„çŸ¥è¯†","permalink":"https://tutouwang.vercel.app/categories/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[]},{"title":"UDPé€šä¿¡å®ç°","slug":"UDPé€šä¿¡å®ç°","date":"2022-07-04T07:23:21.000Z","updated":"2022-08-05T12:22:29.500Z","comments":true,"path":"2022/07/04/UDPé€šä¿¡å®ç°/","link":"","permalink":"https://tutouwang.vercel.app/2022/07/04/UDP%E9%80%9A%E4%BF%A1%E5%AE%9E%E7%8E%B0/","excerpt":"","text":"UDPé€šä¿¡ 123456789101112131415161718192021#include &lt;sys/types.h&gt; #include &lt;sys/socket.h&gt;ssize_t sendto(int sockfd, const void *buf, size_t len, int flags, const struct sockaddr *dest_addr, socklen_t addrlen); - å‚æ•°ï¼š - sockfd : é€šä¿¡çš„fd - buf : è¦å‘é€çš„æ•°æ® - len : å‘é€æ•°æ®çš„é•¿åº¦ - flags : 0 (ä¸€èˆ¬ä¸ç”¨) - dest_addr : é€šä¿¡çš„å¦å¤–ä¸€ç«¯çš„åœ°å€ä¿¡æ¯ - addrlen : åœ°å€çš„å†…å­˜å¤§å°ssize_t recvfrom(int sockfd, void *buf, size_t len, int flags, struct sockaddr *src_addr, socklen_t *addrlen); - å‚æ•°ï¼š - sockfd : é€šä¿¡çš„fd - buf : æ¥æ”¶æ•°æ®çš„æ•°ç»„ - len : æ•°ç»„çš„å¤§å° - flags : 0 - src_addr : ç”¨æ¥ä¿å­˜å¦å¤–ä¸€ç«¯çš„åœ°å€ä¿¡æ¯ï¼Œä¸éœ€è¦å¯ä»¥æŒ‡å®šä¸ºNULL - addrlen : åœ°å€çš„å†…å­˜å¤§å° - è¿”å›å€¼: æˆåŠŸ: è¿”å›å­—èŠ‚çš„ä¸ªæ•° å¤±è´¥: è¿”å› -1 UDP_server.c12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667/************************************************************************* &gt; File Name: udp_server.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ04æ—¥ æ˜ŸæœŸä¸€ 16æ—¶01åˆ†46ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;arpa/inet.h&gt;int main() &#123; // 1.åˆ›å»ºä¸€ä¸ªé€šä¿¡çš„socket int fd = socket(PF_INET, SOCK_DGRAM, 0); if(fd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // 2.ç»‘å®š struct sockaddr_in addr; addr.sin_family = AF_INET; addr.sin_port = htons(5200); addr.sin_addr.s_addr = INADDR_ANY; int ret = bind(fd, (struct sockaddr*)&amp;addr, sizeof(addr)); if(ret == -1) &#123; perror(&quot;bind&quot;); exit(-1); &#125; // 3.é€šä¿¡ while(1) &#123; char recvbuf[123]; struct sockaddr_in cliaddr; socklen_t len = sizeof(cliaddr); // æ¥å—æ•°æ® int num = recvfrom(fd, recvbuf, sizeof(recvbuf), 0, (struct sockaddr *)&amp;cliaddr, &amp;len); if(num == -1) &#123; perror(&quot;recvfrom&quot;); exit(-1); &#125; char cliIP[16]; int cliprot; inet_ntop(AF_INET, &amp;cliaddr.sin_addr.s_addr, cliIP, sizeof(cliIP)); cliprot = ntohs(cliaddr.sin_port); printf(&quot;client IP %s : , Prot : %d \\n&quot;, cliIP, cliprot); printf(&quot;client say : %s\\n &quot;, recvbuf); // å‘é€æ•°æ® sendto(fd, recvbuf, strlen(recvbuf), 0, (struct sockaddr *)&amp;cliaddr, sizeof(cliaddr)); &#125; close(fd); return 0;&#125; UDP_client.c123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960/************************************************************************* &gt; File Name: udp_client.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ04æ—¥ æ˜ŸæœŸä¸€ 16æ—¶02åˆ†50ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;arpa/inet.h&gt;int main() &#123; // 1.åˆ›å»ºä¸€ä¸ªé€šä¿¡çš„socket int fd = socket(PF_INET, SOCK_DGRAM, 0); if(fd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // æœåŠ¡å™¨ç«¯çš„åœ°å€ä¿¡æ¯ struct sockaddr_in saddr; saddr.sin_family = AF_INET; saddr.sin_port = htons(5200); inet_pton(AF_INET, &quot;127.0.0.1&quot;, &amp;saddr.sin_addr.s_addr); // 3.é€šä¿¡ int num = 0; while(1) &#123; char sendBuf[123]; struct sockaddr_in cliaddr; socklen_t len = sizeof(cliaddr); // å‘é€æ•°æ® sprintf(sendBuf, &quot;hello , i am client %d \\n&quot;, num++); sendto(fd, sendBuf, strlen(sendBuf) + 1, 0, (struct sockaddr *)&amp;saddr, sizeof(saddr)); // æ¥æ”¶æ•°æ® int num = recvfrom(fd, sendBuf, sizeof(sendBuf), 0, (struct sockaddr *)&amp;cliaddr, &amp;len); if(num == -1) &#123; perror(&quot;recvfrom&quot;); exit(-1); &#125; printf(&quot;server say : %s\\n&quot;, sendBuf); sleep(1); &#125; close(fd); return 0;&#125; 1.2å¹¿æ’­ å‘å­ç½‘ä¸­å¤šå°è®¡ç®—æœºå‘é€æ¶ˆæ¯ï¼Œå¹¶ä¸”å­ç½‘ä¸­æ‰€æœ‰çš„è®¡ç®—æœºéƒ½å¯ä»¥æ¥æ”¶åˆ°å‘é€æ–¹å‘é€çš„æ¶ˆæ¯ï¼Œæ¯ä¸ªå¹¿ æ’­æ¶ˆæ¯éƒ½åŒ…å«ä¸€ä¸ªç‰¹æ®Šçš„IPåœ°å€ï¼Œè¿™ä¸ªIPä¸­å­ç½‘å†…ä¸»æœºæ ‡å¿—éƒ¨åˆ†çš„äºŒè¿›åˆ¶å…¨éƒ¨ä¸º1ã€‚ â€‹ a. åªèƒ½åœ¨å±€åŸŸç½‘ä¸­ä½¿ç”¨ã€‚ â€‹ b. å®¢æˆ·ç«¯éœ€è¦ç»‘å®šæœåŠ¡å™¨å¹¿æ’­ä½¿ç”¨çš„ç«¯å£ï¼Œæ‰å¯ä»¥æ¥æ”¶åˆ°å¹¿æ’­æ¶ˆæ¯ã€‚ 1234567// è®¾ç½®å¹¿æ’­å±æ€§çš„å‡½æ•°int setsockopt(int sockfd, int level, int optname, const void *optval, socklen_t optlen); - sockfd : æ–‡ä»¶æè¿°ç¬¦ - level : SOL_SOCKET - optname : SO_BROADCAST - optval: intç±»å‹çš„å€¼, ä¸º1è¡¨ç¤ºå…è®¸å¹¿æ’­, 0è¡¨ç¤ºä¸å…è®¸ - optlen: optval çš„å¤§å° bro_server.c12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455/************************************************************************* &gt; File Name: bro_server.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ04æ—¥ æ˜ŸæœŸä¸€ 22æ—¶02åˆ†02ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt; #include &lt;arpa/inet.h&gt;int main() &#123; // 1.åˆ›å»ºä¸€ä¸ªé€šä¿¡çš„socket int fd = socket(PF_INET, SOCK_DGRAM, 0); if(fd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // 2.è®¾ç½®å¹¿æ’­å±æ€§ int op = 1; setsockopt(fd, SOL_SOCKET, SO_BROADCAST, &amp;op, sizeof(op)); // 3.åˆ›å»ºä¸€ä¸ªå¹¿æ’­çš„åœ°å€ struct sockaddr_in cliaddr; cliaddr.sin_family = AF_INET; cliaddr.sin_port = htons(5200); inet_pton(AF_INET, &quot;192.168.148.255&quot;, &amp;cliaddr.sin_addr.s_addr); // è®¾å€¼åœ°å€å°±ä¸æ˜¯ INADDR_ANY int num = 0; // 3.é€šä¿¡ while(1) &#123; char sendbuf[123]; sprintf(sendbuf, &quot;hello, clien... ... %d\\n&quot;, num++); // å‘é€æ•°æ® sendto(fd, sendbuf, strlen(sendbuf), 0, (struct sockaddr *)&amp;cliaddr, sizeof(cliaddr)); printf(&quot;å¹¿æ’­çš„æ•°æ®: %s\\n&quot;, sendbuf); sleep(1); &#125; close(fd); return 0;&#125; bro_client.c12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455/************************************************************************* &gt; File Name: bro_client.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ04æ—¥ æ˜ŸæœŸä¸€ 22æ—¶02åˆ†28ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;#include &lt;arpa/inet.h&gt;int main() &#123; // 1.åˆ›å»ºä¸€ä¸ªé€šä¿¡çš„socket int fd = socket(PF_INET, SOCK_DGRAM, 0); if(fd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // å®¢æˆ·ç«¯ç»‘å®šæœ¬åœ°çš„IPå’Œç«¯å£ struct sockaddr_in addr; addr.sin_family = AF_INET; addr.sin_port = htons(5200); addr.sin_addr.s_addr = INADDR_ANY; int ret = bind(fd, (struct sockaddr *)&amp;addr, sizeof(addr)); if(ret == -1) &#123; perror(&quot;bind&quot;); exit(-1); &#125; // 3.é€šä¿¡ while(1) &#123; char buf[123]; memset(buf, 0, sizeof(buf)); // æ¥å—æ•°æ® int num = recvfrom(fd, buf, sizeof(buf), 0, NULL, NULL); if(num == -1) &#123; perror(&quot;recvfrom&quot;); exit(-1); &#125; printf(&quot;senbuf sat : %s \\n&quot;, buf); &#125; close(fd); return 0;&#125; 1.3 ç»„æ’­(å¤šæ’­) å•æ’­åœ°å€æ ‡è¯†å•ä¸ª IP æ¥å£ï¼Œå¹¿æ’­åœ°å€æ ‡è¯†æŸä¸ªå­ç½‘çš„æ‰€æœ‰ IP æ¥å£ï¼Œå¤šæ’­åœ°å€æ ‡è¯†ä¸€ç»„ IP æ¥å£ã€‚ å•æ’­å’Œå¹¿æ’­æ˜¯å¯»å€æ–¹æ¡ˆçš„ä¸¤ä¸ªæç«¯ï¼ˆè¦ä¹ˆå•ä¸ªè¦ä¹ˆå…¨éƒ¨ï¼‰ï¼Œå¤šæ’­åˆ™æ„åœ¨ä¸¤è€…ä¹‹é—´æä¾›ä¸€ç§æŠ˜ä¸­æ–¹ æ¡ˆã€‚å¤šæ’­æ•°æ®æŠ¥åªåº”è¯¥ç”±å¯¹å®ƒæ„Ÿå…´è¶£çš„æ¥å£æ¥æ”¶ï¼Œä¹Ÿå°±æ˜¯è¯´ç”±è¿è¡Œç›¸åº”å¤šæ’­ä¼šè¯åº”ç”¨ç³»ç»Ÿçš„ä¸»æœºä¸Š çš„æ¥å£æ¥æ”¶ã€‚å¦å¤–ï¼Œå¹¿æ’­ä¸€èˆ¬å±€é™äºå±€åŸŸç½‘å†…ä½¿ç”¨ï¼Œè€Œå¤šæ’­åˆ™æ—¢å¯ä»¥ç”¨äºå±€åŸŸç½‘ï¼Œä¹Ÿå¯ä»¥è·¨å¹¿åŸŸç½‘ ä½¿ç”¨ã€‚ a.ç»„æ’­æ—¢å¯ä»¥ç”¨äºå±€åŸŸç½‘ï¼Œä¹Ÿå¯ä»¥ç”¨äºå¹¿åŸŸç½‘ b.å®¢æˆ·ç«¯éœ€è¦åŠ å…¥å¤šæ’­ç»„ï¼Œæ‰èƒ½æ¥æ”¶åˆ°å¤šæ’­çš„æ•°æ® ç»„æ’­åœ°å€ IP å¤šæ’­é€šä¿¡å¿…é¡»ä¾èµ–äº IP å¤šæ’­åœ°å€ï¼Œåœ¨ IPv4 ä¸­å®ƒçš„èŒƒå›´ä» 224.0.0.0 åˆ° 239.255.255.255 ï¼Œ å¹¶è¢«åˆ’åˆ†ä¸ºå±€éƒ¨é“¾æ¥å¤šæ’­åœ°å€ã€é¢„ç•™å¤šæ’­åœ°å€å’Œç®¡ç†æƒé™å¤šæ’­åœ°å€ä¸‰ç±»: IPåœ°å€ è¯´æ˜ 224.0.0.0~224.0.0.255 å±€éƒ¨é“¾æ¥å¤šæ’­åœ°å€ï¼šæ˜¯ä¸ºè·¯ç”±åè®®å’Œå…¶å®ƒç”¨é€”ä¿ç•™çš„åœ°å€ï¼Œè·¯ç”±å™¨å¹¶ä¸è½¬å‘å±äºæ­¤èŒƒå›´çš„IPåŒ… 224.0.1.0~224.0.1.255 é¢„ç•™å¤šæ’­åœ°å€ï¼šå…¬ç”¨ç»„æ’­åœ°å€ï¼Œå¯ç”¨äºInternetï¼›ä½¿ç”¨å‰éœ€è¦ç”³è¯· 224.0.2.0~238.255.255.255 é¢„ç•™å¤šæ’­åœ°å€ï¼šç”¨æˆ·å¯ç”¨ç»„æ’­åœ°å€(ä¸´æ—¶ç»„åœ°å€)ï¼Œå…¨ç½‘èŒƒå›´å†…æœ‰æ•ˆ 239.0.0.0~239.255.255.255 æœ¬åœ°ç®¡ç†ç»„æ’­åœ°å€ï¼Œå¯ä¾›ç»„ç»‡å†…éƒ¨ä½¿ç”¨ï¼Œç±»ä¼¼äºç§æœ‰ IP åœ°å€ï¼Œä¸èƒ½ç”¨äº Internetï¼Œå¯é™åˆ¶å¤šæ’­èŒƒå›´ è®¾ç½®ç»„æ’­ 123456789101112131415161718192021222324int setsockopt(int sockfd, int level, int optname,const void *optval, socklen_t optlen); // æœåŠ¡å™¨è®¾ç½®å¤šæ’­çš„ä¿¡æ¯ï¼Œå¤–å‡ºæ¥å£ - level : IPPROTO_IP - optname : IP_MULTICAST_IF - optval : struct in_addr // å®¢æˆ·ç«¯åŠ å…¥åˆ°å¤šæ’­ç»„ï¼š - level : IPPROTO_IP - optname : IP_ADD_MEMBERSHIP - optval : struct ip_mreq struct ip_mreq &#123; /* IP multicast address of group. */ struct in_addr imr_multiaddr; // ç»„æ’­çš„IPåœ°å€ /* Local IP address of interface. */ struct in_addr imr_interface; // æœ¬åœ°çš„IPåœ°å€&#125;;typedef uint32_t in_addr_t;struct in_addr &#123; in_addr_t s_addr;&#125;; multi_server.c1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556/************************************************************************* &gt; File Name: multi_server.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ04æ—¥ æ˜ŸæœŸä¸€ 22æ—¶02åˆ†02ç§’ ************************************************************************/ #include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt; #include &lt;arpa/inet.h&gt;int main() &#123; // 1.åˆ›å»ºä¸€ä¸ªé€šä¿¡çš„socket int fd = socket(PF_INET, SOCK_DGRAM, 0); if(fd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // 2.è®¾ç½®å¤šæ’­å±æ€§, è®¾ç½®å¤–å‡ºæ¥å£ struct in_addr imr_multiaddr; // åˆå§‹åŒ–å¤šæ’­åœ°å€ inet_pton(AF_INET, &quot;239.0.0.10&quot;, &amp;imr_multiaddr.s_addr); setsockopt(fd, IPPROTO_IP, IP_MULTICAST_IF, &amp;imr_multiaddr, sizeof(imr_multiaddr)); // 3.åˆå§‹åŒ–å®¢æˆ·ç«¯çš„åœ°å€ä¿¡æ¯ struct sockaddr_in cliaddr; cliaddr.sin_family = AF_INET; cliaddr.sin_port = htons(5200); inet_pton(AF_INET, &quot;239.0.0.10&quot;, &amp;cliaddr.sin_addr.s_addr); // è®¾å€¼åœ°å€å°±ä¸æ˜¯ INADDR_ANY int num = 0; // 3.é€šä¿¡ while(1) &#123; char sendbuf[123]; sprintf(sendbuf, &quot;hello, clien... ... %d\\n&quot;, num++); // å‘é€æ•°æ® sendto(fd, sendbuf, strlen(sendbuf), 0, (struct sockaddr *)&amp;cliaddr, sizeof(cliaddr)); printf(&quot;å¤šæ’­çš„æ•°æ®: %s\\n&quot;, sendbuf); sleep(1); &#125; close(fd); return 0;&#125; multi_client.c12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061/************************************************************************* &gt; File Name: multi_client.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ04æ—¥ æ˜ŸæœŸä¸€ 22æ—¶02åˆ†28ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;#include &lt;arpa/inet.h&gt;int main() &#123; // 1.åˆ›å»ºä¸€ä¸ªé€šä¿¡çš„socket int fd = socket(PF_INET, SOCK_DGRAM, 0); if(fd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // å®¢æˆ·ç«¯ç»‘å®šæœ¬åœ°çš„IPå’Œç«¯å£ struct sockaddr_in ad22dr; addr.sin_family = AF_INET; addr.sin_port = htons(5200); addr.sin_addr.s_addr = INADDR_ANY; int ret = bind(fd, (struct sockaddr *)&amp;addr, sizeof(addr)); if(ret == -1) &#123; perror(&quot;bind&quot;); exit(-1); &#125; // åŠ å…¥åˆ°å¤šæ’­ç§Ÿ struct ip_mreq op; inet_pton(AF_INET, &quot;239.0.0.10&quot;, &amp;op.imr_multiaddr.s_addr); op.imr_interface.s_addr = INADDR_ANY; setsockopt(fd, IPPROTO_IP, IP_ADD_MEMBERSHIP, &amp;op, sizeof(op)); // 3.é€šä¿¡ while(1) &#123; char buf[123]; memset(buf, 0, sizeof(buf)); // æ¥å—æ•°æ® int num = recvfrom(fd, buf, sizeof(buf), 0, NULL, NULL); if(num == -1) &#123; perror(&quot;recvfrom&quot;); exit(-1); &#125; printf(&quot;senbuf sat : %s \\n&quot;, buf); &#125; close(fd); return 0;&#125; 2. æœ¬åœ°å¥—æ¥å­— æœ¬åœ°å¥—æ¥å­—çš„ä½œç”¨ï¼šæœ¬åœ°çš„è¿›ç¨‹é—´é€šä¿¡ â€‹ æœ‰å…³ç³»çš„è¿›ç¨‹é—´çš„é€šä¿¡ â€‹ æ²¡æœ‰å…³ç³»çš„è¿›ç¨‹é—´çš„é€šä¿¡ æœ¬åœ°å¥—æ¥å­—å®ç°æµç¨‹å’Œç½‘ç»œå¥—æ¥å­—ç±»ä¼¼ï¼Œä¸€èˆ¬å‘¢é‡‡ç”¨TCPçš„é€šä¿¡æµç¨‹ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546// æœ¬åœ°å¥—æ¥å­—é€šä¿¡çš„æµç¨‹ - tcp// æœåŠ¡å™¨ç«¯1. åˆ›å»ºç›‘å¬çš„å¥—æ¥å­— int lfd = socket(AF_UNIX/AF_LOCAL, SOCK_STREAM, 0);2. ç›‘å¬çš„å¥—æ¥å­—ç»‘å®šæœ¬åœ°çš„å¥—æ¥å­—æ–‡ä»¶ -&gt; serverç«¯ struct sockaddr_un addr; // ç»‘å®šæˆåŠŸä¹‹åï¼ŒæŒ‡å®šçš„sun_pathä¸­çš„å¥—æ¥å­—æ–‡ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚ bind(lfd, addr, len);3. ç›‘å¬ listen(lfd, 100);4. ç­‰å¾…å¹¶æ¥å—è¿æ¥è¯·æ±‚ struct sockaddr_un cliaddr; int cfd = accept(lfd, &amp;cliaddr, len);5. é€šä¿¡ æ¥æ”¶æ•°æ®: read/recv å‘é€æ•°æ®: write/send6. å…³é—­è¿æ¥ close();// å®¢æˆ·ç«¯çš„æµç¨‹1. åˆ›å»ºé€šä¿¡çš„å¥—æ¥å­— int fd = socket(AF_UNIX/AF_LOCAL, SOCK_STREAM, 0);2. ç›‘å¬çš„å¥—æ¥å­—ç»‘å®šæœ¬åœ°çš„IP ç«¯å£ struct sockaddr_un addr; // ç»‘å®šæˆåŠŸä¹‹åï¼ŒæŒ‡å®šçš„sun_pathä¸­çš„å¥—æ¥å­—æ–‡ä»¶ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚ bind(lfd, addr, len);3. è¿æ¥æœåŠ¡å™¨ struct sockaddr_un serveraddr; connect(fd, &amp;serveraddr, sizeof(serveraddr));4. é€šä¿¡ æ¥æ”¶æ•°æ®: read/recv å‘é€æ•°æ®ï¼šwrite/send5. å…³é—­è¿æ¥ close(); 12345// å¤´æ–‡ä»¶: sys/un.h #define UNIX_PATH_MAX 108 struct sockaddr_un &#123; sa_family_t sun_family; // åœ°å€æ—åè®® af_local char sun_path[UNIX_PATH_MAX]; // å¥—æ¥å­—æ–‡ä»¶çš„è·¯å¾„, è¿™æ˜¯ä¸€ä¸ªä¼ªæ–‡ä»¶, å¤§å°æ°¸è¿œ = 0&#125;; ipc_server.c123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778/************************************************************************* &gt; File Name: ipc_server.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ05æ—¥ æ˜ŸæœŸäºŒ 15æ—¶46åˆ†39ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;sys/un.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;unistd.h&gt;int main() &#123; // åˆ é™¤ unlink(&quot;server.sock&quot;); // 1. åˆ›å»ºç›‘å¬å¥—æ¥å­— int lfd = socket(AF_LOCAL, SOCK_STREAM, 0); if(lfd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // 2.ç»‘å®šæœ¬åœ°çš„å¥—æ¥å­—æ–‡ä»¶ struct sockaddr_un addr; addr.sun_family = AF_LOCAL; strcpy(addr.sun_path, &quot;server.sock&quot;); int ret = bind(lfd, (struct sockaddr*)&amp;addr, sizeof(addr)); if(ret == -1) &#123; perror(&quot;bind&quot;); exit(-1); &#125; // 3.ç›‘å¬ ret = listen(lfd, 100); if(ret == -1) &#123; perror(&quot;listen&quot;); exit(-1); &#125; // 4.ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ struct sockaddr_un cliaddr; socklen_t len = sizeof(cliaddr); int cfd = accept(lfd, (struct sockaddr*)&amp;cliaddr, &amp;len); if(cfd == -1) &#123; perror(&quot;accept&quot;); exit(-1); &#125; printf(&quot;client socket filename: %s\\n&quot;, cliaddr.sun_path); // 5.é€šä¿¡ while(1) &#123; char buf[128]; memset(buf, 0 , sizeof(buf)); int readLen = read(cfd, buf, sizeof(buf)); if(readLen == -1) &#123; perror(&quot;read&quot;); exit(-1); &#125; else if(readLen == 0) &#123; printf(&quot;client closed ... ...\\n&quot;); break; &#125; else if(readLen &gt; 0) &#123; printf(&quot;client say %s\\n&quot;, buf); send(cfd, buf, len, 0); &#125; &#125; close(cfd); close(lfd); return 0;&#125; ipc_client.c12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879/************************************************************************* &gt; File Name: ipc_client.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ05æ—¥ æ˜ŸæœŸäºŒ 15æ—¶46åˆ†58ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;sys/un.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;unistd.h&gt;int main() &#123; // åˆ é™¤ unlink(&quot;client.sock&quot;); // 1. åˆ›å»ºå¥—æ¥å­— int cfd = socket(AF_LOCAL, SOCK_STREAM, 0); if(cfd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // 2.ç»‘å®šæœ¬åœ°çš„å¥—æ¥å­—æ–‡ä»¶ struct sockaddr_un addr; addr.sun_family = AF_LOCAL; strcpy(addr.sun_path, &quot;client.sock&quot;); int ret = bind(cfd, (struct sockaddr*)&amp;addr, sizeof(addr)); if(ret == -1) &#123; perror(&quot;bind&quot;); exit(-1); &#125; // 4.è¿æ¥æœåŠ¡å™¨ struct sockaddr_un saddr; saddr.sun_family = AF_LOCAL; strcpy(saddr.sun_path, &quot;server.sock&quot;); ret = connect(cfd, (struct sockaddr*)&amp;saddr, sizeof(saddr)); if(ret == -1) &#123; perror(&quot;connect&quot;); exit(-1); &#125; // 5.é€šä¿¡ int num = 0; while(1) &#123; char buf[128]; memset(buf, 0 , sizeof(buf)); sprintf(buf, &quot;hello, i am client %d \\n&quot;, num++); send(cfd, buf, sizeof(buf), 0); // æ‰“å°è‡ªå·±è¯´çš„è¯ printf(&quot;client say : %s \\n&quot;, buf); // æ¥å—æ•°æ® int readLen = recv(cfd, buf, sizeof(buf), 0); if(readLen == -1) &#123; perror(&quot;read&quot;); exit(-1); &#125; else if(readLen == 0) &#123; printf(&quot;server closed ... ...\\n&quot;); break; &#125; else if(readLen &gt; 0) &#123; printf(&quot;server say %s\\n&quot;, buf); &#125; sleep(1); &#125; close(cfd); return 0;&#125; æŠ¥é”™ ä¹‹å‰æœåŠ¡å™¨è¿è¡Œä¹Ÿä¼šæŠ¥é”™ æœåŠ¡å…³é—­ç«¯å£è¿˜æ²¡æœ‰é‡Šæ”¾å°±ä¼šè¿™æ · æœ¬åœ°å°±ç›¸å½“äºç»‘å®šçš„è¿™ä¸ªæ–‡ä»¶ bind: Address already in use è§£å†³åŠæ³•ï¼šunlink(â€œæ–‡ä»¶åâ€) &#x2F;&#x2F; ä»ç³»ç»Ÿä¸­åˆ é™¤ä¸€ä¸ªæŒ‡å®šæ–‡ä»¶","categories":[],"tags":[]},{"title":"IOå¤šè·¯å¤ç”¨","slug":"Linuxç½‘ç»œç¼–ç¨‹/IOå¤šè·¯å¤ç”¨","date":"2022-07-01T02:18:29.000Z","updated":"2022-07-04T07:15:58.791Z","comments":true,"path":"2022/07/01/Linuxç½‘ç»œç¼–ç¨‹/IOå¤šè·¯å¤ç”¨/","link":"","permalink":"https://tutouwang.vercel.app/2022/07/01/Linux%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/IO%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/","excerpt":"","text":"1. I&#x2F;Oå¤šè·¯å¤ç”¨ï¼ˆI&#x2F;Oå¤šè·¯è½¬æ¥ï¼‰I&#x2F;O å¤šè·¯å¤ç”¨ä½¿å¾—ç¨‹åºèƒ½åŒæ—¶ç›‘å¬å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œèƒ½å¤Ÿæé«˜ç¨‹åºçš„æ€§èƒ½ï¼ŒLinux ä¸‹å®ç° I&#x2F;O å¤šè·¯å¤ç”¨çš„ ç³»ç»Ÿè°ƒç”¨ä¸»è¦æœ‰ selectã€poll å’Œ epollã€‚ IOå¤šè·¯å¤ç”¨å›¾è§£é˜»å¡ BIOæ¨¡å‹ éé˜»å¡ï¼Œå¿™è½®è¯¢ accept() &#x2F;&#x2F; ä¸æ–­çš„æ£€æµ‹å®¢æˆ·çš„è¿æ¥ - ä¸é˜»å¡ read() &#x2F;&#x2F; ä¸æ–­çš„å¾ªç¯ - ä¸é˜»å¡ IOå¤šè·¯è½¬æ¥æŠ€æœ¯ - select&#x2F;poll - epoll 2. select ä¸»æ—¨æ€æƒ³: â€‹ 1 .é¦–å…ˆè¦æ„é€ ä¸€ä¸ªå…³äºæ–‡ä»¶æè¿°ç¬¦çš„åˆ—è¡¨ï¼Œå°†è¦ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦æ·»åŠ åˆ°è¯¥åˆ—è¡¨ä¸­ã€‚ â€‹ 2. è°ƒç”¨ç³»ç»Ÿå‡½æ•°(select), ç›‘å¬è¯¥åˆ—è¡¨ä¸­çš„æ–‡ä»¶æè¿°ç¬¦,ç›´åˆ°è¿™äº›æè¿°ç¬¦ä¸­çš„ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¿›è¡ŒI\\Oæ“ä½œæ—¶, è¯¥å‡½æ•°æ‰ä¼šè¿”å› â€‹ a. è¿™ä¸ªå‡½æ•°æ˜¯é˜»å¡çš„ â€‹ b. å‡½æ•°å¯¹æ–‡ä»¶æè¿°ç¬¦çš„æ£€æµ‹çš„æ“ä½œæ˜¯ç”±å†…æ ¸å®Œæˆ â€‹ 3. åœ¨è¿”å›æ—¶, å®ƒä¼šå‘Šè¯‰è¿›ç¨‹æœ‰å¤šå°‘(å“ªäº›)æè¿°ç¬¦è¦è¿›è¡ŒI&#x2F;Oæ“ä½œ 1234567891011121314151617181920212223242526272829303132333435// sizeof(fd_set) = 128ä½ 1024 (btä½)#include &lt;sys/time.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/select.h&gt;int select(int nfds, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, struct timeval *timeout); - å‚æ•°: - nfds: å§”æ‰˜å†…æ ¸çš„æ£€æµ‹æœ€å¤§æ–‡ä»¶æè¿°ç¬¦çš„å€¼ + 1 - readfds: è¦æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦çš„è¯»çš„é›†åˆ,å§”æ‰˜å†…æ ¸æ£€æµ‹å“ªäº›æ–‡ä»¶æè¿°ç¬¦çš„è¯»çš„å±æ€§ - ä¸€ç­æ£€æµ‹è¯»æ“ä½œ - å¯¹åº”çš„æ˜¯å¯¹æ–¹å‘é€æ¥çš„æ•°æ®, å› ä¸ºè¯»è¢«çš„æ¥æ”¶æ•°æ®, æ£€æµ‹çš„å°±æ˜¯è¯»ç¼“å†²åŒº - æ˜¯ä¸€ä¸ªä¼ å…¥ä¼ å‡ºå‚æ•° - writefds: è¦æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦çš„å†™çš„é›†åˆ, å§”æ‰˜å†…æ ¸æ£€æµ‹å“ªäº›æ–‡ä»¶æè¿°ç¬¦çš„å†™çš„å±æ€§ - å§”æ‰˜å†…æ ¸æ£€æµ‹å†™ç¼“å­˜åŒºæ˜¯ä¸æ˜¯è¿˜å¯ä»¥å†™æ•°æ® (ä¸æ»¡å°±å¯ä»¥å†™) - exceptfds: æ£€æµ‹å‘ç”Ÿå¼‚å¸¸çš„æ–‡ä»¶æè¿°ç¬¦çš„é›†åˆ - timeout: è¦è®¾ç½®çš„è¶…æ—¶æ—¶é—´ struct timeout &#123; long tv_sec; /* seconds */ long tv_usec; /* microseconds */ &#125; - å€¼ä¸º NULL: æ°¸ä¹…é˜»å¡, ç›´åˆ°æ£€æµ‹åˆ°äº†æ–‡ä»¶æè¿°ç¬¦çš„å˜åŒ– - tv_sec = 0, tv_usec: = 0 : è¡¨ç¤ºä¸é˜»å¡ - tv_sec &gt; 0, tv_usec: &gt; 0 : é˜»å¡å¯¹åº”çš„æ—¶é—´ - è¿”å›å€¼: - -1: å¤±è´¥ - &gt;0 (n): æ£€æµ‹çš„é›†åˆä¸­nä¸ªæ–‡ä»¶æè¿°ç¬¦å‘ç”Ÿäº†å˜åŒ– // å°†å‚æ•°æ–‡ä»¶æè¿°ç¬¦fdå¯¹åº”çš„æ ‡å¿—ä½è®¾ç½®ä¸º0void FD_CLR(int fd, fd_set *set);// åˆ¤æ–­fdå¯¹åº”çš„æ ‡å¿—ä½æ˜¯0è¿˜æ˜¯1ï¼Œ è¿”å›å€¼ ï¼š fdå¯¹åº”çš„æ ‡å¿—ä½çš„å€¼ï¼Œ0ï¼Œè¿”å›0ï¼Œ 1ï¼Œè¿”å›1int FD_ISSET(int fd, fd_set *set);// å°†å‚æ•°æ–‡ä»¶æè¿°ç¬¦fd å¯¹åº”çš„æ ‡å¿—ä½ï¼Œè®¾ç½®ä¸º1void FD_SET(int fd, fd_set *set);// fd_setä¸€å…±æœ‰1024 bit, å…¨éƒ¨åˆå§‹åŒ–ä¸º0void FD_ZERO(fd_set *set); server.c123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115/************************************************************************* &gt; File Name: select.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ02æ—¥ æ˜ŸæœŸå…­ 11æ—¶52åˆ†50ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;sys/time.h&gt;#include &lt;sys/types.h&gt;int main() &#123; // åˆ›å»ºsocket int lfd = socket(AF_INET,SOCK_STREAM ,0); if(lfd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // ç»‘å®š struct sockaddr_in saddr; saddr.sin_family = AF_INET; saddr.sin_addr.s_addr = 0; // INADDR_ANY saddr.sin_port = htons(5200); int ret = bind(lfd, (struct sockaddr *)&amp;saddr, sizeof(saddr)); if(ret == -1) &#123; perror(&quot;bind&quot;); exit(-1); &#125; // ç›‘å¬ ret = listen(lfd, 8); if(ret == -1) &#123; perror(&quot;listen&quot;); exit(-1); &#125; // åˆ›å»ºä¸€ä¸ªfd_setçš„é›†åˆ, å­˜æ”¾çš„æ˜¯éœ€è¦æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦ fd_set rdset, tmp; FD_ZERO(&amp;rdset); FD_SET(lfd, &amp;rdset); int maxfd = lfd; while (1) &#123; tmp = rdset; // è°ƒç”¨selectç³»ç»Ÿå‡½æ•°, è®©å†…æ ¸å¸®å¿™æ£€æµ‹å“ªäº›æ–‡ä»¶æè¿°ç¬¦æœ‰æ•°æ® ret = select(maxfd + 1, &amp;tmp, NULL, NULL, NULL); if(ret == -1) &#123; perror(&quot;select&quot;); exit(-1); &#125; else if(ret == 0) &#123; // è®¾ç½®çš„è¶…æ—¶æ—¶é—´åˆ°äº†, è¿”å›å€¼æ‰æ˜¯, æ‰ä¼šæ‰§è¡Œ, è®¾ç½®çš„ä¸ºNULLä¹‹ åæ£€æµ‹åˆ°æ¶ˆæ¯æ‰ä¼šä¸é˜»å¡ continue; &#125; else if(ret &gt; 0) &#123; // è¯´æ˜æ£€æµ‹åˆ°äº†æœ‰æ–‡ä»¶æè¿°ç¬¦çš„å¯¹åº”çš„ç¼“å†²åŒºçš„æ•°æ®å‘ç”Ÿäº†æ”¹å˜ if(FD_ISSET(lfd, &amp;tmp)) &#123; // æ£€æµ‹æœ‰æ–°å®¢æˆ·ç«¯è¿æ¥è¿›æ¥äº† // æ¥å—è¿æ¥ struct sockaddr_in cliaddr; socklen_t len = sizeof(cliaddr); int cfd = accept(lfd, (struct sockaddr *)&amp;cliaddr, &amp;len); char cliIP[16]; int cliport = ntohs(cliaddr.sin_port); inet_ntop(AF_INET, &amp;cliaddr.sin_addr.s_addr, cliIP, sizeof(cliIP)); printf(&quot;client IP : %s, prok %d\\n&quot;, cliIP, cliport); if(cfd == -1) &#123; perror(&quot;accept&quot;); exit(-1); &#125; // å°†æ–°æ–°çš„æ–‡ä»¶æè¿°ç¬¦åŠ å…¥çš„é›†åˆä¸­ FD_SET(cfd, &amp;rdset); // æ›´æ–°æœ€å¤§æ–‡ä»¶æè¿°ç¬¦ maxfd = maxfd &gt; cfd ? maxfd : cfd; &#125; for(int i = lfd + 1; i &lt;= maxfd; i++) &#123; if(FD_ISSET(i, &amp;tmp)) &#123; // è¯´æ˜è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦å¯¹åº”çš„å®¢æˆ·ç«¯å‘æ¥äº†æ•°æ® char buf[1024]; memset(buf, 0, sizeof(buf)); int len = read(i, buf, sizeof(buf)); if(len == -1) &#123; perror(&quot;read&quot;); exit(-1); &#125; else if(len == 0) &#123; printf(&quot;client closed ... ...\\n&quot;); FD_CLR(i, &amp;rdset); close(i); &#125; else if(len &gt; 0) &#123; printf(&quot;read buf = %s\\n&quot;, buf); write(i, buf, sizeof(buf)); &#125; &#125; &#125; &#125; &#125; close(lfd); return 0;&#125; client.c1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/************************************************************************* &gt; File Name: client.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´06æœˆ23æ—¥ æ˜ŸæœŸå›› 14æ—¶41åˆ†42ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt;// TCP é€šä¿¡å®¢æˆ·ç«¯int main() &#123; // 1.åˆ›å»ºå¥—æ¥å­— int fd = socket(AF_INET, SOCK_STREAM, 0); if(fd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // 2.è¿æ¥æœåŠ¡ struct sockaddr_in serveraddr; serveraddr.sin_family = AF_INET; serveraddr.sin_port = htons(5200); inet_pton(AF_INET, &quot;127.0.0.1&quot;, &amp;serveraddr.sin_addr.s_addr); int ret = connect(fd, (struct sockaddr *)&amp;serveraddr, sizeof(serveraddr)); if(ret == -1) &#123; perror(&quot;connect&quot;); exit(-1); &#125; // é€šä¿¡ char recvBuf[1024] = &#123;0&#125;; char data[1024]; while (1) &#123; memset(data, 0, sizeof(data)); // è·å–æ ‡å‡†è¾“å…¥(stdin)çš„æ•°æ® fgets(data, sizeof(data), stdin); write(fd, data, strlen(data)); int readLen = read(fd, recvBuf, sizeof(recvBuf)); if(readLen == -1) &#123; perror(&quot;read&quot;); exit(-1); &#125; else if(readLen &gt; 0) &#123; printf(&quot;recv server data : %s\\n&quot;, recvBuf); &#125; else if(readLen == 0) &#123; // è¡¨ç¤ºæœåŠ¡ç«¯æ–­å¼€è¿æ¥ printf(&quot;server closed ... ...\\n&quot;); break; &#125; &#125; // å…³é—­ close(fd); return 0;&#125; 3.poll12345678910111213141516171819202122#include &lt;poll.h&gt;struct pollfd &#123; int fd; /* å§”æ‰˜å†…æ ¸æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦ */ short events; /* å§”æ‰˜å†…æ ¸æ£€æµ‹æ–‡ä»¶æè¿°ç¬¦çš„ä»€ä¹ˆäº‹ä»¶ */ short revents; /* æ–‡ä»¶æè¿°ç¬¦å®é™…å‘ç”Ÿçš„äº‹ä»¶ */&#125;;struct pollfd myfd;myfd.fd = 5;myfd.events = POLLIN | POLLOUT;int poll(struct pollfd *fds, nfds_t nfds, int timeout); - å‚æ•°ï¼š - fds : æ˜¯ä¸€ä¸ªstruct pollfd ç»“æ„ä½“æ•°ç»„ï¼Œè¿™æ˜¯ä¸€ä¸ªéœ€è¦æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦çš„é›†åˆ - nfds : è¿™ä¸ªæ˜¯ç¬¬ä¸€ä¸ªå‚æ•°æ•°ç»„ä¸­æœ€åä¸€ä¸ªæœ‰æ•ˆå…ƒç´ çš„ä¸‹æ ‡ + 1 - timeout : é˜»å¡æ—¶é•¿(æ¯«ç§’) 0 : ä¸é˜»å¡ -1 : é˜»å¡ï¼Œå½“æ£€æµ‹åˆ°éœ€è¦æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦æœ‰å˜åŒ–ï¼Œè§£é™¤é˜»å¡ &gt;0 : é˜»å¡çš„æ—¶é•¿ - è¿”å›å€¼ï¼š -1 : å¤±è´¥ &gt;0ï¼ˆnï¼‰ : æˆåŠŸ,nè¡¨ç¤ºæ£€æµ‹åˆ°é›†åˆä¸­æœ‰nä¸ªæ–‡ä»¶æè¿°ç¬¦å‘ç”Ÿå˜åŒ– poll_server.c123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127/************************************************************************* &gt; File Name: select.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ02æ—¥ æ˜ŸæœŸå…­ 11æ—¶52åˆ†50ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;sys/time.h&gt;#include &lt;sys/types.h&gt;#include &lt;poll.h&gt;int main() &#123; // åˆ›å»ºsocket int lfd = socket(AF_INET,SOCK_STREAM ,0); printf(&quot; --- %d ---\\n&quot;, lfd); if(lfd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // ç»‘å®š struct sockaddr_in saddr; saddr.sin_family = AF_INET; saddr.sin_addr.s_addr = 0; // INADDR_ANY saddr.sin_port = htons(5200); int ret = bind(lfd, (struct sockaddr *)&amp;saddr, sizeof(saddr)); if(ret == -1) &#123; perror(&quot;bind&quot;); exit(-1); &#125; // ç›‘å¬ ret = listen(lfd, 8); if(ret == -1) &#123; perror(&quot;listen&quot;); exit(-1); &#125; // åˆå§‹åŒ–æ£€æµ‹æ–‡ä»¶æè¿°ç¬¦æ•°ç»„ const int MAX_N = 1024; struct pollfd fds[MAX_N]; for(int i = 0; i &lt; MAX_N; ++i) &#123; fds[i].fd = -1; fds[i].events = POLLIN; &#125; fds[0].fd = lfd; int nfds = 0; while (1) &#123; // è°ƒç”¨pollç³»ç»Ÿå‡½æ•°, è®©å†…æ ¸å¸®å¿™æ£€æµ‹å“ªäº›æ–‡ä»¶æè¿°ç¬¦æœ‰æ•°æ® ret = poll(fds, nfds + 1, -1); if(ret == -1) &#123; perror(&quot;poll&quot;); exit(-1); &#125; else if(ret == 0) &#123; // è®¾ç½®çš„è¶…æ—¶æ—¶é—´åˆ°äº†, è¿”å›å€¼æ‰æ˜¯, æ‰ä¼šæ‰§è¡Œ, è®¾ç½®çš„ä¸ºNULLä¹‹åæ£€æµ‹åˆ°æ¶ˆæ¯æ‰ä¼šä¸é˜»å¡ continue; &#125; else if(ret &gt; 0) &#123; // è¯´æ˜æ£€æµ‹åˆ°äº†æœ‰æ–‡ä»¶æè¿°ç¬¦çš„å¯¹åº”çš„ç¼“å†²åŒºçš„æ•°æ®å‘ç”Ÿäº†æ”¹å˜ // ä¸èƒ½ç”¨ == if(fds[0].revents &amp; POLLIN) &#123; // æ£€æµ‹æœ‰æ–°å®¢æˆ·ç«¯è¿æ¥è¿›æ¥äº† // æ¥å—è¿æ¥ struct sockaddr_in cliaddr; socklen_t len = sizeof(cliaddr); int cfd = accept(lfd, (struct sockaddr *)&amp;cliaddr, &amp;len); char cliIP[16]; int cliport = ntohs(cliaddr.sin_port); inet_ntop(AF_INET, &amp;cliaddr.sin_addr.s_addr, cliIP, sizeof(cliIP)); printf(&quot;client IP : %s, prok : %d fd : %d\\n&quot;, cliIP, cliport, cfd); if(cfd == -1) &#123; perror(&quot;accept&quot;); exit(-1); &#125; // å°†æ–°æ–°çš„æ–‡ä»¶æè¿°ç¬¦åŠ å…¥çš„é›†åˆä¸­ for(int i = 1; i &lt; MAX_N; i++) &#123; if(fds[i].fd != -1) continue; fds[i].fd = cfd; fds[i].events = POLLIN; break; &#125; // æ›´æ–°æœ€å¤§æ–‡ä»¶æè¿°ç¬¦ nfds = nfds &gt; cfd ? nfds : cfd; &#125; for(int i = 1; i &lt;= nfds; i++) &#123; if(fds[i].revents &amp; POLLIN) &#123; // è¯´æ˜è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦å¯¹åº”çš„å®¢æˆ·ç«¯å‘æ¥äº†æ•°æ® char buf[1024]; memset(buf, 0, sizeof(buf)); int len = read(fds[i].fd, buf, sizeof(buf)); if(len == -1) &#123; perror(&quot;read&quot;); exit(-1); &#125; else if(len == 0) &#123; printf(&quot;client closed ... ...\\n&quot;); fds[i].fd = -1; close(fds[i].fd); &#125; else if(len &gt; 0) &#123; printf(&quot;read buf = %s\\n&quot;, buf); write(fds[i].fd, buf, sizeof(buf)); &#125; &#125; &#125; &#125; &#125; close(lfd); return 0;&#125; client.c1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/************************************************************************* &gt; File Name: client.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´06æœˆ23æ—¥ æ˜ŸæœŸå›› 14æ—¶41åˆ†42ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt;// TCP é€šä¿¡å®¢æˆ·ç«¯int main() &#123; // 1.åˆ›å»ºå¥—æ¥å­— int fd = socket(AF_INET, SOCK_STREAM, 0); if(fd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // 2.è¿æ¥æœåŠ¡ struct sockaddr_in serveraddr; serveraddr.sin_family = AF_INET; serveraddr.sin_port = htons(5200); inet_pton(AF_INET, &quot;127.0.0.1&quot;, &amp;serveraddr.sin_addr.s_addr); int ret = connect(fd, (struct sockaddr *)&amp;serveraddr, sizeof(serveraddr)); if(ret == -1) &#123; perror(&quot;connect&quot;); exit(-1); &#125; // é€šä¿¡ char recvBuf[1024] = &#123;0&#125;; char data[1024]; while (1) &#123; memset(data, 0, sizeof(data)); // è·å–æ ‡å‡†è¾“å…¥(stdin)çš„æ•°æ® fgets(data, sizeof(data), stdin); write(fd, data, strlen(data)); int readLen = read(fd, recvBuf, sizeof(recvBuf)); if(readLen == -1) &#123; perror(&quot;read&quot;); exit(-1); &#125; else if(readLen &gt; 0) &#123; printf(&quot;recv server data : %s\\n&quot;, recvBuf); &#125; else if(readLen == 0) &#123; // è¡¨ç¤ºæœåŠ¡ç«¯æ–­å¼€è¿æ¥ printf(&quot;server closed ... ...\\n&quot;); break; &#125; &#125; // å…³é—­ close(fd); return 0;&#125; 4. epoll123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051#include &lt;sys/epoll.h&gt;// åˆ›å»ºä¸€ä¸ªæ–°çš„epollå®ä¾‹ã€‚åœ¨å†…æ ¸ä¸­åˆ›å»ºäº†ä¸€ä¸ªæ•°æ®ï¼Œè¿™ä¸ªæ•°æ®ä¸­æœ‰ä¸¤ä¸ªæ¯”è¾ƒé‡è¦çš„æ•°æ®ï¼Œä¸€ä¸ªæ˜¯éœ€è¦æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦çš„ä¿¡æ¯ï¼ˆçº¢é»‘æ ‘ï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯å°±ç»ªåˆ—è¡¨ï¼Œå­˜æ”¾æ£€æµ‹åˆ°æ•°æ®å‘é€æ”¹å˜çš„æ–‡ä»¶æè¿°ç¬¦ä¿¡æ¯ï¼ˆåŒå‘é“¾è¡¨ï¼‰ã€‚int epoll_create(int size); - å‚æ•°ï¼š size : (ä»¥å‰æ˜¯ä½¿ç”¨å“ˆå¸Œå®ç°çš„éœ€è¦ç”¨åˆ°size)ç›®å‰æ²¡æœ‰æ„ä¹‰äº†ã€‚éšä¾¿å†™ä¸€ä¸ªæ•°ï¼Œå¿…é¡»å¤§äº0 - è¿”å›å€¼ï¼š -1 : å¤±è´¥ &gt; 0 : æ–‡ä»¶æè¿°ç¬¦ï¼Œæ“ä½œepollå®ä¾‹çš„ typedef union epoll_data &#123; void *ptr; int fd; uint32_t u32; uint64_t u64;&#125; epoll_data_t;struct epoll_event &#123; uint32_t events; /* Epoll events */ epoll_data_t data; /* User data variable */&#125;;å¸¸è§çš„Epollæ£€æµ‹äº‹ä»¶ï¼š - EPOLLIN - EPOLLOUT - EPOLLERR ... ... // å¯¹epollå®ä¾‹è¿›è¡Œç®¡ç†ï¼šæ·»åŠ æ–‡ä»¶æè¿°ç¬¦ä¿¡æ¯ï¼Œåˆ é™¤ä¿¡æ¯ï¼Œä¿®æ”¹ä¿¡æ¯int epoll_ctl(int epfd, int op, int fd, struct epoll_event *event); - å‚æ•°ï¼š - epfd : epollå®ä¾‹å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ - op : è¦è¿›è¡Œä»€ä¹ˆæ“ä½œ EPOLL_CTL_ADD: æ·»åŠ  EPOLL_CTL_MOD: ä¿®æ”¹ EPOLL_CTL_DEL: åˆ é™¤ - fd : è¦æ£€æµ‹çš„æ–‡ä»¶æè¿°ç¬¦ - event : æ£€æµ‹æ–‡ä»¶æè¿°ç¬¦ä»€ä¹ˆäº‹æƒ…// æ£€æµ‹å‡½æ•°int epoll_wait(int epfd, struct epoll_event *events, int maxevents, inttimeout); - å‚æ•°: - epfd : epollå®ä¾‹å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦ - events : ä¼ å‡ºå‚æ•°ï¼Œä¿å­˜äº†å‘é€ äº†å˜åŒ–çš„æ–‡ä»¶æè¿°ç¬¦çš„ä¿¡æ¯ - maxevents : ç¬¬äºŒä¸ªå‚æ•°ç»“æ„ä½“æ•°ç»„çš„å¤§å° - timeout : é˜»å¡æ—¶é—´ - 0 : ä¸é˜»å¡ - -1 : é˜»å¡ï¼Œç›´åˆ°æ£€æµ‹åˆ°fdæ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œè§£é™¤é˜»å¡ - &gt; 0 : é˜»å¡çš„æ—¶é•¿ï¼ˆæ¯«ç§’ï¼‰ - è¿”å›å€¼: - æˆåŠŸï¼Œè¿”å›å‘é€å˜åŒ–çš„æ–‡ä»¶æè¿°ç¬¦çš„ä¸ªæ•° &gt; 0 - å¤±è´¥ -1 epoll_server.c123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115/************************************************************************* &gt; File Name: epoll.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ03æ—¥ æ˜ŸæœŸæ—¥ 15æ—¶07åˆ†46ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;string.h&gt;#include &lt;sys/epoll.h&gt;int main() &#123; // åˆ›å»ºsocket int lfd = socket(AF_INET, SOCK_STREAM, 0); if(lfd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // ç»‘å®š struct sockaddr_in saddr; saddr.sin_family = AF_INET; saddr.sin_addr.s_addr = INADDR_ANY; saddr.sin_port = htons(5200); int ret = bind(lfd, (struct sockaddr *)&amp;saddr, sizeof(saddr)); if(ret == -1) &#123; perror(&quot;bind&quot;); exit(-1); &#125; // ç›‘å¬ ret = listen(lfd, 5); if(ret == -1) &#123; perror(&quot;listen&quot;); exit(-1); &#125; // åˆ›å»ºä¸€ä¸ªepollå®ä¾‹ è°ƒç”¨epoll_create int epfd = epoll_create(100); // å°†ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦ç›¸å…³çš„æ£€æµ‹ä¿¡æ¯æ·»åŠ åˆ°epollå®ä¾‹ä¸­ struct epoll_event epev; epev.events = EPOLLIN; epev.data.fd = lfd; epoll_ctl(epfd, EPOLL_CTL_ADD, lfd, &amp;epev); // ç”¨äºæ”¾æ£€æµ‹åçš„æ•°æ® const int MAX_N = 1e3; struct epoll_event epevs[MAX_N]; while(1) &#123; ret = epoll_wait(epfd, epevs, MAX_N, -1); if(ret == -1) &#123; perror(&quot;epoll_wait&quot;); exit(-1); &#125; // æœ‰å‡ ä¸ªæ”¹å˜äº† printf(&quot;ret = %d \\n&quot;, ret); for(int i = 0; i &lt; ret; i++) &#123; int curfd = epevs[i].data.fd; if(curfd == lfd) &#123; // ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦æœ‰æ•°æ®åˆ°è¾¾, æœ‰å®¢æˆ·ç«¯è¿æ¥ struct sockaddr_in cliaddr; socklen_t len = sizeof(cliaddr); int cfd = accept(lfd, (struct sockaddr *) &amp;cliaddr, &amp;len); epev.events = EPOLLIN; epev.data.fd = cfd; epoll_ctl(epfd, EPOLL_CTL_ADD, cfd, &amp;epev); char cliIP[16]; int cliport = ntohs(cliaddr.sin_port); inet_ntop(AF_INET, &amp;cliaddr.sin_addr.s_addr, cliIP, sizeof(cliIP)); printf(&quot;client IP : %s, prok %d\\n&quot;, cliIP, cliport); &#125; else &#123; // æœ‰æ•°æ®åˆ°è¾¾äº†, éœ€è¦é€šä¿¡ char buf[1024]; memset(buf, 0, sizeof(buf)); int len = read(curfd, buf, sizeof(buf)); if(len == -1) &#123; perror(&quot;read&quot;); exit(-1); &#125; else if(len == 0) &#123; printf(&quot;client closed ... ...\\n&quot;); epoll_ctl(epfd, EPOLL_CTL_DEL, curfd, NULL); close(curfd); &#125; else if(len &gt; 0) &#123; printf(&quot;read buf = %s\\n&quot;, buf); write(curfd, buf, sizeof(buf)); &#125; &#125; &#125; &#125; close(lfd); close(epfd); return 0;&#125; client.c ç‚¹æˆ‘å‘ä¸Š Epoll çš„å·¥ä½œæ¨¡å¼ï¼š LT æ¨¡å¼ ï¼ˆæ°´å¹³è§¦å‘ï¼‰ â€‹ å‡è®¾å§”æ‰˜å†…æ ¸æ£€æµ‹è¯»äº‹ä»¶ -&gt; æ£€æµ‹fdçš„è¯»ç¼“å†²åŒº â€‹ è¯»ç¼“å†²åŒºæœ‰æ•°æ® - &gt; epollæ£€æµ‹åˆ°äº†ä¼šç»™ç”¨æˆ·é€šçŸ¥ â€‹ a.ç”¨æˆ·ä¸è¯»æ•°æ®ï¼Œæ•°æ®ä¸€ç›´åœ¨ç¼“å†²åŒºï¼Œepoll ä¼šä¸€ç›´é€šçŸ¥ â€‹ b.ç”¨æˆ·åªè¯»äº†ä¸€éƒ¨åˆ†æ•°æ®ï¼Œepollä¼šé€šçŸ¥ â€‹ c.ç¼“å†²åŒºçš„æ•°æ®è¯»å®Œäº†ï¼Œä¸é€šçŸ¥ LTï¼ˆlevel - triggeredï¼‰æ˜¯ç¼ºçœçš„å·¥ä½œæ–¹å¼ï¼Œå¹¶ä¸”åŒæ—¶æ”¯æŒ block å’Œ no-block socketã€‚åœ¨è¿™ ç§åšæ³•ä¸­ï¼Œå†…æ ¸å‘Šè¯‰ä½ ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦æ˜¯å¦å°±ç»ªäº†ï¼Œç„¶åä½ å¯ä»¥å¯¹è¿™ä¸ªå°±ç»ªçš„ fd è¿›è¡Œ IO æ“ ä½œã€‚å¦‚æœä½ ä¸ä½œä»»ä½•æ“ä½œï¼Œå†…æ ¸è¿˜æ˜¯ä¼šç»§ç»­é€šçŸ¥ä½ çš„ã€‚ ET æ¨¡å¼ï¼ˆè¾¹æ²¿è§¦å‘ï¼‰ â€‹ å‡è®¾å§”æ‰˜å†…æ ¸æ£€æµ‹è¯»äº‹ä»¶ -&gt; æ£€æµ‹fdçš„è¯»ç¼“å†²åŒº â€‹ è¯»ç¼“å†²åŒºæœ‰æ•°æ® - &gt; epollæ£€æµ‹åˆ°äº†ä¼šç»™ç”¨æˆ·é€šçŸ¥ â€‹ a.ç”¨æˆ·ä¸è¯»æ•°æ®ï¼Œæ•°æ®ä¸€è‡´åœ¨ç¼“å†²åŒºä¸­ï¼Œepollä¸‹æ¬¡æ£€æµ‹çš„æ—¶å€™å°±ä¸é€šçŸ¥äº† â€‹ b.ç”¨æˆ·åªè¯»äº†ä¸€éƒ¨åˆ†æ•°æ®ï¼Œepollä¸é€šçŸ¥ â€‹ c.ç¼“å†²åŒºçš„æ•°æ®è¯»å®Œäº†ï¼Œä¸é€šçŸ¥ ETï¼ˆedge - triggeredï¼‰æ˜¯é«˜é€Ÿå·¥ä½œæ–¹å¼ï¼Œåªæ”¯æŒ no-block socketã€‚åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œå½“æè¿° ç¬¦ä»æœªå°±ç»ªå˜ä¸ºå°±ç»ªæ—¶ï¼Œå†…æ ¸é€šè¿‡epollå‘Šè¯‰ä½ ã€‚ç„¶åå®ƒä¼šå‡è®¾ä½ çŸ¥é“æ–‡ä»¶æè¿°ç¬¦å·²ç»å°±ç»ªï¼Œ å¹¶ä¸”ä¸ä¼šå†ä¸ºé‚£ä¸ªæ–‡ä»¶æè¿°ç¬¦å‘é€æ›´å¤šçš„å°±ç»ªé€šçŸ¥ï¼Œç›´åˆ°ä½ åšäº†æŸäº›æ“ä½œå¯¼è‡´é‚£ä¸ªæ–‡ä»¶æè¿° ç¬¦ä¸å†ä¸ºå°±ç»ªçŠ¶æ€äº†ã€‚ä½†æ˜¯è¯·æ³¨æ„ï¼Œå¦‚æœä¸€ç›´ä¸å¯¹è¿™ä¸ª fd ä½œ IO æ“ä½œï¼ˆä»è€Œå¯¼è‡´å®ƒå†æ¬¡å˜æˆ æœªå°±ç»ªï¼‰ï¼Œå†…æ ¸ä¸ä¼šå‘é€æ›´å¤šçš„é€šçŸ¥ï¼ˆonly onceï¼‰ã€‚ ET æ¨¡å¼åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå‡å°‘äº† epoll äº‹ä»¶è¢«é‡å¤è§¦å‘çš„æ¬¡æ•°ï¼Œå› æ­¤æ•ˆç‡è¦æ¯” LT æ¨¡å¼é«˜ã€‚epoll å·¥ä½œåœ¨ ET æ¨¡å¼çš„æ—¶å€™ï¼Œå¿…é¡»ä½¿ç”¨éé˜»å¡å¥—æ¥å£ï¼Œä»¥é¿å…ç”±äºä¸€ä¸ªæ–‡ä»¶å¥æŸ„çš„é˜»å¡è¯»&#x2F;é˜»å¡å†™ æ“ä½œæŠŠå¤„ç†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦çš„ä»»åŠ¡é¥¿æ­»ã€‚ 123456789struct epoll_event &#123; uint32_t events; /* Epoll events */ epoll_data_t data; /* User data variable */&#125;;å¸¸è§çš„Epollæ£€æµ‹äº‹ä»¶ï¼š - EPOLLIN - EPOLLOUT - EPOLLERR - EPOLLET // è¾¹æ²¿è§¦å‘ epoll_LT123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115/************************************************************************* &gt; File Name: epoll.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ03æ—¥ æ˜ŸæœŸæ—¥ 15æ—¶07åˆ†46ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;string.h&gt;#include &lt;sys/epoll.h&gt;int main() &#123; // åˆ›å»ºsocket int lfd = socket(AF_INET, SOCK_STREAM, 0); if(lfd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // ç»‘å®š struct sockaddr_in saddr; saddr.sin_family = AF_INET; saddr.sin_addr.s_addr = INADDR_ANY; saddr.sin_port = htons(5200); int ret = bind(lfd, (struct sockaddr *)&amp;saddr, sizeof(saddr)); if(ret == -1) &#123; perror(&quot;bind&quot;); exit(-1); &#125; // ç›‘å¬ ret = listen(lfd, 5); if(ret == -1) &#123; perror(&quot;listen&quot;); exit(-1); &#125; // åˆ›å»ºä¸€ä¸ªepollå®ä¾‹ è°ƒç”¨epoll_create int epfd = epoll_create(100); // å°†ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦ç›¸å…³çš„æ£€æµ‹ä¿¡æ¯æ·»åŠ åˆ°epollå®ä¾‹ä¸­ struct epoll_event epev; epev.events = EPOLLIN; epev.data.fd = lfd; epoll_ctl(epfd, EPOLL_CTL_ADD, lfd, &amp;epev); // ç”¨äºæ”¾æ£€æµ‹åçš„æ•°æ® const int MAX_N = 1e3; struct epoll_event epevs[MAX_N]; while(1) &#123; ret = epoll_wait(epfd, epevs, MAX_N, -1); if(ret == -1) &#123; perror(&quot;epoll_wait&quot;); exit(-1); &#125; // æœ‰å‡ ä¸ªæ”¹å˜äº† printf(&quot;ret = %d \\n&quot;, ret); for(int i = 0; i &lt; ret; i++) &#123; int curfd = epevs[i].data.fd; if(curfd == lfd) &#123; // ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦æœ‰æ•°æ®åˆ°è¾¾, æœ‰å®¢æˆ·ç«¯è¿æ¥ struct sockaddr_in cliaddr; socklen_t len = sizeof(cliaddr); int cfd = accept(lfd, (struct sockaddr *) &amp;cliaddr, &amp;len); epev.events = EPOLLIN; epev.data.fd = cfd; epoll_ctl(epfd, EPOLL_CTL_ADD, cfd, &amp;epev); char cliIP[16]; int cliport = ntohs(cliaddr.sin_port); inet_ntop(AF_INET, &amp;cliaddr.sin_addr.s_addr, cliIP, sizeof(cliIP)); printf(&quot;client IP : %s, prok %d\\n&quot;, cliIP, cliport); memset(cliIP, 0, sizeof(cliIP)); &#125; else &#123; // æœ‰æ•°æ®åˆ°è¾¾äº†, éœ€è¦é€šä¿¡ char buf[5] = &#123;0&#125;; // memset(buf, 0, sizeof(buf)); int len = read(curfd, buf, sizeof(buf)); if(len == -1) &#123; perror(&quot;read&quot;); exit(-1); &#125; else if(len == 0) &#123; printf(&quot;client closed ... ...\\n&quot;); epoll_ctl(epfd, EPOLL_CTL_DEL, curfd, NULL); close(curfd); &#125; else if(len &gt; 0) &#123; printf(&quot;read buf = %s\\n&quot;, buf); write(curfd, buf, sizeof(buf)); &#125; &#125; &#125; &#125; close(lfd); close(epfd); return 0;&#125; epoll_ET123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131/************************************************************************* &gt; File Name: epoll.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´07æœˆ03æ—¥ æ˜ŸæœŸæ—¥ 15æ—¶07åˆ†46ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;string.h&gt;#include &lt;sys/epoll.h&gt;#include &lt;fcntl.h&gt;#include &lt;errno.h&gt;int main() &#123; // åˆ›å»ºsocket int lfd = socket(AF_INET, SOCK_STREAM, 0); if(lfd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // ç»‘å®š struct sockaddr_in saddr; saddr.sin_family = AF_INET; saddr.sin_addr.s_addr = INADDR_ANY; saddr.sin_port = htons(5200); int ret = bind(lfd, (struct sockaddr *)&amp;saddr, sizeof(saddr)); if(ret == -1) &#123; perror(&quot;bind&quot;); exit(-1); &#125; // ç›‘å¬ ret = listen(lfd, 5); if(ret == -1) &#123; perror(&quot;listen&quot;); exit(-1); &#125; // åˆ›å»ºä¸€ä¸ªepollå®ä¾‹ è°ƒç”¨epoll_create int epfd = epoll_create(100); // å°†ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦ç›¸å…³çš„æ£€æµ‹ä¿¡æ¯æ·»åŠ åˆ°epollå®ä¾‹ä¸­ struct epoll_event epev; epev.events = EPOLLIN; epev.data.fd = lfd; epoll_ctl(epfd, EPOLL_CTL_ADD, lfd, &amp;epev); // ç”¨äºæ”¾æ£€æµ‹åçš„æ•°æ® const int MAX_N = 1e3; struct epoll_event epevs[MAX_N]; while(1) &#123; ret = epoll_wait(epfd, epevs, MAX_N, -1); if(ret == -1) &#123; perror(&quot;epoll_wait&quot;); exit(-1); &#125; // æœ‰å‡ ä¸ªæ”¹å˜äº† printf(&quot;ret = %d \\n&quot;, ret); for(int i = 0; i &lt; ret; i++) &#123; int curfd = epevs[i].data.fd; if(curfd == lfd) &#123; // ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦æœ‰æ•°æ®åˆ°è¾¾, æœ‰å®¢æˆ·ç«¯è¿æ¥ struct sockaddr_in cliaddr; socklen_t len = sizeof(cliaddr); int cfd = accept(lfd, (struct sockaddr *) &amp;cliaddr, &amp;len); // è®¾ç½®cfdå±æ€§éé˜»å¡ int flag = fcntl(cfd, F_GETFL); flag |= O_NONBLOCK; fcntl(cfd, F_SETFL, flag); epev.events = EPOLLIN | EPOLLET; // è®¾ç½®è¾¹æ²¿è§¦å‘ epev.data.fd = cfd; epoll_ctl(epfd, EPOLL_CTL_ADD, cfd, &amp;epev); char cliIP[16]; int cliport = ntohs(cliaddr.sin_port); inet_ntop(AF_INET, &amp;cliaddr.sin_addr.s_addr, cliIP, sizeof(cliIP)); printf(&quot;client IP : %s, prok %d\\n&quot;, cliIP, cliport); memset(cliIP, 0, sizeof(cliIP)); &#125; else &#123; // å¾ªç¯è¯»å–æ‰€æœ‰çš„æ•°æ® int len = 0; char buf[5] = &#123;0&#125;; while((len = read(curfd, buf, sizeof(buf))) &gt; 0) &#123; // æ‰“å°æ•°æ® // printf(&quot;recv data : %s \\n&quot;, buf); write(STDOUT_FILENO, buf, len); write(curfd, buf, len); &#125; if(len == 0) &#123; printf(&quot;client closed ... ...\\n&quot;); &#125; else if(len == -1) &#123; // æ•°æ®è¯»å®Œåˆè¯»éé˜»å¡çš„å°±ä¼šäº§ç”Ÿä¸€ä¸ªé”™è¯¯ if(errno == EAGAIN) &#123; printf(&quot;data over ... ...\\n&quot;); &#125; else &#123; perror(&quot;read&quot;); exit(-1); &#125; &#125; &#125; &#125; &#125; close(lfd); close(epfd); return 0;&#125;","categories":[{"name":"Linuxç½‘ç»œç¼–ç¨‹","slug":"Linuxç½‘ç»œç¼–ç¨‹","permalink":"https://tutouwang.vercel.app/categories/Linux%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"}],"tags":[]},{"title":"socketé€šä¿¡åŸºç¡€","slug":"Linuxç½‘ç»œç¼–ç¨‹/socketé€šä¿¡åŸºç¡€","date":"2022-06-17T02:42:10.000Z","updated":"2022-07-01T01:47:26.917Z","comments":true,"path":"2022/06/17/Linuxç½‘ç»œç¼–ç¨‹/socketé€šä¿¡åŸºç¡€/","link":"","permalink":"https://tutouwang.vercel.app/2022/06/17/Linux%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/socket%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80/","excerpt":"","text":"1.socketä»‹ç» æ‰€è°“ socketï¼ˆå¥—æ¥å­—ï¼‰ï¼Œå°±æ˜¯å¯¹ç½‘ç»œä¸­ä¸åŒä¸»æœºä¸Šçš„åº”ç”¨è¿›ç¨‹ä¹‹é—´è¿›è¡ŒåŒå‘é€šä¿¡çš„ç«¯ç‚¹çš„æŠ½è±¡ã€‚ ä¸€ä¸ªå¥—æ¥å­—å°±æ˜¯ç½‘ç»œä¸Šè¿›ç¨‹é€šä¿¡çš„ä¸€ç«¯ï¼Œæä¾›äº†åº”ç”¨å±‚è¿›ç¨‹åˆ©ç”¨ç½‘ç»œåè®®äº¤æ¢æ•°æ®çš„æœºåˆ¶ã€‚ä»æ‰€å¤„ çš„åœ°ä½æ¥è®²ï¼Œå¥—æ¥å­—ä¸Šè”åº”ç”¨è¿›ç¨‹ï¼Œä¸‹è”ç½‘ç»œåè®®æ ˆï¼Œæ˜¯åº”ç”¨ç¨‹åºé€šè¿‡ç½‘ç»œåè®®è¿›è¡Œé€šä¿¡çš„æ¥å£ï¼Œ æ˜¯åº”ç”¨ç¨‹åºä¸ç½‘ç»œåè®®æ ¹è¿›è¡Œäº¤äº’çš„æ¥å£ã€‚ socket å¯ä»¥çœ‹æˆæ˜¯ä¸¤ä¸ªç½‘ç»œåº”ç”¨ç¨‹åºè¿›è¡Œé€šä¿¡æ—¶ï¼Œå„è‡ªé€šä¿¡è¿æ¥ä¸­çš„ç«¯ç‚¹ï¼Œè¿™æ˜¯ä¸€ä¸ªé€»è¾‘ä¸Šçš„æ¦‚ å¿µã€‚å®ƒæ˜¯ç½‘ç»œç¯å¢ƒä¸­è¿›ç¨‹é—´é€šä¿¡çš„ APIï¼Œä¹Ÿæ˜¯å¯ä»¥è¢«å‘½åå’Œå¯»å€çš„é€šä¿¡ç«¯ç‚¹ï¼Œä½¿ç”¨ä¸­çš„æ¯ä¸€ä¸ªå¥—æ¥ å­—éƒ½æœ‰å…¶ç±»å‹å’Œä¸€ä¸ªä¸ä¹‹ç›¸è¿è¿›ç¨‹ã€‚é€šä¿¡æ—¶å…¶ä¸­ä¸€ä¸ªç½‘ç»œåº”ç”¨ç¨‹åºå°†è¦ä¼ è¾“çš„ä¸€æ®µä¿¡æ¯å†™å…¥å®ƒæ‰€åœ¨ ä¸»æœºçš„ socket ä¸­ï¼Œè¯¥ socket é€šè¿‡ä¸ç½‘ç»œæ¥å£å¡ï¼ˆNICï¼‰ç›¸è¿çš„ä¼ è¾“ä»‹è´¨å°†è¿™æ®µä¿¡æ¯é€åˆ°å¦å¤–ä¸€å° ä¸»æœºçš„ socket ä¸­ï¼Œä½¿å¯¹æ–¹èƒ½å¤Ÿæ¥æ”¶åˆ°è¿™æ®µä¿¡æ¯ã€‚socket æ˜¯ç”± IP åœ°å€å’Œç«¯å£ç»“åˆçš„ï¼Œæä¾›å‘åº”ç”¨ å±‚è¿›ç¨‹ä¼ é€æ•°æ®åŒ…çš„æœºåˆ¶ã€‚ socket æœ¬èº«æœ‰â€œæ’åº§â€çš„æ„æ€ï¼Œåœ¨ Linux ç¯å¢ƒä¸‹ï¼Œç”¨äºè¡¨ç¤ºè¿›ç¨‹é—´ç½‘ç»œé€šä¿¡çš„ç‰¹æ®Šæ–‡ä»¶ç±»å‹ã€‚æœ¬è´¨ä¸º å†…æ ¸å€ŸåŠ©ç¼“å†²åŒºå½¢æˆçš„ä¼ªæ–‡ä»¶ã€‚æ—¢ç„¶æ˜¯æ–‡ä»¶ï¼Œé‚£ä¹ˆç†æ‰€å½“ç„¶çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ–‡ä»¶æè¿°ç¬¦å¼•ç”¨å¥—æ¥ å­—ã€‚ä¸ç®¡é“ç±»ä¼¼çš„ï¼ŒLinux ç³»ç»Ÿå°†å…¶å°è£…æˆæ–‡ä»¶çš„ç›®çš„æ˜¯ä¸ºäº†ç»Ÿä¸€æ¥å£ï¼Œä½¿å¾—è¯»å†™å¥—æ¥å­—å’Œè¯»å†™æ–‡ ä»¶çš„æ“ä½œä¸€è‡´ã€‚åŒºåˆ«æ˜¯ç®¡é“ä¸»è¦åº”ç”¨äºæœ¬åœ°è¿›ç¨‹é—´é€šä¿¡ï¼Œè€Œå¥—æ¥å­—å¤šåº”ç”¨äºç½‘ç»œè¿›ç¨‹é—´æ•°æ®çš„ä¼  é€’ã€‚ 1234// å¥—æ¥å­—é€šä¿¡åˆ†ä¸¤éƒ¨åˆ†ï¼š- æœåŠ¡å™¨ç«¯ï¼šè¢«åŠ¨æ¥å—è¿æ¥ï¼Œä¸€èˆ¬ä¸ä¼šä¸»åŠ¨å‘èµ·è¿æ¥- å®¢æˆ·ç«¯ï¼šä¸»åŠ¨å‘æœåŠ¡å™¨å‘èµ·è¿æ¥socketæ˜¯ä¸€å¥—é€šä¿¡çš„æ¥å£ï¼ŒLinux å’Œ Windows éƒ½æœ‰ï¼Œä½†æ˜¯æœ‰ä¸€äº›ç»†å¾®çš„å·®åˆ« 2. å­—èŠ‚åºç®€ä»‹ ç°ä»£ CPU çš„ç´¯åŠ å™¨ä¸€æ¬¡éƒ½èƒ½è£…è½½ï¼ˆè‡³å°‘ï¼‰4 å­—èŠ‚ï¼ˆè¿™é‡Œè€ƒè™‘ 32 ä½æœºï¼‰ï¼Œå³ä¸€ä¸ªæ•´æ•°ã€‚é‚£ä¹ˆè¿™ 4 å­—èŠ‚åœ¨å†…å­˜ä¸­æ’åˆ—çš„é¡ºåºå°†å½±å“å®ƒè¢«ç´¯åŠ å™¨è£…è½½æˆçš„æ•´æ•°çš„å€¼ï¼Œè¿™å°±æ˜¯å­—èŠ‚åºé—®é¢˜ã€‚åœ¨å„ç§è®¡ç®—æœº ä½“ç³»ç»“æ„ä¸­ï¼Œå¯¹äºå­—èŠ‚ã€å­—ç­‰çš„å­˜å‚¨æœºåˆ¶æœ‰æ‰€ä¸åŒï¼Œå› è€Œå¼•å‘äº†è®¡ç®—æœºé€šä¿¡é¢†åŸŸä¸­ä¸€ä¸ªå¾ˆé‡è¦çš„é—® é¢˜ï¼Œå³é€šä¿¡åŒæ–¹äº¤æµçš„ä¿¡æ¯å•å…ƒï¼ˆæ¯”ç‰¹ã€å­—èŠ‚ã€å­—ã€åŒå­—ç­‰ç­‰ï¼‰åº”è¯¥ä»¥ä»€ä¹ˆæ ·çš„é¡ºåºè¿›è¡Œä¼ é€ã€‚å¦‚ æœä¸è¾¾æˆä¸€è‡´çš„è§„åˆ™ï¼Œé€šä¿¡åŒæ–¹å°†æ— æ³•è¿›è¡Œæ­£ç¡®çš„ç¼–ç &#x2F;è¯‘ç ä»è€Œå¯¼è‡´é€šä¿¡å¤±è´¥ã€‚ å­—èŠ‚åºï¼Œé¡¾åæ€ä¹‰å­—èŠ‚çš„é¡ºåºï¼Œå°±æ˜¯å¤§äºä¸€ä¸ªå­—èŠ‚ç±»å‹çš„æ•°æ®åœ¨å†…å­˜ä¸­çš„å­˜æ”¾é¡ºåº(ä¸€ä¸ªå­—èŠ‚çš„æ•° æ®å½“ç„¶å°±æ— éœ€è°ˆé¡ºåºçš„é—®é¢˜äº†)ã€‚ å­—èŠ‚åºåˆ†ä¸ºå¤§ç«¯å­—èŠ‚åºï¼ˆBig-Endianï¼‰ å’Œå°ç«¯å­—èŠ‚åºï¼ˆLittle-Endianï¼‰ã€‚å¤§ç«¯å­—èŠ‚åºæ˜¯æŒ‡ä¸€ä¸ªæ•´ æ•°çš„æœ€é«˜ä½å­—èŠ‚ï¼ˆ23 ~ 31 bitï¼‰å­˜å‚¨åœ¨å†…å­˜çš„ä½åœ°å€å¤„ï¼Œä½ä½å­—èŠ‚ï¼ˆ0 ~ 7 bitï¼‰å­˜å‚¨åœ¨å†…å­˜çš„é«˜åœ° å€å¤„ï¼›å°ç«¯å­—èŠ‚åºåˆ™æ˜¯æŒ‡æ•´æ•°çš„é«˜ä½å­—èŠ‚å­˜å‚¨åœ¨å†…å­˜çš„é«˜åœ°å€å¤„ï¼Œè€Œä½ä½å­—èŠ‚åˆ™å­˜å‚¨åœ¨å†…å­˜çš„ä½åœ° å€å¤„ã€‚ å­—èŠ‚åºä¸¾ä¾‹ å°ç«¯å­—èŠ‚åº â€‹ 0x 01 02 03 04 - ff &#x3D; 255 â€‹ å†…å­˜çš„æ–¹å‘ â€”â€“&gt; â€‹ å†…å­˜çš„ä½ä½ â€”â€“&gt; å†…å­˜çš„é«˜ä½ â€‹ 04 03 02 01 â€‹ 0x 11 22 33 44 12 34 56 78 å¤§ç«¯å­—èŠ‚åº â€‹ 0x 01 02 03 04 â€‹ å†…å­˜çš„æ–¹å‘â€”â€“ &gt; â€‹ å†…å­˜çš„ä½ä½ â€”â€“&gt; å†…å­˜çš„é«˜ä½ â€‹ 01 02 03 04 â€‹ 0x 12 34 56 78 11 22 33 44 æŸ¥çœ‹æœ¬æœºæ˜¯ å¤§ç«¯å­—èŠ‚åº or å°ç«¯å­—èŠ‚åº1234567891011121314151617181920212223242526272829303132333435363738394041424344/************************************************************************* &gt; File Name: byteorder.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´06æœˆ18æ—¥ æ˜ŸæœŸå…­ 14æ—¶51åˆ†19ç§’ ************************************************************************//* * å­—èŠ‚åº: å­—èŠ‚åœ¨å†…å­˜ä¸­å­˜å‚¨çš„é¡ºåº * å°ç«¯å­—èŠ‚åº: æ•°æ®çš„é«˜ä½å­—èŠ‚å­˜å‚¨åœ¨å†…å­˜çš„é«˜ä½åœ°å€,ä½ä½å­—èŠ‚å­˜å‚¨åœ¨å†…å­˜çš„åº•ä½åœ°å€ã€‚ * å¤§ç«¯å­—èŠ‚åº: æ•°æ®çš„åº•ä½å­—èŠ‚å­˜å‚¨åœ¨å†…å­˜çš„é«˜ä½åœ°å€,é«˜ä½å­—èŠ‚å­˜å‚¨åœ¨å†…å­˜çš„åº•ä½åœ°å€ã€‚ * *///é€šè¿‡ä»£ç æ£€æµ‹å½“å‰ä¸»æœºçš„å­—èŠ‚åº#include &lt;stdio.h&gt;int main() &#123; union&#123; // 2 å­—èŠ‚ short value; // 2 å­—èŠ‚ char bytes[sizeof(short)]; &#125; test; test.value = 0x0102; printf(&quot;%d\\n&quot;, test.bytes[0]); if((test.bytes[0] == 1) &amp;&amp; (test.bytes[1] == 2)) &#123; printf(&quot;å¤§ç«¯å­—èŠ‚åº\\n&quot;); &#125; else if((test.bytes[0] == 2) &amp;&amp; (test.bytes[1] == 1))&#123; printf(&quot;å°ç«¯å­—èŠ‚åº\\n&quot;); &#125; else &#123; printf(&quot;%d --- %d \\n&quot;, test.bytes[0], test.bytes[1]); printf(&quot;æœªçŸ¥\\n&quot;); &#125; return 0;&#125; å­—èŠ‚åºè½¬æ¢å‡½æ•°å½“æ ¼å¼åŒ–çš„æ•°æ®åœ¨ä¸¤å°ä½¿ç”¨ä¸åŒå­—èŠ‚åºçš„ä¸»æœºä¹‹é—´ç›´æ¥ä¼ é€’æ—¶ï¼Œæ¥æ”¶ç«¯å¿…ç„¶é”™è¯¯çš„è§£é‡Šä¹‹ã€‚è§£å†³é—®é¢˜çš„ æ–¹æ³•æ˜¯ï¼šå‘é€ç«¯æ€»æ˜¯æŠŠè¦å‘é€çš„æ•°æ®è½¬æ¢æˆå¤§ç«¯å­—èŠ‚åºæ•°æ®åå†å‘é€ï¼Œè€Œæ¥æ”¶ç«¯çŸ¥é“å¯¹æ–¹ä¼ é€è¿‡æ¥çš„æ•° æ®æ€»æ˜¯é‡‡ç”¨å¤§ç«¯å­—èŠ‚åºï¼Œæ‰€ä»¥æ¥æ”¶ç«¯å¯ä»¥æ ¹æ®è‡ªèº«é‡‡ç”¨çš„å­—èŠ‚åºå†³å®šæ˜¯å¦å¯¹æ¥æ”¶åˆ°çš„æ•°æ®è¿›è¡Œè½¬æ¢ï¼ˆå° ç«¯æœºè½¬æ¢ï¼Œå¤§ç«¯æœºä¸è½¬æ¢ï¼‰ã€‚ ç½‘ç»œå­—èŠ‚é¡ºåºæ˜¯ TCP&#x2F;IP ä¸­è§„å®šå¥½çš„ä¸€ç§æ•°æ®è¡¨ç¤ºæ ¼å¼ï¼Œå®ƒä¸å…·ä½“çš„ CPU ç±»å‹ã€æ“ä½œç³»ç»Ÿç­‰æ— å…³ï¼Œä»è€Œ å¯ä»¥ä¿è¯æ•°æ®åœ¨ä¸åŒä¸»æœºä¹‹é—´ä¼ è¾“æ—¶èƒ½å¤Ÿè¢«æ­£ç¡®è§£é‡Šï¼Œç½‘ç»œå­—èŠ‚é¡ºåºé‡‡ç”¨å¤§ç«¯æ’åºæ–¹å¼ã€‚ BSD Socketæä¾›äº†å°è£…å¥½çš„è½¬æ¢æ¥å£ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜ä½¿ç”¨ã€‚åŒ…æ‹¬ä»ä¸»æœºå­—èŠ‚åºåˆ°ç½‘ç»œå­—èŠ‚åºçš„è½¬æ¢å‡½æ•°ï¼š htonsã€htonlï¼›ä»ç½‘ç»œå­—èŠ‚åºåˆ°ä¸»æœºå­—èŠ‚åºçš„è½¬æ¢å‡½æ•°ï¼šntohsã€ntohlã€‚ 12345h - host ä¸»æœºï¼Œä¸»æœºå­—èŠ‚åºto - è½¬æ¢æˆä»€ä¹ˆn - network ç½‘ç»œå­—èŠ‚åºs - short unsigned shortl - long unsigned int 1234567#include &lt;arpa/inet.h&gt;// è½¬æ¢ç«¯å£uint16_t htons(uint16_t hostshort); // ä¸»æœºå­—èŠ‚åº - ç½‘ç»œå­—èŠ‚åºuint16_t ntohs(uint16_t netshort); // ç½‘ç»œå­—èŠ‚åº - ä¸»æœºå­—èŠ‚åº // è½¬IPuint32_t htonl(uint32_t hostlong); // ä¸»æœºå­—èŠ‚åº - ç½‘ç»œå­—èŠ‚åºuint32_t ntohl(uint32_t netlong); // ç½‘ç»œå­—èŠ‚åº - ä¸»æœºå­—èŠ‚åº ä»£ç å®ç° ç½‘ç»œå­—èŠ‚åº ä¸ ä¸»æœºå­—èŠ‚åº è½¬æ¢12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061/************************************************************************* &gt; File Name: byterans.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´06æœˆ18æ—¥ æ˜ŸæœŸå…­ 22æ—¶47åˆ†04ç§’ ************************************************************************//* ç½‘ç»œé€šä¿¡æ—¶,éœ€è¦å°†ä¸»æœºå­—èŠ‚åºè½¬æ¢æˆç½‘ç»œå­—èŠ‚åº(å¤§ç«¯),å¦å¤–ä¸€ç«¯è·å–åˆ°æ•°æ®ä»¥åæ ¹æ®æƒ…å†µå°†ç½‘ç»œå­—èŠ‚åºè½¬æ¢æˆä¸»æœºå­—èŠ‚åºã€‚ #include &lt;arpa/inet.h&gt; // è½¬æ¢ç«¯å£ uint16_t htons(uint16_t hostshort); // ä¸»æœºå­—èŠ‚åº - ç½‘ç»œå­—èŠ‚åº uint16_t ntohs(uint16_t netshort); // ç½‘ç»œå­—èŠ‚åº - ä¸»æœºå­—èŠ‚åº // è½¬IP uint32_t htonl(uint32_t hostlong); // ä¸»æœºå­—èŠ‚åº - ç½‘ç»œå­—èŠ‚åº uint32_t ntohl(uint32_t netlong); // ç½‘ç»œå­—èŠ‚åº - ä¸»æœºå­—èŠ‚åº */#include &lt;stdio.h&gt;#include &lt;arpa/inet.h&gt;int main() &#123; // htons è½¬æ¢ç«¯å£ unsigned short a = 0x0102; unsigned short b = htons(a); printf(&quot;0xa = %x \\n0xb = %x\\n&quot;, a, b); printf(&quot;\\n==================================\\n\\n&quot;); // htol è½¬æ¢ID char buf[4] = &#123;192, 168, 1, 100&#125;; int num = *(int *)buf; // printf(&quot;%d&quot;, num); int sum = htonl(num); unsigned char *p = (char *)&amp;sum; printf(&quot;%d %d %d %d\\n&quot;, *p, *(p + 1), *(p + 2), *(p + 3)); printf(&quot;\\n==================================\\n\\n&quot;); // ntohl unsigned char buf1[4] = &#123;1, 1, 168, 192&#125;; int num1 = *(int *)buf1; int sum1 = ntohl(num1); unsigned char *p1 = (unsigned char *) &amp;sum1; printf(&quot;%d %d %d %d\\n&quot;, *p1, *(p1 + 1), *(p1 + 2), *(p1 + 3)); printf(&quot;\\n==================================\\n\\n&quot;); // ntohs unsigned short a1 = 0x0201; unsigned short b1 = ntohs(a1); printf(&quot;0xa1 = %x\\n0xb1 = %x\\n&quot;, a1, b1); return 0;&#125; 3. socket åœ°å€123// socketåœ°å€å…¶å®æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œå°è£…ç«¯å£å·å’ŒIPç­‰ä¿¡æ¯ã€‚åé¢çš„socketç›¸å…³çš„apiä¸­éœ€è¦ä½¿ç”¨åˆ°è¿™ä¸ªsocketåœ°å€ã€‚// å®¢æˆ·ç«¯ -&gt; æœåŠ¡å™¨ï¼ˆIP, Portï¼‰ é€šç”¨ socket åœ°å€socket ç½‘ç»œç¼–ç¨‹æ¥å£ä¸­è¡¨ç¤º socket åœ°å€çš„æ˜¯ç»“æ„ä½“ sockaddrï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š 123456#include &lt;bits/socket.h&gt;struct sockaddr &#123; sa_family_t sa_family; char sa_data[14];&#125;;typedef unsigned short int sa_family_t; sa_family æˆå‘˜æ˜¯åœ°å€æ—ç±»å‹ï¼ˆsa_family_tï¼‰çš„å˜é‡ã€‚åœ°å€æ—ç±»å‹é€šå¸¸ä¸åè®®æ—ç±»å‹å¯¹åº”ã€‚å¸¸è§çš„åè®® æ—ï¼ˆprotocol familyï¼Œä¹Ÿç§° domainï¼‰å’Œå¯¹åº”çš„åœ°å€æ—å…¥ä¸‹æ‰€ç¤ºï¼š åè®®æ— åœ°å€æ— æè¿° PF_UNIX AF_UNIX UNIXæœ¬åœ°åŸŸåè®®æ— PF_INET AF_INET TCP&#x2F;IPv4åè®®æ— PF_INET6 AF_INET6 TCP&#x2F;IPv6åè®®æ— å® PF_* å’Œ AF_* éƒ½å®šä¹‰åœ¨ bits&#x2F;socket.h å¤´æ–‡ä»¶ä¸­ï¼Œä¸”åè€…ä¸å‰è€…æœ‰å®Œå…¨ç›¸åŒçš„å€¼ï¼Œæ‰€ä»¥äºŒè€…é€šå¸¸æ·· ç”¨ã€‚ sa_data æˆå‘˜ç”¨äºå­˜æ”¾ socket åœ°å€å€¼ã€‚ä½†æ˜¯ï¼Œä¸åŒçš„åè®®æ—çš„åœ°å€å€¼å…·æœ‰ä¸åŒçš„å«ä¹‰å’Œé•¿åº¦ï¼Œå¦‚ä¸‹æ‰€ ç¤ºï¼š åè®®æ— åœ°å€å€¼å«ä¹‰å’Œé•¿åº¦ PF_UNIX æ–‡ä»¶çš„è·¯å¾„åï¼Œé•¿åº¦å¯è¾¾åˆ°108å­—èŠ‚ PF_INET 16bitç«¯å£å·å’Œ32bitIPv4åœ°å€ï¼Œå…±6å­—èŠ‚ PF_INET6 16bitç«¯å£å·ï¼Œ32bitæµæ ‡è¯†ï¼Œ128bitIPv6åœ°å€ï¼Œ32bitèŒƒå›´IDï¼Œå…±26å­—èŠ‚ ç”±ä¸Šè¡¨å¯çŸ¥ï¼Œ14 å­—èŠ‚çš„ sa_data æ ¹æœ¬æ— æ³•å®¹çº³å¤šæ•°åè®®æ—çš„åœ°å€å€¼ã€‚å› æ­¤ï¼ŒLinux å®šä¹‰äº†ä¸‹é¢è¿™ä¸ªæ–°çš„ é€šç”¨çš„ socket åœ°å€ç»“æ„ä½“ï¼Œè¿™ä¸ªç»“æ„ä½“ä¸ä»…æä¾›äº†è¶³å¤Ÿå¤§çš„ç©ºé—´ç”¨äºå­˜æ”¾åœ°å€å€¼ï¼Œè€Œä¸”æ˜¯å†…å­˜å¯¹é½çš„ã€‚ 1234567#include &lt;bits/socket.h&gt;struct sockaddr_storage &#123; sa_family_t sa_family; unsigned long int __ss_align; char __ss_padding[ 128 - sizeof(__ss_align) ];&#125;;typedef unsigned short int sa_family_t; ä¸“ç”¨ socket åœ°å€å¾ˆå¤šç½‘ç»œç¼–ç¨‹å‡½æ•°è¯ç”Ÿæ—©äº IPv4 åè®®ï¼Œé‚£æ—¶å€™éƒ½ä½¿ç”¨çš„æ˜¯ struct sockaddr ç»“æ„ä½“ï¼Œä¸ºäº†å‘å‰å…¼å®¹ï¼Œç° åœ¨sockaddr é€€åŒ–æˆäº†ï¼ˆvoid *ï¼‰çš„ä½œç”¨ï¼Œä¼ é€’ä¸€ä¸ªåœ°å€ç»™å‡½æ•°ï¼Œè‡³äºè¿™ä¸ªå‡½æ•°æ˜¯ sockaddr_in è¿˜æ˜¯ sockaddr_in6ï¼Œç”±åœ°å€æ—ç¡®å®šï¼Œç„¶åå‡½æ•°å†…éƒ¨å†å¼ºåˆ¶ç±»å‹è½¬åŒ–ä¸ºæ‰€éœ€çš„åœ°å€ç±»å‹ã€‚ UNIX æœ¬åœ°åŸŸåè®®æ—ä½¿ç”¨å¦‚ä¸‹ä¸“ç”¨çš„ socket åœ°å€ç»“æ„ä½“ï¼š 123456#include &lt;sys/un.h&gt;struct sockaddr_un&#123; sa_family_t sin_family; char sun_path[108];&#125;; TCP&#x2F;IP åè®®æ—æœ‰ sockaddr_in å’Œ sockaddr_in6 ä¸¤ä¸ªä¸“ç”¨çš„ socket åœ°å€ç»“æ„ä½“ï¼Œå®ƒä»¬åˆ†åˆ«ç”¨äº IPv4 å’Œ IPv6ï¼š 123456789101112131415161718192021222324252627#include &lt;netinet/in.h&gt;struct sockaddr_in&#123; sa_family_t sin_family; /* __SOCKADDR_COMMON(sin_) */ in_port_t sin_port; /* Port number. */ struct in_addr sin_addr; /* Internet address. */ /* Pad to size of `struct sockaddr&#x27;. */ unsigned char sin_zero[sizeof (struct sockaddr) - __SOCKADDR_COMMON_SIZE - sizeof (in_port_t) - sizeof (struct in_addr)];&#125;;struct in_addr&#123; in_addr_t s_addr;&#125;;struct sockaddr_in6&#123; sa_family_t sin6_family; in_port_t sin6_port; /* Transport layer port # */ uint32_t sin6_flowinfo; /* IPv6 flow information */ struct in6_addr sin6_addr; /* IPv6 address */ uint32_t sin6_scope_id; /* IPv6 scope-id */&#125;;typedef unsigned short uint16_t;typedef unsigned int uint32_t;typedef uint16_t in_port_t;typedef uint32_t in_addr_t;#define __SOCKADDR_COMMON_SIZE (sizeof (unsigned short int)) æ‰€æœ‰ä¸“ç”¨ socket åœ°å€ï¼ˆä»¥åŠ sockaddr_storageï¼‰ç±»å‹çš„å˜é‡åœ¨å®é™…ä½¿ç”¨æ—¶éƒ½éœ€è¦è½¬åŒ–ä¸ºé€šç”¨ socket åœ° å€ç±»å‹ sockaddrï¼ˆå¼ºåˆ¶è½¬åŒ–å³å¯ï¼‰ï¼Œå› ä¸ºæ‰€æœ‰ socket ç¼–ç¨‹æ¥å£ä½¿ç”¨çš„åœ°å€å‚æ•°ç±»å‹éƒ½æ˜¯ sockaddrã€‚ 4. IPåœ°å€è½¬æ¢ï¼ˆå­—ç¬¦ä¸²ip-æ•´æ•° ï¼Œä¸»æœºã€ç½‘ç»œ å­—èŠ‚åºçš„è½¬æ¢ï¼‰é€šå¸¸ï¼Œäººä»¬ä¹ æƒ¯ç”¨å¯è¯»æ€§å¥½çš„å­—ç¬¦ä¸²æ¥è¡¨ç¤º IP åœ°å€ï¼Œæ¯”å¦‚ç”¨ç‚¹åˆ†åè¿›åˆ¶å­—ç¬¦ä¸²è¡¨ç¤º IPv4 åœ°å€ï¼Œä»¥åŠç”¨ åå…­è¿›åˆ¶å­—ç¬¦ä¸²è¡¨ç¤º IPv6 åœ°å€ã€‚ä½†ç¼–ç¨‹ä¸­æˆ‘ä»¬éœ€è¦å…ˆæŠŠå®ƒä»¬è½¬åŒ–ä¸ºæ•´æ•°ï¼ˆäºŒè¿›åˆ¶æ•°ï¼‰æ–¹èƒ½ä½¿ç”¨ã€‚è€Œè®°å½• æ—¥å¿—æ—¶åˆ™ç›¸åï¼Œæˆ‘ä»¬è¦æŠŠæ•´æ•°è¡¨ç¤ºçš„ IP åœ°å€è½¬åŒ–ä¸ºå¯è¯»çš„å­—ç¬¦ä¸²ã€‚ä¸‹é¢ 3 ä¸ªå‡½æ•°å¯ç”¨äºç”¨ç‚¹åˆ†åè¿›åˆ¶å­— ç¬¦ä¸²è¡¨ç¤ºçš„ IPv4 åœ°å€å’Œç”¨ç½‘ç»œå­—èŠ‚åºæ•´æ•°è¡¨ç¤ºçš„ IPv4 åœ°å€ä¹‹é—´çš„è½¬æ¢ï¼š 1234#include &lt;arpa/inet.h&gt;in_addr_t inet_addr(const char *cp);int inet_aton(const char *cp, struct in_addr *inp);char *inet_ntoa(struct in_addr in); ä¸‹é¢è¿™å¯¹æ›´æ–°çš„å‡½æ•°ä¹Ÿèƒ½å®Œæˆå‰é¢ 3 ä¸ªå‡½æ•°åŒæ ·çš„åŠŸèƒ½ï¼Œå¹¶ä¸”å®ƒä»¬åŒæ—¶é€‚ç”¨ IPv4 åœ°å€å’Œ IPv6 åœ°å€ï¼š 12345678910111213#include &lt;arpa/inet.h&gt;// p:ç‚¹åˆ†åè¿›åˆ¶çš„IPå­—ç¬¦ä¸²ï¼Œ n:è¡¨ç¤ºnetworkï¼Œç½‘ç»œå­—èŠ‚åºçš„æ•´æ•°int inet_pton(int af, const char *src, void *dst); af:åœ°å€æ—ï¼š AF_INET AF_INET6 src:éœ€è¦è½¬æ¢çš„ç‚¹åˆ†åè¿›åˆ¶çš„IPå­—ç¬¦ä¸² dst:è½¬æ¢åçš„ç»“æœä¿å­˜åœ¨è¿™ä¸ªé‡Œé¢// å°†ç½‘ç»œå­—èŠ‚åºçš„æ•´æ•°ï¼Œè½¬æ¢æˆç‚¹åˆ†åè¿›åˆ¶çš„IPåœ°å€å­—ç¬¦ä¸²const char *inet_ntop(int af, const void *src, char *dst, socklen_t size); af:åœ°å€æ—ï¼š AF_INET AF_INET6 src: è¦è½¬æ¢çš„ipçš„æ•´æ•°çš„åœ°å€ dst: è½¬æ¢æˆIPåœ°å€å­—ç¬¦ä¸²ä¿å­˜çš„åœ°æ–¹ sizeï¼šç¬¬ä¸‰ä¸ªå‚æ•°çš„å¤§å°ï¼ˆæ•°ç»„çš„å¤§å°ï¼‰ è¿”å›å€¼ï¼šè¿”å›è½¬æ¢åçš„æ•°æ®çš„åœ°å€ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œå’Œ dst æ˜¯ä¸€æ ·çš„ Cä»£ç -å®ç° IPåœ°å€è½¬æ¢å‡½æ•°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152/************************************************************************* &gt; File Name: iptrans.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´06æœˆ20æ—¥ æ˜ŸæœŸä¸€ 19æ—¶45åˆ†21ç§’ ************************************************************************//* #include &lt;arpa/inet.h&gt; // p:ç‚¹åˆ†åè¿›åˆ¶çš„IPå­—ç¬¦ä¸²ï¼Œ n:è¡¨ç¤ºnetworkï¼Œç½‘ç»œå­—èŠ‚åº çš„æ•´æ•° int inet_pton(int af, const char *src, void *dst); af:åœ°å€æ—ï¼š AF_INET AF_INET6 src:éœ€è¦è½¬æ¢çš„ç‚¹åˆ†åè¿›åˆ¶çš„IPå­—ç¬¦ä¸² dst:è½¬æ¢åçš„ç»“æœä¿å­˜åœ¨è¿™ä¸ªé‡Œé¢ // å°†ç½‘ç»œå­—èŠ‚åºçš„æ•´æ•°ï¼Œè½¬æ¢æˆç‚¹åˆ†åè¿›åˆ¶çš„IPåœ°å€å­—ç¬¦ä¸² const char *inet_ntop(int af, const void *src, char *dst, socklen_t size); af:åœ°å€æ—ï¼š AF_INET AF_INET6 src: è¦è½¬æ¢çš„ipçš„æ•´æ•°çš„åœ°å€ dst: è½¬æ¢æˆIPåœ°å€å­—ç¬¦ä¸²ä¿å­˜çš„åœ°æ–¹ sizeï¼šç¬¬ä¸‰ä¸ªå‚æ•°çš„å¤§å°ï¼ˆæ•°ç»„çš„å¤§å°ï¼‰ è¿”å›å€¼ï¼šè¿”å›è½¬æ¢åçš„æ•°æ®çš„åœ°å€ï¼ˆå­—ç¬¦ä¸²ï¼‰ï¼Œå’Œ dst æ˜¯ä¸€æ ·çš„ */#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include&lt;arpa/inet.h&gt;int main() &#123; // åˆ›å»ºä¸€ä¸ªipå­—ç¬¦ä¸²,ç‚¹åˆ†åè¿›åˆ¶çš„ char buf[] = &quot;192.168.1.1&quot;; unsigned int num = 0; // å°†ç‚¹åˆ†åè¿›åˆ¶çš„IPå­—ç¬¦ä¸² inet_pton(AF_INET, buf, &amp;num); unsigned char *p = (unsigned char *)&amp;num; printf(&quot;%d %d %d %d \\n&quot;, *p, *(p + 1), *(p + 2), *(p + 3)); // å°†ç½‘ç»œå­—èŠ‚åºçš„IPæ•´æ•° char ip[16] = &quot;&quot;; const char *str = inet_ntop(AF_INET, &amp;num, ip, sizeof(ip)); printf(&quot;str : %s\\n&quot;, str); printf(&quot;ip : %s\\n&quot;, ip); printf(&quot;ip == str = %d\\n&quot;, str == ip); return 0;&#125; 5. TCPé€šä¿¡æµç¨‹TCP - UDP ç‰¹ç‚¹åŒºåˆ«123// TCP å’Œ UDP -&gt; ä¼ è¾“å±‚çš„åè®®UDP:ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼Œé¢å‘æ— è¿æ¥ï¼Œå¯ä»¥å•æ’­ï¼Œå¤šæ’­ï¼Œå¹¿æ’­ï¼Œ é¢å‘æ•°æ®æŠ¥ï¼Œä¸å¯é TCP:ä¼ è¾“æ§åˆ¶åè®®ï¼Œé¢å‘è¿æ¥çš„ï¼Œå¯é çš„ï¼ŒåŸºäºå­—èŠ‚æµï¼Œä»…æ”¯æŒå•æ’­ä¼ è¾“ UDP TCP æ˜¯å¦åˆ›å»ºè¿æ¥ æ— è¿æ¥ é¢å‘è¿æ¥ æ˜¯å¦å¯é  ä¸å¯é  å¯é çš„ è¿æ¥çš„å¯¹è±¡ä¸ªæ•° ä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šã€å¤šå¯¹å¤šã€å¤šå¯¹ä¸€ æ”¯æŒä¸€å¯¹ä¸€ ä¼ è¾“æ–¹å¼ é¢å‘æ•°æ®æŠ¥ é¢å‘å­—èŠ‚æµ é¦–éƒ¨å¼€é”€ 8ä¸ªå­—èŠ‚ æœ€å°‘20ä¸ªå­—èŠ‚ é€‚ç”¨åœºæ™¯ å®æ—¶åº”ç”¨ï¼ˆè§†é¢‘ä¼šè®®ï¼Œç›´æ’­ï¼‰ å¯é æ€§é«˜çš„åº”ç”¨ï¼ˆæ–‡ä»¶ä¼ è¾“ï¼‰ 12345678910111213// TCP é€šä¿¡çš„æµç¨‹// æœåŠ¡å™¨ç«¯ ï¼ˆè¢«åŠ¨æ¥å—è¿æ¥çš„è§’è‰²ï¼‰1. åˆ›å»ºä¸€ä¸ªç”¨äºç›‘å¬çš„å¥—æ¥å­— - ç›‘å¬: ç›‘å¬æœ‰å®¢æˆ·ç«¯çš„è¿æ¥ - å¥—æ¥å­—: è¿™ä¸ªå¥—æ¥å­—å…¶å®å°±æ˜¯ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦2. å°†è¿™ä¸ªç›‘å¬æ–‡ä»¶æè¿°ç¬¦å’Œæœ¬åœ°çš„IPå’Œç«¯å£ç»‘å®šï¼ˆIPå’Œç«¯å£å°±æ˜¯æœåŠ¡å™¨çš„åœ°å€ä¿¡æ¯ï¼‰ - å®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨çš„æ—¶å€™ä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ªIPå’Œç«¯å£3. è®¾ç½®ç›‘å¬ï¼Œç›‘å¬çš„fdå¼€å§‹å·¥ä½œ4. é˜»å¡ç­‰å¾…ï¼Œå½“æœ‰å®¢æˆ·ç«¯å‘èµ·è¿æ¥ï¼Œè§£é™¤é˜»å¡ï¼Œæ¥å—å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªå’Œå®¢æˆ·ç«¯é€šä¿¡çš„å¥—æ¥å­—ï¼ˆfdï¼‰5. é€šä¿¡ - æ¥æ”¶æ•°æ® - å‘é€æ•°æ®6. é€šä¿¡ç»“æŸï¼Œæ–­å¼€è¿æ¥ 123456789// å®¢æˆ·ç«¯1.åˆ›å»ºä¸€ä¸ªç”¨äºé€šä¿¡çš„å¥—æ¥å­—(fd)ä¸éœ€è¦ç»‘å®šIPå’Œç«¯å£ å®¢æˆ·ç«¯IPä¼šæœ‰çš„ä½†æ˜¯ç«¯å£æ˜¯éšæœºçš„ã€è¿æ¥åˆ°æœåŠ¡å™¨åˆšå¼€å§‹ä¼šè¿›è¡Œ3æ¬¡æ¡æ‰‹ã€ä¸¤ç«¯éƒ½è®°å½•äº†ä¸¤ç«¯çš„IPå’Œç«¯å£2.è¿æ¥æœåŠ¡å™¨ï¼Œéœ€è¦æŒ‡å®šçš„è¿æ¥çš„æœåŠ¡å™¨çš„ IP å’Œ ç«¯å£3. è¿æ¥æˆåŠŸï¼Œå®¢æˆ·ç«¯å¯ä»¥å’ŒæœåŠ¡å™¨ç›´æ¥é“œçº¿ - æ¥å—æ•°æ® - å‘é€æ•°æ®6.é€šä¿¡ç»“æŸï¼Œæ–­å¼€è¿æ¥ 6. å¥—æ¥å­—å‡½æ•°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;#include &lt;arpa/inet.h&gt; // åŒ…å«äº†è¿™ä¸ªå¤´æ–‡ä»¶ï¼Œä¸Šé¢ä¸¤ä¸ªå°±å¯ä»¥çœç•¥int socket(int domain, int type, int protocol); - åŠŸèƒ½ï¼šåˆ›å»ºä¸€ä¸ªå¥—æ¥å­— - å‚æ•°ï¼š - domain: åè®®æ— AF_INET : ipv4 AF_INET6 : ipv6 AF_UNIX, AF_LOCAL : æœ¬åœ°å¥—æ¥å­—é€šä¿¡ï¼ˆè¿›ç¨‹é—´é€šä¿¡ï¼‰ ... ... - type: é€šä¿¡è¿‡ç¨‹ä¸­ä½¿ç”¨çš„åè®®ç±»å‹ SOCK_STREAM : æµå¼åè®® - TCP SOCK_DGRAM : æŠ¥å¼åè®® - UDP ... ... - protocol: å…·ä½“çš„ä¸€ä¸ªåè®®ã€‚ä¸€èˆ¬å†™ 0 æƒ…å†µä¸‹ - SOCK_STREAM : æµå¼åè®®é»˜è®¤ä½¿ç”¨ TCP - SOCK_DGRAM : æŠ¥å¼åè®®é»˜è®¤ä½¿ç”¨ UDP - è¿”å›å€¼: - æˆåŠŸï¼šè¿”å›æ–‡ä»¶æè¿°ç¬¦ï¼Œæ“ä½œçš„å°±æ˜¯å†…æ ¸ç¼“å†²åŒºã€‚ - å¤±è´¥ï¼š-1 // ç»‘å®šä¹Ÿå« - socketå‘½åint bind(int sockfd, const struct sockaddr *addr, socklen_t addrlen); - åŠŸèƒ½: ç»‘å®šï¼Œå°†fd å’Œæœ¬åœ°çš„IP + ç«¯å£è¿›è¡Œç»‘å®š - å‚æ•°: - sockfd : é€šè¿‡socketå‡½æ•°å¾—åˆ°çš„æ–‡ä»¶æè¿°ç¬¦ - addr : éœ€è¦ç»‘å®šçš„socketåœ°å€ï¼Œè¿™ä¸ªåœ°å€å°è£…äº†ipå’Œç«¯å£å·çš„ä¿¡æ¯ - addrlen : ç¬¬äºŒä¸ªå‚æ•°ç»“æ„ä½“å çš„å†…å­˜å¤§å° - è¿”å›å€¼: - æˆåŠŸ: è¿”å› 0 - å¤±è´¥: è¿”å› -1 å¹¶è®¾ç½®é”™è¯¯å· int listen(int sockfd, int backlog); - åŠŸèƒ½ï¼šç›‘å¬è¿™ä¸ªsocketä¸Šçš„è¿æ¥ - å‚æ•°ï¼š - sockfd : é€šè¿‡socket()å‡½æ•°å¾—åˆ°çš„æ–‡ä»¶æè¿°ç¬¦ - backlog : æœªè¿æ¥çš„å’Œå·²ç»è¿æ¥çš„å’Œçš„æœ€å¤§å€¼, ä¸€èˆ¬æŒ‡å®š 5 å°±å¤Ÿäº†,ä¸èƒ½è¶…è¿‡ä¸‹é¢æŸ¥çœ‹çš„å€¼ æŸ¥çœ‹æœ€å¤§è¿æ¥ // cat /proc/sys/net/core/somaxconn - è¿”å›å€¼: - æˆåŠŸ: è¿”å› 0 - å¤±è´¥: è¿”å› -1 å¹¶è®¾ç½®é”™è¯¯å· int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen); - åŠŸèƒ½ï¼šæ¥æ”¶å®¢æˆ·ç«¯è¿æ¥ï¼Œé»˜è®¤æ˜¯ä¸€ä¸ªé˜»å¡çš„å‡½æ•°ï¼Œé˜»å¡ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥ - å‚æ•°ï¼š - sockfd : ç”¨äºç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦ - addr : ä¼ å‡ºå‚æ•°ï¼Œè®°å½•äº†è¿æ¥æˆåŠŸåå®¢æˆ·ç«¯çš„åœ°å€ä¿¡æ¯ï¼ˆipï¼Œportï¼‰ - addrlenvv : æŒ‡å®šç¬¬äºŒä¸ªå‚æ•°çš„å¯¹åº”çš„å†…å­˜å¤§å° - è¿”å›å€¼ï¼š - æˆåŠŸ: ç”¨äºé€šä¿¡çš„æ–‡ä»¶æè¿°ç¬¦ - å¤±è´¥: -1 int connect(int sockfd, const struct sockaddr *addr, socklen_t addrlen); - åŠŸèƒ½: å®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨ - å‚æ•°: - sockfd: ç”¨äºé€šä¿¡çš„æ–‡ä»¶æè¿°ç¬¦ - addr: å®¢æˆ·ç«¯è¦è¿æ¥çš„æœåŠ¡å™¨çš„åœ°å€ä¿¡æ¯ - addrlen: ç¬¬äºŒä¸ªå‚æ•°çš„å†…å­˜å¤§å° - è¿”å›å€¼: - æˆåŠŸ: 0 - å¤±è´¥: -1 // å†™æ•°æ®ssize_t write(int fd, const void *buf, size_t count); // è¯»æ•°æ®ssize_t read(int fd, void *buf, size_t count); TCP - æ‰‹åŠ¨è¾“å…¥æ¶ˆæ¯ - å›å°„æœåŠ¡å™¨12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788/************************************************************************* &gt; File Name: server.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´06æœˆ22æ—¥ æ˜ŸæœŸä¸‰ 18æ—¶45åˆ†38ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;string.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;// TCP é€šä¿¡çš„æœåŠ¡å™¨ç«¯Eint main() &#123; // 1.åˆ›å»ºsocket(ç”¨äºç›‘å¬å¥—æ¥å­—) int lfd = socket(AF_INET, SOCK_STREAM, 0); if(lfd == 1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // 2.ç»‘å®š IP å’Œ ç«¯å£ struct sockaddr_in saddr; saddr.sin_family = AF_INET; // inet_net_pton(AF_INET, &quot;192.168.3.206&quot;, saddr.sin_addr.s_addr); saddr.sin_addr.s_addr = INADDR_ANY; // = 0; // 0.0.0.0 ä»»æ„åœ°å€ å®¢æˆ·ç«¯ä¸èƒ½è¿™é¢å†™ saddr.sin_port = htons(9999); int ret = bind(lfd, (struct sockaddr *)&amp;saddr, sizeof(saddr)); if(ret == -1) &#123; perror(&quot;bind&quot;); exit(-1); &#125; // 3.ç›‘å¬ ret = listen(lfd, 8); if(ret == -1) &#123; perror(&quot;listen&quot;); exit(-1); &#125; // 4.æ¥å—å®¢æˆ·ç«¯çš„è¿æ¥ - é˜»å¡ struct sockaddr_in clientaddr; socklen_t len = sizeof(clientaddr); int cfd = accept(lfd, (struct sockaddr *)&amp;clientaddr, &amp;len); if(cfd == -1) &#123; perror(&quot;accept&quot;); exit(-1); &#125; // è¾“å‡ºå®¢æˆ·ç«¯çš„ä¿¡æ¯ char clientIP[16]; inet_ntop(AF_INET, &amp;clientaddr.sin_addr.s_addr, clientIP, sizeof(clientIP)); unsigned short clientPort = ntohs(clientaddr.sin_port); printf(&quot;client ip is %s, prot is %d\\n&quot;, clientIP, clientPort); while(1) &#123; // 5.é€šä¿¡ // è·å–å®¢æˆ·çš„æ•°æ® char recvBuf[1024] = &#123;0&#125;; int readLen = read(cfd, recvBuf, sizeof(recvBuf)); if(readLen == -1) &#123; perror(&quot;read&quot;); exit(-1); &#125; else if(readLen &gt; 0) &#123; printf(&quot;recv client data : %s\\n&quot;, recvBuf); &#125; else if(readLen == 0) &#123; // å®¢æˆ·ç«¯æ–­å¼€è¿æ¥ printf(&quot;client closed ... ...\\n&quot;); break; &#125; // ç»™å®¢æˆ·ç«¯å‘é€æ•°æ® char *data = &quot;hello, i am server&quot;; write(cfd, recvBuf, strlen(data)); &#125; // å…³é—­æ–‡ä»¶æè¿°ç¬¦ close(cfd); close(lfd); return 0;&#125; å®¢æˆ·ç«¯1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/************************************************************************* &gt; File Name: client.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´06æœˆ23æ—¥ æ˜ŸæœŸå›› 14æ—¶41åˆ†42ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt;// TCP é€šä¿¡å®¢æˆ·ç«¯int main() &#123; // 1.åˆ›å»ºå¥—æ¥å­— int fd = socket(AF_INET, SOCK_STREAM, 0); if(fd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // 2.è¿æ¥æœåŠ¡ struct sockaddr_in serveraddr; serveraddr.sin_family = AF_INET; serveraddr.sin_port = htons(9999); inet_pton(AF_INET, &quot;192.168.222.139&quot;, &amp;serveraddr.sin_addr.s_addr); int ret = connect(fd, (struct sockaddr *)&amp;serveraddr, sizeof(serveraddr)); if(ret == -1) &#123; perror(&quot;connect&quot;); exit(-1); &#125; // é€šä¿¡ char recvBuf[1024] = &#123;0&#125;; char data[1024]; while (1) &#123; memset(data, 0, sizeof(data)); // è·å–æ ‡å‡†è¾“å…¥(stdin)çš„æ•°æ® fgets(data, sizeof(data), stdin); write(fd, data, strlen(data)); int readLen = read(fd, recvBuf, sizeof(recvBuf)); if(readLen == -1) &#123; perror(&quot;read&quot;); exit(-1); &#125; else if(readLen &gt; 0) &#123; printf(&quot;recv server data : %s\\n&quot;, recvBuf); &#125; else if(readLen == 0) &#123; // è¡¨ç¤ºæœåŠ¡ç«¯æ–­å¼€è¿æ¥ printf(&quot;server closed ... ...\\n&quot;); break; &#125; &#125; // å…³é—­ close(fd); return 0;&#125; 7. TCP ä¸‰æ¬¡æ¡æ‰‹TCP æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„å•æ’­åè®®ï¼Œåœ¨å‘é€æ•°æ®å‰ï¼Œé€šä¿¡åŒæ–¹å¿…é¡»åœ¨å½¼æ­¤é—´å»ºç«‹ä¸€æ¡è¿æ¥ã€‚æ‰€è°“çš„â€œè¿ æ¥â€ï¼Œå…¶å®æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„å†…å­˜é‡Œä¿å­˜çš„ä¸€ä»½å…³äºå¯¹æ–¹çš„ä¿¡æ¯ï¼Œå¦‚ IP åœ°å€ã€ç«¯å£å·ç­‰ã€‚ TCP å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§å­—èŠ‚æµï¼Œå®ƒä¼šå¤„ç† IP å±‚æˆ–ä»¥ä¸‹çš„å±‚çš„ä¸¢åŒ…ã€é‡å¤ä»¥åŠé”™è¯¯é—®é¢˜ã€‚åœ¨è¿æ¥çš„å»ºç«‹è¿‡ç¨‹ ä¸­ï¼ŒåŒæ–¹éœ€è¦äº¤æ¢ä¸€äº›è¿æ¥çš„å‚æ•°ã€‚è¿™äº›å‚æ•°å¯ä»¥æ”¾åœ¨ TCP å¤´éƒ¨ã€‚ TCP æä¾›äº†ä¸€ç§å¯é ã€é¢å‘è¿æ¥ã€å­—èŠ‚æµã€ä¼ è¾“å±‚çš„æœåŠ¡ï¼Œé‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹ä¸€ä¸ªè¿æ¥ã€‚é‡‡ç”¨ å››æ¬¡æŒ¥æ‰‹ æ¥å…³é—­ä¸€ä¸ªè¿æ¥ã€‚ ä¸‰æ¬¡æ¡æ‰‹çš„ç›®çš„æ˜¯ä¿è¯åŒæ–¹äº’ç›¸ä¹‹é—´å»ºç«‹äº†è¿æ¥ ä¸‰æ¬¡æ¡æ‰‹å‘ç”Ÿåœ¨å®¢æˆ·ç«¯è¿æ¥çš„æ—¶å€™ï¼Œå½“è°ƒç”¨connect(),åº•å±‚ä¼šé€šè¿‡TCPåè®®è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ã€‚ TCPä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æŒ¥æ‰‹ - å›¾è§£ ä¸ºç¤¾ä¹ˆä¸èƒ½2æ¬¡æ¡æ‰‹ ç›´æ¥è¯´ä½ åšæˆ‘å¥³æœ‹å‹è¡Œå—ï¼Ÿ å›å¤ å¥½çš„ ç­”:å®¢æˆ·ç«¯è¦çŸ¥é“è‡ªå·±èƒ½å‘æ•°æ®ä¹Ÿèƒ½æ”¶æ•°æ® æœåŠ¡ç«¯ä¹Ÿæ˜¯ä¸€æ ·çš„ å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘èƒ½ç¡®ä¿çš„æ˜¯å®¢æˆ·ç«¯å¯ä»¥å‘é€æ•°æ®ï¼Œä½†æ˜¯ä¸èƒ½ç¡®å®šæœåŠ¡ç«¯çš„æ”¶å’Œå‘æ˜¯å¦æ˜¯å¥½ä½¿çš„ æœåŠ¡ç«¯æ”¶åˆ°ä¿¡æ¯äº†æœåŠ¡ç«¯å¯ä»¥ç¡®å®šè‡ªå·±æ”¶æ˜¯å¥½çš„è¿˜èƒ½ç¡®å®šå®¢æˆ·ç«¯çš„å‘æ˜¯å¥½çš„ (å®¢) C -&gt; S(æœ) æœåŠ¡ç«¯å›ä¸€ä¸ªæ•°æ®å°±èƒ½ç¡®å®šè‡ªå·±å‘ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ å®¢æˆ·ç«¯æ”¶åˆ°ä¿¡æ¯èƒ½ç¡®å®šè‡ªå·±çš„æ”¶æ˜¯æ²¡æœ‰é—®é¢˜ä¹Ÿèƒ½ç¡®å®šæœåŠ¡ç«¯çš„æ”¶å‘æ˜¯æ²¡æœ‰é—®é¢˜çš„ (å®¢) C &lt;- S(æœ) æœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·å‘æ¥çš„æ•°æ®å°±çŸ¥é“å®¢æˆ·ç«¯çš„æ”¶æ˜¯å¥½çš„ (å®¢) C -&gt; S(æœ) ACK: ç”¨æ¥åšç¡®è®¤çš„ SYN: ç”¨æ¥åšè¿æ¥çš„ FIN: ç”¨æ¥åšå››æ¬¡æŒ¥æ‰‹çš„ æ–­å¼€è¿æ¥çš„ 16 ä½ç«¯å£å·ï¼ˆport numberï¼‰ï¼šå‘ŠçŸ¥ä¸»æœºæŠ¥æ–‡æ®µæ˜¯æ¥è‡ªå“ªé‡Œï¼ˆæºç«¯å£ï¼‰ä»¥åŠä¼ ç»™å“ªä¸ªä¸Šå±‚åè®®æˆ– åº”ç”¨ç¨‹åºï¼ˆç›®çš„ç«¯å£ï¼‰çš„ã€‚è¿›è¡Œ TCP é€šä¿¡æ—¶ï¼Œå®¢æˆ·ç«¯é€šå¸¸ä½¿ç”¨ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©çš„ä¸´æ—¶ç«¯å£å·ã€‚ 32 ä½åºå·ï¼ˆsequence numberï¼‰ï¼šä¸€æ¬¡ TCP é€šä¿¡ï¼ˆä» TCP è¿æ¥å»ºç«‹åˆ°æ–­å¼€ï¼‰è¿‡ç¨‹ä¸­æŸä¸€ä¸ªä¼ è¾“ æ–¹å‘ä¸Šçš„å­—èŠ‚æµçš„æ¯ä¸ªå­—èŠ‚çš„ç¼–å·ã€‚å‡è®¾ä¸»æœº A å’Œä¸»æœº B è¿›è¡Œ TCP é€šä¿¡ï¼ŒA å‘é€ç»™ B çš„ç¬¬ä¸€ä¸ª TCP æŠ¥æ–‡æ®µä¸­ï¼Œåºå·å€¼è¢«ç³»ç»Ÿåˆå§‹åŒ–ä¸ºæŸä¸ªéšæœºå€¼ ISNï¼ˆInitial Sequence Numberï¼Œåˆå§‹åºå· å€¼ï¼‰ã€‚é‚£ä¹ˆåœ¨è¯¥ä¼ è¾“æ–¹å‘ä¸Šï¼ˆä» A åˆ° Bï¼‰ï¼Œåç»­çš„ TCP æŠ¥æ–‡æ®µä¸­åºå·å€¼å°†è¢«ç³»ç»Ÿè®¾ç½®æˆ ISN åŠ ä¸Š è¯¥æŠ¥æ–‡æ®µæ‰€æºå¸¦æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚åœ¨æ•´ä¸ªå­—èŠ‚æµä¸­çš„åç§»ã€‚ä¾‹å¦‚ï¼ŒæŸä¸ª TCP æŠ¥æ–‡æ®µä¼ é€çš„æ•°æ®æ˜¯å­— èŠ‚æµä¸­çš„ç¬¬ 1025 ~ 2048 å­—èŠ‚ï¼Œé‚£ä¹ˆè¯¥æŠ¥æ–‡æ®µçš„åºå·å€¼å°±æ˜¯ ISN + 1025ã€‚å¦å¤–ä¸€ä¸ªä¼ è¾“æ–¹å‘ï¼ˆä» B åˆ° Aï¼‰çš„ TCP æŠ¥æ–‡æ®µçš„åºå·å€¼ä¹Ÿå…·æœ‰ç›¸åŒçš„å«ä¹‰ã€‚ 32 ä½ç¡®è®¤å·ï¼ˆacknowledgement numberï¼‰ï¼šç”¨ä½œå¯¹å¦ä¸€æ–¹å‘é€æ¥çš„ TCP æŠ¥æ–‡æ®µçš„å“åº”ã€‚å…¶å€¼æ˜¯ æ”¶åˆ°çš„ TCP æŠ¥æ–‡æ®µçš„åºå·å€¼ + æ ‡å¿—ä½é•¿åº¦ï¼ˆSYNï¼ŒFINï¼‰ + æ•°æ®é•¿åº¦ ã€‚å‡è®¾ä¸»æœº A å’Œä¸»æœº B è¿›è¡Œ TCP é€šä¿¡ï¼Œé‚£ä¹ˆ A å‘é€å‡ºçš„ TCP æŠ¥æ–‡æ®µä¸ä»…æºå¸¦è‡ªå·±çš„åºå·ï¼Œè€Œä¸”åŒ…å«å¯¹ B å‘é€æ¥çš„ TCP æŠ¥æ–‡æ®µ çš„ç¡®è®¤å·ã€‚åä¹‹ï¼ŒB å‘é€å‡ºçš„ TCP æŠ¥æ–‡æ®µä¹ŸåŒæ ·æºå¸¦è‡ªå·±çš„åºå·å’Œå¯¹ A å‘é€æ¥çš„æŠ¥æ–‡æ®µçš„ç¡®è®¤åº å·ã€‚ 4 ä½å¤´éƒ¨é•¿åº¦ï¼ˆhead lengthï¼‰ï¼šæ ‡è¯†è¯¥ TCP å¤´éƒ¨æœ‰å¤šå°‘ä¸ª 32 bit(4 å­—èŠ‚)ã€‚å› ä¸º 4 ä½æœ€å¤§èƒ½è¡¨ç¤º 15ï¼Œæ‰€ä»¥ TCP å¤´éƒ¨æœ€é•¿æ˜¯60 å­—èŠ‚ã€‚ - åŠŸèƒ½ï¼š å®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨ - å‚æ•°ï¼š - sockfd : ç”¨äºé€šä¿¡çš„æ–‡ä»¶æè¿°ç¬¦ - addr : å®¢æˆ·ç«¯è¦è¿æ¥çš„æœåŠ¡å™¨çš„åœ°å€ä¿¡æ¯ - addrlen : ç¬¬äºŒä¸ªå‚æ•°çš„å†…å­˜å¤§å° - è¿”å›å€¼ï¼šæˆåŠŸ 0ï¼Œ å¤±è´¥ -1 ssize_t write(int fd, const void *buf, size_t count); &#x2F;&#x2F; å†™æ•°æ® ssize_t read(int fd, void *buf, size_t count); &#x2F;&#x2F; è¯»æ•°æ® 6 ä½æ ‡å¿—ä½åŒ…å«å¦‚ä¸‹å‡ é¡¹ï¼š URG æ ‡å¿—ï¼Œè¡¨ç¤ºç´§æ€¥æŒ‡é’ˆï¼ˆurgent pointerï¼‰æ˜¯å¦æœ‰æ•ˆã€‚ ACK æ ‡å¿—ï¼Œè¡¨ç¤ºç¡®è®¤å·æ˜¯å¦æœ‰æ•ˆã€‚æˆ‘ä»¬ç§°æºå¸¦ ACK æ ‡å¿—çš„ TCP æŠ¥æ–‡æ®µä¸ºç¡®è®¤æŠ¥æ–‡æ®µã€‚ PSH æ ‡å¿—ï¼Œæç¤ºæ¥æ”¶ç«¯åº”ç”¨ç¨‹åºåº”è¯¥ç«‹å³ä» TCP æ¥æ”¶ç¼“å†²åŒºä¸­è¯»èµ°æ•°æ®ï¼Œä¸ºæ¥æ”¶åç»­æ•°æ®è…¾ å‡ºç©ºé—´ï¼ˆå¦‚æœåº”ç”¨ç¨‹åºä¸å°†æ¥æ”¶åˆ°çš„æ•°æ®è¯»èµ°ï¼Œå®ƒä»¬å°±ä¼šä¸€ç›´åœç•™åœ¨ TCP æ¥æ”¶ç¼“å†²åŒºä¸­ï¼‰ã€‚ RST æ ‡å¿—ï¼Œè¡¨ç¤ºè¦æ±‚å¯¹æ–¹é‡æ–°å»ºç«‹è¿æ¥ã€‚æˆ‘ä»¬ç§°æºå¸¦ RST æ ‡å¿—çš„ TCP æŠ¥æ–‡æ®µä¸ºå¤ä½æŠ¥æ–‡æ®µã€‚ SYN æ ‡å¿—ï¼Œè¡¨ç¤ºè¯·æ±‚å»ºç«‹ä¸€ä¸ªè¿æ¥ã€‚æˆ‘ä»¬ç§°æºå¸¦ SYN æ ‡å¿—çš„ TCP æŠ¥æ–‡æ®µä¸ºåŒæ­¥æŠ¥æ–‡æ®µã€‚ FIN æ ‡å¿—ï¼Œè¡¨ç¤ºé€šçŸ¥å¯¹æ–¹æœ¬ç«¯è¦å…³é—­è¿æ¥äº†ã€‚æˆ‘ä»¬ç§°æºå¸¦ FIN æ ‡å¿—çš„ TCP æŠ¥æ–‡æ®µä¸ºç»“æŸæŠ¥æ–‡ æ®µã€‚ 16 ä½çª—å£å¤§å°ï¼ˆwindow sizeï¼‰ï¼šæ˜¯ TCP æµé‡æ§åˆ¶çš„ä¸€ä¸ªæ‰‹æ®µã€‚è¿™é‡Œè¯´çš„çª—å£ï¼ŒæŒ‡çš„æ˜¯æ¥æ”¶ é€šå‘Šçª—å£ï¼ˆReceiver Windowï¼ŒRWNDï¼‰ã€‚å®ƒå‘Šè¯‰å¯¹æ–¹æœ¬ç«¯çš„ TCP æ¥æ”¶ç¼“å†²åŒºè¿˜èƒ½å®¹çº³å¤šå°‘ å­—èŠ‚çš„æ•°æ®ï¼Œè¿™æ ·å¯¹æ–¹å°±å¯ä»¥æ§åˆ¶å‘é€æ•°æ®çš„é€Ÿåº¦ã€‚ 16 ä½æ ¡éªŒå’Œï¼ˆTCP checksumï¼‰ï¼šç”±å‘é€ç«¯å¡«å……ï¼Œæ¥æ”¶ç«¯å¯¹ TCP æŠ¥æ–‡æ®µæ‰§è¡Œ CRC ç®—æ³•ä»¥æ ¡éªŒ TCP æŠ¥æ–‡æ®µåœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦æŸåã€‚æ³¨æ„ï¼Œè¿™ä¸ªæ ¡éªŒä¸ä»…åŒ…æ‹¬ TCP å¤´éƒ¨ï¼Œä¹ŸåŒ…æ‹¬æ•°æ®éƒ¨åˆ†ã€‚ è¿™ä¹Ÿæ˜¯ TCP å¯é ä¼ è¾“çš„ä¸€ä¸ªé‡è¦ä¿éšœã€‚ 16 ä½ç´§æ€¥æŒ‡é’ˆï¼ˆurgent pointerï¼‰ï¼šæ˜¯ä¸€ä¸ªæ­£çš„åç§»é‡ã€‚å®ƒå’Œåºå·å­—æ®µçš„å€¼ç›¸åŠ è¡¨ç¤ºæœ€åä¸€ ä¸ªç´§æ€¥æ•°æ®çš„ä¸‹ä¸€ä¸ªå­—èŠ‚çš„åºå·ã€‚å› æ­¤ï¼Œç¡®åˆ‡åœ°è¯´ï¼Œè¿™ä¸ªå­—æ®µæ˜¯ç´§æ€¥æŒ‡é’ˆç›¸å¯¹å½“å‰åºå·çš„å ç§»ï¼Œä¸å¦¨ç§°ä¹‹ä¸ºç´§æ€¥åç§»ã€‚TCP çš„ç´§æ€¥æŒ‡é’ˆæ˜¯å‘é€ç«¯å‘æ¥æ”¶ç«¯å‘é€ç´§æ€¥æ•°æ®çš„æ–¹æ³•ã€‚ æ—¶åºå›¾ 1234567891011ç¬¬ä¸€æ¬¡æ¡æ‰‹: 1.å®¢æˆ·ç«¯å°†SYNæ ‡å¿—ä¸º1 2.ç”Ÿæˆä¸€ä¸ªéšæœºçš„32ä½çš„åºå·seq = Jï¼Œè¿™åºå·åè¾¹æ˜¯å¯ä»¥æºå¸¦æ•°æ® (æ•°æ®çš„å¤§å°)ç¬¬äºŒä¸ªæ¬¡æ¡æ‰‹: 1.æœåŠ¡å™¨ç«¯æ¥æ”¶å®¢æˆ·ç«¯çš„è¿æ¥: ACK = 1 2.æœåŠ¡å™¨ä¼šå›å‘ä¸€ä¸ªç¡®è®¤åºå·: ack = å®¢æˆ·çš„åºå· + æ•°æ®çš„é•¿åº¦ + SYN/FIN(æŒ‰ä¸€ä¸ªå­—èŠ‚æ¥ç®—) 3.æœåŠ¡å™¨ç«¯ä¼šå‘å®¢æˆ·ç«¯å‘èµ·è¿æ¥è¯·æ±‚: SYN = 1 4.æœåŠ¡å™¨ä¹Ÿä¼šç”Ÿæˆä¸€ä¸ªéšæœºåºå·: seq = Kç¬¬ä¸‰æ¬¡æ¡æ‰‹: 1.å®¢æˆ·ç«¯åº”ç­”æœåŠ¡å™¨çš„è¿æ¥è¯·æ±‚: ACK = 1 2.å®¢æˆ·ç«¯å›å¤æ”¶åˆ°äº†æœåŠ¡ç«¯çš„æ•°æ®: ack = æœåŠ¡ç«¯çš„åºå· + æ•°æ®é•¿åº¦ + SYN/FIN(æŒ‰ä¸€ä¸ªå­—èŠ‚ç®—) åºå· å’Œ ç¡®è®¤åºå· é€šä¿¡çš„è¿‡ç¨‹ 8. TCP æ»‘åŠ¨çª—å£ æ»‘åŠ¨çª—å£ï¼ˆSliding windowï¼‰æ˜¯ä¸€ç§æµé‡æ§åˆ¶æŠ€æœ¯ã€‚æ—©æœŸçš„ç½‘ç»œé€šä¿¡ä¸­ï¼Œé€šä¿¡åŒæ–¹ä¸ä¼šè€ƒè™‘ç½‘ç»œçš„ æ‹¥æŒ¤æƒ…å†µç›´æ¥å‘é€æ•°æ®ã€‚ç”±äºå¤§å®¶ä¸çŸ¥é“ç½‘ç»œæ‹¥å¡çŠ¶å†µï¼ŒåŒæ—¶å‘é€æ•°æ®ï¼Œå¯¼è‡´ä¸­é—´èŠ‚ç‚¹é˜»å¡æ‰åŒ…ï¼Œ è°ä¹Ÿå‘ä¸äº†æ•°æ®ï¼Œæ‰€ä»¥å°±æœ‰äº†æ»‘åŠ¨çª—å£æœºåˆ¶æ¥è§£å†³æ­¤é—®é¢˜ã€‚æ»‘åŠ¨çª—å£åè®®æ˜¯ç”¨æ¥æ”¹å–„ååé‡çš„ä¸€ç§ æŠ€æœ¯ï¼Œå³å®¹è®¸å‘é€æ–¹åœ¨æ¥æ”¶ä»»ä½•åº”ç­”ä¹‹å‰ä¼ é€é™„åŠ çš„åŒ…ã€‚æ¥æ”¶æ–¹å‘Šè¯‰å‘é€æ–¹åœ¨æŸä¸€æ—¶åˆ»èƒ½é€å¤šå°‘åŒ… ï¼ˆç§°çª—å£å°ºå¯¸ï¼‰ã€‚ TCP ä¸­é‡‡ç”¨æ»‘åŠ¨çª—å£æ¥è¿›è¡Œä¼ è¾“æ§åˆ¶ï¼Œæ»‘åŠ¨çª—å£çš„å¤§å°æ„å‘³ç€æ¥æ”¶æ–¹è¿˜æœ‰å¤šå¤§çš„ç¼“å†²åŒºå¯ä»¥ç”¨äº æ¥æ”¶æ•°æ®ã€‚å‘é€æ–¹å¯ä»¥é€šè¿‡æ»‘åŠ¨çª—å£çš„å¤§å°æ¥ç¡®å®šåº”è¯¥å‘é€å¤šå°‘å­—èŠ‚çš„æ•°æ®ã€‚å½“æ»‘åŠ¨çª—å£ä¸º 0 æ—¶ï¼Œå‘é€æ–¹ä¸€èˆ¬ä¸èƒ½å†å‘é€æ•°æ®æŠ¥ã€‚ æ»‘åŠ¨çª—å£æ˜¯ TCP ä¸­å®ç°è¯¸å¦‚ ACK ç¡®è®¤ã€æµé‡æ§åˆ¶ã€æ‹¥å¡æ§åˆ¶çš„æ‰¿è½½ç»“æ„ã€‚ çª—å£ç†ä¸ºç¼“å†²åŒºçš„å¤§å° æ»‘åŠ¨çª—å£çš„å¤§å°ä¼šéšç€å‘é€æ•°æ®å’Œæ¥å—æ•°æ®è€Œå˜åŒ– é€šä¿¡çš„åŒæ–¹éƒ½æœ‰å‘é€çš„ç¼“å†²åŒºå’Œæ¥æ”¶æ•°æ®çš„ç¼“å†²åŒº â€‹ æœåŠ¡å™¨: â€‹ å‘é€ç¼“å†²åŒº (å‘é€ç¼“å†²åŒºçš„çª—å£) â€‹ æ¥å—ç¼“å†²åŒº (æ¥æ”¶ç¼“å†²åŒºçš„çª—å£) â€‹ å®¢æˆ·ç«¯ â€‹ å‘é€ç¼“å†²åŒº (å‘é€ç¼“å†²åŒºçš„çª—å£) â€‹ æ¥å—ç¼“å†²åŒº 12345678å‘é€æ–¹çš„ç¼“å†²åŒº: ç™½è‰²æ ¼å­: ç©ºé—²çš„ç©ºé—´ ç°è‰²æ ¼å­: æ•°æ®å·²ç»è¢«å‘é€å‡ºå»ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰è¢«æ¥æ”¶,æœåŠ¡-å›å¤ackç¡®è®¤æ”¶åˆ°é‚£äº† ç´«è‰²æ ¼å­: è¿˜æ²¡æœ‰å‘é€å‡ºå»çš„æ•°æ® æ¥å—æ”¶æ–¹çš„ç¼“å†²åŒº: ç™½è‰²æ ¼å­: ç©ºé—²ç©ºé—´ ç´«è‰²æ ¼å­: å·²ç»æ¥æ”¶åˆ°çš„æ•°æ® 123456789101112131415161718192021# mss: Maximum Segment Size(ä¸€æ¡æ•°æ®çš„æœ€å¤§çš„æ•°æ®é‡)# win: æ»‘åŠ¨çª—å£ 1. å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘èµ·è¿æ¥ï¼Œå®¢æˆ·ç«¯çš„æ»‘åŠ¨çª—å£æ˜¯4096,ä¸€æ¬¡å‘é€çš„æœ€å¤§çš„æ•°æ®æ˜¯14602. æœåŠ¡å™¨æ¥æ”¶è¿æ¥æƒ…å†µ,å‘Šè¯‰å®¢æˆ·ç«¯æœåŠ¡çš„çª—å£å¤§å°æ˜¯6144ï¼Œä¸€æ¬¡å‘é€çš„æœ€å¤§çš„æ•°æ®æ˜¯10243. ç¬¬ä¸‰æ¬¡æ¡æ‰‹4. ç¬¬4 - 9å®¢æˆ·ç«¯è¿ç»­ç»™æœåŠ¡å™¨å‘é€äº†6kçš„æ•°æ®, æ¯æ¬¡å‘é€1k5. ç¬¬10æ¬¡, æœåŠ¡å™¨å‘Šè¯‰å®¢æˆ·ç«¯: å‘é€çš„6kæ•°æ®ä»¥åŠæ¥æ”¶åˆ°, å­˜å‚¨åœ¨ç¼“å†²åŒºä¸­, ç¼“å†²åŒºæ•°æ®å·²ç»å¤„ç†äº†2k, çª—å£å¤§å°æ˜¯2k6. ç¬¬11æ¬¡, æœåŠ¡å™¨å‘Šè¯‰å®¢æˆ·ç«¯: å‘é€çš„6kæ•°æ®ä»¥åŠæ¥æ”¶åˆ°, å­˜å‚¨åœ¨ç¼“å†²åŒºä¸­, ç¼“å†²åŒºæ•°æ®å·²ç»å¤„ç†äº†4k, çª—å£å¤§å°æ˜¯4k7. ç¬¬12æ¬¡, ç»™æœåŠ¡å™¨å‘é€äº†1kæ•°æ®# å®¢æˆ·ç«¯å‘é€è¯·æ±‚æ–­å¼€è¿æ¥ - ç¬¬ä¸€æ¬¡æŒ¥æ‰‹8. ç¬¬13æ¬¡, å®¢æˆ·ç«¯ä¸»åŠ¨å‘èµ·è¯·æ±‚å’ŒæœåŠ¡å™¨æ–­å¼€è¿æ¥, å¹¶ä¸”ç»™æœåŠ¡å™¨å‘é€äº†1kæ•°æ®9. ç¬¬14æ¬¡, æœåŠ¡å™¨å›å¤ACK 8194 a:åŒæ„æ–­å¼€è¯·æ±‚ b:å‘Šè¯‰å®¢æˆ·ç«¯å·²ç»æ¥å—åˆ°å¯¹æ–¹çš„æ‰å‘çš„2kæ•°æ® c: æ»‘åŠ¨çª—å£2k# å®¢æˆ·ç«¯ä¸€æ–¹æ–­å¼€åæ˜¯ä¸èƒ½å‘é€æ•°æ®äº†,ä½†æ˜¯å¯ä»¥æ¥å—æ•°æ®10. ç¬¬15ã€16, é€šçŸ¥å®¢æˆ·ç«¯11. ç¬¬17æ¬¡, ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹æœåŠ¡å™¨ç»™å®¢æˆ·ç«¯å‘é€FINè¯·æ±‚æ–­å¼€è¿æ¥12. ç¬¬18æ¬¡, ç¬¬å››æ¬¡å›æ”¶, å®¢æˆ·ç«¯åŒæ„äº†æœåŠ¡å™¨çš„æ–­å¼€# ç¬¬ä¸€æ¬¡æ¡æ‰‹ ä¸èƒ½æºå¸¦æ•°æ® å› ä¸º: ä¸‰æ¬¡æ¡æ‰‹è¿˜æ²¡å»ºç«‹è¿æ¥å°±ä¸èƒ½æºå¸¦æ•°æ®# ç¬¬äºŒæ¬¡æ¡æ‰‹ä¹‹å å·¦è¾¹å°±å¯ä»¥ç»™å³é¢å‘é€æ•°æ®äº†, ä½†æ˜¯å³é¢ä¸èƒ½ç»™ç»™å·¦é¢å‘é€æ•°æ®, åªèƒ½ç­‰ä¸‰æ¬¡æ¡æ‰‹ç»“æŸåå³é¢æ‰èƒ½ç»™å·¦é¢å‘é€æ•°æ® 9. TCP å››æ¬¡æŒ¥æ‰‹123å››æ¬¡æŒ¥æ‰‹å‘ç”Ÿåœ¨æ–­å¼€è¿æ¥çš„æ—¶å€™ï¼Œåœ¨ç¨‹åºä¸­è°ƒç”¨äº†close()ä¼šä½¿ç”¨TCPåè®®è¿›è¡Œå››æ¬¡æŒ¥æ‰‹ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½å¯ä»¥ä¸»åŠ¨å‘èµ·æ–­å¼€è¿æ¥,è°å…ˆè°ƒç”¨close()è°å°±æ˜¯å‘èµ·ã€‚å› ä¸ºåœ¨TCPè¿æ¥çš„æ—¶å€™, é‡‡ç”¨ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹çš„è¿æ¥æ˜¯åŒå‘çš„, åœ¨æ–­å¼€çš„æ—¶å€™ä¹Ÿéœ€è¦åŒå‘æ–­å¼€ã€‚ TCP é€šä¿¡å¹¶å‘ - è¿›ç¨‹ TCPå¤šç”¨æˆ·å’ŒæœåŠ¡å™¨ä¼ è¾“ 123456è¦å®ç°TCPé€šä¿¡æœåŠ¡å™¨å¤„ç†å¹¶å‘çš„ä»»åŠ¡, ä½¿ç”¨å¤šçº¿ç¨‹æˆ–è€…å¤šè¿›ç¨‹æ¥è§£å†³ã€‚æ€è·¯: 1. ä¸€ä¸ªçˆ¶è¿›ç¨‹, å¤šä¸ªå­è¿›ç¨‹ 2. çˆ¶è¿›ç¨‹è´Ÿè´£ç­‰å¾…å¹¶æ¥å—å®¢æˆ·ç«¯çš„è¿æ¥ 3. å­è¿›ç¨‹: å®Œæˆé€šä¿¡, æ¥å—ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥, å°±åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ç”¨äºé€šä¿¡ server_process.c123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126/************************************************************************* &gt; File Name: server_process.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´06æœˆ26æ—¥ æ˜ŸæœŸæ—¥ 21æ—¶33åˆ†58ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;signal.h&gt;#include &lt;wait.h&gt;#include &lt;errno.h&gt;void recyleChild(int arg) &#123; while(1) &#123; int ret = waitpid(-1, NULL, WNOHANG); if(ret == -1) &#123; // æ‰€æœ‰çš„å­è¿›ç¨‹éƒ½å›æ”¶äº† break; &#125; else if(ret == 0) &#123; // è¿˜æœ‰å­è¿›ç¨‹æ´»ç€ break; &#125; else if(ret &gt; 0)&#123; // è¢«å›æ”¶çš„å­è¿›ç¨‹çš„ PID printf(&quot;å­è¿›ç¨‹: %d è¢«å›æ”¶äº†\\n&quot;, ret); &#125; &#125;&#125;int main() &#123; // æ³¨å†Œä¿¡å·æ•æ‰ struct sigaction act; act.sa_flags = 0; sigemptyset(&amp;act.sa_mask); act.sa_handler = recyleChild; sigaction(SIGCHLD, &amp;act, NULL); int ret = -1; // åˆ›å»ºä¸€ä¸ªsocket PF å’Œ AF æ˜¯ä¸€æ ·çš„å¯ä»¥æ··ç”¨ int lfd = socket(PF_INET, SOCK_STREAM, 0); if(lfd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // ç»‘å®š struct sockaddr_in saddr; saddr.sin_family = AF_INET; saddr.sin_port = htons(5210); saddr.sin_addr.s_addr = INADDR_ANY; ret = bind(lfd, (struct sockaddr *)&amp;saddr, sizeof(saddr)); if(ret == -1) &#123; perror(&quot;bind&quot;); exit(-1); &#125; // ç›‘å¬ ret = listen(lfd, 128); if(ret == -1) &#123; perror(&quot;listen&quot;); exit(-1); &#125; // ä¸æ–­å¾ªç¯ ç­‰å¾…æ¥å—å®¢æˆ·ç«¯ while(1) &#123; // ä¿å­˜è¿æ¥è¿›æ¥çš„å®¢æˆ·ç«¯çš„ä¿¡æ¯ struct sockaddr_in cliaddr; // int len = sizeof(cliaddr); socklen_t len = sizeof(cliaddr); // æ¥å—è¿æ¥ int cfd = accept(lfd, (struct sockaddr *)&amp;cliaddr, &amp;len); if(cfd == -1) &#123; if(errno == EINTR) &#123; continue; &#125; perror(&quot;accept&quot;); exit(-1); &#125; // æ¯ä¸€ä¸ªè¿æ¥è¿›æ¥, éƒ½åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹è·Ÿå®¢æˆ·ç«¯é€šä¿¡ pid_t pid = fork(); if(pid == 0) &#123; // å­è¿›ç¨‹ // è·å–å®¢æˆ·ç«¯çš„ä¿¡æ¯ char cliIP[16]; inet_ntop(AF_INET, &amp;cliaddr.sin_addr.s_addr, cliIP, sizeof(cliIP)); unsigned short cliProt = ntohs(cliaddr.sin_port); printf(&quot;client ip is : %s, prot is : %d\\n&quot;, cliIP, cliProt); // æ¥å—å®¢æˆ·ç«¯å‘æ¥çš„æ•°æ® char recvBuf[1024]; while(1) &#123; memset(recvBuf, 0, sizeof(recvBuf)); int len = read(cfd, &amp;recvBuf, sizeof(recvBuf)); if(len == -1) &#123; perror(&quot;read&quot;); exit(-1); &#125; else if(len &gt; 0) &#123; printf(&quot;IP : %s\\n recv client Data : %s\\n\\n&quot;, cliIP, recvBuf); &#125; else &#123; printf(&quot;client closed ... ...\\n&quot;); break; &#125; // å›å°„ write(cfd, recvBuf, strlen(recvBuf)); &#125; close(cfd); // é€€å‡ºå½“å‰å­è¿›ç¨‹ exit(0); &#125; &#125; close(lfd); return 0;&#125; client.c123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263/************************************************************************* &gt; File Name: client.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´06æœˆ23æ—¥ æ˜ŸæœŸå›› 14æ—¶41åˆ†42ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt;// TCP é€šä¿¡å®¢æˆ·ç«¯int main() &#123; // 1.åˆ›å»ºå¥—æ¥å­— int fd = socket(AF_INET, SOCK_STREAM, 0); if(fd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // 2.è¿æ¥æœåŠ¡ struct sockaddr_in serveraddr; serveraddr.sin_family = AF_INET; serveraddr.sin_port = htons(5210); inet_pton(AF_INET, &quot;192.168.222.1&quot;, &amp;serveraddr.sin_addr.s_addr); int ret = connect(fd, (struct sockaddr *)&amp;serveraddr, sizeof(serveraddr)); if(ret == -1) &#123; perror(&quot;connect&quot;); exit(-1); &#125; // é€šä¿¡ char recvBuf[1024] = &#123;0&#125;; char data[1024]; while (1) &#123; memset(data, 0, sizeof(data)); memset(recvBuf, 0, sizeof(recvBuf)); // è·å–æ ‡å‡†è¾“å…¥(stdin)çš„æ•°æ® fgets(data, sizeof(data), stdin); write(fd, data, strlen(data)); int readLen = read(fd, recvBuf, sizeof(recvBuf)); if(readLen == -1) &#123; perror(&quot;read&quot;); exit(-1); &#125; else if(readLen &gt; 0) &#123; printf(&quot;recv server data : %s\\n&quot;, recvBuf); &#125; else if(readLen == 0) &#123; // è¡¨ç¤ºæœåŠ¡ç«¯æ–­å¼€è¿æ¥ printf(&quot;server closed ... ...\\n&quot;); break; &#125; &#125; // å…³é—­ close(fd); return 0;&#125; TCP é€šä¿¡å¹¶å‘ - çº¿ç¨‹server_thread.c123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128/************************************************************************* &gt; File Name: server_thread.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´06æœˆ27æ—¥ æ˜ŸæœŸä¸€ 18æ—¶00åˆ†07ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;#include &lt;pthread.h&gt;struct sockInfo &#123; // é€šä¿¡çš„æ–‡ä»¶æè¿°ç¬¦ int fd; // çº¿ç¨‹å· pthread_t tid; // å®¢æˆ·ç«¯çš„ä¿¡æ¯ struct sockaddr_in addr;&#125;;struct sockInfo sockinfos[128];void *working(void *arg) &#123; // å­çº¿ç¨‹å’Œå®¢æˆ·ç«¯é€šä¿¡ cfdã€å®¢æˆ·ç«¯çš„ä¿¡æ¯ã€çº¿ç¨‹å· // è·å–å®¢æˆ·ç«¯ä¿¡æ¯ struct sockInfo *pinfo = (struct sockInfo *) arg; char cliIP[16]; inet_ntop(AF_INET, &amp;pinfo-&gt;addr.sin_addr.s_addr, cliIP, sizeof(cliIP)); unsigned short cliPort = pinfo-&gt;addr.sin_port; printf(&quot;clien ip is : %s, prot is %d\\n&quot;, cliIP, cliPort); char recvBuf[1024]; while(1) &#123; memset(recvBuf, 0, sizeof(recvBuf)); int len = read(pinfo-&gt;fd, &amp;recvBuf, sizeof(recvBuf)); if(len == -1) &#123; perror(&quot;read&quot;); exit(-1); &#125; else if(len &gt; 0) &#123; printf(&quot;IP : %s\\n recv client Data : %s\\n\\n&quot;, cliIP, recvBuf); &#125; else &#123; printf(&quot;client closed ... ...\\n&quot;); break; &#125; // å›å°„ write(pinfo-&gt;fd, recvBuf, strlen(recvBuf)); &#125; pinfo-&gt;fd = -1; pinfo-&gt;tid = -1; close(pinfo-&gt;fd); return NULL;&#125;int main() &#123; // åˆ›å»ºä¸€ä¸ªsocket() int lfd = socket(AF_INET, SOCK_STREAM, 0); if(lfd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // ç»‘å®š struct sockaddr_in saddr; saddr.sin_family = AF_INET; saddr.sin_port = htons(5200); saddr.sin_addr.s_addr = INADDR_ANY; int ret = bind(lfd, (struct sockaddr *)&amp;saddr, sizeof(saddr)); // ç›‘å¬ ret = listen(lfd, 128); if(ret == -1) &#123; perror(&quot;listen&quot;); exit(-1); &#125; // åˆå§‹åŒ–æ•°æ® int max = sizeof(sockinfos) / sizeof(sockinfos[0]); for(int i = 0; i &lt; max; i++) &#123; bzero(&amp;sockinfos[i], sizeof(sockinfos[i])); sockinfos[i].fd = -1; sockinfos[i].tid = -1; &#125; // å¾ªç¯ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥, ä¸€æ—¦ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥è¿›æ¥, å°±åˆ›å»ºä¸€ä¸ªçº¿ç¨‹è¿›è¡Œé€šä¿¡ while(1) &#123; struct sockaddr_in cliaddr; socklen_t len = sizeof(cliaddr); int cfd = accept(lfd, (struct sockaddr *) &amp;cliaddr, &amp;len); // æ–‡ä»¶æè¿°ç¬¦fdã€å®¢æˆ·ç«¯çš„ä¿¡æ¯addrã€çº¿ç¨‹å·tid struct sockInfo *pinfo; for(int i = 0; i &lt; max; i++) &#123; // ä»è¿™ä¸ªæ•°ç»„ä¸­æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥ç”¨çš„sockInfoå˜é‡/å…ƒç´  if(sockinfos[i].fd == -1) &#123; pinfo = &amp;sockinfos[i]; break; &#125; if(i == max - 1) &#123; sleep(1); i--; &#125; &#125; pinfo-&gt;fd = cfd; memcpy(&amp;pinfo-&gt;addr, &amp;cliaddr, len); // åˆ›å»ºå­çº¿ç¨‹ // pthread_t tid; pthread_create(&amp;pinfo-&gt;tid, NULL, working, pinfo); // çº¿ç¨‹åˆ†ç¦» - ä½¿çº¿ç¨‹åœ¨ç»“æŸæ—¶å€™è‡ªåŠ¨å›æ”¶ pthread_detach(pinfo-&gt;tid); &#125; close(lfd); return 0;&#125; gcc server_thread.c -o server_thread -pthread client.c123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263/************************************************************************* &gt; File Name: client.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´06æœˆ23æ—¥ æ˜ŸæœŸå›› 14æ—¶41åˆ†42ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;arpa/inet.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt;// TCP é€šä¿¡å®¢æˆ·ç«¯int main() &#123; // 1.åˆ›å»ºå¥—æ¥å­— int fd = socket(AF_INET, SOCK_STREAM, 0); if(fd == -1) &#123; perror(&quot;socket&quot;); exit(-1); &#125; // 2.è¿æ¥æœåŠ¡ struct sockaddr_in serveraddr; serveraddr.sin_family = AF_INET; serveraddr.sin_port = htons(5200); inet_pton(AF_INET, &quot;192.168.222.1&quot;, &amp;serveraddr.sin_addr.s_addr); int ret = connect(fd, (struct sockaddr *)&amp;serveraddr, sizeof(serveraddr)); if(ret == -1) &#123; perror(&quot;connect&quot;); exit(-1); &#125; // é€šä¿¡ char recvBuf[1024] = &#123;0&#125;; char data[1024]; while (1) &#123; memset(data, 0, sizeof(data)); memset(recvBuf, 0, sizeof(recvBuf)); // è·å–æ ‡å‡†è¾“å…¥(stdin)çš„æ•°æ® fgets(data, sizeof(data), stdin); write(fd, data, strlen(data)); int readLen = read(fd, recvBuf, sizeof(recvBuf)); if(readLen == -1) &#123; perror(&quot;read&quot;); exit(-1); &#125; else if(readLen &gt; 0) &#123; printf(&quot;recv server data : %s\\n&quot;, recvBuf); &#125; else if(readLen == 0) &#123; // è¡¨ç¤ºæœåŠ¡ç«¯æ–­å¼€è¿æ¥ printf(&quot;server closed ... ...\\n&quot;); break; &#125; &#125; // å…³é—­ close(fd); return 0;&#125; 11. TCP çŠ¶æ€è½¬æ¢ çº¢è‰²çº¿: å®¢æˆ·ç«¯ ç»¿è‰²çº¿: æœåŠ¡å™¨ 2MSLï¼ˆMaximum Segment Lifetimeï¼‰ ä¸»åŠ¨æ–­å¼€è¿æ¥çš„ä¸€æ–¹, æœ€åè¿›å‡ºå…¥ä¸€ä¸ª TIME_WAITçŠ¶æ€, è¿™ä¸ªçŠ¶æ€ä¼šæŒç»­: 2ms msl: å®˜æ–¹å»ºè®®: 2åˆ†é’Ÿ, å®é™…æ˜¯30s å½“ TCP è¿æ¥ä¸»åŠ¨å…³é—­æ–¹æ¥æ”¶åˆ°è¢«åŠ¨å…³é—­æ–¹å‘é€çš„ FIN å’Œæœ€ç»ˆçš„ ACK åï¼Œè¿æ¥çš„ä¸»åŠ¨å…³é—­æ–¹ å¿…é¡»å¤„äºTIME_WAIT çŠ¶æ€å¹¶æŒç»­ 2MSL æ—¶é—´ã€‚ è¿™æ ·å°±èƒ½å¤Ÿè®© TCP è¿æ¥çš„ä¸»åŠ¨å…³é—­æ–¹åœ¨å®ƒå‘é€çš„ ACK ä¸¢å¤±çš„æƒ…å†µä¸‹é‡æ–°å‘é€æœ€ç»ˆçš„ ACKã€‚ ä¸»åŠ¨å…³é—­æ–¹é‡æ–°å‘é€çš„æœ€ç»ˆ ACK å¹¶ä¸æ˜¯å› ä¸ºè¢«åŠ¨å…³é—­æ–¹é‡ä¼ äº† ACKï¼ˆå®ƒä»¬å¹¶ä¸æ¶ˆè€—åºåˆ—å·ï¼Œ è¢«åŠ¨å…³é—­æ–¹ä¹Ÿä¸ä¼šé‡ä¼ ï¼‰ï¼Œè€Œæ˜¯å› ä¸ºè¢«åŠ¨å…³é—­æ–¹é‡ä¼ äº†å®ƒçš„ FINã€‚äº‹å®ä¸Šï¼Œè¢«åŠ¨å…³é—­æ–¹æ€»æ˜¯ é‡ä¼  FIN ç›´åˆ°å®ƒæ”¶åˆ°ä¸€ä¸ªæœ€ç»ˆçš„ ACKã€‚ åŠå…³é—­ å½“ TCP é“¾æ¥ä¸­ A å‘ B å‘é€ FIN è¯·æ±‚å…³é—­ï¼Œå¦ä¸€ç«¯ B å›åº” ACK ä¹‹åï¼ˆA ç«¯è¿›å…¥ FIN_WAIT_2 çŠ¶æ€ï¼‰ï¼Œå¹¶æ²¡æœ‰ç«‹å³å‘é€ FIN ç»™ Aï¼ŒA æ–¹å¤„äºåŠè¿æ¥çŠ¶æ€ï¼ˆåŠå¼€å…³ï¼‰ï¼Œæ­¤æ—¶ A å¯ä»¥æ¥æ”¶ B å‘ é€çš„æ•°æ®ï¼Œä½†æ˜¯ A å·²ç»ä¸èƒ½å†å‘ B å‘é€æ•°æ®ã€‚ ä»ç¨‹åºçš„è§’åº¦ï¼Œå¯ä»¥ä½¿ç”¨ API æ¥æ§åˆ¶å®ç°åŠè¿æ¥çŠ¶æ€ 123456789#include &lt;sys/socket.h&gt;int shutdown(int sockfd, int how); sockfd: éœ€è¦å…³é—­çš„socketçš„æè¿°ç¬¦ how: å…è®¸ä¸ºshutdownæ“ä½œé€‰æ‹©ä»¥ä¸‹å‡ ç§æ–¹å¼: SHUT_RD(0)ï¼š å…³é—­sockfdä¸Šçš„è¯»åŠŸèƒ½ï¼Œæ­¤é€‰é¡¹å°†ä¸å…è®¸sockfdè¿›è¡Œè¯»æ“ä½œã€‚ è¯¥å¥—æ¥å­—ä¸å†æ¥æ”¶æ•°æ®ï¼Œä»»ä½•å½“å‰åœ¨å¥—æ¥å­—æ¥å—ç¼“å†²åŒºçš„æ•°æ®å°†è¢«æ— å£°çš„ä¸¢å¼ƒæ‰ã€‚ SHUT_WR(1): å…³é—­sockfdçš„å†™åŠŸèƒ½ï¼Œæ­¤é€‰é¡¹å°†ä¸å…è®¸sockfdè¿›è¡Œå†™æ“ä½œã€‚è¿›ç¨‹ä¸èƒ½åœ¨å¯¹æ­¤å¥—æ¥å­—å‘å‡ºå†™æ“ä½œã€‚ SHUT_RDWR(2):å…³é—­sockfdçš„è¯»å†™åŠŸèƒ½ã€‚ç›¸å½“äºè°ƒç”¨shutdownä¸¤æ¬¡ï¼šé¦–å…ˆæ˜¯ä»¥SHUT_RD,ç„¶åä»¥SHUT_WRã€‚ ä½¿ç”¨ close ä¸­æ­¢ä¸€ä¸ªè¿æ¥ï¼Œä½†å®ƒåªæ˜¯å‡å°‘æè¿°ç¬¦çš„å¼•ç”¨è®¡æ•°ï¼Œå¹¶ä¸ç›´æ¥å…³é—­è¿æ¥ï¼Œåªæœ‰å½“æè¿°ç¬¦çš„å¼•ç”¨ è®¡æ•°ä¸º 0 æ—¶æ‰å…³é—­è¿æ¥ã€‚shutdown ä¸è€ƒè™‘æè¿°ç¬¦çš„å¼•ç”¨è®¡æ•°ï¼Œç›´æ¥å…³é—­æè¿°ç¬¦ã€‚ä¹Ÿå¯é€‰æ‹©ä¸­æ­¢ä¸€ä¸ªæ–¹ å‘çš„è¿æ¥ï¼Œåªä¸­æ­¢è¯»æˆ–åªä¸­æ­¢å†™ã€‚ æ³¨æ„: å¦‚æœæœ‰å¤šä¸ªè¿›ç¨‹å…±äº«ä¸€ä¸ªå¥—æ¥å­—ï¼Œclose æ¯è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œè®¡æ•°å‡ 1 ï¼Œç›´åˆ°è®¡æ•°ä¸º 0 æ—¶ï¼Œä¹Ÿå°±æ˜¯æ‰€ç”¨ è¿›ç¨‹éƒ½è°ƒç”¨äº† closeï¼Œå¥—æ¥å­—å°†è¢«é‡Šæ”¾ã€‚ åœ¨å¤šè¿›ç¨‹ä¸­å¦‚æœä¸€ä¸ªè¿›ç¨‹è°ƒç”¨äº† shutdown(sfd, SHUT_RDWR) åï¼Œå…¶å®ƒçš„è¿›ç¨‹å°†æ— æ³•è¿›è¡Œé€šä¿¡ã€‚ ä½†å¦‚æœä¸€ä¸ªè¿›ç¨‹ close(sfd) å°†ä¸ä¼šå½±å“åˆ°å…¶å®ƒè¿›ç¨‹ã€‚ 12. ç«¯å£å¤ç”¨ ç«¯å£å¤ç”¨æœ€å¸¸ç”¨çš„ç”¨é€”æ˜¯: é˜²æ­¢æœåŠ¡å™¨é‡å¯æ—¶ä¹‹å‰ç»‘å®šçš„ç«¯å£è¿˜æœªé‡Šæ”¾ ç¨‹åºçªç„¶é€€å‡ºè€Œç³»ç»Ÿæ²¡æœ‰é‡Šæ”¾ç«¯å£ 1234567891011121314151617#include &lt;sys/types.h&gt;#include &lt;sys/socket.h&gt;// è®¾ç½®å¥—æ¥å­—çš„å±æ€§ (ä¸ä»…ä»…èƒ½è®¾ç½®ç«¯å£çš„å¤ç”¨)int setsockopt(int sockfd, int level, int optname, const void *optval, socklen_t optlen); å‚æ•°: - socket: è¦æ“ä½œçš„æ–‡ä»¶æè¿°ç¬¦ - level: çº§åˆ« - SOL_SOCKET (ç«¯å£å¤ç”¨çš„çº§åˆ«) - optname: é€‰é¡¹çš„å‘½ç§° - SO_REUSEADDR - SO_REUSEPORT - optval: ç«¯å£å¤ç”¨çš„å€¼(æ•´å½¢) - 1: å¯ä»¥å¤ç”¨ - 0: ä¸å¯ä»¥å¤ç”¨ - oprlen: optvalå‚æ•°çš„å¤§å°ç«¯å£å¤ç”¨: è®¾ç½®çš„æ—¶æœºæ˜¯åœ¨æœåŠ¡å™¨ç»‘å®šç«¯å£ä¹‹å‰ã€‚ setsockopt(); bind(); æŸ¥çœ‹ç½‘ç»œç›¸å…³ä¿¡æ¯ç›¸å…³çš„å‘½ä»¤netstat å‚æ•°: -a æ˜¾ç¤ºæ‰€æœ‰è¿æ¥çš„socke -p æ˜¾ç¤ºæ­£åœ¨ä½¿ç”¨socketçš„ç¨‹åºçš„åç§° -n ç›´æ¥ä½¿ç”¨IP -t æ˜¾ç¤ºTCP -u æ˜¾ç¤ºUDP netstat -anp | grep ç«¯å£ TCP - æœåŠ¡ç«¯ å’Œ å®¢æˆ·ç«¯ - ç½‘ç»œè¿æ¥çŠ¶æ€åŠå…¶ç›¸å…³ä¿¡æ¯æ­£å¸¸é€šä¿¡ä¸‹çŠ¶æ€æ˜¯ä¸å›æ”¹å˜ 123ä¸ºä»€ä¹ˆæœ‰ä¸¤ä¸ª server ç¬¬ä¸€ä¸ªæ˜¯ç›‘å¬çš„ ç¬¬äºŒä¸ªæ˜¯å»ºç«‹è¿æ¥çš„ ESTABLISHED æ–­å¼€æœåŠ¡å™¨ç«¯ å¯çœ‹ä¸Šé¢å›¾è§£ - çŠ¶æ€","categories":[{"name":"Linuxç½‘ç»œç¼–ç¨‹","slug":"Linuxç½‘ç»œç¼–ç¨‹","permalink":"https://tutouwang.vercel.app/categories/Linux%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"}],"tags":[]},{"title":"ç½‘ç»œåŸºç¡€","slug":"Linuxç½‘ç»œç¼–ç¨‹/ç½‘ç»œåŸºç¡€","date":"2022-06-15T01:31:01.000Z","updated":"2022-07-01T01:47:50.435Z","comments":true,"path":"2022/06/15/Linuxç½‘ç»œç¼–ç¨‹/ç½‘ç»œåŸºç¡€/","link":"","permalink":"https://tutouwang.vercel.app/2022/06/15/Linux%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/","excerpt":"","text":"1.ç½‘ç»œç»“æ„æ¨¡å¼C&#x2F;Sç»“æ„ç®€ä»‹ æœåŠ¡å™¨ - å®¢æˆ·æœºï¼Œå³ Client - Serverï¼ˆC&#x2F;Sï¼‰ç»“æ„ã€‚C&#x2F;S ç»“æ„é€šå¸¸é‡‡å–ä¸¤å±‚ç»“æ„ã€‚æœåŠ¡å™¨è´Ÿè´£æ•°æ®çš„ ç®¡ç†ï¼Œå®¢æˆ·æœºè´Ÿè´£å®Œæˆä¸ç”¨æˆ·çš„äº¤äº’ä»»åŠ¡ã€‚å®¢æˆ·æœºæ˜¯å› ç‰¹ç½‘ä¸Šè®¿é—®åˆ«äººä¿¡æ¯çš„æœºå™¨ï¼ŒæœåŠ¡å™¨åˆ™æ˜¯æ ä¾›ä¿¡æ¯ä¾›äººè®¿é—®çš„è®¡ç®—æœºã€‚ å®¢æˆ·æœºé€šè¿‡å±€åŸŸç½‘ä¸æœåŠ¡å™¨ç›¸è¿ï¼Œæ¥å—ç”¨æˆ·çš„è¯·æ±‚ï¼Œå¹¶é€šè¿‡ç½‘ç»œå‘æœåŠ¡å™¨æå‡ºè¯·æ±‚ï¼Œå¯¹æ•°æ®åº“è¿›è¡Œ æ“ä½œã€‚æœåŠ¡å™¨æ¥å—å®¢æˆ·æœºçš„è¯·æ±‚ï¼Œå°†æ•°æ®æäº¤ç»™å®¢æˆ·æœºï¼Œå®¢æˆ·æœºå°†æ•°æ®è¿›è¡Œè®¡ç®—å¹¶å°†ç»“æœå‘ˆç°ç»™ç”¨ æˆ·ã€‚æœåŠ¡å™¨è¿˜è¦æä¾›å®Œå–„å®‰å…¨ä¿æŠ¤åŠå¯¹æ•°æ®å®Œæ•´æ€§çš„å¤„ç†ç­‰æ“ä½œï¼Œå¹¶å…è®¸å¤šä¸ªå®¢æˆ·æœºåŒæ—¶è®¿é—®æœåŠ¡ å™¨ï¼Œè¿™å°±å¯¹æœåŠ¡å™¨çš„ç¡¬ä»¶å¤„ç†æ•°æ®èƒ½åŠ›æå‡ºäº†å¾ˆé«˜çš„è¦æ±‚ã€‚ åœ¨C&#x2F;Sç»“æ„ä¸­ï¼Œåº”ç”¨ç¨‹åºåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šæœåŠ¡å™¨éƒ¨åˆ†å’Œå®¢æˆ·æœºéƒ¨åˆ†ã€‚æœåŠ¡å™¨éƒ¨åˆ†æ˜¯å¤šä¸ªç”¨æˆ·å…±äº«çš„ä¿¡ æ¯ä¸åŠŸèƒ½ï¼Œæ‰§è¡Œåå°æœåŠ¡ï¼Œå¦‚æ§åˆ¶å…±äº«æ•°æ®åº“çš„æ“ä½œç­‰ï¼›å®¢æˆ·æœºéƒ¨åˆ†ä¸ºç”¨æˆ·æ‰€ä¸“æœ‰ï¼Œè´Ÿè´£æ‰§è¡Œå‰å° åŠŸèƒ½ï¼Œåœ¨å‡ºé”™æç¤ºã€åœ¨çº¿å¸®åŠ©ç­‰æ–¹é¢éƒ½æœ‰å¼ºå¤§çš„åŠŸèƒ½ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å­ç¨‹åºé—´è‡ªç”±åˆ‡æ¢ã€‚ ä¼˜ç‚¹ èƒ½å……åˆ†å‘æŒ¥å®¢æˆ·ç«¯ PC çš„å¤„ç†èƒ½åŠ›ï¼Œå¾ˆå¤šå·¥ä½œå¯ä»¥åœ¨å®¢æˆ·ç«¯å¤„ç†åå†æäº¤ç»™æœåŠ¡å™¨ï¼Œæ‰€ä»¥ C&#x2F;S ç»“æ„ å®¢æˆ·ç«¯å“åº”é€Ÿåº¦å¿«ï¼› æ“ä½œç•Œé¢æ¼‚äº®ã€å½¢å¼å¤šæ ·ï¼Œå¯ä»¥å……åˆ†æ»¡è¶³å®¢æˆ·è‡ªèº«çš„ä¸ªæ€§åŒ–è¦æ±‚ï¼› C&#x2F;S ç»“æ„çš„ç®¡ç†ä¿¡æ¯ç³»ç»Ÿå…·æœ‰è¾ƒå¼ºçš„äº‹åŠ¡å¤„ç†èƒ½åŠ›ï¼Œèƒ½å®ç°å¤æ‚çš„ä¸šåŠ¡æµç¨‹ï¼› å®‰å…¨æ€§è¾ƒé«˜ï¼ŒC&#x2F;S ä¸€èˆ¬é¢å‘ç›¸å¯¹å›ºå®šçš„ç”¨æˆ·ç¾¤ï¼Œç¨‹åºæ›´åŠ æ³¨é‡æµç¨‹ï¼Œå®ƒå¯ä»¥å¯¹æƒé™è¿›è¡Œå¤šå±‚æ¬¡æ ¡ éªŒï¼Œæä¾›äº†æ›´å®‰å…¨çš„å­˜å–æ¨¡å¼ï¼Œå¯¹ä¿¡æ¯å®‰å…¨çš„æ§åˆ¶èƒ½åŠ›å¾ˆå¼ºï¼Œä¸€èˆ¬é«˜åº¦æœºå¯†çš„ä¿¡æ¯ç³»ç»Ÿé‡‡ç”¨ C&#x2F;S ç»“ æ„é€‚å®œã€‚ ç¼ºç‚¹ å®¢æˆ·ç«¯éœ€è¦å®‰è£…ä¸“ç”¨çš„å®¢æˆ·ç«¯è½¯ä»¶ã€‚é¦–å…ˆæ¶‰åŠåˆ°å®‰è£…çš„å·¥ä½œé‡ï¼Œå…¶æ¬¡ä»»ä½•ä¸€å°ç”µè„‘å‡ºé—®é¢˜ï¼Œå¦‚ç—… æ¯’ã€ç¡¬ä»¶æŸåï¼Œéƒ½éœ€è¦è¿›è¡Œå®‰è£…æˆ–ç»´æŠ¤ã€‚ç³»ç»Ÿè½¯ä»¶å‡çº§æ—¶ï¼Œæ¯ä¸€å°å®¢æˆ·æœºéœ€è¦é‡æ–°å®‰è£…ï¼Œå…¶ç»´æŠ¤å’Œ å‡çº§æˆæœ¬éå¸¸é«˜ï¼› å¯¹å®¢æˆ·ç«¯çš„æ“ä½œç³»ç»Ÿä¸€èˆ¬ä¹Ÿä¼šæœ‰é™åˆ¶ï¼Œä¸èƒ½å¤Ÿè·¨å¹³å°ã€‚ B&#x2F;Sç»“æ„ç®€ä»‹ B&#x2F;S ç»“æ„ï¼ˆBrowser&#x2F;Serverï¼Œæµè§ˆå™¨&#x2F;æœåŠ¡å™¨æ¨¡å¼ï¼‰ï¼Œæ˜¯ WEB å…´èµ·åçš„ä¸€ç§ç½‘ç»œç»“æ„æ¨¡å¼ï¼ŒWEB æµè§ˆå™¨æ˜¯å®¢æˆ·ç«¯æœ€ä¸»è¦çš„åº”ç”¨è½¯ä»¶ã€‚è¿™ç§æ¨¡å¼ç»Ÿä¸€äº†å®¢æˆ·ç«¯ï¼Œå°†ç³»ç»ŸåŠŸèƒ½å®ç°çš„æ ¸å¿ƒéƒ¨åˆ†é›†ä¸­åˆ°æœ åŠ¡å™¨ä¸Šï¼Œç®€åŒ–äº†ç³»ç»Ÿçš„å¼€å‘ã€ç»´æŠ¤å’Œä½¿ç”¨ã€‚å®¢æˆ·æœºä¸Šåªè¦å®‰è£…ä¸€ä¸ªæµè§ˆå™¨ï¼Œå¦‚ Firefox æˆ– Internet Explorerï¼ŒæœåŠ¡å™¨å®‰è£… SQL Serverã€Oracleã€MySQL ç­‰æ•°æ®åº“ã€‚æµè§ˆå™¨é€šè¿‡ Web Server åŒæ•°æ® åº“è¿›è¡Œæ•°æ®äº¤äº’ ä¼˜ç‚¹B&#x2F;S æ¶æ„æœ€å¤§çš„ä¼˜ç‚¹æ˜¯æ€»ä½“æ‹¥æœ‰æˆæœ¬ä½ã€ç»´æŠ¤æ–¹ä¾¿ã€ åˆ†å¸ƒæ€§å¼ºã€å¼€å‘ç®€å•ï¼Œå¯ä»¥ä¸ç”¨å®‰è£…ä»»ä½•ä¸“é—¨çš„è½¯ ä»¶å°±èƒ½å®ç°åœ¨ä»»ä½•åœ°æ–¹è¿›è¡Œæ“ä½œï¼Œå®¢æˆ·ç«¯é›¶ç»´æŠ¤ï¼Œç³»ç»Ÿçš„æ‰©å±•éå¸¸å®¹æ˜“ï¼Œåªè¦æœ‰ä¸€å°èƒ½ä¸Šç½‘çš„ç”µè„‘å°±èƒ½ ä½¿ç”¨ã€‚ ç¼ºç‚¹ é€šä¿¡å¼€é”€å¤§ã€ç³»ç»Ÿå’Œæ•°æ®çš„å®‰å…¨æ€§è¾ƒéš¾ä¿éšœ; ä¸ªæ€§ç‰¹ç‚¹æ˜æ˜¾é™ä½ï¼Œæ— æ³•å®ç°å…·æœ‰ä¸ªæ€§åŒ–çš„åŠŸèƒ½è¦æ±‚ï¼› åè®®ä¸€èˆ¬æ˜¯å›ºå®šçš„ï¼šhttp&#x2F;https å®¢æˆ·ç«¯æœåŠ¡å™¨ç«¯çš„äº¤äº’æ˜¯è¯·æ±‚-å“åº”æ¨¡å¼ï¼Œé€šå¸¸åŠ¨æ€åˆ·æ–°é¡µé¢ï¼Œå“åº”é€Ÿåº¦æ˜æ˜¾é™ä½ã€‚ 2. MAC åœ°å€ ç½‘å¡æ˜¯ä¸€å—è¢«è®¾è®¡ç”¨æ¥å…è®¸è®¡ç®—æœºåœ¨è®¡ç®—æœºç½‘ç»œä¸Šè¿›è¡Œé€šè®¯çš„è®¡ç®—æœºç¡¬ä»¶ï¼Œåˆç§°ä¸ºç½‘ç»œé€‚é…å™¨æˆ–ç½‘ ç»œæ¥å£å¡NICã€‚å…¶æ‹¥æœ‰ MAC åœ°å€ï¼Œå±äº OSI æ¨¡å‹çš„ç¬¬ 2 å±‚ï¼Œå®ƒä½¿å¾—ç”¨æˆ·å¯ä»¥é€šè¿‡ç”µç¼†æˆ–æ— çº¿ç›¸äº’ è¿æ¥ã€‚æ¯ä¸€ä¸ªç½‘å¡éƒ½æœ‰ä¸€ä¸ªè¢«ç§°ä¸º MAC åœ°å€çš„ç‹¬ä¸€æ— äºŒçš„ 48 ä½ä¸²è¡Œå·ã€‚ç½‘å¡çš„ä¸»è¦åŠŸèƒ½ï¼š1.æ•° æ®çš„å°è£…ä¸è§£å°è£…ã€2.é“¾è·¯ç®¡ç†ã€3.æ•°æ®ç¼–ç ä¸è¯‘ç ã€‚ MAC åœ°å€ï¼ˆMedia Access Control Addressï¼‰ï¼Œç›´è¯‘ä¸ºåª’ä½“å­˜å–æ§åˆ¶ä½å€ï¼Œä¹Ÿç§°ä¸ºå±€åŸŸç½‘åœ°å€ã€ ä»¥å¤ªç½‘åœ°å€ã€ç‰©ç†åœ°å€æˆ–ç¡¬ä»¶åœ°å€ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨æ¥ç¡®è®¤ç½‘ç»œè®¾å¤‡ä½ç½®çš„ä½å€ï¼Œç”±ç½‘ç»œè®¾å¤‡åˆ¶é€ å•†ç”Ÿ äº§æ—¶çƒ§å½•åœ¨ç½‘å¡ä¸­ã€‚åœ¨ OSI æ¨¡å‹ä¸­ï¼Œç¬¬ä¸‰å±‚ç½‘ç»œå±‚è´Ÿè´£ IP åœ°å€ï¼Œç¬¬äºŒå±‚æ•°æ®é“¾è·¯å±‚åˆ™è´Ÿè´£ MAC ä½å€ ã€‚MAC åœ°å€ç”¨äºåœ¨ç½‘ç»œä¸­å”¯ä¸€æ ‡è¯†ä¸€ä¸ªç½‘å¡ï¼Œä¸€å°è®¾å¤‡è‹¥æœ‰ä¸€æˆ–å¤šä¸ªç½‘å¡ï¼Œåˆ™æ¯ä¸ªç½‘å¡éƒ½éœ€ è¦å¹¶ä¼šæœ‰ä¸€ä¸ªå”¯ä¸€çš„ MAC åœ°å€ã€‚ MAC åœ°å€çš„é•¿åº¦ä¸º 48 ä½ï¼ˆ6ä¸ªå­—èŠ‚ï¼‰ï¼Œé€šå¸¸è¡¨ç¤ºä¸º 12 ä¸ª 16 è¿›åˆ¶æ•°ï¼Œå¦‚ï¼š00-16-EA-AE-3C-40 å°± æ˜¯ä¸€ä¸ªMAC åœ°å€ï¼Œå…¶ä¸­å‰ 3 ä¸ªå­—èŠ‚ï¼Œ16 è¿›åˆ¶æ•° 00-16-EA ä»£è¡¨ç½‘ç»œç¡¬ä»¶åˆ¶é€ å•†çš„ç¼–å·ï¼Œå®ƒç”± IEEEï¼ˆç”µæ°”ä¸ç”µå­å·¥ç¨‹å¸ˆåä¼šï¼‰åˆ†é…ï¼Œè€Œå 3 ä¸ªå­—èŠ‚ï¼Œ16è¿›åˆ¶æ•° AE-3C-40 ä»£è¡¨è¯¥åˆ¶é€ å•†æ‰€åˆ¶é€ çš„ æŸä¸ªç½‘ç»œäº§å“ï¼ˆå¦‚ç½‘å¡ï¼‰çš„ç³»åˆ—å·ã€‚åªè¦ä¸æ›´æ”¹è‡ªå·±çš„ MAC åœ°å€ï¼ŒMAC åœ°å€åœ¨ä¸–ç•Œæ˜¯å”¯ä¸€çš„ã€‚ å½¢è±¡åœ°è¯´ï¼ŒMAC åœ°å€å°±å¦‚åŒèº«ä»½è¯ä¸Šçš„èº«ä»½è¯å·ç ï¼Œå…·æœ‰å”¯ä¸€æ€§ã€‚ 3. IP åœ°å€ç®€ä»‹ IP åè®®æ˜¯ä¸ºè®¡ç®—æœºç½‘ç»œç›¸äº’è¿æ¥è¿›è¡Œé€šä¿¡è€Œè®¾è®¡çš„åè®®ã€‚åœ¨å› ç‰¹ç½‘ä¸­ï¼Œå®ƒæ˜¯èƒ½ä½¿è¿æ¥åˆ°ç½‘ä¸Šçš„æ‰€ æœ‰è®¡ç®—æœºç½‘ç»œå®ç°ç›¸äº’é€šä¿¡çš„ä¸€å¥—è§„åˆ™ï¼Œè§„å®šäº†è®¡ç®—æœºåœ¨å› ç‰¹ç½‘ä¸Šè¿›è¡Œé€šä¿¡æ—¶åº”å½“éµå®ˆçš„è§„åˆ™ã€‚ä»» ä½•å‚å®¶ç”Ÿäº§çš„è®¡ç®—æœºç³»ç»Ÿï¼Œåªè¦éµå®ˆ IP åè®®å°±å¯ä»¥ä¸å› ç‰¹ç½‘äº’è¿äº’é€šã€‚å„ä¸ªå‚å®¶ç”Ÿäº§çš„ç½‘ç»œç³»ç»Ÿ å’Œè®¾å¤‡ï¼Œå¦‚ä»¥å¤ªç½‘ã€åˆ†ç»„äº¤æ¢ç½‘ç­‰ï¼Œå®ƒä»¬ç›¸äº’ä¹‹é—´ä¸èƒ½äº’é€šï¼Œä¸èƒ½äº’é€šçš„ä¸»è¦åŸå› æ˜¯å› ä¸ºå®ƒä»¬æ‰€ä¼  é€æ•°æ®çš„åŸºæœ¬å•å…ƒï¼ˆæŠ€æœ¯ä¸Šç§°ä¹‹ä¸ºâ€œå¸§â€ï¼‰çš„æ ¼å¼ä¸åŒã€‚IP åè®®å®é™…ä¸Šæ˜¯ä¸€å¥—ç”±è½¯ä»¶ç¨‹åºç»„æˆçš„åè®® è½¯ä»¶ï¼Œå®ƒæŠŠå„ç§ä¸åŒâ€œå¸§â€ç»Ÿä¸€è½¬æ¢æˆâ€œIP æ•°æ®æŠ¥â€æ ¼å¼ï¼Œè¿™ç§è½¬æ¢æ˜¯å› ç‰¹ç½‘çš„ä¸€ä¸ªæœ€é‡è¦çš„ç‰¹ç‚¹ï¼Œä½¿ æ‰€æœ‰å„ç§è®¡ç®—æœºéƒ½èƒ½åœ¨å› ç‰¹ç½‘ä¸Šå®ç°äº’é€šï¼Œå³å…·æœ‰â€œå¼€æ”¾æ€§â€çš„ç‰¹ç‚¹ã€‚æ­£æ˜¯å› ä¸ºæœ‰äº† IP åè®®ï¼Œå› ç‰¹ ç½‘æ‰å¾—ä»¥è¿…é€Ÿå‘å±•æˆä¸ºä¸–ç•Œä¸Šæœ€å¤§çš„ã€å¼€æ”¾çš„è®¡ç®—æœºé€šä¿¡ç½‘ç»œã€‚å› æ­¤ï¼ŒIP åè®®ä¹Ÿå¯ä»¥å«åšâ€œå› ç‰¹ç½‘ åè®®â€ã€‚ IP åœ°å€ï¼ˆInternet Protocol Addressï¼‰æ˜¯æŒ‡äº’è”ç½‘åè®®åœ°å€ï¼Œåˆè¯‘ä¸ºç½‘é™…åè®®åœ°å€ã€‚IP åœ°å€æ˜¯ IP åè®®æä¾›çš„ä¸€ç§ç»Ÿä¸€çš„åœ°å€æ ¼å¼ï¼Œå®ƒä¸ºäº’è”ç½‘ä¸Šçš„æ¯ä¸€ä¸ªç½‘ç»œå’Œæ¯ä¸€å°ä¸»æœºåˆ†é…ä¸€ä¸ªé€»è¾‘åœ°å€ï¼Œä»¥ æ­¤æ¥å±è”½ç‰©ç†åœ°å€çš„å·®å¼‚ã€‚ IP åœ°å€æ˜¯ä¸€ä¸ª 32 ä½çš„äºŒè¿›åˆ¶æ•°ï¼Œé€šå¸¸è¢«åˆ†å‰²ä¸º 4 ä¸ªâ€œ 8 ä½äºŒè¿›åˆ¶æ•°â€ï¼ˆä¹Ÿå°±æ˜¯ 4 ä¸ªå­—èŠ‚ï¼‰ã€‚IP åœ°å€ é€šå¸¸ç”¨â€œç‚¹åˆ†åè¿›åˆ¶â€è¡¨ç¤ºæˆï¼ˆa.b.c.dï¼‰çš„å½¢å¼ï¼Œå…¶ä¸­ï¼Œa,b,c,déƒ½æ˜¯ 0~255 ä¹‹é—´çš„åè¿›åˆ¶æ•´æ•°ã€‚ ä¾‹ï¼šç‚¹åˆ†åè¿›IPåœ°å€ï¼ˆ100.4.5.6ï¼‰ï¼Œå®é™…ä¸Šæ˜¯ 32 ä½äºŒè¿›åˆ¶æ•° ï¼ˆ01100100.00000100.00000101.00000110ï¼‰ã€‚ IP åœ°å€ç¼–å€æ–¹å¼æœ€åˆè®¾è®¡äº’è”ç½‘ç»œæ—¶ï¼Œä¸ºäº†ä¾¿äºå¯»å€ä»¥åŠå±‚æ¬¡åŒ–æ„é€ ç½‘ç»œï¼Œæ¯ä¸ª IP åœ°å€åŒ…æ‹¬ä¸¤ä¸ªæ ‡è¯†ç ï¼ˆIDï¼‰ï¼Œå³ç½‘ç»œ ID å’Œä¸»æœº IDã€‚åŒä¸€ä¸ªç‰©ç†ç½‘ç»œä¸Šçš„æ‰€æœ‰ä¸»æœºéƒ½ä½¿ç”¨åŒä¸€ä¸ªç½‘ç»œ IDï¼Œç½‘ç»œä¸Šçš„ä¸€ä¸ªä¸»æœºï¼ˆåŒ…æ‹¬ç½‘ç»œä¸Šå·¥ ä½œç«™ï¼ŒæœåŠ¡å™¨å’Œè·¯ç”±å™¨ç­‰ï¼‰æœ‰ä¸€ä¸ªä¸»æœº ID ä¸å…¶å¯¹åº”ã€‚Internet å§”å‘˜ä¼šå®šä¹‰äº† 5 ç§ IP åœ°å€ç±»å‹ä»¥é€‚åˆä¸ åŒå®¹é‡çš„ç½‘ç»œï¼Œå³ A ç±»~ E ç±»ã€‚ å…¶ä¸­ Aã€Bã€C 3ç±»ï¼ˆå¦‚ä¸‹è¡¨æ ¼ï¼‰ç”± InternetNIC åœ¨å…¨çƒèŒƒå›´å†…ç»Ÿä¸€åˆ†é…ï¼ŒDã€E ç±»ä¸ºç‰¹æ®Šåœ°å€ã€‚ ç±»åˆ« æœ€å¤§ç½‘ç»œæ•° IPåœ°å€èŒƒå›´ å•ä¸ªç½‘æ®µæœ€å¤§ä¸»æœºæ•° ç§æœ‰IPåœ°å€èŒƒå›´ A 126(2^7-2) 1.0.0.1-126.255.255.254 16777214 10.0.0.0- 10.255.255.255 B 16384(2^14) 128.0.0.1- 191.255.255.254 65534 172.16.0.0- 172.31.255.255 C 2097152(2^21) 192.0.0.1-223.255.255.254 254 192.168.0.0- 192.168.255.255 Aç±»IPåœ°å€ä¸€ä¸ª A ç±» IP åœ°å€æ˜¯æŒ‡ï¼Œ åœ¨ IP åœ°å€çš„å››æ®µå·ç ä¸­ï¼Œç¬¬ä¸€æ®µå·ç ä¸ºç½‘ç»œå·ç ï¼Œå‰©ä¸‹çš„ä¸‰æ®µå·ç ä¸ºæœ¬åœ°è®¡ç®— æœºçš„å·ç ã€‚å¦‚æœç”¨äºŒè¿›åˆ¶è¡¨ç¤º IP åœ°å€çš„è¯ï¼ŒA ç±» IP åœ°å€å°±ç”± 1 å­—èŠ‚çš„ç½‘ç»œåœ°å€å’Œ 3 å­—èŠ‚ä¸»æœºåœ°å€ç»„ æˆï¼Œç½‘ç»œåœ°å€çš„æœ€é«˜ä½å¿…é¡»æ˜¯â€œ0â€ã€‚A ç±» IP åœ°å€ä¸­ç½‘ç»œçš„æ ‡è¯†é•¿åº¦ä¸º 8 ä½ï¼Œä¸»æœºæ ‡è¯†çš„é•¿åº¦ä¸º 24 ä½ï¼ŒA ç±»ç½‘ç»œåœ°å€æ•°é‡è¾ƒå°‘ï¼Œæœ‰ 126 ä¸ªç½‘ç»œï¼Œæ¯ä¸ªç½‘ç»œå¯ä»¥å®¹çº³ä¸»æœºæ•°è¾¾ 1600 å¤šä¸‡å°ã€‚ A ç±» IP åœ°å€ åœ°å€èŒƒå›´ 1.0.0.1 - 126.255.255.254ï¼ˆäºŒè¿›åˆ¶è¡¨ç¤ºä¸ºï¼š00000001 00000000 00000000 00000001 - 01111111 11111111 11111111 11111110ï¼‰ã€‚æœ€åä¸€ä¸ªæ˜¯å¹¿æ’­åœ°å€ã€‚ A ç±» IP åœ°å€çš„å­ç½‘æ©ç ä¸º 255.0.0.0ï¼Œæ¯ä¸ªç½‘ç»œæ”¯æŒçš„æœ€å¤§ä¸»æœºæ•°ä¸º 256 çš„ 3 æ¬¡æ–¹ - 2 &#x3D; 16777214 å°ã€‚ Bç±»IPåœ°å€ä¸€ä¸ª B ç±» IP åœ°å€æ˜¯æŒ‡ï¼Œåœ¨ IP åœ°å€çš„å››æ®µå·ç ä¸­ï¼Œå‰ä¸¤æ®µå·ç ä¸ºç½‘ç»œå·ç ã€‚å¦‚æœç”¨äºŒè¿›åˆ¶è¡¨ç¤º IP åœ°å€çš„ è¯ï¼ŒB ç±» IP åœ°å€å°±ç”± 2 å­—èŠ‚çš„ç½‘ç»œåœ°å€å’Œ 2 å­—èŠ‚ä¸»æœºåœ°å€ç»„æˆï¼Œç½‘ç»œåœ°å€çš„æœ€é«˜ä½å¿…é¡»æ˜¯â€œ10â€ã€‚B ç±» IP åœ°å€ä¸­ç½‘ç»œçš„æ ‡è¯†é•¿åº¦ä¸º 16 ä½ï¼Œä¸»æœºæ ‡è¯†çš„é•¿åº¦ä¸º 16 ä½ï¼ŒB ç±»ç½‘ç»œåœ°å€é€‚ç”¨äºä¸­ç­‰è§„æ¨¡çš„ç½‘ç»œï¼Œæœ‰ 16384 ä¸ªç½‘ç»œï¼Œæ¯ä¸ªç½‘ç»œæ‰€èƒ½å®¹çº³çš„è®¡ç®—æœºæ•°ä¸º 6 ä¸‡å¤šå°ã€‚ B ç±» IP åœ°å€åœ°å€èŒƒå›´ 128.0.0.1 - 191.255.255.254 ï¼ˆäºŒè¿›åˆ¶è¡¨ç¤ºä¸ºï¼š10000000 00000000 00000000 00000001 - 10111111 11111111 11111111 11111110ï¼‰ã€‚ æœ€åä¸€ä¸ªæ˜¯å¹¿æ’­åœ°å€ã€‚ B ç±» IP åœ°å€çš„å­ç½‘æ©ç ä¸º 255.255.0.0ï¼Œæ¯ä¸ªç½‘ç»œæ”¯æŒçš„æœ€å¤§ä¸»æœºæ•°ä¸º 256 çš„ 2 æ¬¡æ–¹ - 2 &#x3D; 65534 å°ã€‚ Cç±»IPåœ°å€ä¸€ä¸ª C ç±» IP åœ°å€æ˜¯æŒ‡ï¼Œåœ¨ IP åœ°å€çš„å››æ®µå·ç ä¸­ï¼Œå‰ä¸‰æ®µå·ç ä¸ºç½‘ç»œå·ç ï¼Œå‰©ä¸‹çš„ä¸€æ®µå·ç ä¸ºæœ¬åœ°è®¡ç®— æœºçš„å·ç ã€‚å¦‚æœç”¨äºŒè¿›åˆ¶è¡¨ç¤º IP åœ°å€çš„è¯ï¼ŒC ç±» IP åœ°å€å°±ç”± 3 å­—èŠ‚çš„ç½‘ç»œåœ°å€å’Œ 1 å­—èŠ‚ä¸»æœºåœ°å€ç»„ æˆï¼Œç½‘ç»œåœ°å€çš„æœ€é«˜ä½å¿…é¡»æ˜¯â€œ110â€ã€‚C ç±» IP åœ°å€ä¸­ç½‘ç»œçš„æ ‡è¯†é•¿åº¦ä¸º 24 ä½ï¼Œä¸»æœºæ ‡è¯†çš„é•¿åº¦ä¸º 8 ä½ï¼Œ C ç±»ç½‘ç»œåœ°å€æ•°é‡è¾ƒå¤šï¼Œæœ‰ 209 ä¸‡ä½™ä¸ªç½‘ç»œã€‚é€‚ç”¨äºå°è§„æ¨¡çš„å±€åŸŸç½‘ç»œï¼Œæ¯ä¸ªç½‘ç»œæœ€å¤šåªèƒ½åŒ…å«254å° è®¡ç®—æœºã€‚ C ç±» IP åœ°å€èŒƒå›´ 192.0.0.1-223.255.255.254 ï¼ˆäºŒè¿›åˆ¶è¡¨ç¤ºä¸º: 11000000 00000000 00000000 00000001 - 11011111 11111111 11111111 11111110ï¼‰ã€‚ Cç±»IPåœ°å€çš„å­ç½‘æ©ç ä¸º 255.255.255.0ï¼Œæ¯ä¸ªç½‘ç»œæ”¯æŒçš„æœ€å¤§ä¸»æœºæ•°ä¸º 256 - 2 &#x3D; 254 å°ã€‚ Dç±»IPåœ°å€D ç±» IP åœ°å€åœ¨å†å²ä¸Šè¢«å«åšå¤šæ’­åœ°å€ï¼ˆmulticast addressï¼‰ï¼Œå³ç»„æ’­åœ°å€ã€‚åœ¨ä»¥å¤ªç½‘ä¸­ï¼Œå¤šæ’­åœ°å€å‘½ åäº†ä¸€ç»„åº”è¯¥åœ¨è¿™ä¸ªç½‘ç»œä¸­åº”ç”¨æ¥æ”¶åˆ°ä¸€ä¸ªåˆ†ç»„çš„ç«™ç‚¹ã€‚å¤šæ’­åœ°å€çš„æœ€é«˜ä½å¿…é¡»æ˜¯ â€œ1110â€ï¼ŒèŒƒå›´ä» 224.0.0.0 - 239.255.255.255ã€‚ ç‰¹æ®Šçš„ç½‘å€æ¯ä¸€ä¸ªå­—èŠ‚éƒ½ä¸º 0 çš„åœ°å€ï¼ˆ â€œ0.0.0.0â€ ï¼‰å¯¹åº”äºå½“å‰ä¸»æœºï¼› IP åœ°å€ä¸­çš„æ¯ä¸€ä¸ªå­—èŠ‚éƒ½ä¸º 1 çš„ IP åœ°å€ï¼ˆ â€œ255.255.255.255â€ ï¼‰æ˜¯å½“å‰å­ç½‘çš„å¹¿æ’­åœ°å€ï¼› IP åœ°å€ä¸­å‡¡æ˜¯ä»¥ â€œ11110â€ å¼€å¤´çš„ E ç±» IP åœ°å€éƒ½ä¿ç•™ç”¨äºå°†æ¥å’Œå®éªŒä½¿ç”¨ã€‚ IPåœ°å€ä¸­ä¸èƒ½ä»¥åè¿›åˆ¶ â€œ127â€ ä½œä¸ºå¼€å¤´ï¼Œè¯¥ç±»åœ°å€ä¸­æ•°å­— 127.0.0.1 åˆ° 127.255.255.255 ç”¨äºå›è·¯æµ‹ è¯•ï¼Œå¦‚ï¼š127.0.0.1å¯ä»¥ä»£è¡¨æœ¬æœºIPåœ°å€ã€‚ å­ç½‘æ©ç  å­ç½‘æ©ç ï¼ˆsubnet maskï¼‰åˆå«ç½‘ç»œæ©ç ã€åœ°å€æ©ç ã€å­ç½‘ç»œé®ç½©ï¼Œå®ƒæ˜¯ä¸€ç§ç”¨æ¥æŒ‡æ˜ä¸€ä¸ª IP åœ° å€çš„å“ªäº›ä½æ ‡è¯†çš„æ˜¯ä¸»æœºæ‰€åœ¨çš„å­ç½‘ï¼Œä»¥åŠå“ªäº›ä½æ ‡è¯†çš„æ˜¯ä¸»æœºçš„ä½æ©ç ã€‚å­ç½‘æ©ç ä¸èƒ½å•ç‹¬å­˜ åœ¨ï¼Œå®ƒå¿…é¡»ç»“åˆ IP åœ°å€ä¸€èµ·ä½¿ç”¨ã€‚å­ç½‘æ©ç åªæœ‰ä¸€ä¸ªä½œç”¨ï¼Œå°±æ˜¯å°†æŸä¸ª IP åœ°å€åˆ’åˆ†æˆç½‘ç»œåœ°å€å’Œ ä¸»æœºåœ°å€ä¸¤éƒ¨åˆ†ã€‚ å­ç½‘æ©ç æ˜¯ä¸€ä¸ª 32 ä½åœ°å€ï¼Œç”¨äºå±è”½ IP åœ°å€çš„ä¸€éƒ¨åˆ†ä»¥åŒºåˆ«ç½‘ç»œæ ‡è¯†å’Œä¸»æœºæ ‡è¯†ï¼Œå¹¶è¯´æ˜è¯¥ IP åœ°å€æ˜¯åœ¨å±€åŸŸç½‘ä¸Šï¼Œè¿˜æ˜¯åœ¨å¹¿åŸŸç½‘ä¸Šã€‚ å­ç½‘æ©ç æ˜¯åœ¨ IPv4 åœ°å€èµ„æºç´§ç¼ºçš„èƒŒæ™¯ä¸‹ä¸ºäº†è§£å†³ lP åœ°å€åˆ†é…è€Œäº§ç”Ÿçš„è™šæ‹Ÿ lP æŠ€æœ¯ï¼Œé€šè¿‡å­ç½‘æ©ç å°† Aã€Bã€C ä¸‰ç±»åœ°å€åˆ’åˆ†ä¸ºè‹¥å¹²å­ç½‘ï¼Œä»è€Œæ˜¾è‘—æé«˜äº† IP åœ°å€çš„åˆ†é…æ•ˆç‡ï¼Œæœ‰æ•ˆè§£å†³äº† IP åœ°å€èµ„æºç´§å¼  çš„å±€é¢ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨ä¼ä¸šå†…ç½‘ä¸­ä¸ºäº†æ›´å¥½åœ°ç®¡ç†ç½‘ç»œï¼Œç½‘ç®¡äººå‘˜ä¹Ÿåˆ©ç”¨å­ç½‘æ©ç çš„ä½œç”¨ï¼Œäººä¸ºåœ°å°†ä¸€ ä¸ªè¾ƒå¤§çš„ä¼ä¸šå†…éƒ¨ç½‘ç»œåˆ’åˆ†ä¸ºæ›´å¤šä¸ªå°è§„æ¨¡çš„å­ç½‘ï¼Œå†åˆ©ç”¨ä¸‰å±‚äº¤æ¢æœºçš„è·¯ç”±åŠŸèƒ½å®ç°å­ç½‘äº’è”ï¼Œä»è€Œ æœ‰æ•ˆè§£å†³äº†ç½‘ç»œå¹¿æ’­é£æš´å’Œç½‘ç»œç—…æ¯’ç­‰è¯¸å¤šç½‘ç»œç®¡ç†æ–¹é¢çš„é—®é¢˜ã€‚ åœ¨å¤§å¤šæ•°çš„ç½‘ç»œæ•™ç§‘ä¹¦ä¸­ï¼Œä¸€èˆ¬éƒ½å°†å­ç½‘æ©ç çš„ä½œç”¨æè¿°ä¸ºé€šè¿‡é€»è¾‘è¿ç®—ï¼Œå°† IP åœ°å€åˆ’åˆ†ä¸ºç½‘ç»œæ ‡è¯† (Net.ID) å’Œä¸»æœºæ ‡è¯†(Host.ID)ï¼Œåªæœ‰ç½‘ç»œæ ‡è¯†ç›¸åŒçš„ä¸¤å°ä¸»æœºåœ¨æ— è·¯ç”±çš„æƒ…å†µä¸‹æ‰èƒ½ç›¸äº’é€šä¿¡ã€‚ æ ¹æ® RFC950 å®šä¹‰ï¼Œå­ç½‘æ©ç æ˜¯ä¸€ä¸ª 32 ä½çš„ 2 è¿›åˆ¶æ•°ï¼Œ å…¶å¯¹åº”ç½‘ç»œåœ°å€çš„æ‰€æœ‰ä½éƒ½ç½®ä¸º 1ï¼Œå¯¹åº”äºä¸» æœºåœ°å€çš„æ‰€æœ‰ä½ç½®éƒ½ä¸º 0ã€‚å­ç½‘æ©ç å‘ŠçŸ¥è·¯ç”±å™¨ï¼Œåœ°å€çš„å“ªä¸€éƒ¨åˆ†æ˜¯ç½‘ç»œåœ°å€ï¼Œå“ªä¸€éƒ¨åˆ†æ˜¯ä¸»æœºåœ°å€ï¼Œ ä½¿è·¯ç”±å™¨æ­£ç¡®åˆ¤æ–­ä»»æ„ IP åœ°å€æ˜¯å¦æ˜¯æœ¬ç½‘æ®µçš„ï¼Œä»è€Œæ­£ç¡®åœ°è¿›è¡Œè·¯ç”±ã€‚ç½‘ç»œä¸Šï¼Œæ•°æ®ä»ä¸€ä¸ªåœ°æ–¹ä¼ åˆ°å¦ å¤–ä¸€ä¸ªåœ°æ–¹ï¼Œæ˜¯ä¾é  IP å¯»å€ã€‚ä»é€»è¾‘ä¸Šæ¥è®²ï¼Œæ˜¯ä¸¤æ­¥çš„ã€‚ç¬¬ä¸€æ­¥ï¼Œä» IP ä¸­æ‰¾åˆ°æ‰€å±çš„ç½‘ç»œï¼Œå¥½æ¯”æ˜¯å» æ‰¾è¿™ä¸ªäººæ˜¯å“ªä¸ªå°åŒºçš„ï¼›ç¬¬äºŒæ­¥ï¼Œå†ä» IP ä¸­æ‰¾åˆ°ä¸»æœºåœ¨è¿™ä¸ªç½‘ç»œä¸­çš„ä½ç½®ï¼Œå¥½æ¯”æ˜¯åœ¨å°åŒºé‡Œé¢æ‰¾åˆ°è¿™ä¸ª äººã€‚ å­ç½‘æ©ç çš„è®¾å®šå¿…é¡»éµå¾ªä¸€å®šçš„è§„åˆ™ã€‚ä¸äºŒè¿›åˆ¶ IP åœ°å€ç›¸åŒï¼Œå­ç½‘æ©ç ç”± 1 å’Œ 0 ç»„æˆï¼Œä¸” 1 å’Œ 0 åˆ†åˆ« è¿ç»­ã€‚å­ç½‘æ©ç çš„é•¿åº¦ä¹Ÿæ˜¯ 32 ä½ï¼Œå·¦è¾¹æ˜¯ç½‘ç»œä½ï¼Œç”¨äºŒè¿›åˆ¶æ•°å­— â€œ1â€ è¡¨ç¤ºï¼Œ1 çš„æ•°ç›®ç­‰äºç½‘ç»œä½çš„é•¿ åº¦ï¼›å³è¾¹æ˜¯ä¸»æœºä½ï¼Œç”¨äºŒè¿›åˆ¶æ•°å­— â€œ0â€ è¡¨ç¤ºï¼Œ0 çš„æ•°ç›®ç­‰äºä¸»æœºä½çš„é•¿åº¦ã€‚è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†è®©æ©ç  ä¸ IP åœ°å€åšæŒ‰ä½ä¸è¿ç®—æ—¶ç”¨ 0 é®ä½åŸä¸»æœºæ•°ï¼Œè€Œä¸æ”¹å˜åŸç½‘ç»œæ®µæ•°å­—ï¼Œè€Œä¸”å¾ˆå®¹æ˜“é€šè¿‡ 0 çš„ä½æ•°ç¡®å®šå­ ç½‘çš„ä¸»æœºæ•°ï¼ˆ 2 çš„ä¸»æœºä½æ•°æ¬¡æ–¹ - 2ï¼Œå› ä¸ºä¸»æœºå·å…¨ä¸º 1 æ—¶è¡¨ç¤ºè¯¥ç½‘ç»œå¹¿æ’­åœ°å€ï¼Œå…¨ä¸º 0 æ—¶è¡¨ç¤ºè¯¥ç½‘ç»œ çš„ç½‘ç»œå·ï¼Œè¿™æ˜¯ä¸¤ä¸ªç‰¹æ®Šåœ°å€ï¼‰ã€‚é€šè¿‡å­ç½‘æ©ç ï¼Œæ‰èƒ½è¡¨æ˜ä¸€å°ä¸»æœºæ‰€åœ¨çš„å­ç½‘ä¸å…¶ä»–å­ç½‘çš„å…³ç³»ï¼Œä½¿ ç½‘ç»œæ­£å¸¸å·¥ä½œã€‚ 4. ç«¯å£ç®€ä»‹â€œç«¯å£â€ æ˜¯è‹±æ–‡ port çš„æ„è¯‘ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯è®¾å¤‡ä¸å¤–ç•Œé€šè®¯äº¤æµçš„å‡ºå£ã€‚ç«¯å£å¯åˆ†ä¸ºè™šæ‹Ÿç«¯å£å’Œç‰©ç† ç«¯å£ï¼Œå…¶ä¸­è™šæ‹Ÿç«¯å£æŒ‡è®¡ç®—æœºå†…éƒ¨æˆ–äº¤æ¢æœºè·¯ç”±å™¨å†…çš„ç«¯å£ï¼Œä¸å¯è§ï¼Œæ˜¯ç‰¹æŒ‡TCP&#x2F;IPåè®®ä¸­çš„ç«¯ å£ï¼Œæ˜¯é€»è¾‘æ„ä¹‰ä¸Šçš„ç«¯å£ã€‚ä¾‹å¦‚è®¡ç®—æœºä¸­çš„ 80 ç«¯å£ã€21 ç«¯å£ã€23 ç«¯å£ç­‰ã€‚ç‰©ç†ç«¯å£åˆç§°ä¸ºæ¥ å£ï¼Œæ˜¯å¯è§ç«¯å£ï¼Œè®¡ç®—æœºèƒŒæ¿çš„ RJ45 ç½‘å£ï¼Œäº¤æ¢æœºè·¯ç”±å™¨é›†çº¿å™¨ç­‰ RJ45 ç«¯å£ã€‚ç”µè¯ä½¿ç”¨ RJ11 æ’ å£ä¹Ÿå±äºç‰©ç†ç«¯å£çš„èŒƒç•´ã€‚ å¦‚æœæŠŠ IP åœ°å€æ¯”ä½œä¸€é—´æˆ¿å­ï¼Œç«¯å£å°±æ˜¯å‡ºå…¥è¿™é—´æˆ¿å­çš„é—¨ã€‚çœŸæ­£çš„æˆ¿å­åªæœ‰å‡ ä¸ªé—¨ï¼Œä½†æ˜¯ä¸€ä¸ª IP åœ°å€çš„ç«¯å£å¯ä»¥æœ‰ 65536ï¼ˆå³ï¼š2^16ï¼‰ä¸ªä¹‹å¤šï¼ç«¯å£æ˜¯é€šè¿‡ç«¯å£å·æ¥æ ‡è®°çš„ï¼Œç«¯å£å·åªæœ‰æ•´æ•°ï¼Œ èŒƒå›´æ˜¯ä» 0 åˆ°65535ï¼ˆ2^16-1ï¼‰ã€‚ ç«¯å£ç±»å‹ å‘¨çŸ¥ç«¯å£ï¼ˆWell Known Portsï¼‰ å‘¨çŸ¥ç«¯å£æ˜¯ä¼—æ‰€å‘¨çŸ¥çš„ç«¯å£å·ï¼Œä¹Ÿå«çŸ¥åç«¯å£ã€å…¬è®¤ç«¯å£æˆ–è€…å¸¸ç”¨ç«¯å£ï¼ŒèŒƒå›´ä» 0 åˆ° 1023ï¼Œå®ƒä»¬ç´§å¯† ç»‘å®šäºä¸€äº›ç‰¹å®šçš„æœåŠ¡ã€‚ä¾‹å¦‚ 80 ç«¯å£åˆ†é…ç»™ WWW æœåŠ¡ï¼Œ21 ç«¯å£åˆ†é…ç»™ FTP æœåŠ¡ï¼Œ23 ç«¯å£åˆ†é…ç»™ TelnetæœåŠ¡ç­‰ç­‰ã€‚æˆ‘ä»¬åœ¨ IE çš„åœ°å€æ é‡Œè¾“å…¥ä¸€ä¸ªç½‘å€çš„æ—¶å€™æ˜¯ä¸å¿…æŒ‡å®šç«¯å£å·çš„ï¼Œå› ä¸ºåœ¨é»˜è®¤æƒ…å†µä¸‹ WWW æœåŠ¡çš„ç«¯å£æ˜¯ â€œ80â€ã€‚ç½‘ç»œæœåŠ¡æ˜¯å¯ä»¥ä½¿ç”¨å…¶ä»–ç«¯å£å·çš„ï¼Œå¦‚æœä¸æ˜¯é»˜è®¤çš„ç«¯å£å·åˆ™åº”è¯¥åœ¨åœ°å€æ  ä¸ŠæŒ‡å®šç«¯å£å·ï¼Œæ–¹æ³•æ˜¯åœ¨åœ°å€åé¢åŠ ä¸Šå†’å·â€œ:â€ï¼ˆåŠè§’ï¼‰ï¼Œå†åŠ ä¸Šç«¯å£å·ã€‚æ¯”å¦‚ä½¿ç”¨ â€œ8080â€ ä½œä¸º WWW æœåŠ¡çš„ç«¯å£ï¼Œåˆ™éœ€è¦åœ¨åœ°å€æ é‡Œè¾“å…¥â€œç½‘å€:8080â€ã€‚ä½†æ˜¯æœ‰äº›ç³»ç»Ÿåè®®ä½¿ç”¨å›ºå®šçš„ç«¯å£å·ï¼Œå®ƒæ˜¯ä¸èƒ½è¢«æ”¹ å˜çš„ï¼Œæ¯”å¦‚ 139 ç«¯å£ä¸“é—¨ç”¨äº NetBIOS ä¸ TCP&#x2F;IP ä¹‹é—´çš„é€šä¿¡ï¼Œä¸èƒ½æ‰‹åŠ¨æ”¹å˜ã€‚ æ³¨å†Œç«¯å£ï¼ˆRegistered Portsï¼‰ ç«¯å£å·ä» 1024 åˆ° 49151ï¼Œå®ƒä»¬æ¾æ•£åœ°ç»‘å®šäºä¸€äº›æœåŠ¡ï¼Œåˆ†é…ç»™ç”¨æˆ·è¿›ç¨‹æˆ–åº”ç”¨ç¨‹åºï¼Œè¿™äº›è¿›ç¨‹ä¸»è¦æ˜¯ ç”¨æˆ·é€‰æ‹©å®‰è£…çš„ä¸€äº›åº”ç”¨ç¨‹åºï¼Œè€Œä¸æ˜¯å·²ç»åˆ†é…å¥½äº†å…¬è®¤ç«¯å£çš„å¸¸ç”¨ç¨‹åºã€‚è¿™äº›ç«¯å£åœ¨æ²¡æœ‰è¢«æœåŠ¡å™¨èµ„ æºå ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨ç”¨æˆ·ç«¯åŠ¨æ€é€‰ç”¨ä¸ºæºç«¯å£ã€‚ åŠ¨æ€ç«¯å£ &#x2F; ç§æœ‰ç«¯å£ï¼ˆDynamic Ports &#x2F; Private Portsï¼‰ åŠ¨æ€ç«¯å£çš„èŒƒå›´æ˜¯ä» 49152 åˆ° 65535ã€‚ä¹‹æ‰€ä»¥ç§°ä¸ºåŠ¨æ€ç«¯å£ï¼Œæ˜¯å› ä¸ºå®ƒä¸€èˆ¬ä¸å›ºå®šåˆ†é…æŸç§æœåŠ¡ï¼Œè€Œæ˜¯ åŠ¨æ€åˆ†é… 5. ç½‘ç»œæ¨¡å‹OSI ä¸ƒå±‚å‚è€ƒæ¨¡å‹ ä¸ƒå±‚æ¨¡å‹ï¼Œäº¦ç§° OSIï¼ˆOpen System Interconnectionï¼‰å‚è€ƒæ¨¡å‹ï¼Œå³å¼€æ”¾å¼ç³»ç»Ÿäº’è”ã€‚å‚è€ƒæ¨¡å‹ æ˜¯å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ï¼ˆISOï¼‰åˆ¶å®šçš„ä¸€ä¸ªç”¨äºè®¡ç®—æœºæˆ–é€šä¿¡ç³»ç»Ÿé—´äº’è”çš„æ ‡å‡†ä½“ç³»ï¼Œä¸€èˆ¬ç§°ä¸º OSI å‚ è€ƒæ¨¡å‹æˆ–ä¸ƒå±‚æ¨¡å‹ã€‚ å®ƒæ˜¯ä¸€ä¸ªä¸ƒå±‚çš„ã€æŠ½è±¡çš„æ¨¡å‹ä½“ï¼Œä¸ä»…åŒ…æ‹¬ä¸€ç³»åˆ—æŠ½è±¡çš„æœ¯è¯­æˆ–æ¦‚å¿µï¼Œä¹ŸåŒ…æ‹¬å…·ä½“çš„åè®®ã€‚ ç‰©ç†å±‚ï¼šä¸»è¦å®šä¹‰ç‰©ç†è®¾å¤‡æ ‡å‡†ï¼Œå¦‚ç½‘çº¿çš„æ¥å£ç±»å‹ã€å…‰çº¤çš„æ¥å£ç±»å‹ã€å„ç§ä¼ è¾“ä»‹è´¨çš„ä¼ è¾“é€Ÿç‡ ç­‰ã€‚å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ä¼ è¾“æ¯”ç‰¹æµï¼ˆå°±æ˜¯ç”±1ã€0è½¬åŒ–ä¸ºç”µæµå¼ºå¼±æ¥è¿›è¡Œä¼ è¾“ï¼Œåˆ°è¾¾ç›®çš„åœ°åå†è½¬åŒ–ä¸º 1ã€0ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æ•°æ¨¡è½¬æ¢ä¸æ¨¡æ•°è½¬æ¢ï¼‰ã€‚è¿™ä¸€å±‚çš„æ•°æ®å«åšæ¯”ç‰¹ã€‚ æ•°æ®é“¾è·¯å±‚ï¼šå»ºç«‹é€»è¾‘è¿æ¥ã€è¿›è¡Œç¡¬ä»¶åœ°å€å¯»å€ã€å·®é”™æ ¡éªŒç­‰åŠŸèƒ½ã€‚å®šä¹‰äº†å¦‚ä½•è®©æ ¼å¼åŒ–æ•°æ®ä»¥å¸§ ä¸ºå•ä½è¿›è¡Œä¼ è¾“ï¼Œä»¥åŠå¦‚ä½•è®©æ§åˆ¶å¯¹ç‰©ç†ä»‹è´¨çš„è®¿é—®ã€‚å°†æ¯”ç‰¹ç»„åˆæˆå­—èŠ‚è¿›è€Œç»„åˆæˆå¸§ï¼Œç”¨MACåœ° å€è®¿é—®ä»‹è´¨ã€‚ ç½‘ç»œå±‚ï¼šè¿›è¡Œé€»è¾‘åœ°å€å¯»å€ï¼Œåœ¨ä½äºä¸åŒåœ°ç†ä½ç½®çš„ç½‘ç»œä¸­çš„ä¸¤ä¸ªä¸»æœºç³»ç»Ÿä¹‹é—´æä¾›è¿æ¥å’Œè·¯å¾„é€‰ æ‹©ã€‚Internetçš„å‘å±•ä½¿å¾—ä»ä¸–ç•Œå„ç«™ç‚¹è®¿é—®ä¿¡æ¯çš„ç”¨æˆ·æ•°å¤§å¤§å¢åŠ ï¼Œè€Œç½‘ç»œå±‚æ­£æ˜¯ç®¡ç†è¿™ç§è¿æ¥çš„ å±‚ã€‚ ä¼ è¾“å±‚ï¼šå®šä¹‰äº†ä¸€äº›ä¼ è¾“æ•°æ®çš„åè®®å’Œç«¯å£å·ï¼ˆ WWW ç«¯å£ 80 ç­‰ï¼‰ï¼Œå¦‚ï¼šTCPï¼ˆä¼ è¾“æ§åˆ¶åè®®ï¼Œ ä¼ è¾“æ•ˆç‡ä½ï¼Œå¯é æ€§å¼ºï¼Œç”¨äºä¼ è¾“å¯é æ€§è¦æ±‚é«˜ï¼Œæ•°æ®é‡å¤§çš„æ•°æ®ï¼‰ï¼ŒUDPï¼ˆç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼Œä¸ TCP ç‰¹æ€§æ°æ°ç›¸åï¼Œç”¨äºä¼ è¾“å¯é æ€§è¦æ±‚ä¸é«˜ï¼Œæ•°æ®é‡å°çš„æ•°æ®ï¼Œå¦‚ QQ èŠå¤©æ•°æ®å°±æ˜¯é€šè¿‡è¿™ç§æ–¹ å¼ä¼ è¾“çš„ï¼‰ã€‚ ä¸»è¦æ˜¯å°†ä»ä¸‹å±‚æ¥æ”¶çš„æ•°æ®è¿›è¡Œåˆ†æ®µå’Œä¼ è¾“ï¼Œåˆ°è¾¾ç›®çš„åœ°å€åå†è¿›è¡Œé‡ç»„ã€‚å¸¸å¸¸æŠŠè¿™ ä¸€å±‚æ•°æ®å«åšæ®µã€‚ ä¼šè¯å±‚ï¼šé€šè¿‡ä¼ è¾“å±‚ï¼ˆç«¯å£å·ï¼šä¼ è¾“ç«¯å£ä¸æ¥æ”¶ç«¯å£ï¼‰å»ºç«‹æ•°æ®ä¼ è¾“çš„é€šè·¯ã€‚ä¸»è¦åœ¨ä½ çš„ç³»ç»Ÿä¹‹é—´ å‘èµ·ä¼šè¯æˆ–è€…æ¥å—ä¼šè¯è¯·æ±‚ã€‚ è¡¨ç¤ºå±‚ï¼šæ•°æ®çš„è¡¨ç¤ºã€å®‰å…¨ã€å‹ç¼©ã€‚ä¸»è¦æ˜¯è¿›è¡Œå¯¹æ¥æ”¶çš„æ•°æ®è¿›è¡Œè§£é‡Šã€åŠ å¯†ä¸è§£å¯†ã€å‹ç¼©ä¸è§£å‹ ç¼©ç­‰ï¼ˆä¹Ÿå°±æ˜¯æŠŠè®¡ç®—æœºèƒ½å¤Ÿè¯†åˆ«çš„ä¸œè¥¿è½¬æ¢æˆäººèƒ½å¤Ÿèƒ½è¯†åˆ«çš„ä¸œè¥¿ï¼ˆå¦‚å›¾ç‰‡ã€å£°éŸ³ç­‰ï¼‰ã€‚ åº”ç”¨å±‚ï¼šç½‘ç»œæœåŠ¡ä¸æœ€ç»ˆç”¨æˆ·çš„ä¸€ä¸ªæ¥å£ã€‚è¿™ä¸€å±‚ä¸ºç”¨æˆ·çš„åº”ç”¨ç¨‹åºï¼ˆä¾‹å¦‚ç”µå­é‚®ä»¶ã€æ–‡ä»¶ä¼ è¾“å’Œ ç»ˆç«¯ä»¿çœŸï¼‰æä¾›ç½‘ç»œæœåŠ¡ã€‚ TCP&#x2F;IP å››å±‚æ¨¡å‹ç®€ä»‹ ç°åœ¨ Internetï¼ˆå› ç‰¹ç½‘ï¼‰ä½¿ç”¨çš„ä¸»æµåè®®æ—æ˜¯ TCP&#x2F;IP åè®®æ—ï¼Œå®ƒæ˜¯ä¸€ä¸ªåˆ†å±‚ã€å¤šåè®®çš„é€šä¿¡ä½“ ç³»ã€‚TCP&#x2F;IPåè®®æ—æ˜¯ä¸€ä¸ªå››å±‚åè®®ç³»ç»Ÿï¼Œè‡ªåº•è€Œä¸Šåˆ†åˆ«æ˜¯æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚å’Œåº”ç”¨ å±‚ã€‚æ¯ä¸€å±‚å®Œæˆä¸åŒçš„åŠŸèƒ½ï¼Œä¸”é€šè¿‡è‹¥å¹²åè®®æ¥å®ç°ï¼Œä¸Šå±‚åè®®ä½¿ç”¨ä¸‹å±‚åè®®æä¾›çš„æœåŠ¡ã€‚ TCP&#x2F;IP åè®®åœ¨ä¸€å®šç¨‹åº¦ä¸Šå‚è€ƒäº† OSI çš„ä½“ç³»ç»“æ„ã€‚OSI æ¨¡å‹å…±æœ‰ä¸ƒå±‚ï¼Œä»ä¸‹åˆ°ä¸Šåˆ†åˆ«æ˜¯ç‰©ç†å±‚ã€æ•°æ®é“¾è·¯å±‚ã€ç½‘ç»œå±‚ã€ä¼ è¾“å±‚ã€ä¼šè¯å±‚ã€è¡¨ç¤ºå±‚å’Œåº”ç”¨å±‚ã€‚ä½†æ˜¯è¿™æ˜¾ç„¶æ˜¯æœ‰äº›å¤æ‚çš„ï¼Œæ‰€ä»¥åœ¨ TCP&#x2F;IP åè®®ä¸­ï¼Œ å®ƒä»¬è¢«ç®€åŒ–ä¸ºäº†å››ä¸ªå±‚æ¬¡ã€‚ ï¼ˆ1ï¼‰åº”ç”¨å±‚ã€è¡¨ç¤ºå±‚ã€ä¼šè¯å±‚ä¸‰ä¸ªå±‚æ¬¡æä¾›çš„æœåŠ¡ç›¸å·®ä¸æ˜¯å¾ˆå¤§ï¼Œæ‰€ä»¥åœ¨ TCP&#x2F;IP åè®®ä¸­ï¼Œå®ƒä»¬è¢«åˆå¹¶ ä¸ºåº”ç”¨å±‚ä¸€ä¸ªå±‚æ¬¡ã€‚ ï¼ˆ2ï¼‰ç”±äºä¼ è¾“å±‚å’Œç½‘ç»œå±‚åœ¨ç½‘ç»œåè®®ä¸­çš„åœ°ä½ååˆ†é‡è¦ï¼Œæ‰€ä»¥åœ¨ TCP&#x2F;IP åè®®ä¸­å®ƒä»¬è¢«ä½œä¸ºç‹¬ç«‹çš„ä¸¤ä¸ª å±‚æ¬¡ã€‚ ï¼ˆ3ï¼‰å› ä¸ºæ•°æ®é“¾è·¯å±‚å’Œç‰©ç†å±‚çš„å†…å®¹ç›¸å·®ä¸å¤šï¼Œæ‰€ä»¥åœ¨ TCP&#x2F;IP åè®®ä¸­å®ƒä»¬è¢«å½’å¹¶åœ¨ç½‘ç»œæ¥å£å±‚ä¸€ä¸ªå±‚ æ¬¡é‡Œã€‚åªæœ‰å››å±‚ä½“ç³»ç»“æ„çš„ TCP&#x2F;IP åè®®ï¼Œä¸æœ‰ä¸ƒå±‚ä½“ç³»ç»“æ„çš„ OSI ç›¸æ¯”è¦ç®€å•äº†ä¸å°‘ï¼Œä¹Ÿæ­£æ˜¯è¿™æ ·ï¼Œ TCP&#x2F;IP åè®®åœ¨å®é™…çš„åº”ç”¨ä¸­æ•ˆç‡æ›´é«˜ï¼Œæˆæœ¬æ›´ä½ã€‚ å››å±‚ä»‹ç» åº”ç”¨å±‚ï¼šåº”ç”¨å±‚æ˜¯ TCP&#x2F;IP åè®®çš„ç¬¬ä¸€å±‚ï¼Œæ˜¯ç›´æ¥ä¸ºåº”ç”¨è¿›ç¨‹æä¾›æœåŠ¡çš„ã€‚ ï¼ˆ1ï¼‰ å¯¹ä¸åŒç§ç±»çš„åº”ç”¨ç¨‹åºå®ƒä»¬ä¼šæ ¹æ®è‡ªå·±çš„éœ€è¦æ¥ä½¿ç”¨åº”ç”¨å±‚çš„ä¸åŒåè®®ï¼Œé‚®ä»¶ä¼ è¾“åº”ç”¨ä½¿ç”¨ äº† SMTP åè®®ã€ä¸‡ç»´ç½‘åº”ç”¨ä½¿ç”¨äº† HTTP åè®®ã€è¿œç¨‹ç™»å½•æœåŠ¡åº”ç”¨ä½¿ç”¨äº†æœ‰ TELNET åè®®ã€‚ ï¼ˆ2ï¼‰ åº”ç”¨å±‚è¿˜èƒ½åŠ å¯†ã€è§£å¯†ã€æ ¼å¼åŒ–æ•°æ®ã€‚ ï¼ˆ3ï¼‰ åº”ç”¨å±‚å¯ä»¥å»ºç«‹æˆ–è§£é™¤ä¸å…¶ä»–èŠ‚ç‚¹çš„è”ç³»ï¼Œè¿™æ ·å¯ä»¥å……åˆ†èŠ‚çœç½‘ç»œèµ„æºã€‚ ä¼ è¾“å±‚ï¼šä½œä¸º TCP&#x2F;IP åè®®çš„ç¬¬äºŒå±‚ï¼Œè¿è¾“å±‚åœ¨æ•´ä¸ª TCP&#x2F;IP åè®®ä¸­èµ·åˆ°äº†ä¸­æµç ¥æŸ±çš„ä½œç”¨ã€‚ä¸”åœ¨è¿è¾“å±‚ä¸­ï¼Œ TCP å’Œ UDP ä¹ŸåŒæ ·èµ·åˆ°äº†ä¸­æµç ¥æŸ±çš„ä½œç”¨ã€‚ ç½‘ç»œå±‚ï¼šç½‘ç»œå±‚åœ¨ TCP&#x2F;IP åè®®ä¸­çš„ä½äºç¬¬ä¸‰å±‚ã€‚åœ¨ TCP&#x2F;IP åè®®ä¸­ç½‘ç»œå±‚å¯ä»¥è¿›è¡Œç½‘ç»œè¿æ¥çš„å»ºç«‹å’Œç»ˆæ­¢ä»¥åŠ IP åœ°å€çš„å¯»æ‰¾ç­‰åŠŸèƒ½ã€‚ ç½‘ç»œæ¥å£å±‚ï¼šåœ¨ TCP&#x2F;IP åè®®ä¸­ï¼Œç½‘ç»œæ¥å£å±‚ä½äºç¬¬å››å±‚ã€‚ç”±äºç½‘ç»œæ¥å£å±‚å…¼å¹¶äº†ç‰©ç†å±‚å’Œæ•°æ®é“¾è·¯å±‚æ‰€ä»¥ï¼Œç½‘ç»œæ¥å£å±‚æ—¢æ˜¯ä¼ è¾“æ•°æ®çš„ç‰©ç†åª’ä»‹ï¼Œä¹Ÿå¯ä»¥ä¸ºç½‘ç»œå±‚æä¾›ä¸€æ¡å‡†ç¡®æ— è¯¯çš„çº¿è·¯ã€‚ 6. åè®®ç®€ä»‹ åè®®ï¼Œç½‘ç»œåè®®çš„ç®€ç§°ï¼Œç½‘ç»œåè®®æ˜¯é€šä¿¡è®¡ç®—æœºåŒæ–¹å¿…é¡»å…±åŒéµä»çš„ä¸€ç»„çº¦å®šã€‚å¦‚æ€ä¹ˆæ ·å»ºç«‹è¿ æ¥ã€æ€ä¹ˆæ ·äº’ç›¸è¯†åˆ«ç­‰ã€‚åªæœ‰éµå®ˆè¿™ä¸ªçº¦å®šï¼Œè®¡ç®—æœºä¹‹é—´æ‰èƒ½ç›¸äº’é€šä¿¡äº¤æµã€‚å®ƒçš„ä¸‰è¦ç´ æ˜¯ï¼šè¯­ æ³•ã€è¯­ä¹‰ã€æ—¶åºã€‚ ä¸ºäº†ä½¿æ•°æ®åœ¨ç½‘ç»œä¸Šä»æºåˆ°è¾¾ç›®çš„ï¼Œç½‘ç»œé€šä¿¡çš„å‚ä¸æ–¹å¿…é¡»éµå¾ªç›¸åŒçš„è§„åˆ™ï¼Œè¿™å¥—è§„åˆ™ç§°ä¸ºåè®® ï¼ˆprotocolï¼‰ï¼Œå®ƒæœ€ç»ˆä½“ç°ä¸ºåœ¨ç½‘ç»œä¸Šä¼ è¾“çš„æ•°æ®åŒ…çš„æ ¼å¼ã€‚ åè®®å¾€å¾€åˆ†æˆå‡ ä¸ªå±‚æ¬¡è¿›è¡Œå®šä¹‰ï¼Œåˆ†å±‚å®šä¹‰æ˜¯ä¸ºäº†ä½¿æŸä¸€å±‚åè®®çš„æ”¹å˜ä¸å½±å“å…¶ä»–å±‚æ¬¡çš„åè®®ã€‚ å¸¸è§åè®® åº”ç”¨å±‚å¸¸è§çš„åè®®æœ‰ï¼šFTPåè®®ï¼ˆFile Transfer Protocol æ–‡ä»¶ä¼ è¾“åè®®ï¼‰ã€HTTPåè®®ï¼ˆHyper Text Transfer Protocol è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰ã€NFSï¼ˆNetwork File System ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼‰ã€‚ ä¼ è¾“å±‚å¸¸è§åè®®æœ‰ï¼šTCPåè®®ï¼ˆTransmission Control Protocol ä¼ è¾“æ§åˆ¶åè®®ï¼‰ã€UDPåè®®ï¼ˆUser Datagram Protocol ç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰ã€‚ ç½‘ç»œå±‚å¸¸è§åè®®æœ‰ï¼šIP åè®®ï¼ˆInternet Protocol å› ç‰¹ç½‘äº’è”åè®®ï¼‰ã€ICMP åè®®ï¼ˆInternet Control Message Protocol å› ç‰¹ç½‘æ§åˆ¶æŠ¥æ–‡åè®®ï¼‰ã€IGMP åè®®ï¼ˆInternet Group Management Protocol å› ç‰¹ ç½‘ç»„ç®¡ç†åè®®ï¼‰ã€‚ ç½‘ç»œæ¥å£å±‚å¸¸è§åè®®æœ‰ï¼šARPåè®®ï¼ˆAddress Resolution Protocol åœ°å€è§£æåè®®ï¼‰ã€RARPåè®® ï¼ˆReverse Address Resolution Protocol åå‘åœ°å€è§£æåè®®ï¼‰ã€‚ UDPåè®® æºç«¯å£å·ï¼šå‘é€æ–¹ç«¯å£å· ç›®çš„ç«¯å£å·ï¼šæ¥æ”¶æ–¹ç«¯å£å· é•¿åº¦ï¼šUDPç”¨æˆ·æ•°æ®æŠ¥çš„é•¿åº¦ï¼Œæœ€å°å€¼æ˜¯8ï¼ˆä»…æœ‰é¦–éƒ¨ï¼‰ æ ¡éªŒå’Œï¼šæ£€æµ‹UDPç”¨æˆ·æ•°æ®æŠ¥åœ¨ä¼ è¾“ä¸­æ˜¯å¦æœ‰é”™ï¼Œæœ‰é”™å°±ä¸¢å¼ƒ TCPåè®® æºç«¯å£å·ï¼šå‘é€æ–¹ç«¯å£å· ç›®çš„ç«¯å£å·ï¼šæ¥æ”¶æ–¹ç«¯å£å· åºåˆ—å·ï¼šæœ¬æŠ¥æ–‡æ®µçš„æ•°æ®çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºå· ç¡®è®¤åºå·ï¼šæœŸæœ›æ”¶åˆ°å¯¹æ–¹ä¸‹ä¸€ä¸ªæŠ¥æ–‡æ®µçš„ç¬¬ä¸€ä¸ªæ•°æ®å­—èŠ‚çš„åºå· é¦–éƒ¨é•¿åº¦ï¼ˆæ•°æ®åç§»ï¼‰ï¼šTCP æŠ¥æ–‡æ®µçš„æ•°æ®èµ·å§‹å¤„è·ç¦» TCP æŠ¥æ–‡æ®µçš„èµ·å§‹å¤„æœ‰å¤šè¿œï¼Œå³é¦–éƒ¨é•¿åº¦ã€‚å•ä½ï¼š32ä½ï¼Œå³ä»¥ 4 å­—èŠ‚ä¸ºè®¡ç®—å•ä½ ä¿ç•™ï¼šå  6 ä½ï¼Œä¿ç•™ä¸ºä»Šåä½¿ç”¨ï¼Œç›®å‰åº”ç½®ä¸º 0 ç´§æ€¥ URG ï¼šæ­¤ä½ç½® 1 ï¼Œè¡¨æ˜ç´§æ€¥æŒ‡é’ˆå­—æ®µæœ‰æ•ˆï¼Œå®ƒå‘Šè¯‰ç³»ç»Ÿæ­¤æŠ¥æ–‡æ®µä¸­æœ‰ç´§æ€¥æ•°æ®ï¼Œåº”å°½å¿«ä¼ é€ ç¡®è®¤ ACKï¼šä»…å½“ ACK&#x3D;1 æ—¶ç¡®è®¤å·å­—æ®µæ‰æœ‰æ•ˆï¼ŒTCP è§„å®šï¼Œåœ¨è¿æ¥å»ºç«‹åæ‰€æœ‰ä¼ è¾¾çš„æŠ¥æ–‡æ®µéƒ½å¿…é¡»æŠŠ ACK ç½®1 æ¨é€ PSHï¼šå½“ä¸¤ä¸ªåº”ç”¨è¿›ç¨‹è¿›è¡Œäº¤äº’å¼çš„é€šä¿¡æ—¶ï¼Œæœ‰æ—¶åœ¨ä¸€ç«¯çš„åº”ç”¨è¿›ç¨‹å¸Œæœ›åœ¨é”®å…¥ä¸€ä¸ªå‘½ä»¤åç«‹å³å°±èƒ½å¤Ÿæ”¶åˆ°å¯¹æ–¹çš„å“åº”ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒTCP å°±å¯ä»¥ä½¿ç”¨æ¨é€ï¼ˆpushï¼‰æ“ä½œï¼Œè¿™æ—¶ï¼Œå‘é€æ–¹TCP æŠŠ PSH ç½® 1ï¼Œå¹¶ç«‹å³åˆ›å»ºä¸€ä¸ªæŠ¥æ–‡æ®µå‘é€å‡ºå»ï¼Œæ¥æ”¶æ–¹æ”¶åˆ° PSH &#x3D; 1 çš„æŠ¥æ–‡æ®µï¼Œå°±å°½å¿«åœ° ï¼ˆå³â€œæ¨é€â€å‘å‰ï¼‰äº¤ä»˜ç»™æ¥æ”¶åº”ç”¨è¿›ç¨‹ï¼Œè€Œä¸å†ç­‰åˆ°æ•´ä¸ªç¼“å­˜éƒ½å¡«æ»¡åå†å‘ä¸Šäº¤ä»˜ å¤ä½ RSTï¼šç”¨äºå¤ä½ç›¸åº”çš„ TCP è¿æ¥ åŒæ­¥ SYNï¼šä»…åœ¨ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹ TCP è¿æ¥æ—¶æœ‰æ•ˆã€‚å½“ SYN &#x3D; 1 è€Œ ACK &#x3D; 0 æ—¶ï¼Œè¡¨æ˜è¿™æ˜¯ä¸€ä¸ªè¿æ¥è¯·æ±‚æŠ¥æ–‡æ®µï¼Œå¯¹æ–¹è‹¥åŒæ„å»ºç«‹è¿æ¥ï¼Œåˆ™åº”åœ¨ç›¸åº”çš„æŠ¥æ–‡æ®µä¸­ä½¿ç”¨ SYN &#x3D; 1 å’Œ ACK &#x3D; 1ã€‚å› æ­¤ï¼ŒSYN ç½®1 å°±è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªè¿æ¥è¯·æ±‚æˆ–è¿æ¥æ¥å—æŠ¥æ–‡ ç»ˆæ­¢ FINï¼šç”¨æ¥é‡Šæ”¾ä¸€ä¸ªè¿æ¥ã€‚å½“ FIN &#x3D; 1 æ—¶ï¼Œè¡¨æ˜æ­¤æŠ¥æ–‡æ®µçš„å‘é€æ–¹çš„æ•°æ®å·²ç»å‘é€å®Œæ¯•ï¼Œå¹¶è¦æ±‚é‡Šæ”¾è¿è¾“è¿æ¥ çª—å£ï¼šæŒ‡å‘é€æœ¬æŠ¥æ–‡æ®µçš„ä¸€æ–¹çš„æ¥æ”¶çª—å£ï¼ˆè€Œä¸æ˜¯è‡ªå·±çš„å‘é€çª—å£ï¼‰ æ ¡éªŒå’Œï¼šæ ¡éªŒå’Œå­—æ®µæ£€éªŒçš„èŒƒå›´åŒ…æ‹¬é¦–éƒ¨å’Œæ•°æ®ä¸¤éƒ¨åˆ†ï¼Œåœ¨è®¡ç®—æ ¡éªŒå’Œæ—¶éœ€è¦åŠ ä¸Š 12 å­—èŠ‚çš„ä¼ªå¤´éƒ¨ ç´§æ€¥æŒ‡é’ˆï¼šä»…åœ¨ URG &#x3D; 1 æ—¶æ‰æœ‰æ„ä¹‰ï¼Œå®ƒæŒ‡å‡ºæœ¬æŠ¥æ–‡æ®µä¸­çš„ç´§æ€¥æ•°æ®çš„å­—èŠ‚æ•°ï¼ˆç´§æ€¥æ•°æ®ç»“æŸåå°±æ˜¯æ™®é€šæ•°æ®ï¼‰ï¼Œå³æŒ‡å‡ºäº†ç´§æ€¥æ•°æ®çš„æœ«å°¾åœ¨æŠ¥æ–‡ä¸­çš„ä½ç½®ï¼Œæ³¨æ„ï¼šå³ä½¿çª—å£ä¸ºé›¶æ—¶ä¹Ÿå¯å‘é€ç´§æ€¥æ•° æ® é€‰é¡¹ï¼šé•¿åº¦å¯å˜ï¼Œæœ€é•¿å¯è¾¾ 40 å­—èŠ‚ï¼Œå½“æ²¡æœ‰ä½¿ç”¨é€‰é¡¹æ—¶ï¼ŒTCP é¦–éƒ¨é•¿åº¦æ˜¯ 20 å­—èŠ‚ IPåè®® ç‰ˆæœ¬ï¼šIP åè®®çš„ç‰ˆæœ¬ã€‚é€šä¿¡åŒæ–¹ä½¿ç”¨è¿‡çš„ IP åè®®çš„ç‰ˆæœ¬å¿…é¡»ä¸€è‡´ï¼Œç›®å‰æœ€å¹¿æ³›ä½¿ç”¨çš„ IP åè®®ç‰ˆæœ¬å·ä¸º 4ï¼ˆå³IPv4) é¦–éƒ¨é•¿åº¦ï¼šå•ä½æ˜¯ 32 ä½ï¼ˆ4 å­—èŠ‚ï¼‰ æœåŠ¡ç±»å‹ï¼šä¸€èˆ¬ä¸é€‚ç”¨ï¼Œå–å€¼ä¸º 0 æ€»é•¿åº¦ï¼šæŒ‡é¦–éƒ¨åŠ ä¸Šæ•°æ®çš„æ€»é•¿åº¦ï¼Œå•ä½ä¸ºå­—èŠ‚ æ ‡è¯†ï¼ˆidentificationï¼‰ï¼šIP è½¯ä»¶åœ¨å­˜å‚¨å™¨ä¸­ç»´æŒä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯äº§ç”Ÿä¸€ä¸ªæ•°æ®æŠ¥ï¼Œè®¡æ•°å™¨å°±åŠ  1ï¼Œ å¹¶å°†æ­¤å€¼èµ‹ç»™æ ‡è¯†å­—æ®µ æ ‡å¿—ï¼ˆflagï¼‰ï¼šç›®å‰åªæœ‰ä¸¤ä½æœ‰æ„ä¹‰ã€‚ æ ‡å¿—å­—æ®µä¸­çš„æœ€ä½ä½è®°ä¸º MFã€‚MF &#x3D; 1 å³è¡¨ç¤ºåé¢â€œè¿˜æœ‰åˆ†ç‰‡â€çš„æ•°æ®æŠ¥ã€‚MF &#x3D; 0 è¡¨ç¤ºè¿™å·²æ˜¯è‹¥å¹²æ•°æ®æŠ¥ç‰‡ä¸­çš„æœ€åä¸€ä¸ªã€‚ æ ‡å¿—å­—æ®µä¸­é—´çš„ä¸€ä½è®°ä¸º DFï¼Œæ„æ€æ˜¯â€œä¸èƒ½åˆ†ç‰‡â€ï¼Œåªæœ‰å½“ DF &#x3D; 0 æ—¶æ‰å…è®¸åˆ†ç‰‡ ç‰‡åç§»ï¼šæŒ‡å‡ºè¾ƒé•¿çš„åˆ†ç»„åœ¨åˆ†ç‰‡åï¼ŒæŸç‰‡åœ¨æºåˆ†ç»„ä¸­çš„ç›¸å¯¹ä½ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç›¸å¯¹äºç”¨æˆ·æ•°æ®æ®µçš„ èµ·ç‚¹ï¼Œè¯¥ç‰‡ä»ä½•å¤„å¼€å§‹ã€‚ç‰‡åç§»ä»¥ 8 å­—èŠ‚ä¸ºåç§»å•ä½ã€‚ ç”Ÿå­˜æ—¶é—´ï¼šTTLï¼Œè¡¨æ˜æ˜¯æ•°æ®æŠ¥åœ¨ç½‘ç»œä¸­çš„å¯¿å‘½ï¼Œå³ä¸ºâ€œè·³æ•°é™åˆ¶â€ï¼Œç”±å‘å‡ºæ•°æ®æŠ¥çš„æºç‚¹è®¾ç½®è¿™ä¸ªå­—æ®µã€‚è·¯ç”±å™¨åœ¨è½¬å‘æ•°æ®ä¹‹å‰å°±æŠŠ TTL å€¼å‡ä¸€ï¼Œå½“ TTL å€¼å‡ä¸ºé›¶æ—¶ï¼Œå°±ä¸¢å¼ƒè¿™ä¸ªæ•°æ®æŠ¥ã€‚ åè®®ï¼šæŒ‡å‡ºæ­¤æ•°æ®æŠ¥æºå¸¦çš„æ•°æ®æ—¶ä½¿ç”¨ä½•ç§åè®®ï¼Œä»¥ä¾¿ä½¿ç›®çš„ä¸»æœºçš„ IP å±‚çŸ¥é“åº”å°†æ•°æ®éƒ¨åˆ†ä¸Šäº¤ç»™å“ªä¸ªå¤„ç†è¿‡ç¨‹ï¼Œå¸¸ç”¨çš„ ICMP(1)ï¼ŒIGMP(2)ï¼ŒTCP(6)ï¼ŒUDP(17)ï¼ŒIPv6ï¼ˆ41ï¼‰ 10.é¦–éƒ¨æ ¡éªŒå’Œï¼šåªæ ¡éªŒæ•°æ®æŠ¥çš„é¦–éƒ¨ï¼Œä¸åŒ…æ‹¬æ•°æ®éƒ¨åˆ†ã€‚ æºåœ°å€ï¼šå‘é€æ–¹ IP åœ°å€ ç›®çš„åœ°å€ï¼šæ¥æ”¶æ–¹ IP åœ°å€ ä»¥å¤ªç½‘å¸§åè®® ç±»å‹ï¼š0x800è¡¨ç¤º IPã€0x806è¡¨ç¤º ARPã€0x835è¡¨ç¤º RARP ARPåè®® ç¡¬ä»¶ç±»å‹ï¼š1 è¡¨ç¤º MAC åœ°å€ åè®®ç±»å‹ï¼š0x800 è¡¨ç¤º IP åœ°å€ ç¡¬ä»¶åœ°å€é•¿åº¦ï¼š6 åè®®åœ°å€é•¿åº¦ï¼š4 æ“ä½œï¼š1 è¡¨ç¤º ARP è¯·æ±‚ï¼Œ2 è¡¨ç¤º ARP åº”ç­”ï¼Œ3 è¡¨ç¤º RARP è¯·æ±‚ï¼Œ4 è¡¨ç¤º RARP åº”ç­” å°è£…ä¸Šå±‚åè®®æ˜¯å¦‚ä½•ä½¿ç”¨ä¸‹å±‚åè®®æä¾›çš„æœåŠ¡çš„å‘¢ï¼Ÿå…¶å®è¿™æ˜¯é€šè¿‡å°è£…ï¼ˆencapsulationï¼‰å®ç°çš„ã€‚åº”ç”¨ç¨‹åº æ•°æ®åœ¨å‘é€åˆ°ç‰©ç†ç½‘ç»œä¸Šä¹‹å‰ï¼Œå°†æ²¿ç€åè®®æ ˆä»ä¸Šå¾€ä¸‹ä¾æ¬¡ä¼ é€’ã€‚æ¯å±‚åè®®éƒ½å°†åœ¨ä¸Šå±‚æ•°æ®çš„åŸºç¡€ä¸ŠåŠ  ä¸Šè‡ªå·±çš„å¤´éƒ¨ä¿¡æ¯ï¼ˆæœ‰æ—¶è¿˜åŒ…æ‹¬å°¾éƒ¨ä¿¡æ¯ï¼‰ï¼Œä»¥å®ç°è¯¥å±‚çš„åŠŸèƒ½ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±ç§°ä¸ºå°è£…ã€‚ åˆ†ç”¨å½“å¸§åˆ°è¾¾ç›®çš„ä¸»æœºæ—¶ï¼Œå°†æ²¿ç€åè®®æ ˆè‡ªåº•å‘ä¸Šä¾æ¬¡ä¼ é€’ã€‚å„å±‚åè®®ä¾æ¬¡å¤„ç†å¸§ä¸­æœ¬å±‚è´Ÿè´£çš„å¤´éƒ¨æ•°æ®ï¼Œ ä»¥è·å–æ‰€éœ€çš„ä¿¡æ¯ï¼Œå¹¶æœ€ç»ˆå°†å¤„ç†åçš„å¸§äº¤ç»™ç›®æ ‡åº”ç”¨ç¨‹åºã€‚è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºåˆ†ç”¨ï¼ˆdemultiplexingï¼‰ã€‚åˆ†ç”¨æ˜¯ä¾é å¤´éƒ¨ä¿¡æ¯ä¸­çš„ç±»å‹å­—æ®µå®ç°çš„ã€‚ ç½‘ç»œé€šä¿¡æµç¨‹ ARPè¯·æ±‚","categories":[{"name":"Linuxç½‘ç»œç¼–ç¨‹","slug":"Linuxç½‘ç»œç¼–ç¨‹","permalink":"https://tutouwang.vercel.app/categories/Linux%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"}],"tags":[]},{"title":"å¤šè¡¨æ“ä½œ","slug":"MySql/å¤šè¡¨æ“ä½œ","date":"2022-06-04T11:23:35.000Z","updated":"2022-07-04T07:21:56.072Z","comments":true,"path":"2022/06/04/MySql/å¤šè¡¨æ“ä½œ/","link":"","permalink":"https://tutouwang.vercel.app/2022/06/04/MySql/%E5%A4%9A%E8%A1%A8%E6%93%8D%E4%BD%9C/","excerpt":"","text":"å¤šè¡¨æ“ä½œå®é™…å¼€å‘ä¸­ï¼Œä¸€ä¸ªé¡¹ç›®é€šå¸¸éœ€è¦å¾ˆå¤šå¼ è¡¨æ‰èƒ½å®Œæˆã€‚ ä¾‹å¦‚ï¼šä¸€ä¸ªå•†åŸé¡¹ç›®å°±éœ€è¦åˆ†ç±»è¡¨(category)ã€å•†å“è¡¨(products)ã€è®¢å•è¡¨(orders)ç­‰å¤šå¼ è¡¨ã€‚ä¸”è¿™äº›è¡¨ çš„æ•°æ®ä¹‹é—´å­˜åœ¨ä¸€å®šçš„å…³ç³»ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†åœ¨å•è¡¨çš„åŸºç¡€ä¸Šï¼Œä¸€èµ·å­¦ä¹ å¤šè¡¨æ–¹é¢çš„çŸ¥è¯†ã€‚ MySQLå…³ç³»å‹æ•°æ®åº“éå…³ç³»å‹æ•°æ®åº“ï¼šESã€Redisâ€¦ å¤šè¡¨ä¹‹é—´çš„å…³ç³» ä¸€è¯»ä¸€ï¼šä¸€å¤«ä¸€å¦»åˆ¶åº¦ ä¸€å¯¹å¤šï¼šä¸€å¤«å¤šå¦»åˆ¶åº¦ å¤šå¯¹å¤šï¼šç¾¤å±…åˆ¶åº¦ è¡¨è·Ÿè¡¨ä¹‹é—´çš„å…³ç³»ï¼Œå¤§å®¶å¯ä»¥ç†è§£ä¸ºæ˜¯å®ä½“è·Ÿå®ä½“çš„å…³ç³»çš„ä¸€ç§æ˜ å°„ã€‚æ¯”å¦‚ï¼Œå¯¼å¸ˆä¸å­¦å‘˜ï¼Œè®¢å•ä¸å®¢ æˆ·ï¼Œéƒ¨é—¨ä¸å‘˜å·¥ç­‰ç­‰ã€‚ ä¸»è¦å…³ç³»æœ‰ä¸‰ç§ï¼š 123ä¸€å¯¹ä¸€ï¼šæ¯”å¦‚ï¼Œä¸€ä¸ªç”·çš„åªèƒ½å–ä¸€ä¸ªå¥³çš„å½“è€å©†ã€‚ä¸€å¯¹å¤šï¼šæ¯”å¦‚ï¼Œå®¢æˆ·ä¸è®¢å•ï¼Œä¸€ä¸ªå®¢æˆ·å¯ä»¥åœ¨å•†åŸä¸­ä¸‹å¤šä¸ªè®¢å•ã€‚å¤šå¯¹å¤šï¼šæ¯”å¦‚ï¼Œå­¦ç”Ÿä¸è¯¾ç¨‹ï¼Œä¸€ä¸ªå­¦æ ¡æœ‰å¾ˆå¤šå­¦ç”Ÿï¼Œå­¦ç”Ÿéƒ½å¯ä»¥å­¦å¾ˆå¤šè¯¾ç¨‹ã€‚ 1ï¼‰ä¸€å¯¹ä¸€å…³ç³»åœ¨å®é™…å·¥ä½œä¸­ï¼Œä¸€å¯¹ä¸€åœ¨å¼€å‘ä¸­åº”ç”¨ä¸å¤šï¼Œå› ä¸ºä¸€å¯¹ä¸€å®Œå…¨å¯ä»¥åˆ›å»ºæˆä¸€å¼ è¡¨ å»ºç«‹ä¸¤è¡¨çš„å”¯ä¸€ä¸€å¯¹ä¸€çš„å…³ç³»ï¼š ç¬¬ä¸€æ­¥ï¼šå°†è¢«å…³è”çš„è¡¨ä¸»é”®å”¯ä¸€ ç¬¬äºŒæ­¥ï¼šå»ºç«‹å¤–é”®çº¦æŸï¼Œç®¡ç†è¯¥è¡¨çš„å”¯ä¸€ä¸»é”® æ¡ˆä¾‹ï¼šä¸€ä¸ªä¸ˆå¤«åªèƒ½æœ‰ä¸€ä¸ªå¦»å­ 1234567CREATE TABLE wife(id INT PRIMARY KEY , wname VARCHAR(20), sex CHAR(1));CREATE TABLE husband(id INT PRIMARY KEY , hname VARCHAR(20), sex CHAR(1)); å¤–é”®å”¯ä¸€ä¸€å¯¹ä¸€å…³ç³»åˆ›å»ºæ–¹å¼ 1 ä¹‹å¤–é”®å”¯ä¸€ï¼š æ·»åŠ å¤–é”®åˆ— widï¼ŒæŒ‡å®šè¯¥åˆ—çš„çº¦æŸä¸ºå”¯ä¸€ï¼ˆä¸åŠ å”¯ä¸€çº¦æŸå°±æ˜¯ä¸€å¯¹å¤šå…³ç³»ï¼‰ 1ALTER TABLE husband ADD wid INT UNIQUE; æ·»åŠ å¤–é”®çº¦æŸ 1alter table husband add foreign key (wid) references wife(id); ä¸»é”®åšå¤–é”®ä¸€å¯¹ä¸€å…³ç³»åˆ›å»ºæ–¹å¼ 2 ä¹‹ä¸»é”®åšå¤–é”®ï¼šï¼ˆå¤§å®¶ä¸‹å»è‡ªå·±ç»ƒä¹ ï¼‰ æ€è·¯ï¼šä½¿ç”¨ä¸»è¡¨çš„ä¸»é”®ä½œä¸ºå¤–é”®å»å…³è”ä»è¡¨çš„ä¸»é”® 2ï¼‰ä¸€å¯¹å¤šå…³ç³» å¸¸è§å®ä¾‹ï¼šä¸€ä¸ªåˆ†ç±»å¯¹åº”å¤šä¸ªå•†å“ï¼Œå®¢æˆ·å’Œè®¢å•ï¼Œåˆ†ç±»å’Œå•†å“ï¼Œéƒ¨é—¨å’Œå‘˜å·¥.æ€»ç»“ï¼šæœ‰å¤–é”®çš„å°±æ˜¯å¤šçš„ä¸€æ–¹ã€‚ æ³¨æ„äº‹é¡¹ï¼šä¸€å¯¹å¤šå…³ç³»å’Œä¸€å¯¹ä¸€å…³ç³»çš„åˆ›å»ºå¾ˆç±»ä¼¼ï¼Œå”¯ä¸€åŒºåˆ«å°±æ˜¯å¤–é”®ä¸å”¯ä¸€ä¸€å¯¹å¤šå…³ç³»åˆ›å»ºï¼š æ·»åŠ å¤–é”®åˆ— æ·»åŠ å¤–é”®çº¦æŸ 3ï¼‰å¤šå¯¹å¤šå…³ç³»å¸¸è§å®ä¾‹ï¼šå­¦ç”Ÿå’Œè¯¾ç¨‹ã€ç”¨æˆ·å’Œè§’è‰² æ³¨æ„äº‹é¡¹ï¼šéœ€è¦ä¸­é—´è¡¨å»å®Œæˆå¤šå¯¹å¤šå…³ç³»çš„åˆ›å»ºï¼Œå¤šå¯¹å¤šå…³ç³»å…¶å®å°±æ˜¯ä¸¤ä¸ªä¸€å¯¹å¤šå…³ç³»çš„ç»„åˆ å¤šå¯¹å¤šå…³ç³»åˆ›å»ºï¼š åˆ›å»ºä¸­é—´è¡¨ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºå¤šå¯¹å¤šå…³ç³»ä¸­ä¸¤å¼ è¡¨çš„å¤–é”®åˆ— åœ¨ä¸­é—´è¡¨ä¸­æ·»åŠ å¤–é”®çº¦æŸ åœ¨ä¸­é—´è¡¨ä¸­æ·»åŠ è”åˆä¸»é”®çº¦æŸ","categories":[{"name":"MySql","slug":"MySql","permalink":"https://tutouwang.vercel.app/categories/MySql/"}],"tags":[]},{"title":"æ•°æ®åº“å¤‡ä»½ä¸æ¢å¤","slug":"MySql/æ•°æ®åº“å¤‡ä»½ä¸æ¢å¤","date":"2022-06-04T02:04:13.000Z","updated":"2022-07-04T07:21:53.167Z","comments":true,"path":"2022/06/04/MySql/æ•°æ®åº“å¤‡ä»½ä¸æ¢å¤/","link":"","permalink":"https://tutouwang.vercel.app/2022/06/04/MySql/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D/","excerpt":"","text":"å¤‡ä»½æ•°æ®åº“çš„å¤‡ä»½æ˜¯æ•°æ®åº“è½¬æ¢æˆå¯¹åº”çš„çš„sqlæ–‡ä»¶ 1ï¼‰MySQLå‘½ä»¤å¤‡ä»½æ•°æ®åº“å¯¼å‡ºsqlè„šæœ¬çš„æ ¼å¼ï¼š 1mysqldump -uç”¨æˆ·å -på¯†ç  æ•°æ®åº“å&gt;ç”Ÿæˆçš„è„šæœ¬æ–‡ä»¶è·¯å¾„ ä¾‹å¦‚: 1mysqldump -uroot -proot day02&gt;d:\\backup.sql ä»¥ä¸Šå¤‡ä»½æ•°æ®åº“çš„å‘½ä»¤ä¸­éœ€è¦ç”¨æˆ·åå’Œå¯†ç ï¼Œå³è¡¨æ˜è¯¥å‘½ä»¤è¦åœ¨ç”¨æˆ·æ²¡æœ‰ç™»å½•çš„æƒ…å†µä¸‹ä½¿ç”¨ 2ï¼‰å¯è§†åŒ–å·¥å…·å¤‡ä»½é€‰ä¸­æ•°æ®åº“ï¼Œå³é”® â€å¤‡ä»½&#x2F;å¯¼å‡ºâ€ ï¼Œ æŒ‡å®šå¯¼å‡ºè·¯å¾„ï¼Œä¿å­˜æˆ.sqlæ–‡ä»¶å³å¯ã€‚ æ¢å¤æ•°æ®åº“çš„æ¢å¤æŒ‡çš„æ˜¯ä½¿ç”¨å¤‡ä»½äº§ç”Ÿçš„sqlæ–‡ä»¶æ¢å¤æ•°æ®åº“ï¼Œå³å°†sqlæ–‡ä»¶ä¸­çš„sqlè¯­å¥æ‰§è¡Œå°±å¯ä»¥æ¢å¤æ•°æ® åº“å†…å®¹ã€‚ 1ï¼‰å‘½ä»¤æ¢å¤ä½¿ç”¨æ•°æ®åº“å‘½ä»¤å¤‡ä»½çš„æ—¶å€™åªæ˜¯å¤‡ä»½äº†æ•°æ®åº“å†…å®¹ï¼Œäº§ç”Ÿçš„sqlæ–‡ä»¶ä¸­æ²¡æœ‰åˆ›å»ºæ•°æ®åº“çš„sqlè¯­å¥ï¼Œåœ¨æ¢ å¤æ•°æ®åº“ä¹‹å‰éœ€è¦è‡ªå·±åŠ¨æ‰‹åˆ›å»ºæ•°æ®åº“ã€‚ åœ¨æ•°æ®åº“å¤–æ¢å¤ æ ¼å¼: mysql -uroot -på¯†ç  æ•°æ®åº“å &lt; æ–‡ä»¶è·¯å¾„ ä¾‹å¦‚: mysql -uroot -proot day02 åœ¨æ•°æ®åº“å†…æ¢å¤ æ ¼å¼: source SQLè„šæœ¬è·¯å¾„ ä¾‹å¦‚: source d:\\backup.sql æ³¨æ„:ä½¿ç”¨è¿™ç§æ–¹å¼æ¢å¤æ•°æ®ï¼Œé¦–å…ˆè¦ç™»å½•æ•°æ®åº“. 2)å¯è§†åŒ–å·¥å…·æ¢å¤æ‰§è¡Œçš„SQLæ–‡ä»¶ï¼Œæ‰§è¡Œå³å¯ã€‚","categories":[{"name":"MySql","slug":"MySql","permalink":"https://tutouwang.vercel.app/categories/MySql/"}],"tags":[]},{"title":"MySqlå¸¸è§é—®é¢˜è§£ç­”","slug":"MySql/MySqlå¸¸è§é—®é¢˜è§£ç­”","date":"2022-06-03T05:53:44.000Z","updated":"2022-07-04T07:21:50.292Z","comments":true,"path":"2022/06/03/MySql/MySqlå¸¸è§é—®é¢˜è§£ç­”/","link":"","permalink":"https://tutouwang.vercel.app/2022/06/03/MySql/MySql%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E8%A7%A3%E7%AD%94/","excerpt":"","text":"MySQLæ•°æ®åº“å¯†ç é‡ç½® åœæ­¢mysqlæœåŠ¡å™¨è¿è¡Œè¾“å…¥services.msc åœæ­¢mysqlæœåŠ¡ åœ¨cmdä¸‹,è¾“å…¥mysqld â€“console â€“skip-grant-tables å¯åŠ¨æœåŠ¡å™¨,å‡ºç°ä¸€ä¸‹é¡µé¢,ä¸è¦å…³é—­è¯¥çª—å£ æ–°æ‰“å¼€cmd,è¾“å…¥mysql -uroot ä¸éœ€è¦å¯†ç  12use mysql;update user set password=password(&#x27;root&#x27;) WHERE user=&#x27;root&#x27;; å…³é—­ä¸¤ä¸ªcmdçª—å£ DOSæ“ä½œæ•°æ®ä¹±ç è§£å†³æˆ‘ä»¬åœ¨doså‘½ä»¤è¡Œæ“ä½œä¸­æ–‡æ—¶ï¼Œä¼šæŠ¥é”™ 123insert into category(cid,cname) values(â€˜c010â€™,â€™ä¸­æ–‡â€™);ERROR 1366 (HY000): Incorrect string value: &#x27;\\xB7\\xFE\\xD7\\xB0&#x27; for column&#x27;cname&#x27; at row 1 é”™è¯¯åŸå› ï¼šå› ä¸ºmysqlçš„å®¢æˆ·ç«¯è®¾ç½®ç¼–ç æ˜¯utf8ï¼Œè€Œç³»ç»Ÿçš„cmdçª—å£ç¼–ç æ˜¯gbk æŸ¥çœ‹MySQLå†…éƒ¨è®¾ç½®çš„ç¼–ç  1show variables like &#x27;character%&#x27;; æŸ¥çœ‹æ‰€æœ‰mysqlçš„ç¼–ç  éœ€è¦ä¿®æ”¹clientã€connectionã€resultsçš„ç¼–ç ä¸€è‡´ï¼ˆGBKç¼–ç ï¼‰ 12è§£å†³æ–¹æ¡ˆ1ï¼šåœ¨cmdå‘½ä»¤çª—å£ä¸­è¾“å…¥å‘½ä»¤ï¼Œæ­¤æ“ä½œå½“å‰çª—å£æœ‰æ•ˆï¼Œä¸ºä¸´æ—¶æ–¹æ¡ˆã€‚set names gbk; è§£å†³æ–¹æ¡ˆ2ï¼šå®‰è£…ç›®å½•ä¸‹ä¿®æ”¹my.iniæ–‡ä»¶ï¼Œé‡å¯æœåŠ¡æ‰€æœ‰åœ°æ–¹ç”Ÿæ•ˆ å¦‚æœå¯åŠ¨ä¸äº†å°±ç”¨ç®¡ç†å‘˜æˆ–è€…å»æœåŠ¡é‡Œé¢çœ‹çœ‹åå­—å¯¹ä¸å¯¹ 12å¼€å¯mysqlæœåŠ¡:net start mysqlå…³é—­mysqlæœåŠ¡:net stop mysql 1services.msc","categories":[{"name":"MySql","slug":"MySql","permalink":"https://tutouwang.vercel.app/categories/MySql/"}],"tags":[]},{"title":"Sqlè¯­å¥","slug":"MySql/Sqlè¯­å¥","date":"2022-06-02T10:26:31.000Z","updated":"2022-11-18T13:15:00.853Z","comments":true,"path":"2022/06/02/MySql/Sqlè¯­å¥/","link":"","permalink":"https://tutouwang.vercel.app/2022/06/02/MySql/Sql%E8%AF%AD%E5%8F%A5/","excerpt":"","text":"SQLæ¦‚è¿°SQLè¯­å¥ä»‹ç»ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€(Structured Query Language)ç®€ç§°SQLï¼Œæ˜¯å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿéƒ½éœ€è¦éµå¾ªçš„è§„èŒƒã€‚ ä¸åŒçš„æ•°æ®åº“ç”Ÿäº§å‚å•†éƒ½æ”¯æŒSQLè¯­å¥ï¼Œä½†éƒ½æœ‰ç‰¹æœ‰å†…å®¹ã€‚ æ‰©å±•ï¼šSQLä½œä¸ºä¸€ç§è®¿é—®ã€å…³ç³»å‹æ•°æ®åº“çš„æ ‡å‡†è¯­è¨€ã€‘ï¼ŒSQL è‡ªé—®ä¸–ä»¥æ¥å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ï¼Œä¸ä»… æ˜¯è‘—åçš„å¤§å‹å•†ç”¨æ•°æ®åº“äº§å“ Oracleã€DB2ã€Sybaseã€SQL Server æ”¯æŒå®ƒï¼Œå¾ˆå¤šå¼€æºçš„æ•°æ®åº“äº§ å“å¦‚ PostgreSQLã€MySQLä¹Ÿæ”¯æŒå®ƒï¼Œç”šè‡³ä¸€äº›å°å‹çš„äº§å“å¦‚ Access ä¹Ÿæ”¯æŒ SQLã€‚è¿‘äº›å¹´è“¬å‹ƒå‘ å±•çš„ NoSQL ç³»ç»Ÿæœ€åˆæ˜¯å®£ç§°ä¸å†éœ€è¦ SQL çš„ï¼Œåæ¥ä¹Ÿä¸å¾—ä¸ä¿®æ­£ä¸º Not Only SQLï¼Œæ¥æ‹¥æŠ± SQLã€‚ è“è‰²å·¨äºº IBM å¯¹å…³ç³»æ•°æ®åº“ä»¥åŠ SQL è¯­è¨€çš„å½¢æˆå’Œè§„èŒƒåŒ–äº§ç”Ÿäº†é‡å¤§çš„å½±å“ï¼Œç¬¬ä¸€ä¸ªç‰ˆæœ¬çš„ SQL æ ‡å‡† SQL86 å°±æ˜¯åŸºäº System R çš„æ‰‹å†Œè€Œæ¥çš„ã€‚ Oracle åœ¨ 1979 å¹´ç‡å…ˆæ¨å‡ºäº†æ”¯æŒ SQL çš„å•†ç”¨äº§å“ã€‚éšç€æ•°æ®åº“æŠ€æœ¯å’Œåº”ç”¨çš„å‘å±•ï¼Œä¸ºä¸åŒ RDBMSæä¾›ä¸€è‡´çš„è¯­è¨€æˆäº†ä¸€ç§ç°å®éœ€è¦ã€‚ å¯¹ SQL æ ‡å‡†å½±å“æœ€å¤§çš„æœºæ„è‡ªç„¶æ˜¯é‚£äº›è‘—åçš„æ•°æ®åº“äº§å•†ï¼Œè€Œå…·ä½“çš„åˆ¶è®¢è€…åˆ™æ˜¯ä¸€äº›éè¥åˆ©æœº æ„ï¼Œä¾‹å¦‚ã€å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ ISOã€ç¾å›½å›½å®¶æ ‡å‡†å§”å‘˜ä¼š ANSIã€‘ç­‰ã€‚ å„å›½é€šå¸¸ä¼šæŒ‰ç…§ ISO æ ‡å‡†å’Œ ANSI æ ‡å‡†ï¼ˆè¿™ä¸¤ä¸ªæœºæ„çš„å¾ˆå¤šæ ‡å‡†æ˜¯å·®ä¸å¤šç­‰åŒçš„ï¼‰åˆ¶å®šè‡ªå·±çš„å›½ å®¶æ ‡å‡†ã€‚ SQLä½œç”¨ åœ¨æ•°æ®åº“ä¸­æ£€ç´¢ä¿¡æ¯ã€‚ å¯¹æ•°æ®åº“çš„ä¿¡æ¯è¿›è¡Œæ›´æ–°ã€‚ æ”¹å˜æ•°æ®åº“çš„ç»“æ„ã€‚ æ›´æ”¹ç³»ç»Ÿçš„å®‰å…¨è®¾ç½®ã€‚ å¢åŠ æˆ–å›æ”¶ç”¨æˆ·å¯¹æ•°æ®åº“ã€è¡¨çš„è®¸å¯æƒé™ã€‚ SQLè¯­å¥åˆ†ç±» æ•°æ®å®šä¹‰è¯­è¨€ï¼šç®€ç§°DDL(Data Definition Language) ä½œç”¨ï¼šç”¨æ¥å®šä¹‰æ•°æ®åº“å¯¹è±¡ï¼šæ•°æ®åº“ï¼Œè¡¨ï¼Œåˆ—ç­‰ã€‚ å…³é”®å­—ï¼šcreateï¼Œalterï¼Œdropç­‰ æ•°æ®æ“ä½œè¯­è¨€ï¼šç®€ç§°DML(Data Manipulation Language)ï¼Œ ä½œç”¨ï¼šç”¨æ¥å¯¹æ•°æ®åº“ä¸­è¡¨çš„è®°å½•è¿›è¡Œæ›´æ–°ã€‚ å…³é”®å­—ï¼šinsertï¼Œdeleteï¼Œupdateç­‰ æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼šç®€ç§°DQL(Data Query Language)ï¼Œ ä½œç”¨ï¼šç”¨æ¥æŸ¥è¯¢æ•°æ®åº“ä¸­è¡¨çš„è®°å½•ã€‚ å…³é”®å­—ï¼šselectï¼Œfromï¼Œwhereç­‰ æ•°æ®æ§åˆ¶è¯­è¨€ï¼šç®€ç§°DCL(Data Control Language)ï¼Œ ä½œç”¨ï¼šç”¨æ¥å®šä¹‰æ•°æ®åº“çš„è®¿é—®æƒé™å’Œå®‰å…¨çº§åˆ«ï¼ŒåŠåˆ›å»ºç”¨æˆ·ã€‚ SQLé€šç”¨è¯­æ³• SQLè¯­å¥å¯ä»¥å•è¡Œæˆ–å¤šè¡Œä¹¦å†™ï¼Œä»¥åˆ†å·ç»“å°¾ å¯ä½¿ç”¨ç©ºæ ¼å’Œç¼©è¿›æ¥å¢å¼ºè¯­å¥çš„å¯è¯»æ€§ MySQLæ•°æ®åº“çš„SQLè¯­å¥ä¸åŒºåˆ†å¤§å°å†™ï¼Œå…³é”®å­—å»ºè®®ä½¿ç”¨å¤§å†™ ä¾‹å¦‚ï¼šSELECT * FROM userã€‚ å¸¸ç”¨æ³¨é‡Šå½¢å¼ 123-- å•è¡Œæ³¨é‡Šå†…å®¹/* å¤šè¡Œæ³¨é‡Š */# å•è¡Œæ³¨é‡Šå†…å®¹ MySQLä¸­çš„æˆ‘ä»¬å¸¸ä½¿ç”¨çš„æ•°æ®ç±»å‹å¦‚ä¸‹ ç±»å‹åç§° è¯´æ˜ intï¼ˆintegerï¼‰ æ•´æ•°ç±»å‹ double å°æ•°ç±»å‹ decimal ï¼ˆm,dï¼‰ æŒ‡å®šæ•´æ•°ä½ä¸å°æ•°ä½é•¿åº¦çš„å°æ•°ç±»å‹ decimal(10,2) date æ—¥æœŸç±»å‹ï¼Œæ ¼å¼ä¸ºyyyy-MM-ddï¼ŒåŒ…å«å¹´æœˆæ—¥ï¼Œä¸åŒ…å«æ—¶åˆ†ç§’ 2019-05-06 datetime æ—¥æœŸç±»å‹ï¼Œæ ¼å¼ä¸º YYYY-MM-DD HH:MM:SSï¼ŒåŒ…å«å¹´æœˆæ—¥æ—¶åˆ†ç§’ 2019-05-06 09:49:30 timestamp æ—¥æœŸç±»å‹ï¼Œæ—¶é—´æˆ³ varcharï¼ˆMï¼‰ æ–‡æœ¬ç±»å‹ï¼Œ Mä¸º0~65535ä¹‹é—´çš„æ•´æ•° DDLä¹‹æ•°æ®åº“æ“ä½œï¼šdatabaseåˆ›å»ºã€æŸ¥çœ‹ã€åˆ é™¤ã€ä¿®æ”¹â€¦ 1ï¼‰ åˆ›å»ºæ•°æ®åº“123456789create database æ•°æ®åº“å;create database æ•°æ®åº“å character set å­—ç¬¦é›†; -- å­—ç¬¦é›† å¦‚ UTF-8-- ã€æ¡ˆä¾‹ã€‘-- 1. åˆ›å»ºä¸€ä¸ªå« hello çš„æ•°æ®åº“create database hello;-- 2. åˆ¤è¯»å¦‚æœä¸å­˜åœ¨åˆ™åˆ›å»ºcreate database if not exists hello;-- 3. åˆ›å»ºæ•°æ®åº“å¹¶æŒ‡å®šå­—ç¬¦é›†create database hello default character set gbk; 2ï¼‰æŸ¥çœ‹æ•°æ®åº“1234567æŸ¥çœ‹æ•°æ®åº“æœåŠ¡å™¨ä¸­çš„æ‰€æœ‰çš„æ•°æ®åº“ï¼šshow databases;æŸ¥çœ‹æŸä¸ªæ•°æ®åº“çš„å®šä¹‰çš„ä¿¡æ¯ï¼šshow create database æ•°æ®åº“å;-- ã€æ¡ˆä¾‹ã€‘-- æŸ¥çœ‹æ•°æ®åº“æœåŠ¡å™¨ä¸­çš„æ‰€æœ‰çš„æ•°æ®åº“show databases;-- æŸ¥çœ‹æŸä¸ªæ•°æ®åº“çš„å®šä¹‰ä¿¡æ¯show create database hello; 3ï¼‰åˆ é™¤æ•°æ®åº“ï¼ˆæ…ç”¨ï¼‰123drop database æ•°æ®åº“åç§°;-- ã€æ¡ˆä¾‹ã€‘drop database hello; 4ï¼‰ä¿®æ”¹æ•°æ®åº“1234ä¿®æ”¹æ•°æ®åº“é»˜è®¤çš„å­—ç¬¦é›†ï¼šalter database æ•°æ®åº“å default character set å­—ç¬¦é›†-- ã€æ¡ˆä¾‹ã€‘alter database hello3 character set utf8; 5ï¼‰å…¶ä»–æ•°æ®åº“æ“ä½œå‘½ä»¤12åˆ‡æ¢æ•°æ®åº“ï¼š use æ•°æ®åº“å;æŸ¥çœ‹æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“ï¼šselect database(); DDLä¹‹è¡¨æ“ä½œï¼štable åˆ›å»ºæ•°æ®åº“è¡¨ æŸ¥çœ‹è¡¨ å¿«é€Ÿåˆ›å»ºï¼šå…‹éš† åˆ é™¤è¡¨ ä¿®æ”¹è¡¨ç»“æ„ï¼šå¦‚æœè¡¨å†…æœ‰æ•°æ®ï¼Œä¿®æ”¹éœ€è¦è°¨æ… å­—æ®µæ›´æ”¹å­— æ®µåˆ é™¤ ä¿®æ”¹è¡¨åç§° 1ï¼‰ åˆ›å»ºè¡¨å»ºç«‹æ•°æ®è¡¨ï¼Œå°±æ˜¯å»ºç«‹è¡¨ç»“æ„ï¼ŒæŒ‡å®šæ•°æ®è¡¨ä¸­çš„ä¸€å…±æœ‰å¤šå°‘åˆ—ï¼Œæ¯ä¸€åˆ—çš„æ•°æ®ç±»å‹ 12345678910111213-- create æŒ‡çš„æ˜¯ã€åˆ›å»ºã€‘ï¼Œtable æŒ‡çš„æ˜¯ã€æ•°æ®è¡¨ã€‘ã€‚-- ä¸€å¼ è¡¨ä¸­å¯ä»¥æŒ‡å®šå¤šä¸ªå­—æ®µï¼Œç”¨é€—å·éš”å¼€ï¼Œæœ€åçš„å­—æ®µä¸éœ€è¦é€—å·create table è¡¨å(-- å¯ä»¥å®šä¹‰å¤šä¸ªåˆ—å­—æ®µå ç±»å‹(é•¿åº¦) çº¦æŸ,å­—æ®µå ç±»å‹(é•¿åº¦) çº¦æŸ);-- ã€æ¡ˆä¾‹ã€‘-- åˆ›å»ºç”¨æˆ·è¡¨create table t_user (uid int primary key auto_increment, -- ç”¨æˆ· iduname varchar(20) -- ç”¨æˆ·å); å­—æ®µç±»å‹å¸¸ç”¨çš„ç±»å‹æœ‰ï¼š æ•°å­—å‹ï¼šintã€integerã€bigintã€mediumintã€smallintã€tinyint æµ®ç‚¹å‹ï¼šdoubleã€floatã€decimalï¼ˆç²¾ç¡®å°æ•°ç±»å‹ï¼‰ å­—ç¬¦å‹ï¼šcharï¼ˆå®šé•¿å­—ç¬¦ä¸²ï¼‰ã€varcharï¼ˆå¯å˜é•¿å­—ç¬¦ä¸²ï¼‰ æ—¥æœŸç±»å‹ï¼šdateï¼ˆåªæœ‰å¹´æœˆæ—¥ï¼‰ã€timeï¼ˆåªæœ‰æ—¶åˆ†ç§’ï¼‰ã€datetimeï¼ˆå¹´æœˆæ—¥ï¼Œæ—¶åˆ†ç§’ï¼‰ã€year ï¼ˆå¹´ï¼‰ äºŒè¿›åˆ¶å­—ç¬¦ä¸²ç±»å‹ï¼šbinaryï¼ˆå®šé•¿ï¼Œä»¥äºŒè¿›åˆ¶å½¢å¼ä¿å­˜å­—ç¬¦ä¸²ï¼‰ã€varbinaryï¼ˆå¯è¾¹é•¿ï¼‰ å•è¡¨çº¦æŸ123ä¸»é”®çº¦æŸï¼šprimary keyå”¯ä¸€çº¦æŸï¼šuniqueéç©ºçº¦æŸï¼šnot null æ³¨æ„1ä¸»é”®çº¦æŸ &#x3D; å”¯ä¸€çº¦æŸ + éç©ºçº¦æŸ 2ï¼‰ æŸ¥çœ‹è¡¨12345678æŸ¥çœ‹æ•°æ®åº“ä¸­çš„æ‰€æœ‰è¡¨ï¼šshow tables;æŸ¥çœ‹è¡¨ç»“æ„ï¼šdesc è¡¨å;æŸ¥çœ‹åˆ›å»ºè¡¨çš„ SQL è¯­å¥ï¼šshow create table è¡¨å;-- ã€æ¡ˆä¾‹ã€‘use hello; -- ä½¿ç”¨ hello æ•°æ®åº“show tables; -- æŸ¥çœ‹æ‰€æœ‰è¡¨desc user; -- æŸ¥çœ‹ user è¡¨çš„ç»“æ„show create table user; -- æŸ¥çœ‹ user è¡¨çš„åˆ›å»ºè¯­å¥ 3ï¼‰å¿«é€Ÿåˆ›å»ºä¸€ä¸ªè¡¨ç»“æ„ç›¸åŒçš„è¡¨1234create table æ–°çš„è¡¨å like æ—§çš„è¡¨å;-- ã€æ¡ˆä¾‹ã€‘create table tb_user like user;desc tb_user; 4ï¼‰åˆ é™¤è¡¨12345drop table è¡¨å;drop table if exists è¡¨å;-- ã€æ¡ˆä¾‹ã€‘-- åˆ é™¤ç”¨æˆ·è¡¨drop table user; 5ï¼‰ä¿®æ”¹è¡¨123456789101112131415161718192021-- 1.ä¿®æ”¹è¡¨æ·»åŠ åˆ—alter table è¡¨å add åˆ—å ç±»å‹(é•¿åº¦) çº¦æŸ;-- 2.ä¿®æ”¹è¡¨ä¿®æ”¹åˆ—çš„ç±»å‹é•¿åº¦åŠçº¦æŸalter table è¡¨å modify åˆ—å ç±»å‹(é•¿åº¦) çº¦æŸ;-- 3.ä¿®æ”¹è¡¨ä¿®æ”¹åˆ—åalter table è¡¨å change æ—§åˆ—å æ–°åˆ—å ç±»å‹(é•¿åº¦) çº¦æŸ;-- 4.ä¿®æ”¹è¡¨åˆ é™¤åˆ—alter table è¡¨å drop åˆ—å;-- 5.ä¿®æ”¹è¡¨årename table è¡¨å to æ–°è¡¨å;--ã€æ¡ˆä¾‹ã€‘-- ä¿®æ”¹è¡¨æ·»åŠ åˆ—alter table user add address varchar(50);-- ä¿®æ”¹è¡¨ä¿®æ”¹åˆ—çš„ç±»å‹é•¿åº¦åŠçº¦æŸalter table user modify address int(30);-- ä¿®æ”¹è¡¨ä¿®æ”¹åˆ—åalter table user change address addr varchar(50);-- ä¿®æ”¹è¡¨åˆ é™¤åˆ—alter table user drop addr;-- ä¿®æ”¹è¡¨årename table user to tb_user; DMLæ•°æ®æ“ä½œè¯­è¨€1ï¼‰æ’å…¥è®°å½•ï¼šinsert1234567891011121314-- 1.å‘è¡¨ä¸­æ’å…¥æŸäº›åˆ—insert into è¡¨ (åˆ—å1,åˆ—å2,åˆ—å3..) values (å€¼1,å€¼2,å€¼3..);-- 2.å‘è¡¨ä¸­æ’å…¥æ‰€æœ‰åˆ—insert into è¡¨ values (å€¼1,å€¼2,å€¼3..);-- 3.ä»å¦å¤–ä¸€å¼ è¡¨æŸ¥æŸäº›åˆ—çš„ç»“æœæ’å…¥å½“å‰è¡¨insert into è¡¨ (åˆ—å1, åˆ—å2, åˆ—å3..) values select (åˆ—å1,åˆ—å2,åˆ—å3..) fromè¡¨-- 4.ä»å¦å¤–ä¸€å¼ è¡¨æŸ¥æ‰€æœ‰åˆ—çš„ç»“æœæ’å…¥å½“å‰è¡¨insert into è¡¨ values select * from è¡¨--ã€æ¡ˆä¾‹ã€‘-- å‘è¡¨ä¸­æ’å…¥æŸäº›åˆ—ï¼Œå¿…é¡»å†™åˆ—åinsert into user (uid, uname) values (001, &#x27;cuihua&#x27;);-- å‘è¡¨ä¸­æ’å…¥æ‰€æœ‰åˆ—insert into user values (002, &#x27;aqiang&#x27;); 5ä¸ªæ³¨æ„äº‹é¡¹ï¼š â‘  åˆ—åæ•°ä¸ values åé¢çš„å€¼çš„ä¸ªæ•°ç›¸ç­‰ â‘¡ åˆ—çš„é¡ºåºä¸æ’å…¥çš„å€¼å¾—é¡ºåºä¸€è‡´ â‘¢ åˆ—åçš„ç±»å‹ä¸æ’å…¥çš„å€¼è¦ä¸€è‡´. â‘£ æ’å…¥å€¼å¾—æ—¶å€™ä¸èƒ½è¶…è¿‡æœ€å¤§é•¿åº¦. â‘¤ å€¼å¦‚æœæ˜¯å­—ç¬¦ä¸²æˆ–è€…æ—¥æœŸéœ€è¦åŠ å¼•å·â€™â€™ ï¼ˆä¸€èˆ¬æ˜¯å•å¼•å·ï¼‰ 2ï¼‰æ›´æ–°è®°å½•ï¼šupdateè¯­æ³•æ ¼å¼ï¼šupdate æ›´æ–°ã€set ä¿®æ”¹çš„åˆ—å€¼ã€where æŒ‡å®šæ¡ä»¶ã€‚ 123456789- 1.ä¸æŒ‡å®šæ¡ä»¶ï¼Œä¼šä¿®æ”¹è¡¨ä¸­å½“å‰åˆ—æ‰€æœ‰æ•°æ®update è¡¨å set å­—æ®µå=å€¼, å­—æ®µå=å€¼;-- 2.æŒ‡å®šæ¡ä»¶ï¼Œç¬¦åˆæ¡ä»¶çš„æ‰ä¼šä¿®æ”¹update è¡¨å set å­—æ®µå=å€¼, å­—æ®µå=å€¼ where æ¡ä»¶;-- ã€æ¡ˆä¾‹ã€‘-- æ›´æ–°æ‰€æœ‰å­—æ®µçš„å€¼update user set uname=&#x27;xiaodong&#x27;;-- æ ¹æ®æŒ‡å®šçš„æ¡ä»¶æ¥æ›´æ–°update user set uname=&#x27;hashiqi&#x27; where uid = 2; æ³¨æ„ï¼š â‘  åˆ—åçš„ç±»å‹ä¸ä¿®æ”¹çš„å€¼è¦ä¸€è‡´ â‘¡ ä¿®æ”¹å€¼å¾—æ—¶å€™ä¸èƒ½è¶…è¿‡æœ€å¤§é•¿åº¦ â‘¢ å€¼å¦‚æœæ˜¯å­—ç¬¦ä¸²æˆ–è€…æ—¥æœŸéœ€è¦åŠ  â€™ â€™ å¼•å· 3ï¼‰åˆ é™¤è®°å½•ï¼šdelete &amp; truncateè¯­æ³•æ ¼å¼ï¼š 123456delete from è¡¨å [where æ¡ä»¶];-- ã€æ¡ˆä¾‹ã€‘-- åˆ é™¤è¡¨ä¸­æ‰€æœ‰æ•°æ®delete from user;-- åˆ é™¤ uid ä¸º 1 çš„ç”¨æˆ·delete from user where uid = 1; 1truncate table è¡¨å; æ³¨æ„ åˆ é™¤è¡¨ä¸­æ‰€æœ‰è®°å½•ä½¿ç”¨ã€delete from è¡¨åã€‘ï¼Œè¿˜æ˜¯ç”¨ã€truncate table è¡¨åã€‘ï¼Ÿ åˆ é™¤æ–¹å¼çš„åŒºåˆ«ï¼š 12delete ï¼šä¸€æ¡ä¸€æ¡åˆ é™¤ï¼Œä¸æ¸…ç©º auto_increment è®°å½•æ•°ã€‚truncate ï¼šç›´æ¥å°†è¡¨åˆ é™¤ï¼Œé‡æ–°å»ºè¡¨ï¼Œauto_increment å°†ç½®ä¸ºé›¶ï¼Œä»æ–°å¼€å§‹ SQLçº¦æŸçº¦æŸç±»å‹ï¼š ä¸»é”®çº¦æŸ primary key å”¯ä¸€æ€§çº¦æŸ unique éç©ºçº¦æŸ not null å¤–é”®çº¦æŸ foreign key ä¸»é”®çº¦æŸPRIMARY KEY çº¦æŸå”¯ä¸€æ ‡è¯†æ•°æ®åº“è¡¨ä¸­çš„æ¯æ¡è®°å½•ã€‚ ç‰¹ç‚¹ï¼š ä¸»é”®å¿…é¡»åŒ…å«å”¯ä¸€çš„å€¼ã€‚ ä¸»é”®åˆ—ä¸èƒ½åŒ…å« NULL å€¼ã€‚ æ¯ä¸ªè¡¨éƒ½åº”è¯¥æœ‰ä¸€ä¸ªä¸»é”®ï¼Œå¹¶ä¸”æ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªä¸»é”®ã€‚ æ·»åŠ ä¸»é”®çº¦æŸ æ–¹å¼ä¸€ï¼šåˆ›å»ºè¡¨æ—¶ï¼Œåœ¨å­—æ®µæè¿°å¤„ï¼Œå£°æ˜æŒ‡å®šå­—æ®µä¸ºä¸»é”®ï¼š 1234567CREATE TABLE persons(id_p int PRIMARY KEY,lastname varchar(255),firstname varchar(255),address varchar(255),city varchar(255)); æ–¹å¼äºŒï¼šåˆ›å»ºè¡¨æ—¶ï¼Œåœ¨constraintçº¦æŸåŒºåŸŸï¼Œå£°æ˜æŒ‡å®šå­—æ®µä¸ºä¸»é”®ï¼š æ ¼å¼ï¼š [constraint åç§°] primary key (å­—æ®µåˆ—è¡¨) å…³é”®å­—constraintå¯ä»¥çœç•¥ï¼Œå¦‚æœéœ€è¦ä¸ºä¸»é”®å‘½åï¼Œconstraintä¸èƒ½çœç•¥ï¼Œä¸»é”®åç§°ä¸€èˆ¬æ²¡ ç”¨ã€‚ å­—æ®µåˆ—è¡¨éœ€è¦ä½¿ç”¨å°æ‹¬å·æ‹¬ä½ï¼Œå¦‚æœæœ‰å¤šå­—æ®µéœ€è¦ä½¿ç”¨é€—å·åˆ†éš”ã€‚å£°æ˜ä¸¤ä¸ªä»¥ä¸Šå­—æ®µä¸ºä¸»é”®ï¼Œ æˆ‘ä»¬ç§°ä¸ºè”åˆä¸»é”®ã€‚ 1234567CREATE TABLE persons_cons(firstname varchar(255),lastname varchar(255),address varchar(255),city varchar(255),CONSTRAINT pk_personID PRIMARY KEY (firstname,lastname)); æ–¹å¼ä¸‰ï¼šåˆ›å»ºè¡¨ä¹‹åï¼Œé€šè¿‡ä¿®æ”¹è¡¨ç»“æ„ï¼Œå£°æ˜æŒ‡å®šå­—æ®µä¸ºä¸»é”®ï¼š æ ¼å¼ï¼š ALTER TABLE persons ADD [CONSTRAINT åç§°] PRIMARY KEY (å­—æ®µåˆ—è¡¨) 1234567CREATE TABLE persons_after(firstname varchar(255),lastname varchar(255),address varchar(255),city varchar(255));ALTER TABLE persons_after ADD PRIMARY KEY (firstname,lastname); åˆ é™¤ä¸»é”®çº¦æŸå¦‚éœ€æ’¤é”€ PRIMARY KEY çº¦æŸï¼Œè¯·ä½¿ç”¨ä¸‹é¢çš„ SQLï¼š 1ALTER TABLE persons DROP PRIMARY KEY è‡ªåŠ¨å¢é•¿åˆ—æˆ‘ä»¬é€šå¸¸å¸Œæœ›åœ¨æ¯æ¬¡æ’å…¥æ–°è®°å½•æ—¶ï¼Œæ•°æ®åº“è‡ªåŠ¨ç”Ÿæˆå­—æ®µçš„å€¼ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨è¡¨ä¸­ä½¿ç”¨ auto_incrementï¼ˆè‡ªåŠ¨å¢é•¿åˆ—ï¼‰å…³é”®å­—ï¼Œè‡ªåŠ¨å¢é•¿åˆ—ç±»å‹å¿…é¡»æ˜¯æ•´å½¢ï¼Œè‡ªåŠ¨å¢é•¿åˆ— å¿…é¡»ä¸ºé”®(ä¸€èˆ¬æ˜¯ä¸»é”®)ã€‚ ä¸‹åˆ— SQL è¯­å¥æŠŠ â€œpersonsâ€ è¡¨ä¸­çš„ â€œp_idâ€ åˆ—å®šä¹‰ä¸º auto_increment ä¸»é”® 1234567CREATE TABLE persons_id(p_id int PRIMARY KEY AUTO_INCREMENT,lastname varchar(255),firstname varchar(255),address varchar(255),city varchar(255)); å‘personsæ·»åŠ æ•°æ®æ—¶ï¼Œå¯ä»¥ä¸ä¸ºp_idå­—æ®µè®¾ç½®å€¼ï¼Œä¹Ÿå¯ä»¥è®¾ç½®æˆnullï¼Œæ•°æ®åº“å°†è‡ªåŠ¨ç»´æŠ¤ä¸»é”® å€¼ï¼š 123INSERT INTO persons_id (firstname,lastname) VALUES (&#x27;Bill&#x27;,&#x27;Gates&#x27;);INSERT INTO persons_id (p_id,firstname,lastname) VALUES(NULL,&#x27;Bill&#x27;,&#x27;Gates&#x27;); é»˜è®¤AUTO_INCREMENT çš„å¼€å§‹å€¼æ˜¯ 1ï¼Œå¦‚æœå¸Œæœ›ä¿®æ”¹èµ·å§‹å€¼ï¼Œè¯·ä½¿ç”¨ä¸‹åˆ— SQL è¯­æ³•ï¼š 1ALTER TABLE persons AUTO_INCREMENT=100 éç©ºçº¦æŸNOT NULL çº¦æŸå¼ºåˆ¶åˆ—ä¸æ¥å— NULL å€¼ã€‚ NOT NULL çº¦æŸå¼ºåˆ¶å­—æ®µå§‹ç»ˆåŒ…å«å€¼ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä¸å‘å­—æ®µæ·»åŠ å€¼ï¼Œå°±æ— æ³•æ’å…¥æ–°è®°å½•æˆ–è€…æ›´æ–°è®° å½•ã€‚ ä¸‹é¢çš„ SQL è¯­å¥å¼ºåˆ¶ â€œid_pâ€ åˆ—å’Œ â€œlastnameâ€ åˆ—ä¸æ¥å— NULL å€¼ï¼š 12345678CREATE TABLE persons_null(id_p int NOT NULL,lastname varchar(255) NOT NULL,firstname varchar(255),address varchar(255),city varchar(255)); å”¯ä¸€çº¦æŸ UNIQUE çº¦æŸå”¯ä¸€æ ‡è¯†æ•°æ®åº“è¡¨ä¸­çš„æ¯æ¡è®°å½•ã€‚ UNIQUE å’Œ PRIMARY KEY çº¦æŸå‡ä¸ºåˆ—æˆ–åˆ—é›†åˆæä¾›äº†å”¯ä¸€æ€§çš„ä¿è¯ã€‚ PRIMARY KEY æ‹¥æœ‰è‡ªåŠ¨å®šä¹‰çš„ UNIQUE çº¦æŸã€‚ æ³¨æ„ï¼šæ¯ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ª UNIQUE çº¦æŸï¼Œä½†æ˜¯æ¯ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ª PRIMARY KEY çº¦æŸã€‚ æ·»åŠ å”¯ä¸€çº¦æŸä¸ä¸»é”®æ·»åŠ æ–¹å¼ç›¸åŒï¼Œå…±æœ‰3ç§ æ–¹å¼ä¸€ï¼šåˆ›å»ºè¡¨æ—¶ï¼Œåœ¨å­—æ®µæè¿°å¤„ï¼Œå£°æ˜å”¯ä¸€ï¼š 1234567CREATE TABLE persons_unique(id_p int UNIQUE,lastname varchar(255) NOT NULL,firstname varchar(255),address varchar(255),city varchar(255)) æ–¹å¼äºŒï¼šåˆ›å»ºè¡¨æ—¶ï¼Œåœ¨çº¦æŸåŒºåŸŸï¼Œå£°æ˜å”¯ä¸€ï¼š 12345678CREATE TABLE persons(id_p int,lastname varchar(255) NOT NULL,firstname varchar(255),address varchar(255),city varchar(255),CONSTRAINT unique_id_p UNIQUE (Id_P)) æ–¹å¼ä¸‰ï¼šåˆ›å»ºè¡¨åï¼Œä¿®æ”¹è¡¨ç»“æ„ï¼Œå£°æ˜å­—æ®µå”¯ä¸€ï¼š 1ALTER TABLE persons ADD [CONSTRAINT åç§°] UNIQUE (Id_P) åˆ é™¤å”¯ä¸€çº¦æŸ å¦‚éœ€æ’¤é”€ UNIQUE çº¦æŸï¼Œè¯·ä½¿ç”¨ä¸‹é¢çš„ SQLï¼š 1ALTER TABLE persons DROP INDEX åç§° å¦‚æœæ·»åŠ å”¯ä¸€çº¦æŸæ—¶ï¼Œæ²¡æœ‰è®¾ç½®çº¦æŸåç§°ï¼Œé»˜è®¤æ˜¯å½“å‰å­—æ®µçš„å­—æ®µåã€‚ SQLè¯­å¥ä¹‹DQLã€é‡è¦ã€é‡è¦ã€é‡è¦ã€‘è¯­æ³•ï¼šæŸ¥è¯¢ä¸ä¼šå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œæ ¹æ®æŒ‡å®šçš„æ–¹å¼æ¥å‘ˆç°æ•°æ®ã€‚ è¯­æ³•æ ¼å¼ï¼š 1select * | åˆ—å,åˆ—å from è¡¨å [where æ¡ä»¶è¡¨è¾¾å¼] select æ˜¯æŸ¥è¯¢æŒ‡ä»¤ï¼Œå¯ä»¥è¯» 1 ~ n è¡Œæ•°æ®ï¼› åˆ—åæ¢æˆ * å·ï¼Œå¯ä»¥æŸ¥è¯¢æ‰€æœ‰å­—æ®µæ•°æ®ï¼› ä½¿ç”¨ where æ¥æŒ‡å®šå¯¹åº”çš„æ¡ä»¶ å‡†å¤‡å·¥ä½œåˆ›å»ºå•†å“è¡¨ 12345678910111213CREATE TABLE products (-- è‡ªå¢åŠ  AUTO_INCREMENTpid INT PRIMARY KEY AUTO_INCREMENT,pname VARCHAR(20), -- å•†å“åç§°price DOUBLE, -- å•†å“ä»·æ ¼pdate DATE, -- æ—¥æœŸsid VARCHAR(20) -- åˆ†ç±»ID);INSERT INTO products VALUES(NULL,&#x27;æ³°å›½å¤§æ¦´è²&#x27;, 98, NULL, &#x27;s001&#x27;);INSERT INTO products VALUES(NULL,&#x27;æ–°ç–†å¤§æ£&#x27;, 38, NULL, &#x27;s002&#x27;);INSERT INTO products VALUES(NULL,&#x27;æ–°ç–†åˆ‡ç³•&#x27;, 68, NULL, &#x27;s001&#x27;);INSERT INTO products VALUES(NULL,&#x27;åä¸‰é¦™&#x27;, 10, NULL, &#x27;s002&#x27;);INSERT INTO products VALUES(NULL,&#x27;è€å¹²å¦ˆ&#x27;, 20, NULL, &#x27;s002&#x27;); ç®€å•æŸ¥è¯¢123456789101112131415161718192021-- æŸ¥è¯¢æ‰€æœ‰çš„å•†å“select * from product;-- æŸ¥è¯¢æŒ‡å®šåˆ—ï¼šå•†å“åå’Œå•†å“ä»·æ ¼select pname,price from product;-- åˆ«åæŸ¥è¯¢ï¼Œä½¿ç”¨çš„ as å…³é”®å­—ï¼Œas ä¹Ÿå¯ä»¥çœç•¥çš„-- ä½¿ç”¨åˆ«åçš„å¥½å¤„ï¼šæ˜¾ç¤ºçš„æ—¶å€™ä½¿ç”¨è¯†åˆ«æ€§æ›´å¼ºçš„åå­—ï¼Œæœ¬èº«ä¹Ÿä¸ä¼šå»å½±å“åˆ°è¡¨ç»“æ„-- è¡¨åˆ«å-- select å­—æ®µå as å­—æ®µåˆ«å from è¡¨åselect * from product as p;-- åˆ—åˆ«å-- select åˆ—å as åˆ—åˆ«å from è¡¨åselect pname as pn from product;-- åˆ—å’Œè¡¨ï¼ŒåŒæ—¶æŒ‡å®šåˆ«å-- select åˆ—å as åˆ—åˆ«å from è¡¨å as è¡¨åˆ«å-- å»æ‰é‡å¤å€¼-- select distinct å­—æ®µå from è¡¨åselect distinct pname from product;--æŸ¥è¯¢ç»“æœæ˜¯è¡¨è¾¾å¼ï¼ˆè¿ç®—æŸ¥è¯¢ï¼‰ï¼šå°†æ‰€æœ‰å•†å“çš„ä»·æ ¼ +10 å…ƒè¿›è¡Œæ˜¾ç¤º-- select åˆ—å+å›ºå®šå€¼ from è¡¨å-- select åˆ—å1 + åˆ—å2 from è¡¨åselect pname, price + 10 from product; æ¡ä»¶æŸ¥è¯¢ä½¿ç”¨æ¡ä»¶æŸ¥è¯¢ï¼Œå¯ä»¥æ ¹æ®å½“ä¸‹å…·ä½“æƒ…å†µç›´æŸ¥æƒ³è¦çš„é‚£éƒ¨åˆ†æ•°æ®ï¼Œå¯¹è®°å½•è¿›è¡Œè¿‡æ»¤ã€‚ SQL è¯­æ³•å…³é”®å­—ï¼š WHERE è¯­æ³•æ ¼å¼ï¼š 1select å­—æ®µå from è¡¨å where æ¡ä»¶; è¿ç®—ç¬¦ 12345678-- æŸ¥è¯¢å•†å“åç§°ä¸ºåä¸‰é¦™çš„å•†å“æ‰€æœ‰ä¿¡æ¯select * from product where pname = &#x27;åä¸‰é¦™&#x27;;-- æŸ¥è¯¢å•†å“ä»·æ ¼ &gt;60 å…ƒçš„æ‰€æœ‰çš„å•†å“ä¿¡æ¯select * from product where price &gt; 60;select * from product where price &lt;= 60;-- ä¸ç­‰äºselect * from product where price != 60;select * from product where price &lt;&gt; 60; é€»è¾‘è¿ç®—ç¬¦ NOT é€»è¾‘éã€**!ã€‘ AND é€»è¾‘ä¸ã€&amp;&amp;ã€‘ OR é€»è¾‘æˆ–ã€||ã€‘ 123select * from product where price &gt; 40 and pid &gt; 3;select * from product where price &gt; 40 or pid &gt; 3; in å…³é”®å­—1234-- in åŒ¹é…æŸäº›å€¼ä¸­select * from product where pid in (2,5,8);-- ä¸åœ¨è¿™äº›å€¼ä¸­select * from product where pid not in (2,5,8); æŒ‡å®šèŒƒå›´ä¸­ betweenâ€¦and1select * from product where pid between 2 and 10; æ¨¡ç³ŠæŸ¥è¯¢ like å…³é”®å­— æ¨¡ç³ŠæŸ¥è¯¢: ä½œç”¨æ˜¯å¸®åŠ©åŒ¹é…æ¨¡ç³Šçš„å­—æ®µå†…å®¹ è¯­æ³•:whereä¹‹ååŠ ä¸Šlike è¯­æ³•ï¼Œ%ç™¾åˆ†å·ï¼Œ_ä¸‹åˆ’çº¿ % ä»£è¡¨ä»»æ„é•¿çŸ­å†…å®¹æ¨¡ç³ŠåŒ¹é…: [%xxx]ä»¥xxxç»“å°¾çš„ä»»æ„å†…å®¹ã€‚ [xxx%]ä»¥xxxå¼€å¤´çš„ä»»æ„å†…å®¹ [%xxx%]åŒ…å«xxxçš„ä»»æ„å†…å®¹ _ä»£è¡¨ä»»æ„ä¸€ä¸ªå­—ç¬¦çš„å†…å®¹æ¨¡ç³ŠåŒ¹é… [_xxx]ä»¥ä»»æ„å•ä¸ªå­—ç¬¦å¼€å¤´çš„xxxå†…å®¹ã€‚ [xxx__x] 12345-- ä½¿ç”¨ like å®ç°æ¨¡ç³ŠæŸ¥è¯¢-- â€œæ–°â€å¼€å¤´select * from product where pname like &#x27;æ–°%&#x27;;-- åŒ…å«â€œæ–°â€select * from product where pname like &#x27;%æ–°%&#x27;; æ’åºè¯­æ³•ï¼š 1234select å­—æ®µå from è¡¨å where å­—æ®µ = å€¼ order by å­—æ®µå [asc | desc]asc å‡åºdesc é™åº 12345-- æŸ¥è¯¢æ‰€æœ‰çš„å•†å“ï¼ŒæŒ‰ä»·æ ¼è¿›è¡Œæ’åºselect * from product order by price;-- æŸ¥è¯¢åç§°æœ‰æ–°çš„å•†å“çš„ä¿¡æ¯å¹¶ä¸”æŒ‰ä»·æ ¼é™åºæ’åºselect * from product where pname like &#x27;%æ–°%&#x27; order by price desc; èšåˆå‡½æ•°ï¼ˆç»„å‡½æ•°ï¼‰12345678910111213ç‰¹ç‚¹ï¼šåªå¯¹å•åˆ—è¿›è¡Œæ“ä½œå¸¸ç”¨çš„èšåˆå‡½æ•°ï¼šsum()ï¼šæ±‚æŸä¸€åˆ—çš„å’Œavg()ï¼šæ±‚æŸä¸€åˆ—çš„å¹³å‡å€¼max()ï¼šæ±‚æŸä¸€åˆ—çš„æœ€å¤§å€¼min()ï¼šæ±‚æŸä¸€åˆ—çš„æœ€å°å€¼count()ï¼šæ±‚æŸä¸€åˆ—çš„å…ƒç´ ä¸ªæ•°-- è·å¾—æ‰€æœ‰å•†å“çš„ä»·æ ¼çš„æ€»å’Œï¼šselect sum(price) from product;-- è·å¾—æ‰€æœ‰å•†å“çš„å¹³å‡ä»·æ ¼ï¼šselect avg(price) from product;-- è·å¾—æ‰€æœ‰å•†å“çš„ä¸ªæ•°ï¼šselect count(*) from product; åˆ†ç»„æŸ¥è¯¢åˆ†ç»„æŸ¥è¯¢:ä½œç”¨æ˜¯å°†æŸ¥è¯¢ç»“æœæŒ‰ç…§æŸåˆ—æ•°æ®æ¥è¿›è¡Œåˆ†ç»„å‘ˆç° è¯­æ³•æ ¼å¼ï¼š 123SQL è¯­æ³•å…³é”®å­—ï¼šGROUP BYã€HAVINGselect å­—æ®µ1, å­—æ®µ2... from è¡¨å group by åˆ†ç»„å­—æ®µ [having æ¡ä»¶]; 12345-- æ ¹æ® cno å­—æ®µåˆ†ç»„ï¼Œåˆ†ç»„åç»Ÿè®¡å•†å“çš„ä¸ªæ•°select sid, count(*) from product group by sid;-- æ ¹æ® cno åˆ†ç»„ï¼Œåˆ†ç»„ç»Ÿè®¡æ¯ç»„å•†å“çš„å¹³å‡ä»·æ ¼ï¼Œå¹¶ä¸”å¹³å‡ä»·æ ¼ &gt; 60;select sid, avg(price) from product group by sid having avg(price) &gt; 60; æ³¨æ„äº‹é¡¹ï¼š â‘  select è¯­å¥ä¸­çš„åˆ—ï¼ˆéèšåˆå‡½æ•°åˆ—ï¼‰ï¼Œå¿…é¡»å‡ºç°åœ¨ group by å­å¥ä¸­ â‘¡ group by å­å¥ä¸­çš„åˆ—ï¼Œä¸ä¸€å®šè¦å‡ºç°åœ¨ select è¯­å¥ä¸­ â‘¢ èšåˆå‡½æ•°åªèƒ½å‡ºç° select è¯­å¥ä¸­æˆ–è€… having è¯­å¥ä¸­ï¼Œä¸€å®šä¸èƒ½å‡ºç°åœ¨ where è¯­å¥ä¸­ã€‚ having å’Œ where çš„åŒºåˆ«ï¼š 1é¦–å…ˆï¼Œæ‰§è¡Œçš„é¡ºåºæ˜¯æœ‰å…ˆæœ‰åã€‚ 1ï¼‰ where 12å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œåˆ†ç»„å‰ï¼Œå°†ä¸ç¬¦åˆ where æ¡ä»¶çš„è®°å½•è¿‡æ»¤æ‰ï¼Œç„¶åå†åˆ†ç»„ã€‚where åé¢ï¼Œä¸èƒ½å†ä½¿ç”¨èšåˆå‡½æ•°ã€‚ 2ï¼‰having 12ç­›é€‰æ»¡è¶³æ¡ä»¶çš„ç»„ï¼Œåˆ†ç»„ä¹‹åè¿‡æ»¤æ•°æ®ã€‚having åé¢ï¼Œå¯ä»¥ä½¿ç”¨èšåˆå‡½æ•°ã€‚ åˆ†é¡µæŸ¥è¯¢ åŠŸèƒ½: å°†æŸ¥è¯¢çš„ç»“æœæŒ‰ç…§ä¸€é¡µä¸€é¡µçš„å½¢å¼è¾“å‡º è¯­æ³• 12345-- è¯­æ³•select åˆ— from è¡¨ limit offset, length-- æ¡ˆä¾‹ 0 åç§»é‡select * from products limit 0, 3; å…³é”®å­—ï¼šlimit [offset,] rows è¯­æ³•æ ¼å¼ï¼š 123456789select * | å­—æ®µåˆ—è¡¨ [as åˆ«å] from è¡¨å[where] æ¡ä»¶è¯­å¥[group by] åˆ†ç»„è¯­å¥[having] è¿‡æ»¤è¯­å¥[order by] æ’åºè¯­å¥[limit] åˆ†é¡µè¯­å¥;limit offset, length;offsetï¼šå¼€å§‹è¡Œæ•°ï¼Œä» 0 å¼€å§‹lengthï¼šæ¯é¡µæ˜¾ç¤ºçš„è¡Œæ•° limit å…³é”®å­—ä¸æ˜¯ SQL92 æ ‡å‡†æå‡ºçš„å…³é”®å­—ï¼Œå®ƒæ˜¯ MySQL ç‹¬æœ‰çš„è¯­æ³•ã€‚ é€šè¿‡ limit å…³é”®å­—ï¼ŒMySQL å®ç°äº†ç‰©ç†åˆ†é¡µã€‚ åˆ†é¡µåˆ†ä¸ºé€»è¾‘åˆ†é¡µå’Œç‰©ç†åˆ†é¡µï¼š é€»è¾‘åˆ†é¡µï¼šå°†æ•°æ®åº“ä¸­çš„æ•°æ®æŸ¥è¯¢åˆ°å†…å­˜ä¹‹åå†è¿›è¡Œåˆ†é¡µã€‚ ç‰©ç†åˆ†é¡µï¼šé€šè¿‡ LIMIT å…³é”®å­—ï¼Œç›´æ¥åœ¨æ•°æ®åº“ä¸­è¿›è¡Œåˆ†é¡µï¼Œæœ€ç»ˆè¿”å›çš„æ•°æ®ï¼Œåªæ˜¯åˆ†é¡µåçš„æ•°æ®ã€‚ 123-- å¦‚æœçœç•¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé»˜è®¤ä» 0 å¼€å§‹select * from product limit 5;select * from product limit 3, 5; æŸ¥è¯¢åˆ†ç±» æ¡ä»¶æŸ¥è¯¢ where åˆ†ç»„æŸ¥è¯¢group by havingé’ˆå¯¹åˆ†ç»„ç»“æœè¿‡æ»¤ æ’åºorder by åˆ†é¡µ limit æŸ¥è¯¢è¯­å¥é¡ºåº: select åˆ— from è¡¨ where æ¡ä»¶ group by åˆ†ç»„ having è¿‡æ»¤ order by æ’åº limit åˆ†é¡µ","categories":[{"name":"MySql","slug":"MySql","permalink":"https://tutouwang.vercel.app/categories/MySql/"}],"tags":[]},{"title":"çº¿ç¨‹åŒæ­¥-é”-ä¿¡å·é‡","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘/çº¿ç¨‹åŒæ­¥-é”-ä¿¡å·é‡","date":"2022-05-31T06:23:35.000Z","updated":"2022-06-04T07:09:39.875Z","comments":true,"path":"2022/05/31/Linuxå¤šè¿›ç¨‹å¼€å‘/çº¿ç¨‹åŒæ­¥-é”-ä¿¡å·é‡/","link":"","permalink":"https://tutouwang.vercel.app/2022/05/31/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5-%E9%94%81-%E4%BF%A1%E5%8F%B7%E9%87%8F/","excerpt":"","text":"ä½é…å–ç¥¨å¾ˆå¤šé—®é¢˜ - è¿›ç¨‹èµ„æºçš„æŠ¢å 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556/************************************************************************* &gt; File Name: selltickets.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ31æ—¥ æ˜ŸæœŸäºŒ 14æ—¶28åˆ†01ç§’ ************************************************************************//* * ä½¿ç”¨å¤šçº¿ç¨‹å®ç°å–ç¥¨æ¡ˆä¾‹ * æœ‰3ä¸ªçª—å£,ä¸€å…±æ˜¯100å¼ ç¥¨ * */#include &lt;stdio.h&gt;#include &lt;pthread.h&gt;#include &lt;unistd.h&gt;// å…¨å±€å˜é‡,æ‰€æœ‰çš„çº¿ç¨‹éƒ½å…±äº«è¿™ä¸€ä»½èµ„æº - ç»“æœï¼šä¸é€šçš„è¿›ç¨‹ä¼šå–åŒä¸€å¼ ç¥¨int tickets = 100;void *sellticket(void *arg) &#123; // å–ç¥¨ // int tickets = 100; - æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šå–100å¼ ! while(tickets &gt; 0) &#123; usleep(6000); printf(&quot;%ld æ­£åœ¨å–ç¬¬ %d å¼ é—¨ç¥¨\\n&quot;, pthread_self(), tickets--); &#125; return NULL;&#125;int main() &#123; // åˆ›å»º3ä¸ªå­çº¿ç¨‹ pthread_t tid1, tid2, tid3; pthread_create(&amp;tid1, NULL, sellticket, NULL); pthread_create(&amp;tid2, NULL, sellticket, NULL); pthread_create(&amp;tid3, NULL, sellticket, NULL); // å›æ”¶å­çº¿ç¨‹èµ„æº,é˜»å¡ --- å¯ä»¥è®¾ç½®çº¿ç¨‹åˆ†ç¦» pthread_join(tid1, NULL); pthread_join(tid2, NULL); pthread_join(tid3, NULL); // è®¾ç½®çº¿ç¨‹åˆ†ç¦» /* pthread_detach(tid1); pthread_detach(tid2); pthread_detach(tid3); */ // é€€å‡ºä¸»çº¿ç¨‹ pthread_exit(NULL); return 0;&#125; çº¿ç¨‹åŒæ­¥ çº¿ç¨‹çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºï¼Œèƒ½å¤Ÿé€šè¿‡å…¨å±€å˜é‡æ¥å…±äº«ä¿¡æ¯ã€‚ä¸è¿‡ï¼Œè¿™ç§ä¾¿æ·çš„å…±äº«æ˜¯æœ‰ä»£ä»·çš„ï¼šå¿…é¡»ç¡®ä¿å¤šä¸ªçº¿ç¨‹ä¸ä¼šåŒæ—¶ä¿®æ”¹åŒä¸€å˜é‡ï¼Œæˆ–è€…æŸä¸€çº¿ç¨‹ä¸ä¼šè¯»å–æ­£åœ¨ç”±å…¶ä»–çº¿ç¨‹ ä¿®æ”¹çš„å˜é‡ã€‚ ä¸´ç•ŒåŒºæ˜¯æŒ‡è®¿é—®æŸä¸€å…±äº«èµ„æºçš„ä»£ç ç‰‡æ®µï¼Œå¹¶ä¸”è¿™æ®µä»£ç çš„æ‰§è¡Œåº”ä¸ºåŸå­æ“ä½œï¼Œä¹Ÿå°±æ˜¯ åŒæ—¶è®¿é—®åŒä¸€å…±äº«èµ„æºçš„å…¶ä»–çº¿ç¨‹ä¸åº”ç»ˆç«¯è¯¥ç‰‡æ®µçš„æ‰§è¡Œã€‚ çº¿ç¨‹åŒæ­¥ï¼šå³å½“æœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨å¯¹å†…å­˜è¿›è¡Œæ“ä½œæ—¶ï¼Œå…¶ä»–çº¿ç¨‹éƒ½ä¸å¯ä»¥å¯¹è¿™ä¸ªå†…å­˜åœ°å€è¿› è¡Œæ“ä½œï¼Œç›´åˆ°è¯¥çº¿ç¨‹å®Œæˆæ“ä½œï¼Œå…¶ä»–çº¿ç¨‹æ‰èƒ½å¯¹è¯¥å†…å­˜åœ°å€è¿›è¡Œæ“ä½œï¼Œè€Œå…¶ä»–çº¿ç¨‹åˆ™å¤„ äºç­‰å¾…çŠ¶æ€ã€‚ äº’æ–¥é”(äº’æ–¥é‡) ä¸ºé¿å…çº¿ç¨‹æ›´æ–°å…±äº«å˜é‡æ—¶å‡ºç°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨äº’æ–¥é‡ï¼ˆmutex æ˜¯ mutual exclusion çš„ç¼©å†™ï¼‰æ¥ç¡®ä¿åŒæ—¶ä»…æœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®æŸé¡¹å…±äº«èµ„æºã€‚å¯ä»¥ä½¿ç”¨äº’æ–¥é‡æ¥ä¿è¯å¯¹ä»»æ„å…± äº«èµ„æºçš„åŸå­è®¿é—®ã€‚ äº’æ–¥é‡æœ‰ä¸¤ç§çŠ¶æ€ï¼šå·²é”å®šï¼ˆlockedï¼‰å’Œæœªé”å®šï¼ˆunlockedï¼‰ã€‚ä»»ä½•æ—¶å€™ï¼Œè‡³å¤šåªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥é”å®šè¯¥äº’æ–¥é‡ã€‚è¯•å›¾å¯¹å·²ç»é”å®šçš„æŸä¸€äº’æ–¥é‡å†æ¬¡åŠ é”ï¼Œå°†å¯èƒ½é˜»å¡çº¿ç¨‹æˆ–è€…æŠ¥ é”™å¤±è´¥ï¼Œå…·ä½“å–å†³äºåŠ é”æ—¶ä½¿ç”¨çš„æ–¹æ³•ã€‚ ä¸€æ—¦çº¿ç¨‹é”å®šäº’æ–¥é‡ï¼Œéšå³æˆä¸ºè¯¥äº’æ–¥é‡çš„æ‰€æœ‰è€…ï¼Œåªæœ‰æ‰€æœ‰è€…æ‰èƒ½ç»™äº’æ–¥é‡è§£é”ã€‚ä¸€èˆ¬æƒ… å†µä¸‹ï¼Œå¯¹æ¯ä¸€å…±äº«èµ„æºï¼ˆå¯èƒ½ç”±å¤šä¸ªç›¸å…³å˜é‡ç»„æˆï¼‰ä¼šä½¿ç”¨ä¸åŒçš„äº’æ–¥é‡ï¼Œæ¯ä¸€çº¿ç¨‹åœ¨è®¿é—® åŒä¸€èµ„æºæ—¶å°†é‡‡ç”¨å¦‚ä¸‹åè®®ï¼š é’ˆå¯¹å…±äº«èµ„æºé”å®šäº’æ–¥é‡ è®¿é—®å…±äº«èµ„æº å¯¹äº’æ–¥é‡è§£é” å¦‚æœå¤šä¸ªçº¿ç¨‹è¯•å›¾æ‰§è¡Œè¿™ä¸€å—ä»£ç ï¼ˆä¸€ä¸ªä¸´ç•ŒåŒºï¼‰ï¼Œäº‹å®ä¸Šåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤ŸæŒæœ‰è¯¥äº’æ–¥é‡ï¼ˆå…¶ä»–çº¿ç¨‹å°†é­åˆ°é˜»å¡ï¼‰ï¼Œå³åŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿè¿›å…¥è¿™æ®µä»£ç åŒºåŸŸï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š äº’æ–¥é‡(äº’æ–¥é”)ç›¸å…³æ“ä½œå‡½æ•°åŠä»‹ç»1234567891011121314151617äº’æ–¥é‡çš„ç±»å‹ pthread_mutex_tint pthread_mutex_init(pthread_mutex_t *restrict mutex, const pthread_mutexattr_t *restrict attr); - åŠŸèƒ½: åˆå§‹åŒ–äº’æ–¥é‡ - å‚æ•°: - mutex: éœ€è¦åˆå§‹è¯çš„äº’æ–¥é‡å˜é‡ - attr: äº’æ–¥é‡ç›¸å…³çš„å±æ€§NULL - restrict: cè¯­è¨€çš„ä¿®é¥°ç¬¦,è¢«ä¿®é¥°çš„æŒ‡é’ˆ,ä¸èƒ½ç”±å¦å¤–çš„ä¸€ä¸ªæŒ‡é’ˆè¿›è¡Œ æ“ä½œ pthread_mutex_t *restrict = mutex = xxx; pthread_mutex_t *mutex1 = mutex; // ä¸å…è®¸int pthread_mutex_destroy(pthread_mutex_t *mutex); - åŠŸèƒ½: é‡Šæ”¾äº’æ–¥é‡èµ„æºint pthread_mutex_lock(pthread_mutex_t *mutex); - åŠŸèƒ½: åŠ é” - é˜»å¡,å¦‚æœ‰æœ‰ä¸€ä¸ªçº¿ç¨‹åŠ é”äº†é‚£ä¹ˆå…¶ä»–çº¿ç¨‹åªèƒ½é˜»å¡ç­‰å¾…int pthread_mutex_trylock(pthread_mutex_t *mutex); - åŠŸèƒ½: å°è¯•åŠ é”,å¦‚æœåŠ é”å¤±è´¥,ä¸ä¼šé˜»å¡,ä¼šç›´æ¥è¿”å›int pthread_mutex_unlock(pthread_mutex_t *mutex); - é‡Šæ”¾é”(è§£é”) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899/************************************************************************* &gt; File Name: mutex.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ31æ—¥ æ˜ŸæœŸäºŒ 16æ—¶36åˆ†54ç§’ ************************************************************************/ /* äº’æ–¥é‡çš„ç±»å‹ pthread_mutex_t int pthread_mutex_init(pthread_mutex_t *restrict mutex, const pthread_mutexattr_t *restrict attr); - åŠŸèƒ½: åˆå§‹åŒ–äº’æ–¥é‡ - å‚æ•°: - mutex: éœ€è¦åˆå§‹è¯çš„äº’æ–¥é‡å˜é‡ - attr: äº’æ–¥é‡ç›¸å…³çš„å±æ€§NULL - restrict: cè¯­è¨€çš„ä¿®é¥°ç¬¦,è¢«ä¿®é¥°çš„æŒ‡é’ˆ,ä¸èƒ½ç”±å¦å¤–çš„ä¸€ä¸ªæŒ‡é’ˆè¿›è¡Œ æ“ä½œ pthread_mutex_t *restrict = mutex = xxx; pthread_mutex_t *mutex1 = mutex; // ä¸å…è®¸ int pthread_mutex_destroy(pthread_mutex_t *mutex); - åŠŸèƒ½: é‡Šæ”¾äº’æ–¥é‡èµ„æº int pthread_mutex_lock(pthread_mutex_t *mutex); - åŠŸèƒ½: åŠ é” - é˜»å¡,å¦‚æœ‰æœ‰ä¸€ä¸ªçº¿ç¨‹åŠ é”äº†é‚£ä¹ˆå…¶ä»–çº¿ç¨‹åªèƒ½é˜»å¡ç­‰å¾… int pthread_mutex_trylock(pthread_mutex_t *mutex); - åŠŸèƒ½: å°è¯•åŠ é”,å¦‚æœåŠ é”å¤±è´¥,ä¸ä¼šé˜»å¡,ä¼šç›´æ¥è¿”å› int pthread_mutex_unlock(pthread_mutex_t *mutex); - é‡Šæ”¾é”(è§£é”)*//************************************************************************* &gt; File Name: selltickets.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ31æ—¥ æ˜ŸæœŸäºŒ 14æ—¶28åˆ†01ç§’ ************************************************************************//* * ä½¿ç”¨å¤šçº¿ç¨‹å®ç°å–ç¥¨æ¡ˆä¾‹ * æœ‰3ä¸ªçª—å£,ä¸€å…±æ˜¯100å¼ ç¥¨ * */#include &lt;stdio.h&gt;#include &lt;pthread.h&gt;#include &lt;unistd.h&gt;// åˆ›å»ºä¸€ä¸ªäº’æ–¥é‡pthread_mutex_t mutex;// å…¨å±€å˜é‡,æ‰€æœ‰çš„çº¿ç¨‹éƒ½å…±äº«è¿™ä¸€ä»½èµ„æº - (æ²¡åŠ äº’æ–¥é”çš„æƒ…å†µ)ç»“æœï¼šä¸é€šçš„ è¿›ç¨‹ä¼šå–åŒä¸€å¼ ç¥¨int tickets = 1000;void *sellticket(void *arg) &#123; // å–ç¥¨ // int tickets = 100; - æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šå–100å¼ ! while(1) &#123; // åŠ é” pthread_mutex_lock(&amp;mutex); if(tickets &gt; 0) &#123; usleep(6000); printf(&quot;%ld æ­£åœ¨å–ç¬¬ %d å¼ é—¨ç¥¨\\n&quot;, pthread_self(), tickets--); &#125; else &#123; // è§£é” pthread_mutex_unlock(&amp;mutex); break; &#125; // è§£é” pthread_mutex_unlock(&amp;mutex); &#125; return NULL;&#125;int main() &#123; // åˆå§‹åŒ–äº’æ–¥é‡ pthread_mutex_init(&amp;mutex, NULL); // åˆ›å»º3ä¸ªå­çº¿ç¨‹ pthread_t tid1, tid2, tid3; pthread_create(&amp;tid1, NULL, sellticket, NULL); pthread_create(&amp;tid2, NULL, sellticket, NULL); pthread_create(&amp;tid3, NULL, sellticket, NULL); // å›æ”¶å­çº¿ç¨‹èµ„æº,é˜»å¡ --- å¯ä»¥è®¾ç½®çº¿ç¨‹åˆ†ç¦» pthread_join(tid1, NULL); pthread_join(tid2, NULL); pthread_join(tid3, NULL); // é€€å‡ºä¸»çº¿ç¨‹ pthread_exit(NULL); // é‡Šæ”¾äº’æ–¥é‡èµ„æº pthread_mutex_destroy(&amp;mutex); return 0;&#125; æ­»é” æœ‰æ—¶ï¼Œä¸€ä¸ªçº¿ç¨‹éœ€è¦åŒæ—¶è®¿é—®ä¸¤ä¸ªæˆ–æ›´å¤šä¸åŒçš„å…±äº«èµ„æºï¼Œè€Œæ¯ä¸ªèµ„æºåˆéƒ½ç”±ä¸åŒçš„äº’æ–¥é‡ç®¡ç†ã€‚å½“è¶…è¿‡ä¸€ä¸ªçº¿ç¨‹åŠ é”åŒä¸€ç»„äº’æ–¥é‡æ—¶ï¼Œå°±æœ‰å¯èƒ½å‘ç”Ÿæ­»é”ã€‚ ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå› äº‰å¤ºå…±äº«èµ„æºè€Œé€ æˆçš„ä¸€ç§äº’ç›¸ç­‰å¾…çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚æ­¤æ—¶ç§°ç³»ç»Ÿå¤„äºæ­»é”çŠ¶æ€æˆ–ç³»ç»Ÿäº§ç”Ÿäº†æ­»é”ã€‚ æ­»é”çš„å‡ ç§åœºæ™¯ï¼š å¿˜è®°é‡Šæ”¾é” &#x2F;&#x2F; pthread_mutex_trylock() å°è¯•åŠ é”åˆ¤æ–­ é‡å¤åŠ é” å¤šçº¿ç¨‹å¤šé”ï¼ŒæŠ¢å é”èµ„æº å¿˜è®°åŠ é” - å¯æ›¿æ¢ä¸Šè¿°å‡½æ•°ä»£ç  å°è¯•è¿è¡Œ123456789101112131415161718192021void *sellticket(void *arg) &#123; // å–ç¥¨ // int tickets = 100; - æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šå–100å¼ ! while(1) &#123; // åŠ é” pthread_mutex_lock(&amp;mutex); if(tickets &gt; 0) &#123; usleep(6000); printf(&quot;%ld æ­£åœ¨å–ç¬¬ %d å¼ é—¨ç¥¨\\n&quot;, pthread_self(), tickets--); &#125; else &#123; // è§£é” pthread_mutex_unlock(&amp;mutex); break; &#125; // è§£é” // pthread_mutex_unlock(&amp;mutex); &#125; return NULL;&#125; é‡å¤åŠ é”123456789101112131415161718192021222324void *sellticket(void *arg) &#123; // å–ç¥¨ // int tickets = 100; - æ¯ä¸ªçº¿ç¨‹éƒ½ä¼šå–100å¼ ! while(1) &#123; // åŠ é” pthread_mutex_lock(&amp;mutex); pthread_mutex_lock(&amp;mutex); if(tickets &gt; 0) &#123; usleep(6000); printf(&quot;%ld æ­£åœ¨å–ç¬¬ %d å¼ é—¨ç¥¨\\n&quot;, pthread_self(), tickets--); &#125; else &#123; // è§£é” pthread_mutex_unlock(&amp;mutex); break; &#125; // è§£é” pthread_mutex_unlock(&amp;mutex); pthread_mutex_unlock(&amp;mutex); &#125; return NULL;&#125; å¤šçº¿ç¨‹å¤šé”ï¼ŒæŠ¢å é”èµ„æº - C1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/************************************************************************* &gt; File Name: deadlock1.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ31æ—¥ æ˜ŸæœŸäºŒ 19æ—¶09åˆ†34ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;pthread.h&gt;#include &lt;unistd.h&gt;// åˆ›å»º2ä¸ªäº’æ–¥é‡pthread_mutex_t mutex1, mutex2;void *workA(void *arg) &#123; pthread_mutex_lock(&amp;mutex1); sleep(1); pthread_mutex_lock(&amp;mutex1); printf(&quot;workA\\n&quot;); pthread_mutex_unlock(&amp;mutex2); pthread_mutex_unlock(&amp;mutex1); return NULL;&#125;void *workB(void *arg) &#123; pthread_mutex_lock(&amp;mutex2); sleep(1); pthread_mutex_lock(&amp;mutex1); printf(&quot;workB\\n&quot;); pthread_mutex_unlock(&amp;mutex1); pthread_mutex_unlock(&amp;mutex2); return NULL;&#125;int main() &#123; // åˆå§‹åŒ–äº’æ–¥é‡ pthread_mutex_init(&amp;mutex1, NULL); pthread_mutex_init(&amp;mutex2, NULL); // åˆ›å»º2ä¸ªå­çº¿ç¨‹ pthread_t tid1, tid2; pthread_create(&amp;tid1, NULL, workA, NULL); pthread_create(&amp;tid2, NULL, workB, NULL); // å›æ”¶å­çº¿ç¨‹èµ„æº pthread_join(tid1, NULL); pthread_join(tid2, NULL); // é‡Šæ”¾äº’æ–¥é‡èµ„æº pthread_mutex_destroy(&amp;mutex1); pthread_mutex_destroy(&amp;mutex2); return 0;&#125; è¯»å†™é” å½“æœ‰ä¸€ä¸ªçº¿ç¨‹å·²ç»æŒæœ‰äº’æ–¥é”æ—¶ï¼Œäº’æ–¥é”å°†æ‰€æœ‰è¯•å›¾è¿›å…¥ä¸´ç•ŒåŒºçš„çº¿ç¨‹éƒ½é˜»å¡ä½ã€‚ä½†æ˜¯è€ƒè™‘ä¸€ç§æƒ…å½¢ï¼Œå½“å‰æŒæœ‰äº’æ–¥é”çš„çº¿ç¨‹åªæ˜¯è¦è¯»è®¿é—®å…±äº«èµ„æºï¼Œè€ŒåŒæ—¶æœ‰å…¶å®ƒå‡ ä¸ªçº¿ç¨‹ä¹Ÿæƒ³ è¯»å–è¿™ä¸ªå…±äº«èµ„æºï¼Œä½†æ˜¯ç”±äºäº’æ–¥é”çš„æ’å®ƒæ€§ï¼Œæ‰€æœ‰å…¶å®ƒçº¿ç¨‹éƒ½æ— æ³•è·å–é”ï¼Œä¹Ÿå°±æ— æ³•è¯» è®¿é—®å…±äº«èµ„æºäº†ï¼Œä½†æ˜¯å®é™…ä¸Šå¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»è®¿é—®å…±äº«èµ„æºå¹¶ä¸ä¼šå¯¼è‡´é—®é¢˜ã€‚ åœ¨å¯¹æ•°æ®çš„è¯»å†™æ“ä½œä¸­ï¼Œæ›´å¤šçš„æ˜¯è¯»æ“ä½œï¼Œå†™æ“ä½œè¾ƒå°‘ï¼Œä¾‹å¦‚å¯¹æ•°æ®åº“æ•°æ®çš„è¯»å†™åº”ç”¨ã€‚ä¸ºäº†æ»¡è¶³å½“å‰èƒ½å¤Ÿå…è®¸å¤šä¸ªè¯»å‡ºï¼Œä½†åªå…è®¸ä¸€ä¸ªå†™å…¥çš„éœ€æ±‚ï¼Œçº¿ç¨‹æä¾›äº†è¯»å†™é”æ¥å®ç°ã€‚ è¯»å†™é”çš„ç‰¹ç‚¹ï¼š å¦‚æœæœ‰å…¶å®ƒçº¿ç¨‹è¯»æ•°æ®ï¼Œåˆ™å…è®¸å…¶å®ƒçº¿ç¨‹æ‰§è¡Œè¯»æ“ä½œï¼Œä½†ä¸å…è®¸å†™æ“ä½œã€‚ å¦‚æœæœ‰å…¶å®ƒçº¿ç¨‹å†™æ•°æ®ï¼Œåˆ™å…¶å®ƒçº¿ç¨‹éƒ½ä¸å…è®¸è¯»ã€å†™æ“ä½œã€‚ å†™æ˜¯ç‹¬å çš„ï¼Œå†™çš„ä¼˜å…ˆçº§é«˜ã€‚ 123456789101112131415è¯»å†™é”çš„ç±»å‹ pthread_rwlock_t int pthread_rwlock_init(pthread_rwlock_t *restrict rwlock, const pthread_rwlockattr_t *restrict attr); - åŠŸèƒ½: åˆå§‹åŒ–è¯»å†™é” int pthread_rwlock_destroy(pthread_rwlock_t *rwlock); - åŠŸèƒ½: é”€æ¯ int pthread_rwlock_rdlock(pthread_rwlock_t *rwlock); - åŠŸèƒ½: åŠ è¯»é” int pthread_rwlock_tryrdlock(pthread_rwlock_t *rwlock); - åŠŸèƒ½: å°è¯•åŠ è¯»é” int pthread_rwlock_wrlock(pthread_rwlock_t *rwlock); - åŠŸèƒ½: å†™é” int pthread_rwlock_trywrlock(pthread_rwlock_t *rwlock); - åŠŸèƒ½: å°è¯•åŠ å†™é” int pthread_rwlock_unlock(pthread_rwlock_t *rwlock); - åŠŸèƒ½: å…³é—­å†™ è¯»å†™é”(æ¡ˆä¾‹) - C123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117/************************************************************************* &gt; File Name: rwlock.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´06æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 10æ—¶27åˆ†52ç§’ ************************************************************************//* è¯»å†™é”çš„ç±»å‹ pthread_rwlock_t int pthread_rwlock_init(pthread_rwlock_t *restrict rwlock, const pthread_rwlockattr_t *restrict attr); - åŠŸèƒ½: åˆå§‹åŒ–è¯»å†™é” int pthread_rwlock_destroy(pthread_rwlock_t *rwlock); - åŠŸèƒ½: é”€æ¯ int pthread_rwlock_rdlock(pthread_rwlock_t *rwlock); - åŠŸèƒ½: åŠ è¯»é” int pthread_rwlock_tryrdlock(pthread_rwlock_t *rwlock); - åŠŸèƒ½: å°è¯•åŠ è¯»é” int pthread_rwlock_wrlock(pthread_rwlock_t *rwlock); - åŠŸèƒ½: å†™é” int pthread_rwlock_trywrlock(pthread_rwlock_t *rwlock); - åŠŸèƒ½: å°è¯•åŠ å†™é” int pthread_rwlock_unlock(pthread_rwlock_t *rwlock); - åŠŸèƒ½: å…³é—­å†™*//* æ¡ˆä¾‹: åˆ›å»º8ä¸ªçº¿ç¨‹æ“ä½œåŒä¸€ä¸ªå˜é‡ 3ä¸ªçº¿ç¨‹ä¸å®šæ—¶çš„å†™è¿™ä¸ªå…¨å±€å˜é‡,5ä¸ªçº¿ç¨‹ä¸å®šæ—¶çš„è¯»è¿™ä¸ªå…¨å±€å˜é‡*/#include &lt;stdio.h&gt;#include &lt;pthread.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;// åˆ›å»ºä¸€ä¸ªå…±äº«æ•°æ®int num = 1;// åˆ›å»ºä¸€ä¸€ä¸ªäº’æ–¥é‡pthread_mutex_t mutex;// åˆ›å»ºä¸€ä¸ªè¯»å†™é”pthread_rwlock_t rwlock;void *readNum(void *arg) &#123; while(1) &#123; // pthread_mutex_lock(&amp;mutex); pthread_rwlock_rdlock(&amp;rwlock); printf(&quot;==read, tid : %ld, num : %d\\n&quot;, pthread_self(), num); pthread_rwlock_unlock(&amp;rwlock); //pthread_mutex_unlock(&amp;mutex); usleep(100); &#125; return NULL;&#125;void *writeNum(void *arg) &#123; while(1) &#123; // pthread_mutex_lock(&amp;mutex); pthread_rwlock_wrlock(&amp;rwlock); num++; printf(&quot;++write, tid : %ld, num : %d\\n&quot;, pthread_self(), num); pthread_rwlock_unlock(&amp;rwlock); //pthread_mutex_unlock(&amp;mutex); usleep(100); &#125; return NULL;&#125;int main() &#123; // åˆå§‹åŒ–äº’æ–¥é‡ // pthread_mutex_init(&amp;mutex, NULL); // åˆå§‹åŒ–è¯»å†™é” pthread_rwlock_init(&amp;rwlock, NULL); // åˆ›å»º3ä¸ªå†™çº¿ç¨‹,5ä¸ªåº¦ pthread_t wtids[3], rtids[5]; for(int i = 0; i &lt; 3; i++) &#123; pthread_create(&amp;wtids[i], NULL, writeNum, NULL); // è®¾ç½®çº¿ç¨‹åˆ†ç¦» pthread_detach(wtids[i]); &#125; for(int i = 0; i &lt; 5; i++) &#123; pthread_create(&amp;rtids[i], NULL, readNum, NULL); // è®¾ç½®çº¿ç¨‹åˆ†ç¦» // pthread_detach(rtids[i]); &#125; /* for(int i = 0; i &lt; 3; i++) &#123; // è®¾ç½®çº¿ç¨‹åˆ†ç¦» pthread_detach(wtids[i]); &#125; for(int i = 0; i &lt; 5; i++) &#123; // è®¾ç½®çº¿ç¨‹åˆ†ç¦» pthread_detach(rtids[i]); &#125; */ // é€€å‡ºçˆ¶è¿›ç¨‹ pthread_exit(NULL); // pthread_mutex_destroy(&amp;mutex); pthread_rwlock_destroy(&amp;rwlock); return 0;&#125; ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹ æ¡ä»¶å˜é‡æ¡ä»¶å˜é‡å‡½æ•°12345678910111213æ¡ä»¶å˜é‡çš„ç±»å‹ pthread_cond_tint pthread_cond_init(pthread_cond_t *restrict cond, const pthread_condattr_t *restrict attr); - åŠŸèƒ½: åˆå§‹åŒ–int pthread_cond_destroy(pthread_cond_t *cond); - åŠŸèƒ½: é‡Šæ”¾int pthread_cond_wait(pthread_cond_t *restrict cond,thread_mutex_t *restrict mutex); - åŠŸèƒ½: ç­‰å¾…,é˜»å¡å‡½æ•°è°ƒç”¨äº†è¯¥å‡½æ•°çº¿ç¨‹ä¼šé˜»å¡int pthread_cond_timedwait(pthread_cond_t *restrict cond, pthread_mutex_t *restrict mutex, const struct timespec *restrict abstime); - åŠŸèƒ½: ç­‰å¾…å¤šé•¿æ—¶é—´,è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°,çº¿ç¨‹ä¼šé˜»å¡,ç›´åˆ°æŒ‡å®šçš„æ—¶é—´ç»“æŸint pthread_cond_signal(pthread_cond_t *cond); - åŠŸèƒ½: å”¤é†’ä¸€ä¸ªæˆ–è€…å¤šä¸ªç­‰å¾…çš„çº¿ç¨‹int pthread_cond_broadcast(pthread_cond_t *cond); - åŠŸèƒ½: å”¤é†’æ‰€ä»¥çš„ç­‰å¾…çš„çº¿ç¨‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124/************************************************************************* &gt; File Name: cond.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´06æœˆ01æ—¥ æ˜ŸæœŸä¸‰ 19æ—¶49åˆ†46ç§’ ************************************************************************//* æ¡ä»¶å˜é‡çš„ç±»å‹ pthread_cond_t int pthread_cond_init(pthread_cond_t *restrict cond, const pthread_condattr_t *restrict attr); - åŠŸèƒ½: åˆå§‹åŒ– int pthread_cond_destroy(pthread_cond_t *cond); - åŠŸèƒ½: é‡Šæ”¾ int pthread_cond_wait(pthread_cond_t *restrict cond,thread_mutex_t *restrict mutex); - åŠŸèƒ½: ç­‰å¾…,é˜»å¡å‡½æ•°è°ƒç”¨äº†è¯¥å‡½æ•°çº¿ç¨‹ä¼šé˜»å¡ int pthread_cond_timedwait(pthread_cond_t *restrict cond, pthread_mutex_t *restrict mutex, const struct timespec *restrict abstime); - åŠŸèƒ½: ç­‰å¾…å¤šé•¿æ—¶é—´,è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°,çº¿ç¨‹ä¼šé˜»å¡,ç›´åˆ°æŒ‡å®šçš„æ—¶é—´ç»“ æŸ int pthread_cond_signal(pthread_cond_t *cond); - åŠŸèƒ½: å”¤é†’ä¸€ä¸ªæˆ–è€…å¤šä¸ªç­‰å¾…çš„çº¿ç¨‹ int pthread_cond_broadcast(pthread_cond_t *cond); - åŠŸèƒ½: å”¤é†’æ‰€ä»¥çš„ç­‰å¾…çš„çº¿ç¨‹*//* * ç”Ÿäº§è€…æ¶ˆè´¹è€…æ¨¡å‹(ç²—ç•¥ç‰ˆæœ¬) */#include &lt;stdio.h&gt;#include &lt;pthread.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;typedef struct Node &#123; int num; struct Node *next;&#125; Node;// å¤´èŠ‚ç‚¹struct Node *head = NULL;// äº’æ–¥é‡pthread_mutex_t mutex;// åˆ›å»ºä¸€ä¸ªæ¡ä»¶å˜é‡pthread_cond_t cond;void *producer(void *arg) &#123; // ä¸æ–­çš„åˆ›å»ºæ–°çš„èŠ‚ç‚¹,æ·»åŠ åˆ°é“¾è¡¨ä¸­ while(1) &#123; pthread_mutex_lock(&amp;mutex); Node *newNode = (Node *)malloc(sizeof(Node)); newNode-&gt;num = rand() % 1000; newNode-&gt;next = head; head = newNode; printf(&quot;add node, num : %d, tid : %ld\\n&quot;, newNode-&gt;num, pthread_self()); // åªè¦ç”Ÿæˆäº†ä¸€ä¸ª,å°±é€šçŸ¥æ¶ˆè´¹è€…æ¶ˆè´¹ pthread_cond_signal(&amp;cond); pthread_mutex_unlock(&amp;mutex); usleep(100); &#125; return NULL;&#125;void *customer(void *arg) &#123; while(1) &#123; pthread_mutex_lock(&amp;mutex); if(head != NULL) &#123; // ä¿å­˜å¤´èŠ‚ç‚¹çš„æŒ‡é’ˆ Node *temp = head; head = head-&gt;next; printf(&quot;del node, num : %d, tid : %ld\\n&quot;, temp-&gt;num, pthread_self()); free(temp); &#125; else &#123; // æ²¡æœ‰æ•°æ®éœ€è¦ç­‰å¾… // å½“è¿™ä¸ªå‡½æ•°è°ƒç”¨é˜»å¡æ—¶å€™ä¼šå¯¹äº’æ–¥é”è¿›è¡Œè§£é”,å½“ä¸é˜»å¡çš„ï¼Œç»§ç»­å‘ä¸‹æ‰§è¡Œ,ä¼šé‡æ–°åŠ é” pthread_cond_wait(&amp;cond, &amp;mutex); &#125; pthread_mutex_unlock(&amp;mutex); usleep(100); &#125; return NULL;&#125;int main() &#123; // åˆå§‹åŒ–ä¿¡å·é‡ pthread_mutex_init(&amp;mutex, NULL); // åˆå§‹åŒ–æ¡ä»¶å˜é‡ pthread_cond_init(&amp;cond, NULL); // åˆ›å»º5ä¸ªç”Ÿæˆè€…çº¿ç¨‹å’Œ5ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹ pthread_t ptids[5], ctids[5]; for(int i = 0; i &lt; 5; i++) &#123; pthread_create(&amp;ptids[i], NULL, producer, NULL); pthread_create(&amp;ctids[i], NULL, customer, NULL); &#125; for(int i = 0; i &lt; 5; i++) &#123; pthread_detach(ptids[i]); pthread_detach(ctids[i]); &#125; while(1) &#123; sleep(10); &#125; pthread_mutex_destroy(&amp;mutex); pthread_cond_destroy(&amp;cond); pthread_exit(NULL); return 0;&#125; ä¿¡å·é‡ä¿¡å·é‡å‡½æ•°12345678910111213141516171819ä¿¡å·é‡çš„ç±»å‹ sem_tint sem_init(sem_t *sem, int pshared, unsigned int value); - åŠŸèƒ½: åˆå§‹åŒ–ä¿¡å·é‡ - å‚æ•°: - sem: ä¿¡å·é‡çš„çš„åœ°å€ - pshared: 0ç”¨åœ¨çº¿ç¨‹é—´ã€é0ç”¨åœ¨è¿›ç¨‹é—´ - value: ä¿¡å·é‡ä¸­çš„å€¼int sem_destroy(sem_t *sem); - åŠŸèƒ½: é‡Šæ”¾èµ„æºint sem_wait(sem_t *sem); - åŠŸèƒ½: å¯¹ä¿¡å·é‡åŠ é”,å¯¹è¿™ä¸ªä¿¡å·é‡çš„å€¼å‡1,å¦‚æœå€¼ä¸º0,å°±é˜»å¡int sem_trywait(sem_t *sem); - åŠŸèƒ½: å°è¯•int sem_timedwait(sem_t *sem, const struct timespec *abs_timeout); - åŠŸèƒ½: ç­‰å¾…å¤šé•¿çš„æ—¶é—´int sem_post(sem_t *sem); - åŠŸèƒ½: å¯¹ä¿¡å·é‡è§£é”,è°ƒç”¨ä¸€æ¬¡å¯¹ä¿¡å·çš„å€¼åŠ 1int sem_getvalue(sem_t *sem, int *sval); - åŠŸèƒ½: è·å– 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142/************************************************************************* &gt; File Name: semaphore.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´06æœˆ02æ—¥ æ˜ŸæœŸå›› 13æ—¶35åˆ†42ç§’ ************************************************************************//* ä¿¡å·é‡çš„ç±»å‹ sem_t int sem_init(sem_t *sem, int pshared, unsigned int value); - åŠŸèƒ½: åˆå§‹åŒ–ä¿¡å·é‡ - å‚æ•°: - sem: ä¿¡å·é‡çš„çš„åœ°å€ - pshared: 0ç”¨åœ¨çº¿ç¨‹é—´ã€é0ç”¨åœ¨è¿›ç¨‹é—´ - value: ä¿¡å·é‡ä¸­çš„å€¼ int sem_destroy(sem_t *sem); - åŠŸèƒ½: é‡Šæ”¾èµ„æº int sem_wait(sem_t *sem); - åŠŸèƒ½: å¯¹ä¿¡å·é‡åŠ é”,å¯¹è¿™ä¸ªä¿¡å·é‡çš„å€¼å‡1,å¦‚æœå€¼ä¸º0,å°±é˜»å¡ int sem_trywait(sem_t *sem); - åŠŸèƒ½: å°è¯• int sem_timedwait(sem_t *sem, const struct timespec *abs_timeout); - åŠŸèƒ½: ç­‰å¾…å¤šé•¿çš„æ—¶é—´ int sem_post(sem_t *sem); - åŠŸèƒ½: å¯¹ä¿¡å·é‡è§£é”,è°ƒç”¨ä¸€æ¬¡å¯¹ä¿¡å·çš„å€¼åŠ 1 int sem_getvalue(sem_t *sem, int *sval); - åŠŸèƒ½: è·å– // ç”Ÿ sem_t pesm; // æ¶ˆ sem_t csem; init(pesm, 0, 8); init(csem, 0, 0); // ç”Ÿäº§ prodicer() &#123; sem_wait(&amp;osem); sem_post(&amp;csem); &#125; // æ¶ˆè´¹ customer() &#123; sem_wait(&amp;csem); sem_post(&amp;pesm); &#125;*/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;pthread.h&gt;#include &lt;semaphore.h&gt;typedef struct Node &#123; int num; struct Node *next;&#125; Node;// å¤´èŠ‚ç‚¹struct Node *head = NULL;// äº’æ–¥é‡pthread_mutex_t mutex;// ä¿¡å·é‡sem_t psem;sem_t csem;void *producer(void *arg) &#123; // ä¸æ–­çš„åˆ›å»ºæ–°çš„èŠ‚ç‚¹,æ·»åŠ åˆ°é“¾è¡¨ä¸­ while(1) &#123; sem_wait(&amp;psem); pthread_mutex_lock(&amp;mutex); Node *newNode = (Node *)malloc(sizeof(Node)); newNode-&gt;num = rand() % 1000; newNode-&gt;next = head; head = newNode; printf(&quot;add node, num : %d, tid : %ld\\n&quot;, newNode-&gt;num, pthread_self()); pthread_mutex_unlock(&amp;mutex); sem_post(&amp;csem); usleep(100); &#125; return NULL;&#125;void *customer(void *arg) &#123; while(1) &#123; sem_wait(&amp;csem); pthread_mutex_lock(&amp;mutex); if(head != NULL) &#123; // ä¿å­˜å¤´èŠ‚ç‚¹çš„æŒ‡é’ˆ Node *temp = head; head = head-&gt;next; printf(&quot;del node, num : %d, tid : %ld\\n&quot;, temp-&gt;num, pthread_self()); free(temp); &#125; pthread_mutex_unlock(&amp;mutex); sem_post(&amp;psem); usleep(100); &#125; return NULL;&#125;int main() &#123; // åˆå§‹åŒ–ä¿¡å·é‡ pthread_mutex_init(&amp;mutex, NULL); // ä¿¡å·é‡åˆå§‹åŒ– sem_init(&amp;psem, 0, 8); sem_init(&amp;csem, 0, 0); // åˆ›å»º5ä¸ªç”Ÿæˆè€…çº¿ç¨‹å’Œ5ä¸ªæ¶ˆè´¹è€…çº¿ç¨‹ pthread_t ptids[5], ctids[5]; for(int i = 0; i &lt; 5; i++) &#123; pthread_create(&amp;ptids[i], NULL, producer, NULL); pthread_create(&amp;ctids[i], NULL, customer, NULL); &#125; for(int i = 0; i &lt; 5; i++) &#123; pthread_detach(ptids[i]); pthread_detach(ctids[i]); &#125; while(1) &#123; sleep(10); &#125; pthread_mutex_destroy(&amp;mutex); pthread_exit(NULL); return 0;&#125;","categories":[{"name":"Linuxå¤šçº¿ç¨‹å¼€å‘","slug":"Linuxå¤šçº¿ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"çº¿ç¨‹çš„æ“ä½œ","slug":"Linuxå¤šçº¿ç¨‹å¼€å‘/çº¿ç¨‹çš„æ“ä½œ","date":"2022-05-30T05:38:53.000Z","updated":"2022-05-31T06:06:28.285Z","comments":true,"path":"2022/05/30/Linuxå¤šçº¿ç¨‹å¼€å‘/çº¿ç¨‹çš„æ“ä½œ/","link":"","permalink":"https://tutouwang.vercel.app/2022/05/30/Linux%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%BC%80%E5%8F%91/%E7%BA%BF%E7%A8%8B%E7%9A%84%E6%93%8D%E4%BD%9C/","excerpt":"","text":"pthread_create åˆ›å»ºçº¿ç¨‹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556/************************************************************************* &gt; File Name: pthread_create.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ30æ—¥ æ˜ŸæœŸä¸€ 10æ—¶33åˆ†57ç§’ ************************************************************************//* ä¸€èˆ¬æƒ…å†µä¸‹, main å‡½æ•°æ‰€åœ¨çš„çº¿ç¨‹æˆ‘ä»¬ç§°ä¹‹ä¸ºä¸»çº¿ç¨‹(mainçº¿ç¨‹),å…¶ä½™åˆ›å»ºçš„çº¿ç¨‹ç§°ä¹‹ä¸ºå­çº¿ç¨‹ã€‚ ç¨‹åºä¸­é»˜è®¤åªæœ‰ä¸€ä¸ªè¿›ç¨‹,fork()å‡½æ•°è°ƒç”¨,2è¿›è¡Œ ç¨‹åºä¸­é»˜è®¤åªæœ‰ä¸€ä¸ªçº¿ç¨‹,pthread_create(å‡½æ•°è°ƒç”¨),2ä¸ªçº¿ç¨‹ #include &lt;pthread.h&gt; int pthread_create(pthread_t *thread, const pthread_attr_t *attr,void *(*start_routine) (void *), void *arg); - åŠŸèƒ½: åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ - å‚æ•°: - thread: ä¼ å‡ºå‚æ•°,çº¿ç¨‹åˆ›å»ºæˆåŠŸ,å­çº¿ç¨‹çš„çº¿ç¨‹IDè¢«å†™åˆ°è¯¥å˜å˜é‡å½“ä¸­ - attr: è®¾ç½®çº¿ç¨‹çš„å±æ€§, ä¸€èˆ¬ä½¿ç”¨é»˜è®¤å€¼,NULL - start_routine: å‡½æ•°æŒ‡é’ˆ,è¿™ä¸ªå‡½æ•°æ˜¯å­çº¿ç¨‹éœ€è¦å¤„ç†çš„é€»è¾‘ä»£ç  - atg: ç»™ç¬¬ä¸‰ä¸ªå‚æ•°ä½¿ç”¨çš„,ä¼ å‚ - è¿”å›å€¼: æˆåŠŸè¿”å› 0 å¤±è´¥è¿”å› é”™è¯¯å·,å’Œä¹‹å‰çš„errnoä¸å¤ªä¸€æ · è·å–é”™è¯¯å·çš„ä¿¡æ¯: char strerror(int errnum) */#include &lt;stdio.h&gt;#include &lt;pthread.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;void *callback(void *arg) &#123; printf(&quot;child thread...\\n&quot;); printf(&quot;arg value:%d \\n&quot;, *(int *)arg); return NULL;&#125;int main() &#123; pthread_t tid; int num = 10; // åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ int ret = pthread_create(&amp;tid, NULL, callback, (void *)&amp;num); if(ret != 0) &#123; char * errstr = strerror(ret); printf(&quot;error : %s \\n&quot;, errstr); &#125; for(int i = 0; i &lt; 5; i++) &#123; printf(&quot;%d\\n&quot;, i); &#125; sleep(1); return 0;&#125; ä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹å…¶å®æ˜¯äº¤æ›¿æ‰§è¡Œçš„ pthread_exit() ç»ˆæ­¢çº¿ç¨‹ - pthread_self() è·å–å½“å‰çš„çº¿ç¨‹çš„çº¿ç¨‹ID123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/************************************************************************* &gt; File Name: pthread_exit.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ30æ—¥ æ˜ŸæœŸä¸€ 14æ—¶30åˆ†18ç§’ ************************************************************************//* #include &lt;pthread.h&gt; void pthread_exit(void *retval); åŠŸèƒ½: ç»ˆæ­¢ä¸€ä¸ªçº¿ç¨‹,åœ¨é‚£ä¸ªçº¿ç¨‹ä¸­è°ƒç”¨,å°±è¡¨ç¤ºç»ˆæ­¢é‚£ä¸ªé‚£ä¸ªçº¿ç¨‹ å‚æ•°: retval:éœ€è¦ä¼ é€’ä¸€ä¸ªæŒ‡é’ˆ,ä½œä¸ºä¸€ä¸ªè¿”å›å€¼,è¿”å›å€¼å¯ä»¥åœ¨pthread_join()ä¸­è·å–åˆ° pthread_t thread_self(void); åŠŸèƒ½: è·å–å½“å‰çš„çº¿ç¨‹çš„çº¿ç¨‹ID */#include &lt;stdio.h&gt;#include &lt;pthread.h&gt;#include &lt;string.h&gt;void *callback(void *arg) &#123; printf(&quot;child thread id : %ld\\n&quot;, pthread_self()); return NULL; // pthread_exit(null);&#125;int main() &#123; // åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ pthread_t tid; int ret = pthread_create(&amp;tid, NULL, callback, NULL); if(ret != 0) &#123; char *errstr = strerror(ret); printf(&quot;error : %s\\n&quot;, errstr); &#125; for(int i = 0; i &lt; 5; i++) &#123; printf(&quot;%d\\n&quot;, i); &#125; printf(&quot;tid : %ld, main thread id : %ld\\n&quot;, tid, pthread_self()); // è®©ä¸»çº¿ç¨‹é€€å‡º,å½“ä¸»çº¿ç¨‹é€€å‡ºæ—¶,ä¸å½±å“å…¶ä»–æ­£å¸¸è¿è¡Œçš„çº¿ç¨‹ pthread_exit(NULL); // è¿è¡Œä¹‹åå¯ä»¥çœ‹å‡º printf å’Œ return 0éƒ½æ²¡æ‰§è¡Œ æ‰€ä»¥è¯´ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ printf(&quot;main thread exit \\n&quot;); return 0;&#125; pthread_join() é“¾æ¥å·²ç»ˆæ­¢çš„è¿›ç¨‹(å›æ”¶å­çº¿ç¨‹)å›æ”¶å­çº¿ç¨‹æµ‹è¯•é˜»å¡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263/************************************************************************* &gt; File Name: pthread_join.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ30æ—¥ æ˜ŸæœŸä¸€ 17æ—¶54åˆ†48ç§’ ************************************************************************//* * #include &lt;pthread.h&gt; * int pthread_join(pthread_t thread, void **retval); * - åŠŸèƒ½:å’Œä¸€ä¸ªå·²ç»ç»ˆæ­¢çš„çº¿ç¨‹è¿›è¡Œé“¾æ¥ * å›æ”¶å­çº¿ç¨‹çš„èµ„æº * è¿™ä¸ªå‡½æ•°æ˜¯é˜»å¡å‡½æ•°,è°ƒç”¨ä¸€æ¬¡åªèƒ½å›æ”¶ä¸€ä¸ªå­çº¿ç¨‹ * ä¸€èˆ¬åœ¨ä¸»çº¿çº¿ç¨‹ä¸­ä½¿ç”¨ * - å‚æ•°: * - thread: éœ€è¦å›æ”¶çš„å­çº¿ç¨‹çš„ID * - retval: æ¥æ”¶å­è¿›ç¨‹é€€å‡ºæ—¶çš„è¿”å›å€¼ * - è¿”å›å€¼: * æˆåŠŸè¿”å› 0 * å¤±è´¥è¿”å› é”™è¯¯å· */#include &lt;stdio.h&gt;#include &lt;pthread.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;void *callback(void* arg) &#123; printf(&quot;child thread id : %ld\\n&quot;, pthread_self()); sleep(3); return NULL;&#125;int main() &#123; // åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ pthread_t tid; int ret = pthread_create(&amp;tid, NULL, callback, NULL); if(ret != 0) &#123; char *errstr = strerror(ret); printf(&quot;error : %s\\n&quot;, errstr); &#125; for(int i = 0; i &lt; 5; i++) &#123; printf(&quot;%d \\n&quot;, i); &#125; printf(&quot;tid : %ld, main thread id : %ld\\n&quot;, tid, pthread_self()); // ä¸»çº¿ç¨‹è°ƒç”¨pthread_joinå›æ”¶å­è¿›ç¨‹èµ„æº - é˜»å¡è¿›ç¨‹ ret = pthread_join(tid, NULL); if(ret != 0) &#123; char *errstr = strerror(ret); printf(&quot;error : %s\\n&quot;, errstr); &#125; printf(&quot;å›æ”¶å­çº¿ç¨‹çš„èµ„æºæˆåŠŸ\\n&quot;); // è®©ä¸»çº¿ç¨‹é€€å‡º pthread_exit(NULL); return 0;&#125; 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283/************************************************************************* &gt; File Name: pthread_join.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ30æ—¥ æ˜ŸæœŸä¸€ 17æ—¶54åˆ†48ç§’ ************************************************************************//* * #include &lt;pthread.h&gt; * int pthread_join(pthread_t thread, void **retval); * - åŠŸèƒ½:å’Œä¸€ä¸ªå·²ç»ç»ˆæ­¢çš„çº¿ç¨‹è¿›è¡Œé“¾æ¥ * å›æ”¶å­çº¿ç¨‹çš„èµ„æº * è¿™ä¸ªå‡½æ•°æ˜¯é˜»å¡å‡½æ•°,è°ƒç”¨ä¸€æ¬¡åªèƒ½å›æ”¶ä¸€ä¸ªå­çº¿ç¨‹ * ä¸€èˆ¬åœ¨ä¸»çº¿çº¿ç¨‹ä¸­ä½¿ç”¨ * - å‚æ•°: * - thread: éœ€è¦å›æ”¶çš„å­çº¿ç¨‹çš„ID * - retval: æ¥æ”¶å­è¿›ç¨‹é€€å‡ºæ—¶çš„è¿”å›å€¼ * - è¿”å›å€¼: * æˆåŠŸè¿”å› 0 * å¤±è´¥è¿”å› é”™è¯¯å· */#include &lt;stdio.h&gt;#include &lt;pthread.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;int value = 10;void *callback(void* arg) &#123; printf(&quot;child thread id : %ld\\n&quot;, pthread_self()); // sleep(3); // return NULL; // int value = 10; // å±€éƒ¨å˜é‡ - å› ä¸ºåœ¨ä¹‹å‰çš„å›¾ä¸­å¯çŸ¥æ ˆç©ºé—´æ˜¯åˆ†å±‚çš„æ‰€ä»¥ä½ é‡Šæ”¾å®Œæ—¶å€™ä¸‹é¢è¾“å‡ºçš„å°±æ˜¯ä¸€ä¸ªéšæœºçš„å€¼ pthread_exit((void *)&amp;value); // è·Ÿretrn (void *)&amp;value&#125;int main() &#123; // åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ pthread_t tid; int ret = pthread_create(&amp;tid, NULL, callback, NULL); if(ret != 0) &#123; char *errstr = strerror(ret); printf(&quot;error : %s\\n&quot;, errstr); &#125; for(int i = 0; i &lt; 5; i++) &#123; printf(&quot;%d \\n&quot;, i); &#125; printf(&quot;tid : %ld, main thread id : %ld\\n&quot;, tid, pthread_self()); // ä¸»çº¿ç¨‹è°ƒç”¨pthread_joinå›æ”¶å­è¿›ç¨‹èµ„æº - é˜»å¡è¿›ç¨‹ int *thread_retval; ret = pthread_join(tid, (void **)&amp;thread_retval); /* è§£é‡Šjoinä¸ºä»€ä¹ˆä¼ 2çº§æŒ‡é’ˆ int data = 10; å‡å¦‚ä½ æƒ³è°ƒç”¨å‡½æ•°ä¿®æ”¹ dataçš„å€¼ä¸€å®šæ˜¯ test(&amp;data) ä¸æ˜¯test(data) void test(int a) &#123;&#125; åŒç† int **data = 10; void test(int a) &#123;&#125; test(** data) */ if(ret != 0) &#123; char *errstr = strerror(ret); printf(&quot;error : %s\\n&quot;, errstr); &#125; printf(&quot;exit data : %d\\n&quot;, *thread_retval); printf(&quot;å›æ”¶å­çº¿ç¨‹çš„èµ„æºæˆåŠŸ\\n&quot;); // è®©ä¸»çº¿ç¨‹é€€å‡º pthread_exit(NULL); return 0;&#125; pthread_detach()çº¿ç¨‹çš„åˆ†ç¦»1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/************************************************************************* &gt; File Name: pthread_detach.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ30æ—¥ æ˜ŸæœŸä¸€ 19æ—¶46åˆ†59ç§’ ************************************************************************//* * #include &lt;pthread.h&gt; * int pthread_detach(pthread_t thread); * - åŠŸèƒ½: åˆ†ç¦»ä¸€ä¸ªçº¿ç¨‹,è¢«åˆ†ç¦»çš„çº¿ç¨‹åœ¨ç»ˆæ­¢çš„æ—¶å€™ä¼šè‡ªåŠ¨é‡Šæ”¾èµ„æºè¿”å› ç»™ç³»ç»Ÿã€‚ * 1.ä¸èƒ½å¤šæ¬¡çš„åˆ†ç¦»,ä¼šäº§ç”Ÿä¸å¯é¢„æ–™çš„è¡Œä¸º. * 2.ä¸èƒ½å»è¿æ¥ä¸€ä¸ªå·²ç»åˆ†ç¦»çš„çº¿ç¨‹,ä¼šæŠ¥é”™ * - å‚æ•°:éœ€è¦åˆ†ç¦»çš„çº¿ç¨‹çš„ID * - è¿”å›å€¼: * æˆåŠŸè¿”å› 0 * å¤±è´¥è¿”å› é”™è¯¯å· */#include &lt;stdio.h&gt;#include &lt;pthread.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;void *callback(void *arg) &#123; printf(&quot;chid thread id %ld\\n&quot;, pthread_self()); return NULL;&#125;int main() &#123; // åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ pthread_t tid; int ret = pthread_create(&amp;tid, NULL, callback, NULL); if(ret != 0) &#123; char * errstr = strerror(ret); printf(&quot;error_create : %s\\n&quot;, errstr); &#125; // è¾“å‡ºå­çº¿ç¨‹å’Œå­çº¿ç¨‹ID printf(&quot;tid : %ld, main thread id % ld\\n&quot;, tid, pthread_self()); // è®¾ç½®å­çº¿ç¨‹åˆ†ç¦»,å­çº¿ç¨‹ç»“æŸæ—¶å¯¹åº”çš„èµ„æºå°±ä¸éœ€è¦ä¸»çº¿ç¨‹é‡Šæ”¾ ret = pthread_detach(tid); if(ret != 0) &#123; char * errstr = strerror(ret); printf(&quot;error_datach : %s\\n&quot;, errstr); &#125; // è®¾ç½®çº¿ç¨‹åˆ†ç¦», å¯¹åˆ†ç¦»çš„å­çº¿ç¨‹è¿›è¡Œé“¾æ¥ pthread_join() - é”™è¯¯ /* ret = pthread_join(tid, NULL); if(ret != 0) &#123; char * errstr = strerror(ret); printf(&quot;error_join : %s\\n&quot;, errstr); &#125; */ // é€€å‡ºä¸»è¿›ç¨‹ pthread_exit(NULL); return 0;&#125; çº¿ç¨‹åˆ†ç¦»ä¹‹åä¸èƒ½å†é“¾æ¥(join) pthread_cancel() çº¿ç¨‹å–æ¶ˆ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657/************************************************************************* &gt; File Name: pthread_cancel.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ31æ—¥ æ˜ŸæœŸäºŒ 09æ—¶32åˆ†12ç§’ ************************************************************************//* * #include &lt;pthread.h&gt; * int pthread_cancel(pthread_t thread); * - åŠŸèƒ½: å–æ¶ˆçº¿ç¨‹(è®©çº¿ç¨‹ç»ˆæ­¢) * å–æ¶ˆæŸä¸ªçº¿ç¨‹,å¯ä»¥ç»ˆæ­¢æŸä¸ªçº¿ç¨‹çš„è¿è¡Œ * ä½†æ˜¯å¹¶ä¸æ˜¯ç«‹é©¬ç»ˆæ­¢,è€Œæ˜¯å½“å­çº¿ç¨‹æ‰§è¡Œåˆ°ä¸€ä¸ªå–æ¶ˆç‚¹ï¼Œçº¿ç¨‹æ‰ä¼šç»ˆ æ­¢ * å–æ¶ˆç‚¹:ç³»ç»Ÿè§„å®šå¥½çš„ä¸€äº›ç³»ç»Ÿè°ƒç”¨(æ¯ä¸ªç³»ç»Ÿéƒ½å¯èƒ½ä¸ä¸€æ ·),æˆ‘ä»¬å¯ä»¥ç²—ç•¥çš„ç†è§£ä¸º ä»ç”¨æˆ·åŒºåˆ°å†…æ ¸å»çš„åˆ‡æ¢è¿™ä¸ªä½ç½®ç§°ä¹‹ä¸ºå–æ¶ˆç‚¹ * */#include &lt;stdio.h&gt;#include &lt;pthread.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;void *callback(void *arg) &#123; printf(&quot;chid thread id %ld\\n&quot;, pthread_self()); for(int i = 0; i &lt; 5; i++) &#123; printf(&quot;child : %d\\n&quot;, i); &#125; return NULL;&#125;int main() &#123; // åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ pthread_t tid; int ret = pthread_create(&amp;tid, NULL, callback, NULL); if(ret != 0) &#123; char * errstr = strerror(ret); printf(&quot;error_create : %s\\n&quot;, errstr); &#125; // å–æ¶ˆçº¿ç¨‹ pthread_cancel(tid); for(int i = 0; i &lt; 5; i++) &#123; printf(&quot;%d\\n&quot;, i); &#125; // è¾“å‡ºå­çº¿ç¨‹å’Œå­çº¿ç¨‹ID printf(&quot;tid : %ld, main thread id % ld\\n&quot;, tid, pthread_self()); // é€€å‡ºä¸»è¿›ç¨‹ pthread_exit(NULL); return 0;&#125; çº¿ç¨‹å±æ€§çº¿ç¨‹åˆ†ç¦» - è·å–çº¿ç¨‹æ ˆçš„å¤§å°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970/************************************************************************* &gt; File Name: pthread_attr.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ31æ—¥ æ˜ŸæœŸäºŒ 13æ—¶27åˆ†44ç§’ ************************************************************************//* int pthread_attr_init(pthread_attr_t *attr); - åŠŸèƒ½: åˆå§‹åŒ–çº¿ç¨‹å±æ€§å˜é‡ int pthread_attr_destroy(pthread_attr_t *attr); - åŠŸèƒ½: é‡Šæ”¾çº¿ç¨‹å±æ€§çš„èµ„æº int pthread_attr_getdetachstate(const pthread_attr_t *attr, int *detachstate); - åŠŸèƒ½: è·å–çº¿ç¨‹åˆ†ç¦»çš„çŠ¶æ€å±æ€§ int pthread_attr_setdetachstate(ptread_attr_t *attr, int detachstate); - åŠŸèƒ½: è®¾ç½®çº¿ç¨‹åˆ†ç¦»çš„çŠ¶æ€å±æ€§*/#include &lt;stdio.h&gt;#include &lt;pthread.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;void *callback(void *arg) &#123; printf(&quot;chid thread id %ld\\n&quot;, pthread_self()); for(int i = 0; i &lt; 5; i++) &#123; printf(&quot;child : %d\\n&quot;, i); &#125; return NULL;&#125;int main() &#123; // åˆ›å»ºä¸€ä¸ªçº¿ç¨‹å±æ€§å˜é‡ pthread_attr_t attr; // åˆå§‹åŒ–å±æ€§å˜é‡ pthread_attr_init(&amp;attr); // è®¾ç½®å±æ€§ - PTHREAD_CREATE_DETACHED(çº¿ç¨‹åˆ†ç¦») pthread_attr_setdetachstate(&amp;attr, PTHREAD_CREATE_DETACHED); // è·å–çº¿ç¨‹æ ˆçš„å¤§å° size_t size; pthread_attr_getstacksize(&amp;attr, &amp;size); // printf(&quot;thread stack size : %ld\\n&quot;, size); // åˆ›å»ºä¸€ä¸ªå­çº¿ç¨‹ - è®¾ç½®å±æ€§ pthread_t tid; int ret = pthread_create(&amp;tid, &amp;attr, callback, NULL); if(ret != 0) &#123; char * errstr = strerror(ret); printf(&quot;error_create : %s\\n&quot;, errstr); &#125; // è·å–çº¿ç¨‹æ ˆçš„å¤§å° printf(&quot;thread stack size : %ld\\n&quot;, size); // è¾“å‡ºå­çº¿ç¨‹å’Œå­çº¿ç¨‹ID printf(&quot;tid : %ld, main thread id % ld\\n&quot;, tid, pthread_self()); // é‡Šæ”¾çº¿ç¨‹èµ„æº pthread_attr_destroy(&amp;attr); // é€€å‡ºä¸»è¿›ç¨‹ pthread_exit(NULL); return 0;&#125;","categories":[{"name":"Linuxå¤šçº¿ç¨‹å¼€å‘","slug":"Linuxå¤šçº¿ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"çº¿ç¨‹æ¦‚è¿°","slug":"Linuxå¤šçº¿ç¨‹å¼€å‘/çº¿ç¨‹æ¦‚è¿°","date":"2022-05-29T08:02:24.000Z","updated":"2022-05-29T11:18:42.423Z","comments":true,"path":"2022/05/29/Linuxå¤šçº¿ç¨‹å¼€å‘/çº¿ç¨‹æ¦‚è¿°/","link":"","permalink":"https://tutouwang.vercel.app/2022/05/29/Linux%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%BC%80%E5%8F%91/%E7%BA%BF%E7%A8%8B%E6%A6%82%E8%BF%B0/","excerpt":"","text":"çº¿ç¨‹æ¦‚è¿° ä¸è¿›ç¨‹ï¼ˆprocessï¼‰ç±»ä¼¼ï¼Œçº¿ç¨‹ï¼ˆthreadï¼‰æ˜¯å…è®¸åº”ç”¨ç¨‹åºå¹¶å‘æ‰§è¡Œå¤šä¸ªä»»åŠ¡çš„ä¸€ç§æœºåˆ¶ã€‚ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ã€‚åŒä¸€ä¸ªç¨‹åºä¸­çš„æ‰€æœ‰çº¿ç¨‹å‡ä¼šç‹¬ç«‹æ‰§è¡Œç›¸åŒç¨‹åºï¼Œä¸”å…± äº«åŒä¸€ä»½å…¨å±€å†…å­˜åŒºåŸŸï¼Œå…¶ä¸­åŒ…æ‹¬åˆå§‹åŒ–æ•°æ®æ®µã€æœªåˆå§‹åŒ–æ•°æ®æ®µï¼Œä»¥åŠå †å†…å­˜æ®µã€‚ï¼ˆä¼  ç»Ÿæ„ä¹‰ä¸Šçš„ UNIX è¿›ç¨‹åªæ˜¯å¤šçº¿ç¨‹ç¨‹åºçš„ä¸€ä¸ªç‰¹ä¾‹ï¼Œè¯¥è¿›ç¨‹åªåŒ…å«ä¸€ä¸ªçº¿ç¨‹ï¼‰ è¿›ç¨‹æ˜¯ CPU åˆ†é…èµ„æºçš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿè°ƒåº¦æ‰§è¡Œçš„æœ€å°å•ä½ã€‚ çº¿ç¨‹æ˜¯è½»é‡çº§çš„è¿›ç¨‹ï¼ˆLWPï¼šLight Weight Processï¼‰ï¼Œåœ¨ Linux ç¯å¢ƒä¸‹çº¿ç¨‹çš„æœ¬ è´¨ä»æ˜¯è¿›ç¨‹ã€‚ æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹çš„ LWP å·ï¼šps â€“Lf pid çº¿ç¨‹å’Œè¿›ç¨‹åŒºåˆ« è¿›ç¨‹é—´çš„ä¿¡æ¯éš¾ä»¥å…±äº«ã€‚ç”±äºé™¤å»åªè¯»ä»£ç æ®µå¤–ï¼Œçˆ¶å­è¿›ç¨‹å¹¶æœªå…±äº«å†…å­˜ï¼Œå› æ­¤å¿…é¡»é‡‡ç”¨ä¸€äº›è¿›ç¨‹é—´é€šä¿¡æ–¹å¼ï¼Œåœ¨è¿›ç¨‹é—´è¿›è¡Œä¿¡æ¯äº¤æ¢ã€‚ è°ƒç”¨ fork() æ¥åˆ›å»ºè¿›ç¨‹çš„ä»£ä»·ç›¸å¯¹è¾ƒé«˜ï¼Œå³ä¾¿åˆ©ç”¨å†™æ—¶å¤åˆ¶æŠ€æœ¯ï¼Œä»ç„¶éœ€è¦å¤åˆ¶è¯¸å¦‚ å†…å­˜é¡µè¡¨å’Œæ–‡ä»¶æè¿°ç¬¦è¡¨ä¹‹ç±»çš„å¤šç§è¿›ç¨‹å±æ€§ï¼Œè¿™æ„å‘³ç€ fork() è°ƒç”¨åœ¨æ—¶é—´ä¸Šçš„å¼€é”€ ä¾ç„¶ä¸è²ã€‚ çº¿ç¨‹ä¹‹é—´èƒ½å¤Ÿæ–¹ä¾¿ã€å¿«é€Ÿåœ°å…±äº«ä¿¡æ¯ã€‚åªéœ€å°†æ•°æ®å¤åˆ¶åˆ°å…±äº«ï¼ˆå…¨å±€æˆ–å †ï¼‰å˜é‡ä¸­å³å¯ã€‚ åˆ›å»ºçº¿ç¨‹æ¯”åˆ›å»ºè¿›ç¨‹é€šå¸¸è¦å¿« 10 å€ç”šè‡³æ›´å¤šã€‚çº¿ç¨‹é—´æ˜¯å…±äº«è™šæ‹Ÿåœ°å€ç©ºé—´çš„ï¼Œæ— éœ€é‡‡ ç”¨å†™æ—¶å¤åˆ¶æ¥å¤åˆ¶å†…å­˜ï¼Œä¹Ÿæ— éœ€å¤åˆ¶é¡µè¡¨ã€‚ çº¿ç¨‹å’Œè¿›ç¨‹è™šæ‹Ÿåœ°å€ç©ºé—´ çº¿ç¨‹ä¹‹é—´å…±äº«å’Œéå…±äº«èµ„æº å…±äº«èµ„æº è¿›ç¨‹ ID å’Œçˆ¶è¿›ç¨‹ ID pè¿›ç¨‹ç»„ ID å’Œä¼šè¯ ID pç”¨æˆ· ID å’Œ ç”¨æˆ·ç»„ ID æ–‡ä»¶æè¿°ç¬¦è¡¨ ä¿¡å·å¤„ç½® æ–‡ä»¶ç³»ç»Ÿçš„ç›¸å…³ä¿¡æ¯ï¼šæ–‡ä»¶æƒé™æ©ç ï¼ˆumaskï¼‰ã€å½“å‰å·¥ä½œç›®å½• è™šæ‹Ÿåœ°å€ç©ºé—´ï¼ˆé™¤æ ˆã€.textï¼‰ éå…±äº«èµ„æº éå…±äº«èµ„æº ä¿¡å·æ©ç  çº¿ç¨‹ç‰¹æœ‰æ•°æ® perror å˜ é‡ å®æ—¶è°ƒåº¦ç­–ç•¥å’Œä¼˜å…ˆçº§ æ ˆï¼Œæœ¬åœ°å˜é‡å’Œå‡½æ•°çš„è°ƒç”¨é“¾æ¥ä¿¡æ¯ NPTL å½“ Linux æœ€åˆå¼€å‘æ—¶ï¼Œåœ¨å†…æ ¸ä¸­å¹¶ä¸èƒ½çœŸæ­£æ”¯æŒçº¿ç¨‹ã€‚ä½†æ˜¯å®ƒçš„ç¡®å¯ä»¥é€šè¿‡ clone() ç³»ç»Ÿè°ƒç”¨å°†è¿›ç¨‹ä½œä¸ºå¯è°ƒåº¦çš„å®ä½“ã€‚è¿™ä¸ªè°ƒç”¨åˆ›å»ºäº†è°ƒç”¨è¿›ç¨‹ï¼ˆcalling processï¼‰çš„ ä¸€ä¸ªæ‹·è´ï¼Œè¿™ä¸ªæ‹·è´ä¸è°ƒç”¨è¿›ç¨‹å…±äº«ç›¸åŒçš„åœ°å€ç©ºé—´ã€‚LinuxThreads é¡¹ç›®ä½¿ç”¨è¿™ä¸ªè°ƒç”¨ æ¥å®Œæˆåœ¨ç”¨æˆ·ç©ºé—´æ¨¡æ‹Ÿå¯¹çº¿ç¨‹çš„æ”¯æŒã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™ç§æ–¹æ³•æœ‰ä¸€äº›ç¼ºç‚¹ï¼Œå°¤å…¶æ˜¯åœ¨ä¿¡å·å¤„ ç†ã€è°ƒåº¦å’Œè¿›ç¨‹é—´åŒæ­¥ç­‰æ–¹é¢éƒ½å­˜åœ¨é—®é¢˜ã€‚å¦å¤–ï¼Œè¿™ä¸ªçº¿ç¨‹æ¨¡å‹ä¹Ÿä¸ç¬¦åˆ POSIX çš„è¦æ±‚ã€‚ è¦æ”¹è¿› LinuxThreadsï¼Œéœ€è¦å†…æ ¸çš„æ”¯æŒï¼Œå¹¶ä¸”é‡å†™çº¿ç¨‹åº“ã€‚æœ‰ä¸¤ä¸ªç›¸äº’ç«äº‰çš„é¡¹ç›®å¼€å§‹ æ¥æ»¡è¶³è¿™äº›è¦æ±‚ã€‚ä¸€ä¸ªåŒ…æ‹¬ IBM çš„å¼€å‘äººå‘˜çš„å›¢é˜Ÿå¼€å±•äº† NGPTï¼ˆNext-Generation POSIX Threadsï¼‰é¡¹ç›®ã€‚åŒæ—¶ï¼ŒRed Hat çš„ä¸€äº›å¼€å‘äººå‘˜å¼€å±•äº† NPTL é¡¹ç›®ã€‚NGPT åœ¨ 2003 å¹´ä¸­æœŸè¢«æ”¾å¼ƒäº†ï¼ŒæŠŠè¿™ä¸ªé¢†åŸŸå®Œå…¨ç•™ç»™äº† NPTLã€‚ NPTLï¼Œæˆ–ç§°ä¸º Native POSIX Thread Libraryï¼Œæ˜¯ Linux çº¿ç¨‹çš„ä¸€ä¸ªæ–°å®ç°ï¼Œå®ƒ å…‹æœäº† LinuxThreads çš„ç¼ºç‚¹ï¼ŒåŒæ—¶ä¹Ÿç¬¦åˆ POSIX çš„éœ€æ±‚ã€‚ä¸ LinuxThreads ç›¸ æ¯”ï¼Œå®ƒåœ¨æ€§èƒ½å’Œç¨³å®šæ€§æ–¹é¢éƒ½æä¾›äº†é‡å¤§çš„æ”¹è¿›ã€‚ æŸ¥çœ‹å½“å‰ pthread åº“ç‰ˆæœ¬ï¼šgetconf GNU_LIBPTHREAD_VERSION","categories":[{"name":"Linuxå¤šçº¿ç¨‹å¼€å‘","slug":"Linuxå¤šçº¿ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"è¿›ç¨‹å®ˆæŠ¤","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘/è¿›ç¨‹å®ˆæŠ¤","date":"2022-05-27T09:55:21.000Z","updated":"2022-05-29T08:00:23.914Z","comments":true,"path":"2022/05/27/Linuxå¤šè¿›ç¨‹å¼€å‘/è¿›ç¨‹å®ˆæŠ¤/","link":"","permalink":"https://tutouwang.vercel.app/2022/05/27/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/%E8%BF%9B%E7%A8%8B%E5%AE%88%E6%8A%A4/","excerpt":"","text":"ç»ˆç«¯åœ¨ UNIX ç³»ç»Ÿä¸­ï¼Œç”¨æˆ·é€šè¿‡ç»ˆç«¯ç™»å½•ç³»ç»Ÿåå¾—åˆ°ä¸€ä¸ª shell è¿›ç¨‹ï¼Œè¿™ä¸ªç»ˆç«¯æˆ ä¸º shell è¿›ç¨‹çš„æ§åˆ¶ç»ˆç«¯ï¼ˆControlling Terminalï¼‰ï¼Œè¿›ç¨‹ä¸­ï¼Œæ§åˆ¶ç»ˆç«¯æ˜¯ ä¿å­˜åœ¨ PCB ä¸­çš„ä¿¡æ¯ï¼Œè€Œ fork() ä¼šå¤åˆ¶ PCB ä¸­çš„ä¿¡æ¯ï¼Œå› æ­¤ç”± shell è¿› ç¨‹å¯åŠ¨çš„å…¶å®ƒè¿›ç¨‹çš„æ§åˆ¶ç»ˆç«¯ä¹Ÿæ˜¯è¿™ä¸ªç»ˆç«¯ã€‚ né»˜è®¤æƒ…å†µä¸‹ï¼ˆæ²¡æœ‰é‡å®šå‘ï¼‰ï¼Œæ¯ä¸ªè¿›ç¨‹çš„æ ‡å‡†è¾“å…¥ã€æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºéƒ½æŒ‡ å‘æ§åˆ¶ç»ˆç«¯ï¼Œè¿›ç¨‹ä»æ ‡å‡†è¾“å…¥è¯»ä¹Ÿå°±æ˜¯è¯»ç”¨æˆ·çš„é”®ç›˜è¾“å…¥ï¼Œè¿›ç¨‹å¾€æ ‡å‡†è¾“å‡ºæˆ–æ ‡å‡† é”™è¯¯è¾“å‡ºå†™ä¹Ÿå°±æ˜¯è¾“å‡ºåˆ°æ˜¾ç¤ºå™¨ä¸Šã€‚ nåœ¨æ§åˆ¶ç»ˆç«¯è¾“å…¥ä¸€äº›ç‰¹æ®Šçš„æ§åˆ¶é”®å¯ä»¥ç»™å‰å°è¿›ç¨‹å‘ä¿¡å·ï¼Œä¾‹å¦‚ Ctrl + C ä¼šäº§ ç”Ÿ SIGINT ä¿¡å·ï¼ŒCtrl + \\ ä¼šäº§ç”Ÿ SIGQUIT ä¿¡å·ã€‚ echo $$ &#x2F;&#x2F; æŸ¥çœ‹å½“å‰ç”¨æˆ·ID tty &#x2F;&#x2F; ç»ˆç«¯ è¿›ç¨‹ç»„è¿›ç¨‹ç»„å’Œä¼šè¯åœ¨è¿›ç¨‹ä¹‹é—´å½¢æˆäº†ä¸€ç§ä¸¤çº§å±‚æ¬¡å…³ç³»ï¼šè¿›ç¨‹ç»„æ˜¯ä¸€ç»„ç›¸å…³è¿›ç¨‹çš„é›†åˆï¼Œ ä¼šè¯æ˜¯ä¸€ç»„ç›¸å…³è¿›ç¨‹ç»„çš„é›†åˆã€‚è¿›ç¨‹ç»„å’Œä¼šè¯æ˜¯ä¸ºæ”¯æŒ shell ä½œä¸šæ§åˆ¶è€Œå®šä¹‰çš„æŠ½ è±¡æ¦‚å¿µï¼Œç”¨æˆ·é€šè¿‡ shell èƒ½å¤Ÿäº¤äº’å¼åœ°åœ¨å‰å°æˆ–åå°è¿è¡Œå‘½ä»¤ã€‚ nè¿›è¡Œç»„ç”±ä¸€ä¸ªæˆ–å¤šä¸ªå…±äº«åŒä¸€è¿›ç¨‹ç»„æ ‡è¯†ç¬¦ï¼ˆPGIDï¼‰çš„è¿›ç¨‹ç»„æˆã€‚ä¸€ä¸ªè¿›ç¨‹ç»„æ‹¥æœ‰ä¸€ ä¸ªè¿›ç¨‹ç»„é¦–è¿›ç¨‹ï¼Œè¯¥è¿›ç¨‹æ˜¯åˆ›å»ºè¯¥ç»„çš„è¿›ç¨‹ï¼Œå…¶è¿›ç¨‹ ID ä¸ºè¯¥è¿›ç¨‹ç»„çš„ IDï¼Œæ–°è¿›ç¨‹ ä¼šç»§æ‰¿å…¶çˆ¶è¿›ç¨‹æ‰€å±çš„è¿›ç¨‹ç»„ IDã€‚ nè¿›ç¨‹ç»„æ‹¥æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œå…¶å¼€å§‹æ—¶é—´ä¸ºé¦–è¿›ç¨‹åˆ›å»ºç»„çš„æ—¶åˆ»ï¼Œç»“æŸæ—¶é—´ä¸ºæœ€åä¸€ä¸ª æˆå‘˜è¿›ç¨‹é€€å‡ºç»„çš„æ—¶åˆ»ã€‚ä¸€ä¸ªè¿›ç¨‹å¯èƒ½ä¼šå› ä¸ºç»ˆæ­¢è€Œé€€å‡ºè¿›ç¨‹ç»„ï¼Œä¹Ÿå¯èƒ½ä¼šå› ä¸ºåŠ å…¥ äº†å¦å¤–ä¸€ä¸ªè¿›ç¨‹ç»„è€Œé€€å‡ºè¿›ç¨‹ç»„ã€‚è¿›ç¨‹ç»„é¦–è¿›ç¨‹æ— éœ€æ˜¯æœ€åä¸€ä¸ªç¦»å¼€è¿›ç¨‹ç»„çš„æˆå‘˜ã€‚ ä¼š è¯ä¼šè¯æ˜¯ä¸€ç»„è¿›ç¨‹ç»„çš„é›†åˆã€‚ä¼šè¯é¦–è¿›ç¨‹æ˜¯åˆ›å»ºè¯¥æ–°ä¼šè¯çš„è¿›ç¨‹ï¼Œå…¶è¿›ç¨‹ ID ä¼šæˆä¸ºä¼š è¯ IDã€‚æ–°è¿›ç¨‹ä¼šç»§æ‰¿å…¶çˆ¶è¿›ç¨‹çš„ä¼šè¯ IDã€‚ ä¸€ä¸ªä¼šè¯ä¸­çš„æ‰€æœ‰è¿›ç¨‹å…±äº«å•ä¸ªæ§åˆ¶ç»ˆç«¯ã€‚æ§åˆ¶ç»ˆç«¯ä¼šåœ¨ä¼šè¯é¦–è¿›ç¨‹é¦–æ¬¡æ‰“å¼€ä¸€ä¸ªç»ˆ ç«¯è®¾å¤‡æ—¶è¢«å»ºç«‹ã€‚ä¸€ä¸ªç»ˆç«¯æœ€å¤šå¯èƒ½ä¼šæˆä¸ºä¸€ä¸ªä¼šè¯çš„æ§åˆ¶ç»ˆç«¯ã€‚ åœ¨ä»»ä¸€æ—¶åˆ»ï¼Œä¼šè¯ä¸­çš„å…¶ä¸­ä¸€ä¸ªè¿›ç¨‹ç»„ä¼šæˆä¸ºç»ˆç«¯çš„å‰å°è¿›ç¨‹ç»„ï¼Œå…¶ä»–è¿›ç¨‹ç»„ä¼šæˆä¸º åå°è¿›ç¨‹ç»„ã€‚åªæœ‰å‰å°è¿›ç¨‹ç»„ä¸­çš„è¿›ç¨‹æ‰èƒ½ä»æ§åˆ¶ç»ˆç«¯ä¸­è¯»å–è¾“å…¥ã€‚å½“ç”¨æˆ·åœ¨æ§åˆ¶ç»ˆ ç«¯ä¸­è¾“å…¥ç»ˆç«¯å­—ç¬¦ç”Ÿæˆä¿¡å·åï¼Œè¯¥ä¿¡å·ä¼šè¢«å‘é€åˆ°å‰å°è¿›ç¨‹ç»„ä¸­çš„æ‰€æœ‰æˆå‘˜ã€‚ nå½“æ§åˆ¶ç»ˆç«¯çš„è¿æ¥å»ºç«‹èµ·æ¥ä¹‹åï¼Œä¼šè¯é¦–è¿›ç¨‹ä¼šæˆä¸ºè¯¥ç»ˆç«¯çš„æ§åˆ¶è¿›ç¨‹ã€‚ è¿›ç¨‹ç»„ã€ä¼šè¯ã€æ§åˆ¶ç»ˆç«¯ä¹‹é—´çš„å…³ç³» è¿›ç¨‹ç»„ã€ä¼šè¯æ“ä½œå‡½æ•°12345678910// è·å–å½“å‰çš„è¿›ç¨‹ç»„npid_t getpgrp(void);// è·å–æŒ‡å®šçš„è¿›ç¨‹çš„è¿›ç¨‹ç»„id è·å¾—å½“å‰çš„npid_t getpgid(pid_t pid);// è®¾ç½®è¿›ç¨‹ç»„çš„IDæŠŠé‚£ä¸ªè¿›ç¨‹è®¾ç½®æˆé‚£ä¸ªç»„nint setpgid(pid_t pid, pid_t pgid);// è·å–æŒ‡å®šè¿›ç¨‹çš„ä¼šè¯çš„IDnpid_t getsid(pid_t pid);// è®¾ç½®ä¼šè¯çš„IDnpid_t setsid(void); å®ˆæŠ¤è¿›ç¨‹å®ˆæŠ¤è¿›ç¨‹ï¼ˆDaemon Processï¼‰ï¼Œä¹Ÿå°±æ˜¯é€šå¸¸è¯´çš„ Daemon è¿›ç¨‹ï¼ˆç²¾çµè¿›ç¨‹ï¼‰ï¼Œæ˜¯Linux ä¸­çš„åå°æœåŠ¡è¿›ç¨‹ã€‚å®ƒæ˜¯ä¸€ä¸ªç”Ÿå­˜æœŸè¾ƒé•¿çš„è¿›ç¨‹ï¼Œé€šå¸¸ç‹¬ç«‹äºæ§åˆ¶ç»ˆç«¯å¹¶ä¸”å‘¨ æœŸæ€§åœ°æ‰§è¡ŒæŸç§ä»»åŠ¡æˆ–ç­‰å¾…å¤„ç†æŸäº›å‘ç”Ÿçš„äº‹ä»¶ã€‚ä¸€èˆ¬é‡‡ç”¨ä»¥ d ç»“å°¾çš„åå­—ã€‚ å®ˆæŠ¤è¿›ç¨‹å…·å¤‡ä¸‹åˆ—ç‰¹å¾ï¼š â€‹ ç”Ÿå‘½å‘¨æœŸå¾ˆé•¿ï¼Œå®ˆæŠ¤è¿›ç¨‹ä¼šåœ¨ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™è¢«åˆ›å»ºå¹¶ä¸€ç›´è¿è¡Œç›´è‡³ç³»ç»Ÿè¢«å…³é—­ã€‚ â€‹ å®ƒåœ¨åå°è¿è¡Œå¹¶ä¸”ä¸æ‹¥æœ‰æ§åˆ¶ç»ˆç«¯ã€‚æ²¡æœ‰æ§åˆ¶ç»ˆç«¯ç¡®ä¿äº†å†…æ ¸æ°¸è¿œä¸ä¼šä¸ºå®ˆæŠ¤è¿› ç¨‹è‡ªåŠ¨ç”Ÿæˆä»»ä½•æ§åˆ¶ä¿¡å·ä»¥åŠç»ˆç«¯ç›¸å…³çš„ä¿¡å·ï¼ˆå¦‚ SIGINTã€SIGQUITï¼‰ã€‚ nLinux çš„å¤§å¤šæ•°æœåŠ¡å™¨å°±æ˜¯ç”¨å®ˆæŠ¤è¿›ç¨‹å®ç°çš„ã€‚æ¯”å¦‚ï¼ŒInternet æœåŠ¡å™¨ inetdï¼Œ Web æœåŠ¡å™¨ httpd ç­‰ã€‚ å®ˆæŠ¤è¿›ç¨‹çš„åˆ›å»ºæ­¥éª¤æ‰§è¡Œä¸€ä¸ª fork()ï¼Œä¹‹åçˆ¶è¿›ç¨‹é€€å‡ºï¼Œå­è¿›ç¨‹ç»§ç»­æ‰§è¡Œã€‚ å­è¿›ç¨‹è°ƒç”¨ setsid() å¼€å¯ä¸€ä¸ªæ–°ä¼šè¯ã€‚ æ¸…é™¤è¿›ç¨‹çš„ umask ä»¥ç¡®ä¿å½“å®ˆæŠ¤è¿›ç¨‹åˆ›å»ºæ–‡ä»¶å’Œç›®å½•æ—¶æ‹¥æœ‰æ‰€éœ€çš„æƒé™ã€‚ ä¿®æ”¹è¿›ç¨‹çš„å½“å‰å·¥ä½œç›®å½•ï¼Œé€šå¸¸ä¼šæ”¹ä¸ºæ ¹ç›®å½•ï¼ˆ&#x2F;ï¼‰ã€‚ å…³é—­å®ˆæŠ¤è¿›ç¨‹ä»å…¶çˆ¶è¿›ç¨‹ç»§æ‰¿è€Œæ¥çš„æ‰€æœ‰æ‰“å¼€ç€çš„æ–‡ä»¶æè¿°ç¬¦ã€‚ åœ¨å…³é—­äº†æ–‡ä»¶æè¿°ç¬¦0ã€1ã€2ä¹‹åï¼Œå®ˆæŠ¤è¿›ç¨‹é€šå¸¸ä¼šæ‰“å¼€&#x2F;dev&#x2F;null å¹¶ä½¿ç”¨dup2() ä½¿æ‰€æœ‰è¿™äº›æè¿°ç¬¦æŒ‡å‘è¿™ä¸ªè®¾å¤‡ã€‚ æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091/************************************************************************* &gt; File Name: daemon.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ28æ—¥ æ˜ŸæœŸå…­ 17æ—¶01åˆ†15ç§’ ************************************************************************//* * å†™ä¸€ä¸ªå®ˆæŠ¤è¿›ç¨‹,æ¯éš”2sè·å–ä¸€ä¸‹ç³»ç»Ÿæ—¶é—´,å°†è¿™ä¸ªæ—¶é—´å†™å…¥åˆ°ç£ç›˜æ–‡ä»¶ä¸­ */#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;fcntl.h&gt;#include &lt;sys/time.h&gt;#include &lt;signal.h&gt;#include &lt;time.h&gt;#include &lt;string.h&gt;void work(int num) &#123; // æ•æ‰åˆ°ä¿¡å·å,è·å–ç³»ç»Ÿæ—¶é—´,å†™å…¥ç£ç›˜ time_t tm = time(NULL); struct tm *loc = localtime(&amp;tm); /* char buf[1024]; sprintf(buf, &quot;%d-%d-%d %d:%d:%d\\n&quot;, loc-&gt;tm_year, loc-&gt;tm_mon, loc-&gt;tm_mday, loc-&gt;tm_hour, loc-&gt;tm_min,loc-&gt;tm_sec); printf(&quot;%s\\n&quot;, buf); */ char *str = asctime(loc); int fd = open(&quot;time.txt&quot;, O_RDWR | O_CREAT | O_APPEND, 0664); write(fd, str, strlen(str)); close(fd); return ;&#125;int main() &#123; // åˆ›å»ºå­è¿›ç¨‹ pid_t pid = fork(); // é€€å‡ºçˆ¶è¿›ç¨‹ // ä¸ºä»€ä¹ˆä¸ç”¨çˆ¶è¿›ç¨‹åˆ›å»ºä¼šè¯ // å› ä¸º å¦‚ çˆ¶PID = 100é‚£ä¹ˆè¿›ç¨‹çš„ä¼šè¯å’Œè¿›ç¨‹ç»„éƒ½æ˜¯100é‚£ä¹ˆå†åˆ›å»ºä¸€ä¸ªæ–°çš„ä¹Ÿæ˜¯ç”¨çš„çˆ¶è¿›çš„PIDä¼šå†²çªæ‰€æœ‰åˆ©ç”¨å­è¿›ç¨‹ if(pid &gt; 0) exit(0); // å°†å­è¿›ç¨‹é‡æ–°åˆ›å»ºä¼šè¯ // ä¸ºä»€ä¹ˆåˆ›å»ºæ–°çš„ä¼šè¯: å› ä¸ºæ–°çš„ä¼šè¯ä¼šè„±ç¦»æ§åˆ¶ç»ˆç«¯å°±ä¸ä¼šè¢«ä¸€äº›ä¿¡å·æ€æ­» setsid(); // è®¾ç½®æ©ç  umask(022); // æ›´æ”¹å·¥ä½œç›®å½• chdir(&quot;/home/qz&quot;); // å…³é—­ã€é‡å®šå‘æ–‡ä»¶æè¿°ç¬¦ int fd = open(&quot;/dev/null&quot;, O_RDWR); /* dup2(fd, STDIN_FILENO); // å†™0 1 2 ä¹Ÿæ˜¯okçš„ dup2(fd, STDOUT_FILENO); dup2(fd, STDERR_FILENO); */ // ä¸šåŠ¡é€»è¾‘ // æ•æ‰ä¿¡å· struct sigaction act; act.sa_flags = 0; act.sa_handler = work; sigemptyset(&amp;act.sa_mask); sigaction(SIGALRM, &amp;act, NULL); struct itimerval val; // è¿‡2ç§’ val.it_value.tv_sec = 2; val.it_value.tv_usec = 0; // é—´éš” val.it_interval.tv_sec = 2; val.it_interval.tv_usec = 0; // å®šæ—¶å™¨ setitimer(ITIMER_REAL, &amp;val, NULL); while(1) &#123; &#125; return 0;&#125;","categories":[{"name":"Linuxå¤šè¿›ç¨‹å¼€å‘","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"å…±äº«å†…å­˜","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘/å…±äº«å†…å­˜","date":"2022-05-26T08:15:54.000Z","updated":"2022-05-29T08:00:16.488Z","comments":true,"path":"2022/05/26/Linuxå¤šè¿›ç¨‹å¼€å‘/å…±äº«å†…å­˜/","link":"","permalink":"https://tutouwang.vercel.app/2022/05/26/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/%E5%85%B1%E4%BA%AB%E5%86%85%E5%AD%98/","excerpt":"","text":"å…±äº«å†…å­˜å…±äº«å†…å­˜å…è®¸ä¸¤ä¸ªæˆ–è€…å¤šä¸ªè¿›ç¨‹å…±äº«ç‰©ç†å†…å­˜çš„åŒä¸€å—åŒºåŸŸï¼ˆé€šå¸¸è¢«ç§°ä¸ºæ®µï¼‰ã€‚ç”±äº ä¸€ä¸ªå…±äº«å†…å­˜æ®µä¼šæˆä¸ºä¸€ä¸ªè¿›ç¨‹ç”¨æˆ·ç©ºé—´çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤è¿™ç§ IPC æœºåˆ¶æ— éœ€å†…æ ¸ä»‹ å…¥ã€‚æ‰€æœ‰éœ€è¦åšçš„å°±æ˜¯è®©ä¸€ä¸ªè¿›ç¨‹å°†æ•°æ®å¤åˆ¶è¿›å…±äº«å†…å­˜ä¸­ï¼Œå¹¶ä¸”è¿™éƒ¨åˆ†æ•°æ®ä¼šå¯¹å…¶ ä»–æ‰€æœ‰å…±äº«åŒä¸€ä¸ªæ®µçš„è¿›ç¨‹å¯ç”¨ã€‚ ä¸ç®¡é“ç­‰è¦æ±‚å‘é€è¿›ç¨‹å°†æ•°æ®ä»ç”¨æˆ·ç©ºé—´çš„ç¼“å†²åŒºå¤åˆ¶è¿›å†…æ ¸å†…å­˜å’Œæ¥æ”¶è¿›ç¨‹å°†æ•°æ® ä»å†…æ ¸å†…å­˜å¤åˆ¶è¿›ç”¨æˆ·ç©ºé—´çš„ç¼“å†²åŒºçš„åšæ³•ç›¸æ¯”ï¼Œè¿™ç§ IPC æŠ€æœ¯çš„é€Ÿåº¦æ›´å¿« å…±äº«å†…å­˜ä½¿ç”¨æ­¥éª¤è°ƒç”¨ shmget() åˆ›å»ºä¸€ä¸ªæ–°å…±äº«å†…å­˜æ®µæˆ–å–å¾—ä¸€ä¸ªæ—¢æœ‰å…±äº«å†…å­˜æ®µçš„æ ‡è¯†ç¬¦ï¼ˆå³ç”±å…¶ ä»–è¿›ç¨‹åˆ›å»ºçš„å…±äº«å†…å­˜æ®µï¼‰ã€‚è¿™ä¸ªè°ƒç”¨å°†è¿”å›åç»­è°ƒç”¨ä¸­éœ€è¦ç”¨åˆ°çš„å…±äº«å†…å­˜æ ‡è¯†ç¬¦ã€‚ ä½¿ç”¨ shmat() æ¥é™„ä¸Šå…±äº«å†…å­˜æ®µï¼Œå³ä½¿è¯¥æ®µæˆä¸ºè°ƒç”¨è¿›ç¨‹çš„è™šæ‹Ÿå†…å­˜çš„ä¸€éƒ¨åˆ†ã€‚ æ­¤åˆ»åœ¨ç¨‹åºä¸­å¯ä»¥åƒå¯¹å¾…å…¶ä»–å¯ç”¨å†…å­˜é‚£æ ·å¯¹å¾…è¿™ä¸ªå…±äº«å†…å­˜æ®µã€‚ä¸ºå¼•ç”¨è¿™å—å…±äº«å†…å­˜ï¼Œ ç¨‹åºéœ€è¦ä½¿ç”¨ç”± shmat() è°ƒç”¨è¿”å›çš„ addr å€¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªæŒ‡å‘è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ ä¸­è¯¥å…±äº«å†…å­˜æ®µçš„èµ·ç‚¹çš„æŒ‡é’ˆã€‚ è°ƒç”¨ shmdt() æ¥åˆ†ç¦»å…±äº«å†…å­˜æ®µã€‚åœ¨è¿™ä¸ªè°ƒç”¨ä¹‹åï¼Œè¿›ç¨‹å°±æ— æ³•å†å¼•ç”¨è¿™å—å…±äº«å†…å­˜ äº†ã€‚è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ï¼Œå¹¶ä¸”åœ¨è¿›ç¨‹ç»ˆæ­¢æ—¶ä¼šè‡ªåŠ¨å®Œæˆè¿™ä¸€æ­¥ã€‚ è°ƒç”¨ shmctl() æ¥åˆ é™¤å…±äº«å†…å­˜æ®µã€‚åªæœ‰å½“å½“å‰æ‰€æœ‰é™„åŠ å†…å­˜æ®µçš„è¿›ç¨‹éƒ½ä¸ä¹‹åˆ†ç¦»ä¹‹ åå†…å­˜æ®µæ‰ä¼šé”€æ¯ã€‚åªæœ‰ä¸€ä¸ªè¿›ç¨‹éœ€è¦æ‰§è¡Œè¿™ä¸€æ­¥ å…±äº«å†…å­˜æ“ä½œå‡½æ•°12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970#include &lt;sys/ipc.h&gt;#inlcude &lt;sys/shm.h&gt;int shmget(key_t key, size_t size, int shmflg); - åŠŸèƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å…±äº«å†…å­˜æ®µã€æˆ–è€…è·å–ä¸€ä¸ªæ—¢æœ‰çš„å…±äº«å†…å­˜æ®µçš„æ ‡è¯† æ–°åˆ›å»ºçš„å†…å­˜æ®µä¸­çš„æ•°æ®éƒ½ä¼šè¢«åˆå§‹åŒ–ä¸º0 - å‚æ•°: - key: key_t ç±»å‹æ˜¯ä¸€ä¸ªæ•´å½¢,é€šè¿‡è¿™ä¸ªæ‰¾åˆ°æˆ–è€…åˆ›å»ºä¸€ä¸ªå…±äº«å†…å­˜ ä¸€èˆ¬ä½¿ç”¨16è¿›åˆ¶è¡¨ç¤º,é0å€¼ - size: å…±äº«å†…å­˜å¤§å° åˆ†é¡µå¤§å° - shmflg: å±æ€§ - è®¿é—®æƒé™ - é™„åŠ å±æ€§: åˆ›å»º/åˆ¤æ–­å…±äº«å†…å­˜æ˜¯ä¸æ˜¯å­˜åœ¨ - åˆ›å»º: IPC_CREAT - åˆ¤æ–­å…±äº«å†…å­˜æ˜¯å¦å­˜åœ¨: IPC_EXCL, éœ€è¦å’ŒIPC_CREATä¸€èµ·ä½¿ç”¨ IPC_CREAT | IPC_EXCL | 0664 - è¿”å›å€¼: å¤±è´¥: -1 å¹¶è®¾ç½®é”™è¯¯å· æˆåŠŸ: &gt;0 è¿”å›å…±äº«å†…å­˜çš„å¼•ç”¨çš„ID,åé¢æ“ä½œå…±äº«å†…å­˜éƒ½æ˜¯é€šè¿‡è¿™ä¸ªå€¼ void *shmat(int shmid, const void *shmaddr, int shmflg); - åŠŸèƒ½: å’Œå½“å‰çš„è¿›ç¨‹è¿›è¡Œå…³è” - å‚æ•°: - shmid: å…±äº«å†…å­˜çš„æ ‡è¯†(ID)ç”±shmgetè¿”å›å€¼è·å– - shmaddr: ç”³è¯·çš„å…±äº«å†…å­˜çš„èµ·å§‹åœ°å€,æŒ‡å®šNULL, å†…æ ¸æŒ‡å®š - shmflg: å¯¹å…±äº«å†…å­˜çš„æ“ä½œ - è¯» : SHM_RDONLY, å¿…é¡»ç”±è¯»æƒé™ - è¯»å†™ : 0 - è¿”å›å€¼: æˆåŠŸ: è¿”å›å…±äº«å†…å­˜çš„é¦–åœ°å€(èµ·å§‹)åœ°å€ã€‚ å¤±è´¥: (void *) -1int shmdt(const void *shmaddr); - åŠŸèƒ½: è§£é™¤å½“å‰è¿›ç¨‹å’Œå…±äº«å†…å­˜çš„å…³è” - å‚æ•°: shmaddr: å…±äº«å†…å­˜çš„é¦–åœ°å€ - è¿”å›å€¼: æˆåŠŸ: 0 å¤±è´¥: -1int shmctl(int shmid, int cmd, struct shmid_ds *buf); - åŠŸèƒ½: å¯¹å…±äº«å†…å­˜è¿›è¡Œæ“ä½œã€‚åˆ é™¤å…±äº«å†…å­˜, å…±äº«å†…å­˜è¦åˆ é™¤æ‰ä¼šæ¶ˆå¤±, åˆ›å»ºå…±äº«å†…å­˜çš„è¿›è¡Œè¢«é”€æ¯äº†å¯¹å…±äº«å†…å­˜æ˜¯æ²¡æœ‰ä»»ä½•å½±å“ - å‚æ•°: - shmid: å…±äº«å†…å­˜çš„ID - cmd: è¦åšçš„æ“ä½œ - IPC_STAT:è·å¾—å…±äº«å†…å­˜çš„å½“å‰çŠ¶æ€ - IPC_SET: è®¾ç½®å…±äº«å†…å­˜çš„çŠ¶æ€ - IPC_RMID: æ ‡è®°å…±äº«å†…å­˜è¢«é”€æ¯ - buf: éœ€è¦è®¾ç½®æˆ–è€…è·å–çš„å…±äº«å†…å­˜å±æ€§ä¿¡æ¯ - IPC_STAT:bufå­˜å‚¨æ•°æ® - IPC_SET: bufä¸­éœ€è¦åˆå§‹åŒ–æ•°æ®,è®¾ç½®åˆ°å†…æ ¸ä¸­ - IPC_RMID: æ²¡æœ‰ç”¨,NULL struct shmid_ds &#123; struct ipc_perm shm_perm; /* Ownership and permissions */ size_t shm_segsz; /* Size of segment (bytes) */ time_t shm_atime; /* Last attach time */ time_t shm_dtime; /* Last detach time */ time_t shm_ctime; /* Last change time */ pid_t shm_cpid; /* PID of creator */ pid_t shm_lpid; /* PID of last shmat(2)/shmdt(2) */ shmatt_t shm_nattch; /* No. of current attaches */ ... &#125;;key_t ftok(const char *pathname, int proj_id); - åŠŸèƒ½: æ ¹æ®æŒ‡å®šçš„è·¯, å’Œintå€¼,ç”Ÿæˆä¸€ä¸ªå…±äº«å†…å­˜çš„key - å‚æ•°: - pathname: æŒ‡å®šä¸€ä¸ªå­˜åœ¨çš„è·¯å¾„ /home/qz/test/ / - proj_id: intç±»å‹çš„å€¼,ä½†æ˜¯è¿™å…³ç³»è°ƒç”¨åªä¼šä½¿ç”¨å…¶ä¸­çš„1ä¸ªå­—ç¬¦ èŒƒå›´: 0 - 255 ä¸€èˆ¬æŒ‡å®šä¸€ä¸ªå­—ç¬¦ &#x27;a&#x27; write_shm.c123456789101112131415161718192021222324252627282930313233343536/************************************************************************* &gt; File Name: read_shm.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ27æ—¥ æ˜ŸæœŸäº” 10æ—¶35åˆ†18ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;sys/shm.h&gt;#include &lt;sys/ipc.h&gt;#include &lt;string.h&gt;int main() &#123; // è·å–ä¸€ä¸ªå…±äº«å†…å­˜ int shmid = shmget(100, 4096, IPC_CREAT | 0664); printf(&quot;hmid : %d\\n&quot;,shmid); // å’Œå½“å‰è¿›ç¨‹è¿›è¡Œå…³è” void *ptr = shmat(shmid, NULL, 0); char *str = &quot;hello world&quot;; memcpy(ptr, str, strlen(str) + 1); printf(&quot;æŒ‰ä»»æ„é”®ç»§ç»­\\n&quot;); getchar(); // è§£é™¤å…³è” shmdt(ptr); //åˆ é™¤å…³è” shmctl(shmid, IPC_RMID, NULL); return 0;&#125; read_shm.c12345678910111213141516171819202122232425262728293031323334/************************************************************************* &gt; File Name: read_shm.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ27æ—¥ æ˜ŸæœŸäº” 10æ—¶35åˆ†18ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;sys/shm.h&gt;#include &lt;sys/ipc.h&gt;int main() &#123; // è·å–ä¸€ä¸ªå…±äº«å†…å­˜ int shmid = shmget(100, 0, IPC_CREAT); printf(&quot;hmid : %d\\n&quot;,shmid); // å’Œå½“å‰è¿›ç¨‹è¿›è¡Œå…³è” void *ptr = shmat(shmid, NULL, 0); printf(&quot;%s \\n&quot;, (char *) ptr); printf(&quot;æŒ‰ä»»æ„é”®ç»§ç»­\\n&quot;); getchar(); // è§£é™¤å…³è” shmdt(ptr); //åˆ é™¤å…³è” shmctl(shmid, IPC_RMID, NULL); return 0;&#125; yellow::é—®é¢˜1ï¼šæ“ä½œç³»ç»Ÿå¦‚ä½•çŸ¥é“ä¸€å—å…±äº«å†…å­˜è¢«å¤šå°‘ä¸ªè¿›ç¨‹å…³è”ï¼Ÿ å…±äº«å†…å­˜ç»´æŠ¤äº†ä¸€ä¸ªç»“æ„ä½“struct shmid_ds è¿™ä¸ªç»“æ„ä½“ä¸­ç”±ä¸€ä¸ªæˆå‘˜ shm_nattchshm_nattach è®°å½•äº†å…³è”çš„è¿›ç¨‹çš„ä¸ªæ•° yellow::é—®é¢˜2ï¼šå¯ä¸å¯ä»¥å¯¹å…±äº«å†…å­˜è¿›è¡Œå¤šæ¬¡åˆ é™¤shmctl å¯ä»¥çš„å› ä¸ºshmctl æ ‡è®°åˆ é™¤å…±äº«å†…å­˜, ä¸æ˜¯ç›´æ¥åˆ é™¤ä»€ä¹ˆæ—¶å€™æ˜¯çœŸæ­£åˆ é™¤å‘¢ï¼Ÿå½“å…±äº«å†…å­˜å’Œå…³è”çš„è¿›ç¨‹æ•°ä¸º0çš„æ—¶å€™ï¼Œå°±çœŸæ­£è¢«åˆ é™¤å½“å…±äº«å†…å­˜çš„keyä¸º0çš„æ—¶å€™è¡¨ç¤ºå…±äº«å†…å­˜è¢«æ ‡è®°åˆ é™¤äº†å¦‚æœä¸€ä¸ªè¿›ç¨‹å’Œå…±äº«å†…å­˜å–æ¶ˆå…³è”,é‚£ä¹ˆè¿™ä¸ªè¿›ç¨‹å°±ä¸èƒ½ç»§ç»­æ“ä½œè¿™ä¸ªå…±äº«å†…å­˜ã€‚ä¹Ÿä¸èƒ½è¿›è¡Œå†æ¬¡å…³è” å…±äº«å†…å­˜å’Œå†…å­˜æ˜ å°„çš„åŒºåˆ« å…±äº«å†…å­˜å¯ä»¥ç›´æ¥åˆ›å»ºï¼Œå†…å­˜æ˜ å°„éœ€è¦ç£ç›˜æ–‡ä»¶(åŒ¿åæ˜ å°„é™¤å¤–) å…±äº«å†…å­˜æ•ˆæœæ›´é«˜ å†…å­˜ æ‰€æœ‰çš„è¿›ç¨‹æ“ä½œçš„æ˜¯åŒä¸€å—å…±äº«å†…å­˜ã€‚ å†…å­˜æ˜ å°„,æ¯ä¸ªè¿›ç¨‹åœ¨è‡ªå·±çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­æœ‰ä¸€ä¸ªç‹¬ç«‹çš„å†…å­˜ã€‚ æ•°æ®å®‰å…¨ è¿›ç¨‹çªç„¶é€€å‡º å…±äº«å†…å­˜è¿˜å­˜åœ¨ å†…å­˜æ˜ å°„åŒºæ¶ˆå¤± è¿è¡Œè¿›ç¨‹çš„ç”µè„‘æ­»æœºï¼Œå®•æœºäº† æ•°æ®å­˜å‚¨åœ¨å…±äº«å†…å­˜ä¸­,æ²¡æœ‰äº† å†…å­˜æ˜ å°„åŒºçš„æ•°æ®,ç”±äºç£ç›˜æ–‡ä»¶ä¸­çš„æ•°æ®è¿˜åœ¨ï¼Œæ‰€ä»¥å†…å­˜æ˜ å°„åŒºçš„æ•°æ®è¿˜å­˜åœ¨ ç”Ÿå‘½å‘¨æœŸ å…±äº«å†…å­˜ï¼šè¿›ç¨‹é€€å‡º,å…±äº«å†…å­˜è¿˜åœ¨ï¼Œæ ‡è®°åˆ é™¤(æ‰€æœ‰çš„å…³è”çš„è¿›ç¨‹æ•°ä¸º0)ï¼Œæˆ–è€…å…³æœºã€å¦‚æœä¸€ä¸ªè¿›ç¨‹é€€å‡ºï¼Œä¼šè‡ªåŠ¨å’Œå…±äº«å†…å­˜è¿›è¡Œå–æ¶ˆå…³è”ã€‚ å†…å­˜æ˜ å°„åŒºï¼š è¿›ç¨‹é€€å‡ºï¼Œå†…å­˜æ˜ å°„åŒºé”€æ¯ å…±äº«å†…å­˜æ“ä½œå‘½ä»¤ ipcs ç”¨ æ³• pipcs -a &#x2F;&#x2F; æ‰“å°å½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰çš„è¿›ç¨‹é—´é€šä¿¡æ–¹å¼çš„ä¿¡æ¯ pipcs -m &#x2F;&#x2F; æ‰“å°å‡ºä½¿ç”¨å…±äº«å†…å­˜è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡çš„ä¿¡æ¯ pipcs -q &#x2F;&#x2F; æ‰“å°å‡ºä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡çš„ä¿¡æ¯ pipcs -s &#x2F;&#x2F; æ‰“å°å‡ºä½¿ç”¨ä¿¡å·è¿›è¡Œè¿›ç¨‹é—´é€šä¿¡çš„ä¿¡æ¯ ipcrm ç”¨ æ³• pipcrm -M shmkey &#x2F;&#x2F; ç§»é™¤ç”¨shmkeyåˆ›å»ºçš„å…±äº«å†…å­˜æ®µ pipcrm -m shmid &#x2F;&#x2F; ç§»é™¤ç”¨shmidæ ‡è¯†çš„å…±äº«å†…å­˜æ®µ pipcrm -Q msgkey &#x2F;&#x2F; ç§»é™¤ç”¨msqkeyåˆ›å»ºçš„æ¶ˆæ¯é˜Ÿåˆ— pipcrm -q msqid &#x2F;&#x2F; ç§»é™¤ç”¨msqidæ ‡è¯†çš„æ¶ˆæ¯é˜Ÿåˆ— pipcrm -S semkey &#x2F;&#x2F; ç§»é™¤ç”¨semkeyåˆ›å»ºçš„ä¿¡å· pipcrm -s semid &#x2F;&#x2F; ç§»é™¤ç”¨semidæ ‡è¯†çš„ä¿¡å·","categories":[{"name":"Linuxå¤šè¿›ç¨‹å¼€å‘","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"ä¿¡å·","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘/ä¿¡å·","date":"2022-05-18T06:50:27.000Z","updated":"2022-05-29T08:00:20.677Z","comments":true,"path":"2022/05/18/Linuxå¤šè¿›ç¨‹å¼€å‘/ä¿¡å·/","link":"","permalink":"https://tutouwang.vercel.app/2022/05/18/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/%E4%BF%A1%E5%8F%B7/","excerpt":"","text":"ä¿¡å·æ¦‚è¿°ä¿¡å·æ˜¯ Linuxè¿›ç¨‹é—´é€šä¿¡çš„æœ€å¤è€çš„æ–¹å¼ä¹‹ä¸€ï¼Œæ˜¯äº‹ä»¶å‘ç”Ÿæ—¶å¯¹è¿›ç¨‹çš„é€šçŸ¥æœºåˆ¶ï¼Œæœ‰æ—¶ä¹Ÿç§°ä¹‹ä¸ºè½¯ä»¶ä¸­æ–­ï¼Œå®ƒæ˜¯åœ¨è½¯ä»¶å±‚æ¬¡ä¸Šå¯¹ä¸­æ–­æœºåˆ¶çš„ä¸€ç§æ¨¡æ‹Ÿï¼Œæ˜¯ä¸€ç§å¼‚æ­¥é€šä¿¡çš„æ–¹å¼ã€‚ä¿¡å·å¯ä»¥å¯¼è‡´ä¸€ä¸ªä¸˜åœ¨è¿è¡Œçš„è¿›ç¨‹è¢«å¦ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å¼‚æ­¥è¿›ç¨‹ä¸­æ–­ï¼Œè½¬è€Œå¤„ç†æŸä¸€ä¸ªçªå‘äº‹ä»¶ã€‚ å‘å¾€è¿›ç¨‹çš„è¯¸å¤šä¿¡å·ï¼Œé€šå¸¸éƒ½æ˜¯æºäºå†…æ ¸ã€‚å¼•å‘å†…æ ¸ä¸ºè¿›ç¨‹äº§ç”Ÿä¿¡å·çš„å„ç±»äº‹ä»¶å¦‚ä¸‹: å¯¹äºå‰å°è¿›ç¨‹ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è¾“å…¥ç‰¹æ®Šçš„ç»ˆç«¯å­—ç¬¦æ¥ç»™å®ƒå‘é€ä¿¡å·ã€‚æ¯”å¦‚è¾“å…¥Ctrl+C(9å·ä¿¡å·)é€šå¸¸ä¼šç»™è¿›ç¨‹å‘é€ä¸€ä¸ªä¸­æ–­ä¿¡å·ã€‚ ç¡¬ä»¶å‘ç”Ÿå¼‚å¸¸ï¼Œå³ç¡¬ä»¶æ£€æµ‹åˆ°ä¸€ä¸ªé”™è¯¯æ¡ä»¶å¹¶é€šçŸ¥å†…æ ¸ï¼Œéšå³å†ç”±å†…æ ¸å‘é€ç›¸åº”ä¿¡å·ç»™ç›¸å…³è¿›ç¨‹ã€‚æ¯”å¦‚æ‰§è¡Œä¸€æ¡å¼‚å¸¸çš„æœºå™¨è¯­è¨€æŒ‡ä»¤ï¼Œè¯¸å¦‚è¢«Ğé™¤ï¼Œæˆ–è€…å¼•ç”¨äº†æ— æ³•è®¿é—®çš„å†…å­˜åŒºåŸŸ ç³»ç»ŸçŠ¶æ€å˜åŒ–ï¼Œæ¯”å¦‚ alarm å®šæ—¶å™¨åˆ°æœŸå°†å¼•èµ· SIGALRM ä¿¡å·ï¼Œè¿›ç¨‹æ‰§è¡Œçš„CPUæ—¶é—´è¶…é™ï¼Œæˆ–è€…è¯¥è¿›ç¨‹çš„æŸä¸ªå­è¿›ç¨‹é€€å‡ºã€‚ è¿è¡Œ kill å‘½ä»¤æˆ–è°ƒç”¨ kill å‡½æ•°ã€‚ ä½¿ç”¨ä¿¡å·çš„ä¸¤ä¸ªä¸»è¦ç›®çš„æ˜¯: è®©è¿›ç¨‹çŸ¥é“å·²ç»å‘ç”Ÿäº†ä¸€ä¸ªç‰¹å®šçš„äº‹æƒ…ã€‚ å¼ºè¿«è¿›ç¨‹æ‰§è¡Œå®ƒè‡ªå·±ä»£ç ä¸­çš„ä¿¡å·å¤„ç†ç¨‹åºã€‚ ä¿¡å·çš„ç‰¹ç‚¹ï¼š ç®€å• ä¸èƒ½æºå¸¦å¤§é‡çš„ä¿¡æ¯ æ»¡è¶³æŸä¸ªç‰¹å®šæ¡ä»¶æ‰èƒ½å‘é€ ä¼˜å…ˆçº§æ¯”é«˜ æŸ¥çœ‹ç³»ç»Ÿå®šä¹‰çš„ä¿¡å·åˆ—è¡¨ï¼škill -l å‰31ä¸ªä¿¡å·ä¸ºå¸¸è§„ä¿¡å·,å…¶ä½™ä¸ºå®æ—¶ä¿¡å·ã€‚ ä¿¡å·ä¸€è§ˆè¡¨ ç¼–å· ä¿¡å·åç§° å¯¹åº”äº‹ä»¶ é»˜è®¤åŠ¨ä½œ 1 SIGHUP ç”¨æˆ·é€€å‡ºshellæ—¶ï¼Œç”±è¯¥shellå¯åŠ¨çš„æ‰€æœ‰è¿›ç¨‹å°† æ”¶åˆ°è¿™ä¸ªä¿¡å· ç»ˆæ­¢è¿›ç¨‹ 2 SIGINT å½“ç”¨æˆ·æŒ‰ä¸‹äº†ç»„åˆé”®æ—¶ï¼Œç”¨æˆ·ç»ˆç«¯å‘æ­£ åœ¨è¿è¡Œä¸­çš„ç”±è¯¥ç»ˆç«¯å¯åŠ¨çš„ç¨‹åºå‘å‡ºæ­¤ä¿¡å·(CTRL + C) ç»ˆæ­¢è¿›ç¨‹ 3 SIGQUIT æˆ·æŒ‰ä¸‹ç»„åˆé”®æ—¶äº§ç”Ÿè¯¥ä¿¡å·ï¼Œç”¨æˆ·ç»ˆ ç«¯å‘æ­£åœ¨è¿è¡Œä¸­çš„ç”±è¯¥ç»ˆç«¯å¯åŠ¨çš„ç¨‹åºå‘å‡ºäº›ä¿¡å· (CTRL + \\) ç»ˆæ­¢è¿›ç¨‹ 4 SIGILL CPUæ£€æµ‹åˆ°æŸè¿›ç¨‹æ‰§è¡Œäº†éæ³•æŒ‡ä»¤ ç»ˆæ­¢è¿›ç¨‹å¹¶äº§ç”Ÿcoreæ–‡ä»¶ 5 SIGTRAP è¯¥ä¿¡å·ç”±æ–­ç‚¹æŒ‡ä»¤æˆ–å…¶ä»– trapæŒ‡ä»¤äº§ç”Ÿ ç»ˆæ­¢è¿›ç¨‹å¹¶äº§ç”Ÿcoreæ–‡ä»¶ 6 SIGABRT è°ƒç”¨abortå‡½æ•°æ—¶äº§ç”Ÿè¯¥ä¿¡å· ç»ˆæ­¢è¿›ç¨‹å¹¶äº§ç”Ÿcoreæ–‡ä»¶ 7 SIGBUS éæ³•è®¿é—®å†…å­˜åœ°å€ï¼ŒåŒ…æ‹¬å†…å­˜å¯¹é½å‡ºé”™ ç»ˆæ­¢è¿›ç¨‹å¹¶äº§ç”Ÿcoreæ–‡ä»¶ 8 SIGFPE åœ¨å‘ç”Ÿè‡´å‘½çš„è¿ç®—é”™è¯¯æ—¶å‘å‡ºã€‚ä¸ä»…åŒ…æ‹¬æµ®ç‚¹è¿ç®— é”™è¯¯ï¼Œè¿˜åŒ…æ‹¬æº¢å‡ºåŠé™¤æ•°ä¸º0ç­‰æ‰€æœ‰çš„ç®—æ³•é”™è¯¯ ç»ˆæ­¢è¿›ç¨‹å¹¶äº§ç”Ÿcoreæ–‡ä»¶ 9 SIGKILL æ— æ¡ä»¶ç»ˆæ­¢è¿›ç¨‹ã€‚è¯¥ä¿¡å·ä¸èƒ½è¢«å¿½ç•¥ï¼Œå¤„ç†å’Œé˜»å¡ ç»ˆæ­¢è¿›ç¨‹ï¼Œå¯ä»¥æ€æ­»ä»»ä½•è¿›ç¨‹ 10 SIGUSE1 ç”¨æˆ·å®šä¹‰çš„ä¿¡å·ã€‚å³ç¨‹åºå‘˜å¯ä»¥åœ¨ç¨‹åºä¸­å®šä¹‰å¹¶ä½¿ç”¨è¯¥ä¿¡å· ç»ˆæ­¢è¿›ç¨‹ 11 SIGSEGV æŒ‡ç¤ºè¿›ç¨‹è¿›è¡Œäº†æ— æ•ˆå†…å­˜è®¿é—®(æ®µé”™è¯¯) ç»ˆæ­¢è¿›ç¨‹å¹¶äº§ç”Ÿcoreæ–‡ä»¶ 12 SIGUSR2 å¦å¤–ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰ä¿¡å·ï¼Œç¨‹åºå‘˜å¯ä»¥åœ¨ç¨‹åºä¸­å®šä¹‰å¹¶ä½¿ç”¨è¯¥ä¿¡å· ç»ˆæ­¢è¿›ç¨‹ 13 SIGPIPE Broken pipeå‘ä¸€ä¸ªæ²¡æœ‰è¯»ç«¯çš„ç®¡é“å†™æ•°æ® ç»ˆæ­¢è¿›ç¨‹ 14 SIGALRM å®šæ—¶å™¨è¶…æ—¶ï¼Œè¶…æ—¶çš„æ—¶é—´ ç”±ç³»ç»Ÿè°ƒç”¨alarmè®¾ç½® ç»ˆæ­¢è¿›ç¨‹ 15 SIGTERM ç¨‹åºç»“æŸä¿¡å·ï¼Œä¸SIGKILLä¸åŒçš„æ˜¯ï¼Œè¯¥ä¿¡å·å¯ä»¥è¢«é˜»å¡å’Œç»ˆæ­¢ã€‚é€šå¸¸ç”¨æ¥è¦ç¤ºç¨‹åºæ­£å¸¸é€€å‡ºã€‚æ‰§è¡Œshellå‘½ä»¤Killæ—¶ï¼Œç¼ºçœäº§ç”Ÿè¿™ä¸ªä¿¡å· ç»ˆæ­¢è¿›ç¨‹ 16 SIGSTKFLT Linuxæ—©æœŸç‰ˆæœ¬å‡ºç°çš„ä¿¡å·ï¼Œç°ä»ä¿ç•™å‘åå…¼å®¹ ç»ˆæ­¢è¿›ç¨‹ 17 SIGCHLD å­è¿›ç¨‹ç»“æŸæ—¶ï¼Œçˆ¶è¿›ç¨‹ä¼šæ”¶åˆ°è¿™ä¸ªä¿¡å· å¿½ç•¥è¿™ä¸ªä¿¡å· 18 SIGCONT å¦‚æœè¿›ç¨‹å·²åœæ­¢ï¼Œåˆ™ä½¿å…¶ç»§ç»­è¿è¡Œ ç»§ç»­&#x2F;å¿½ç•¥ 19 SIGSTOP åœæ­¢è¿›ç¨‹çš„æ‰§è¡Œã€‚ä¿¡å·ä¸èƒ½è¢«å¿½ç•¥ï¼Œå¤„ç†å’Œé˜»å¡ ä¸ºç»ˆæ­¢è¿›ç¨‹ 20 SIGTSTP åœæ­¢ç»ˆç«¯äº¤äº’è¿›ç¨‹çš„è¿è¡Œã€‚æŒ‰ä¸‹&lt;ctrl+z&gt;ç»„åˆé”®æ—¶å‘å‡ºè¿™ä¸ªä¿¡å· æš‚åœè¿›ç¨‹ 21 SIGTTIN åå°è¿›ç¨‹è¯»ç»ˆç«¯æ§åˆ¶å° æš‚åœè¿›ç¨‹ 22 SIGTTOU è¯¥ä¿¡å·ç±»ä¼¼äºSIGTTINï¼Œåœ¨åå°è¿›ç¨‹è¦å‘ç»ˆç«¯è¾“å‡ºæ•°æ®æ—¶å‘ç”Ÿ æš‚åœè¿›ç¨‹ 23 SIGURG å¥—æ¥å­—ä¸Šæœ‰ç´§æ€¥æ•°æ®æ—¶ï¼Œå‘å½“å‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹å‘å‡ºäº›ä¿¡å·ï¼ŒæŠ¥ å‘Šæœ‰ç´§æ€¥æ•°æ®åˆ°è¾¾ã€‚å¦‚ç½‘ç»œå¸¦å¤–æ•°æ®åˆ°è¾¾ å¿½ç•¥è¯¥ä¿¡å· 24 SIGXCPU è¿›ç¨‹æ‰§è¡Œæ—¶é—´è¶…è¿‡äº†åˆ†é…ç»™è¯¥è¿›ç¨‹çš„CPUæ—¶é—´ï¼Œç³»ç»Ÿäº§ç”Ÿè¯¥ä¿¡å·å¹¶å‘é€ç»™è¯¥è¿›ç¨‹ ç»ˆæ­¢è¿›ç¨‹ 25 SIGXFSZ è¶…è¿‡æ–‡ä»¶çš„æœ€å¤§é•¿åº¦è®¾ç½® ç»ˆæ­¢è¿›ç¨‹ 26 SIGVTALRM è™šæ‹Ÿæ—¶é’Ÿè¶…æ—¶æ—¶äº§ç”Ÿè¯¥ä¿¡å·ã€‚ç±»ä¼¼äºSIGALRMï¼Œä½†æ˜¯è¯¥ä¿¡å·åªè®¡ç®—è¯¥è¿›ç¨‹å ç”¨CPUçš„ä½¿ç”¨æ—¶é—´ ç»ˆæ­¢è¿›ç¨‹ 27 SGIPROF ç±»ä¼¼äºSIGVTALRMï¼Œå®ƒä¸å…¬åŒ…æ‹¬è¯¥è¿›ç¨‹å ç”¨CPUæ—¶é—´è¿˜åŒ…æ‹¬æ‰§è¡Œç³»ç»Ÿè°ƒç”¨æ—¶é—´ ç»ˆæ­¢è¿›ç¨‹ 28 SIGWINCH çª—å£å˜åŒ–å¤§å°æ—¶å‘å‡º å¿½ç•¥è¯¥ä¿¡å· 29 SIGIO æ­¤ä¿¡å·å‘è¿›ç¨‹æŒ‡ç¤ºå‘å‡ºäº†ä¸€ä¸ªå¼‚æ­¥IOäº‹ä»¶ å¿½ç•¥è¯¥ä¿¡å· 30 SIGPWR å…³æœº ç»ˆæ­¢è¿›ç¨‹ 31 SIGSYS æ— æ•ˆçš„ç³»ç»Ÿè°ƒç”¨ ç»ˆæ­¢è¿›ç¨‹å¹¶äº§ç”Ÿcoreæ–‡ä»¶ 34 ~64 SIGRTMIN ï½ SIGRTMAX LINUXçš„å®æ—¶ä¿¡å·ï¼Œå®ƒä»¬æ²¡æœ‰å›ºå®šçš„å«ä¹‰ï¼ˆå¯ä»¥ç”±ç”¨æˆ·è‡ªå®šä¹‰ï¼‰ ç»ˆæ­¢è¿›ç¨‹ ä¿¡å·çš„ 5 ç§é»˜è®¤å¤„ç†åŠ¨ä½œæŸ¥çœ‹ä¿¡å·çš„è¯¦ç»†ä¿¡æ¯ï¼šman 7 signal ä¿¡å·çš„ 5 ä¸­é»˜è®¤å¤„ç†åŠ¨ä½œ Term ç»ˆæ­¢è¿›ç¨‹ Ign å½“å‰è¿›ç¨‹å¿½ç•¥æ‰è¿™ä¸ªä¿¡å· Core ç»ˆæ­¢è¿›ç¨‹ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªCoreæ–‡ä»¶ Stop æš‚åœå½“å‰è¿›ç¨‹ Cont ç»§ç»­æ‰§è¡Œå½“å‰è¢«æš‚åœçš„è¿›ç¨‹ ä¿¡å·çš„å‡ ç§çŠ¶æ€ï¼šäº§ç”Ÿã€æœªå†³ã€é€’è¾¾ SIGKILL å’Œ SIGSTOP ä¿¡å·ä¸èƒ½è¢«æ•æ‰ã€é˜»å¡æˆ–è€…å¿½ç•¥ï¼Œåªèƒ½æ‰§è¡Œé»˜è®¤åŠ¨ä½œã€‚ core0ä»£è¡¨ä¸ä¼šç”Ÿæˆcoreæ–‡ä»¶ å›¾2ä¸ºè®¾ç½®coreæ–‡ä»¶ 123456789101112131415/************************************************************************* &gt; File Name: kill.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ18æ—¥ æ˜ŸæœŸä¸‰ 18æ—¶39åˆ†29ç§’ ************************************************************************/// è¿™ä¸ªç¨‹åºçš„ä½œç”¨æ˜¯æµ‹è¯•ç”Ÿæˆæ–‡ä»¶#include &lt;stdio.h&gt;#include &lt;string.h&gt;int main() &#123; char *buf; strcpy(buf, &quot;hello&quot;); return 0;&#125; killã€raiseã€abortå‡½æ•°å› ä¸ºä¼šæŠ¢å cpuçš„èµ„æºä¸ç¡®å®šæ‰§è¡Œå‡ æ¬¡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263/************************************************************************* &gt; File Name: kill.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ18æ—¥ æ˜ŸæœŸä¸‰ 18æ—¶39åˆ†29ç§’ ************************************************************************//* * #include &lt;sys/types.h&gt; * #include &lt;signal.h&gt; * int kill(pid_t pid, int sig); * - åŠŸèƒ½: ç»™ä»»ä½•çš„è¿›ç¨‹æˆ–è€…è¿›ç¨‹ç»„pid, å‘é€æŸä¸ªä¿¡å· sig * - å‚æ•°: * - pid : éœ€è¦å‘é€ç»™çš„è¿›ç¨‹çš„id * &gt; 0 : å°†ä¿¡å·å‘é€ç»™æŒ‡å®šçš„è¿›ç¨‹ * = 0 : å°†ä¿¡å·å‘é€ç»™å½“å‰çš„è¿›ç¨‹ç»„ * = -1 : è¡¨ç¤ºå°†ä¿¡å·å‘é€ç»™æ¯ä¸€ä¸ªæœ‰æƒé™çš„æ¥å—è¿™ä¸ªä¿¡å·çš„è¿›ç¨‹ * &lt; -1 : è¿™ä¸ªpidç­‰äºæŸä¸ªè¿›ç¨‹ç»„çš„IDå–å(1234) -&gt; (-1234) * - sig : éœ€è¦å‘é€çš„ä¿¡å·çš„ç¼–å·æˆ–è€…å®å€¼,å¦‚æœæ˜¯0çš„è¯ä¸å‘é€ä»»ä½•ä¿¡å· * kill(getppid(), 9); * kill(getpid(), 9); * * int raise(int sig); * - åŠŸèƒ½: ç»™å½“å‰è¿›ç¨‹å‘é€ä¿¡å· * - å‚æ•°: * - sug : è¦å‘é€çš„ä¿¡å· * - è¿”å›å€¼; * - æˆåŠŸ 0 * - å¤±è´¥ é 0 * kill(getpid(), sig); * * void abort(void); * - åŠŸèƒ½: å‘é€SIGABRTä¿¡å·ç»™å½“å‰è¿›ç¨‹,æ€æ­»å½“å‰è¿›ç¨‹ * kill(getpid(), SIGABRT); */#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;signal.h&gt;#include &lt;unistd.h&gt;int main() &#123; pid_t pid = fork(); if(pid == 0) &#123; // å­ for(int i = 0; i &lt; 5; i++) &#123; printf(&quot;child process\\n&quot;); sleep(1); &#125; &#125; else if(pid &gt; 0) &#123; // çˆ¶ printf(&quot;parent process\\n&quot;); sleep(2); printf(&quot;kill child process now\\n&quot;); // çˆ¶è¿›ç¨‹è¿”å›æ˜¯å­è¿›ç¨‹çš„ä¿¡å· kill(pid, SIGINT); &#125; return 0;&#125; alarm å‡½æ•° 1234567891011121314151617181920212223242526272829303132333435363738394041424344/************************************************************************* &gt; File Name: alarm.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ19æ—¥ æ˜ŸæœŸå›› 12æ—¶59åˆ†47ç§’ ************************************************************************//* * #include &lt;unistd.h&gt; * unisgned int alarm(unsigned int seconds); * - åŠŸèƒ½: è®¾ç½®å®šæ—¶å™¨ (é—¹é’Ÿ),å‡½æ•°è°ƒç”¨,å¼€å§‹å€’è®¡æ—¶,å€’è®¡æ—¶ä¸º0çš„æ—¶å€™å‡½æ•°ä¼šç»™å½“å‰çš„ è¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·:SIGALARM * - å‚æ•°: * seconds: å€’è®¡æ—¶çš„æ—¶é•¿, å•ä½: ç§’ã€‚ å¦‚æœå‚æ•°ä¸º0, å®šæ—¶å™¨æ— æ•ˆ(ä¸è¿›è¡Œå€’è®¡æ—¶ä¸å‘ä¿¡å·) * å–æ¶ˆä¸€ä¸ªå®šæ—¶å™¨,é€šè¿‡alarm(0); * - è¿”å›å€¼: å€’è®¡æ—¶å‰©ä½™çš„æ—¶é—´ * - ä¹‹å‰æ²¡æœ‰å®šæ—¶å™¨, è¿”å›0 * - ä¹‹å‰æœ‰å®šæ—¶å™¨, è¿”å›ä¹‹å‰çš„å®šæ—¶å™¨å‰©ä½™æ—¶é—´ * -SIGALARM:é»˜è®¤ç»ˆæ­¢å½“å‰çš„è¿›ç¨‹, æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸”åªæœ‰å”¯ä¸€çš„ä¸€ä¸ªå®šæ—¶å™¨ * alarm(10); -&gt; è¿”å› 0 * è¿‡äº†1ç§’ - å†å®šä¹‰ä¸€ä¸ª * alarm(5); -&gt; è¿”å›9 * alarm(100) -&gt; è¯¥å‡½æ•°æ˜¯ä¸é˜»å¡çš„ * */#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;int main() &#123; int seconds = alarm(5); printf(&quot;seconds = %d \\n&quot;, seconds); // 0 sleep(2); seconds = alarm(2); printf(&quot;seconds = %d \\n&quot;, seconds); // 3 while(1) &#123; &#125; return 0;&#125; è®¡ç®—æœºä¸€ç§’ä¸­ç”µè„‘èƒ½æ•°å¤šå°‘ä¸ªæ•°123456789101112131415161718192021222324252627/************************************************************************* &gt; File Name: alarm_One.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ19æ—¥ æ˜ŸæœŸå›› 18æ—¶37åˆ†11ç§’ ************************************************************************//* * å®é™…æ—¶é—´ = å†…æ ¸æ—¶é—´ + ç”¨æˆ·æ—¶é—´ + æ“ä½œIOæ¶ˆè€—çš„æ—¶é—´ * è¿›è¡Œæ–‡ä»¶IOæ“ä½œçš„æ—¶é—´æ¯”è¾ƒæµªè´¹æ—¶é—´ * * å®šæ—¶å™¨,ä¸è¿›ç¨‹çš„çŠ¶æ€æ— å…³ (è‡ªç„¶å®šæ—¶æ³•)ã€‚æ— è®ºè¿›ç¨‹å¤„äºä»€ä¹ˆçŠ¶æ€,alarméƒ½ä¼šè®¡æ—¶ * */#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;int main() &#123; alarm(1); // ç³»ç»Ÿè°ƒç”¨ -&gt; å†…æ ¸ int i = 0; // å†…æ ¸ -&gt; ç”¨æˆ·åŒº while(1) &#123; printf(&quot;%d\\n&quot;, i++); &#125; return 0;&#125; å»ºè®® g++ xxx.c .&#x2F;a.out &gt;&gt; a.txt setitimer å®šæ—¶å™¨å‡½æ•° - å‘¨æœŸ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768/************************************************************************* &gt; File Name: setitimer.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ19æ—¥ æ˜ŸæœŸå›› 19æ—¶32åˆ†31ç§’ ************************************************************************//* * #include &lt;sys/time.h&gt; * int setitimer(int which, const struct itimerval *new_value, struct itimerval *old_value); * - åŠŸèƒ½: è®¾ç½®å®šæ—¶å™¨(é—¹é’Ÿ)ã€‚å¯ä»¥ä»£æ›¿alarmå‡½æ•°ã€‚ç²¾åº¦å¾®ç§’us, å¯ä»¥å®ç°å‘¨æœŸæ€§å®šæ—¶ * - å‚æ•°: * - which: å®šæ—¶å™¨å¯ä»¥ä»€ä¹ˆæ—¶é—´è®¡æ—¶ * ITIMER_REAL: çœŸå®æ—¶é—´,æ—¶é—´åˆ°è¾¾, å‘é€ SIGALRM å¸¸ç”¨ * ITIMER_VIRTUAL: ç”¨æˆ·æ—¶é—´,æ—¶é—´åˆ°è¾¾,å‘é€SIGVTALRM * ITIMER_PROF: ä»¥è¯¥è¿›ç¨‹åœ¨ç”¨æˆ·æ€ä¸‹æ‰€æ¶ˆè€—çš„æ—¶é—´æ¥è®¡ç®—,æ—¶é—´åˆ°è¾¾, å‘é€SIGPROF * - new_value: * // å®šæ—¶å™¨ç»“æ„ä½“ * struct itimerval &#123; * // æ¯ä¸ªé˜¶æ®µçš„æ—¶é—´,é—´éš”æ—¶é—´ * struct timeval it_intercal; * // å»¶è¿Ÿå¤šé•¿æ—¶é—´æ‰§è¡Œå®šæ—¶å™¨ * struct timeval it_value; * &#125;; * * // æ—¶é—´ç»“æ„ä½“ * struct timeval &#123; * // ç§’æ•° * time_t tv_sec; * // å¾®å¦™ * suseconds_t tv_usec; * &#125;; * è¿‡10(it_value)ç§’å,æ¯éš”2(it_intercal)ç§’å®šæ—¶ä¸€æ¬¡ * - old_value: è®°å½•ä¸Šä¸€æ¬¡çš„å®šæ—¶çš„æ—¶é—´å‚æ•°ä¸€èˆ¬ä¸ä½¿ç”¨,æŒ‡å®šNULL * * - è¿”å›å€¼ * æˆåŠŸ 0 * å¤±è´¥ -1 å¹¶è®¾ç½®é”™è¯¯å· */#include &lt;stdio.h&gt;#include &lt;sys/time.h&gt;#include &lt;stdlib.h&gt;// è¿‡3ç§’ä»¥å,æ¯2ç§’é’Ÿå®šæ—¶ä¸€æ¬¡int main() &#123; struct itimerval new_value; new_value.it_interval.tv_sec = 2; // å¾®ç§’ä¸è®¾ç½®å°±æ˜¯éšæœºçš„ new_value.it_interval.tv_usec = 0; // è®¾ç½®å»¶è¿Ÿçš„æ—¶é—´, 3ç§’ä¹‹åå¼€å§‹ç¬¬ä¸€æ¬¡å®šæ—¶ new_value.it_value.tv_sec = 3; new_value.it_value.tv_usec = 0; int ret = setitimer(ITIMER_REAL, &amp;new_value, NULL); // éé˜»å¡ printf(&quot;å®šæ—¶å™¨å¼€å§‹äº†ï¼\\n&quot;); if(ret == -1) &#123; perror(&quot;setitimer&quot;); exit(-1); &#125; getchar(); return 0;&#125; signal ä¿¡å·æ•æ‰å‡½æ•°1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071/************************************************************************* &gt; File Name: signal.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ24æ—¥ æ˜ŸæœŸäºŒ 09æ—¶34åˆ†06ç§’ ************************************************************************//* * #include &lt;signal.h&gt; * typedef void (*sighandler_t)(int); * sighandler_t signal(int signum, sighandler_t handler); * - åŠŸèƒ½: è®¾ç½®æŸä¸ªä¿¡å·çš„æ•æ‰è¡Œä¸º * - å‚æ•°: * - signum: è¦æ•æ‰çš„ä¿¡å· * - handler æ•æ‰çš„ä¿¡å·è¦å¦‚ä½•å¤„ç† * - SIG_IGN: å¿½ç•¥ä¿¡å· * - SIG_DFL: ä½¿ç”¨ä¿¡å·é»˜è®¤çš„è¡Œä¸º * - å›è°ƒå‡½æ•°: è¿™ä¸ªå‡½æ•°æ˜¯å†…æ ¸è°ƒç”¨çš„(ç³»ç»Ÿ), ç¨‹åºè´Ÿè´£å†™,æ•è·åˆ°ä¿¡å·åå¦‚ä½•å»å¤„ç†ä¿¡å·ã€‚ * å›è°ƒå‡½æ•°: * - éœ€è¦ç¨‹åºå‘˜å®ç°,æå‰å‡†å¥½çš„,å‡½æ•°çš„ç±»å‹æ ¹æ®å®é™…éœ€æ±‚,çœ‹å‡½æ•°æŒ‡é’ˆçš„å®šä¹‰ * - ä¸æ˜¯ç¨‹åºå‘˜è°ƒç”¨,è€Œæ˜¯ä¿¡å·äº§ç”Ÿç”±å†…æ ¸è°ƒç”¨ * - å‡½æ•°æŒ‡é’ˆæ˜¯æ˜¯ç°å®å‡½æ•°å›è°ƒçš„æ‰‹æ®µ,å‡½æ•°å®ç°ä¹‹å,å°†å‡½æ•°å æ”¾åˆ°å‡½æ•°æŒ‡é’ˆçš„ä½ç½®å°±å¯ä»¥äº† * - è¿”å›å€¼: * æˆåŠŸ è¿”å›ä¸Šä¸€æ¬¡æ³¨å†Œçš„ä¿¡å·å¤„ç†å‡½æ•°çš„åœ°å€ã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨è¿”å›NULL * å¤±è´¥ è¿”å›SIG_ERR,è®¾ç½®é”™è¯¯å· * SIGKILL(9å·ä¿¡å·) SIGSTOPä¸èƒ½è¢«æ•æ‰,ä¸èƒ½è¢«å¿½ç•¥ */#include &lt;stdio.h&gt;#include &lt;sys/time.h&gt;#include &lt;stdlib.h&gt;#include &lt;signal.h&gt;void myalarm(int num) &#123; printf(&quot;æ•æ‰åˆ°äº†ä¿¡å·çš„ç¼–å·æ˜¯: %d \\n&quot;, num); printf(&quot;xxxxxx\\n&quot;); return ;&#125;// è¿‡3ç§’ä»¥å,æ¯2ç§’é’Ÿå®šæ—¶ä¸€æ¬¡int main() &#123; // æ³¨å†Œä¿¡å·æ•æ‰ // signal(SIGALRM, SIG_IGN); // signal(SIGALRM, SIG_DFL); // void (*sighandler_t)(int); å‡½æ•°æŒ‡é’ˆ,intç±»å‹çš„å‚æ•°è¡¨ç¤ºæ•æ‰çš„åˆ°çš„ä¿¡å· å€¼ã€‚ signal(SIGALRM, myalarm); struct itimerval new_value; new_value.it_interval.tv_sec = 2; // å¾®ç§’ä¸è®¾ç½®å°±æ˜¯éšæœºçš„ new_value.it_interval.tv_usec = 0; // è®¾ç½®å»¶è¿Ÿçš„æ—¶é—´, 3ç§’ä¹‹åå¼€å§‹ç¬¬ä¸€æ¬¡å®šæ—¶ new_value.it_value.tv_sec = 3; new_value.it_value.tv_usec = 0; int ret = setitimer(ITIMER_REAL, &amp;new_value, NULL); // éé˜»å¡ printf(&quot;å®šæ—¶å™¨å¼€å§‹äº†ï¼\\n&quot;); if(ret == -1) &#123; perror(&quot;setitimer&quot;); exit(-1); &#125; getchar(); return 0;&#125; ä¿¡å·é›†è®¸å¤šä¿¡å·ç›¸å…³çš„ç³»ç»Ÿè°ƒç”¨éƒ½éœ€è¦èƒ½è¡¨ç¤ºä¸€ç»„ä¸åŒçš„ä¿¡å·ï¼Œå¤šä¸ªä¿¡å·å¯ä½¿ç”¨ä¸€ä¸ªç§°ä¹‹ä¸º ä¿¡å·é›†çš„æ•°æ®ç»“æ„æ¥è¡¨ç¤ºï¼Œå…¶ç³»ç»Ÿæ•°æ®ç±»å‹ä¸º sigset_tã€‚ åœ¨ PCB ä¸­æœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„ä¿¡å·é›†ã€‚ä¸€ä¸ªç§°ä¹‹ä¸º â€œé˜»å¡ä¿¡å·é›†â€ ï¼Œå¦ä¸€ä¸ªç§°ä¹‹ä¸º â€œæœªå†³ä¿¡å·é›†â€ ã€‚è¿™ä¸¤ä¸ªä¿¡å·é›†éƒ½æ˜¯å†…æ ¸ä½¿ç”¨ä½å›¾æœºåˆ¶æ¥å®ç°çš„ã€‚ä½†æ“ä½œç³»ç»Ÿä¸å…è®¸æˆ‘ ä»¬ç›´æ¥å¯¹è¿™ä¸¤ä¸ªä¿¡å·é›†è¿›è¡Œä½æ“ä½œã€‚è€Œéœ€è‡ªå®šä¹‰å¦å¤–ä¸€ä¸ªé›†åˆï¼Œå€ŸåŠ©ä¿¡å·é›†æ“ä½œå‡½æ•° æ¥å¯¹ PCB ä¸­çš„è¿™ä¸¤ä¸ªä¿¡å·é›†è¿›è¡Œä¿®æ”¹ã€‚ ä¿¡å·çš„ â€œæœªå†³â€ æ˜¯ä¸€ç§çŠ¶æ€ï¼ŒæŒ‡çš„æ˜¯ä»ä¿¡å·çš„äº§ç”Ÿåˆ°ä¿¡å·è¢«å¤„ç†å‰çš„è¿™ä¸€æ®µæ—¶é—´ã€‚ ä¿¡å·çš„ â€œé˜»å¡â€ æ˜¯ä¸€ä¸ªå¼€å…³åŠ¨ä½œï¼ŒæŒ‡çš„æ˜¯é˜»æ­¢ä¿¡å·è¢«å¤„ç†ï¼Œä½†ä¸æ˜¯é˜»æ­¢ä¿¡å·äº§ç”Ÿã€‚ ä¿¡å·çš„é˜»å¡å°±æ˜¯è®©ç³»ç»Ÿæš‚æ—¶ä¿ç•™ä¿¡å·ç•™å¾…ä»¥åå‘é€ã€‚ç”±äºå¦å¤–æœ‰åŠæ³•è®©ç³»ç»Ÿå¿½ç•¥ä¿¡å·ï¼Œ æ‰€ä»¥ä¸€èˆ¬æƒ…å†µä¸‹ä¿¡å·çš„é˜»å¡åªæ˜¯æš‚æ—¶çš„ï¼Œåªæ˜¯ä¸ºäº†é˜²æ­¢ä¿¡å·æ‰“æ–­æ•æ„Ÿçš„æ“ä½œã€‚ é˜»å¡ä¿¡å·é›†å’Œæœªå†³ä¿¡å·æœªå†³ä¿¡å·é›†ï¼šä¿¡å·æ²¡è¢«å¤„ç†ä¹‹å‰éƒ½ä¼šåœ¨æœªå†³ä¿¡å·é›† é˜»å¡ä¿¡å·é›†ï¼šæˆ‘ä»¬éœ€è¦å¯¹æŸå‡ ä¸ªä¿¡å·è¿›è¡Œé˜»å¡ é˜»å¡ä¿¡å·é›†å’Œæœªå†³ä¿¡å·é›†1.ç”¨æˆ·é€šè¿‡é”®ç›˜ Ctrl + C, äº§ç”Ÿ2å·ä¿¡å·SIGINT (ä¿¡å·è¢«åˆ›å»º) 2.ä¿¡å·äº§ç”Ÿä½†æ˜¯æ²¡æœ‰è¢«å¤„ç† ï¼ˆæœªå†³ï¼‰ - åœ¨å†…æ ¸ä¸­å°†æ‰€æœ‰çš„æ²¡æœ‰è¢«å¤„ç†çš„ä¿¡å·å­˜å‚¨åœ¨ä¸€ä¸ªé›†åˆä¸­ ï¼ˆæœªå†³ä¿¡å·é›†ï¼‰ - SIGINTä¿¡å·çŠ¶æ€è¢«å­˜å‚¨åœ¨ç¬¬äºŒä¸ªæ ‡å¿—ä½ä¸Š - è¿™ä¸ªæ ‡å¿—ä½çš„å€¼ä¸º0ï¼Œ è¯´æ˜ä¿¡å·ä¸æ˜¯æœªå†³çŠ¶æ€ - è¿™ä¸ªæ ‡å¿—ä½çš„å€¼ä¸º1ï¼Œ è¯´æ˜ä¿¡å·å¤„äºæœªå†³çŠ¶æ€ 3.è¿™ä¸ªæœªå†³çŠ¶æ€çš„ä¿¡å·ï¼Œéœ€è¦è¢«å¤„ç†ï¼Œå¤„ç†ä¹‹å‰éœ€è¦å’Œå¦ä¸€ä¸ªä¿¡å·é›†ï¼ˆé˜»å¡ä¿¡å·é›†ï¼‰ï¼Œè¿›è¡Œæ¯”è¾ƒ - é˜»å¡ä¿¡å·é›†é»˜è®¤ä¸é˜»å¡ä»»ä½•çš„ä¿¡å· - å¦‚æœæƒ³è¦é˜»å¡æŸäº›ä¿¡å·éœ€è¦ç”¨æˆ·è°ƒç”¨ç³»ç»Ÿçš„API 4.åœ¨å¤„ç†çš„æ—¶å€™å’Œé˜»å¡ä¿¡å·é›†ä¸­çš„æ ‡å¿—ä½è¿›è¡ŒæŸ¥è¯¢ï¼Œçœ‹æ˜¯ä¸æ˜¯å¯¹è¯¥ä¿¡å·è®¾ç½®é˜»å¡äº† å¦‚æœæ²¡æœ‰é˜»å¡ï¼Œè¿™ä¸ªä¿¡å·å°±è¢«å¤„ç† å¦‚æœé˜»å¡äº†ï¼Œè¿™ä¸ªä¿¡å·å°±ç»§ç»­å¤„äºæœªå†³çŠ¶æ€ï¼Œç›´åˆ°é˜»å¡è§£é™¤ï¼Œè¿™ä¸ªä¿¡å·å°±è¢«å¤„ç† å·é›†ç›¸å…³çš„å‡½æ•° - åªå¯¹è‡ªå®šä¹‰çš„æœ‰æ•ˆ123456789101112131415161718192021222324252627282930313233343536373839404142ä»¥ä¸‹ä¿¡å·é›†ç›¸å…³çš„å‡½æ•°éƒ½æ˜¯å¯¹è‡ªå®šä¹‰çš„ä¿¡å·é›†è¿›è¡Œæ“ä½œint sigemptyset(sigset_t *set); - åŠŸèƒ½: æ¸…ç©ºä¿¡å·é›†ä¸­çš„æ•°æ®, å°†ä¿¡å·é›†ä¸­çš„æ‰€æœ‰çš„æ ‡å¿—ä½ç½® æ¸…ç©º - 0 - å‚æ•°: set,ä¼ å‡ºå‚æ•°,éœ€è¦æ“ä½œçš„ä¿¡å·é›† - è¿”å›å€¼: - æˆåŠŸè¿”å› 0 - å¤±è´¥è¿”å› -1int sigfillset(sigset_t *set); - åŠŸèƒ½: å°†ä¿¡å·é›†ä¸­çš„æ‰€æœ‰çš„æ ‡å¿—ä½ç½®ä¸º 1 - å‚æ•°: set,ä¼ å‡ºå‚æ•°,éœ€è¦æ“ä½œçš„ä¿¡å·é›† - è¿”å›å€¼: - æˆåŠŸè¿”å› 0 - å¤±è´¥è¿”å› -1int sigaddset(sigset_t *set, int signum); - åŠŸèƒ½: å‘ä¿¡å·é›†ä¸­çš„æŸä¸€ä¸ªä¿¡å·å¯¹åº”æ ‡å¿—ä½ä¸º1ï¼Œè¡¨ç¤ºé˜»å¡è¿™ä¸ªä¿¡å· - å‚æ•°: - set: ä¼ å‡ºå‚æ•°,éœ€è¦æ“ä½œçš„ä¿¡å·é›† - signum: éœ€è¦è®¾ç½®é˜»å¡çš„é‚£ä¸ªä¿¡å· - è¿”å›å€¼: - æˆåŠŸè¿”å› 0 - å¤±è´¥è¿”å› -1int sigdelset(sigset_t *set, int signum); - åŠŸèƒ½: å‘ä¿¡å·é›†ä¸­çš„æŸä¸€ä¸ªä¿¡å·å¯¹åº”æ ‡å¿—ä½ä¸º0ï¼Œè¡¨ç¤ºä¸é˜»å¡è¿™ä¸ªä¿¡å· - å‚æ•°: - set: ä¼ å‡ºå‚æ•°,éœ€è¦æ“ä½œçš„ä¿¡å·é›† - signum: éœ€è¦è®¾ç½®ä¸é˜»å¡çš„é‚£ä¸ªä¿¡å· - è¿”å›å€¼: - æˆåŠŸè¿”å› 0 - å¤±è´¥è¿”å› -1int sigismember(const sigset_t *set, int signum); - åŠŸèƒ½: åˆ¤æ–­æŸä¸ªä¿¡å·æ˜¯å¦é˜»å¡ - å‚æ•°: - set: éœ€è¦æ“ä½œçš„ä¿¡å·é›† - signum: éœ€è¦åˆ¤æ–­çš„é‚£ä¸ªä¿¡å· - è¿”å›å€¼: - 1 signum è¢«é˜»å¡ - 0 signum ä¸é˜»å¡ - -1 signum è°ƒç”¨å¤±è´¥ /***************ä¸‹é¢å°±æ˜¯ç³»ç»Ÿçš„APIå¯ä»¥æ“ä½œå†…æ ¸***************/int sigprocmask(int how, const sigset_t *set, sigset_t *oldset);int sigpending(sigset_t *set); sigset - è®¾ç½®æœªå†³ä¿¡å·é›†ã€é˜»å¡ä¿¡å·é›†123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263/************************************************************************* &gt; File Name: sigset.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ24æ—¥ æ˜ŸæœŸäºŒ 17æ—¶25åˆ†15ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;signal.h&gt;int main() &#123; // åˆ›å»ºä¸€ä¸ªä¿¡å·é›† sigset_t set; // æ¸…ç©º sigemptyset(&amp;set); // åˆ¤æ–­ SIGINT æ˜¯å¦åœ¨ä¿¡å·é›† set é‡Œ int ret = sigismember(&amp;set, SIGINT); if(ret == 0) &#123; printf(&quot;SIGINT ä¸é˜»å¡\\n&quot;); &#125; else if(ret == 1) &#123; printf(&quot;SIGINT é˜»å¡\\n&quot;); &#125; else if(ret == -1) &#123; printf(&quot;è°ƒç”¨å¤±è´¥\\n&quot;); &#125; // æ·»åŠ å‡ ä¸ªä¿¡å·åˆ°ä¿¡å·é›†ä¸­ sigaddset(&amp;set, SIGINT); sigaddset(&amp;set, SIGQUIT); ret = sigismember(&amp;set, SIGINT); if(ret == 0) &#123; printf(&quot;SIGINT ä¸é˜»å¡\\n&quot;); &#125; else if(ret == 1) &#123; printf(&quot;SIGINT é˜»å¡\\n&quot;); &#125; else if(ret == -1) &#123; printf(&quot;è°ƒç”¨å¤±è´¥\\n&quot;); &#125; ret = sigismember(&amp;set, SIGQUIT); if(ret == 0) &#123; printf(&quot;SIGQUIT ä¸é˜»å¡\\n&quot;); &#125; else if(ret == 1) &#123; printf(&quot;SIGQUIT é˜»å¡\\n&quot;); &#125; else if(ret == -1) &#123; printf(&quot;è°ƒç”¨å¤±è´¥\\n&quot;); &#125; // ä»ä¿¡å·é›†ä¸­åˆ é™¤ä¸€ä¸ª sigdelset(&amp;set, SIGQUIT); ret = sigismember(&amp;set, SIGQUIT); if(ret == 0) &#123; printf(&quot;SIGQUIT ä¸é˜»å¡\\n&quot;); &#125; else if(ret == 1) &#123; printf(&quot;SIGQUIT é˜»å¡\\n&quot;); &#125; else if(ret == -1) &#123; printf(&quot;è°ƒç”¨å¤±è´¥\\n&quot;); &#125; return 0;&#125; sigprocmask - é˜»å¡ä¿¡å·é›† - å†…æ ¸ æ‰€æœ‰çš„å¸¸è§„ä¿¡å· - ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788/************************************************************************* &gt; File Name: sigprocmask.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ24æ—¥ æ˜ŸæœŸäºŒ 18æ—¶42åˆ†13ç§’ ************************************************************************//* sigset_t == long int int sigprocmask(int how, const sigset_t *set, sigset_t *oldset); - åŠŸèƒ½: å°†è‡ªå®šä¹‰ä¿¡å·é›†ä¸­çš„æ•°æ®è®¾ç½®åˆ°å†…æ ¸ä¸­ (è®¾ç½®é˜»å¡ã€è§£é™¤é˜»å¡ã€æ›¿æ¢) - å‚æ•°: - how: å¦‚ä½•å¯¹å†…æ ¸é˜»å¡ä¿¡å·è¿›ç¨‹å¤„ç† SIG_BLOCK: å°†ç”¨æˆ·è®¾ç½®çš„é˜»å¡ä¿¡å·é›†æ·»åŠ  åˆ°å†…æ ¸ä¸­,å†…æ ¸ä¸­åŸæ¥çš„æ•°æ®ä¸å˜ åˆ—: ä¿¡å·é›† - mask 1 0 1 0 0 0 0 sigset_t - set | 0 1 0 0 0 0 0 ------------------ 1 1 1 0 0 0 0 å‡è®¾å†…æ ¸ä¸­é»˜è®¤çš„é˜»å¡ä¿¡å·é›†æ˜¯ mask, mask | set SIG_UNBLOCK: æ ¹æ®ç”¨æˆ·è®¾ç½®çš„æ•°æ®,å¯¹å†…æ ¸ä¸­çš„æ•°æ®è¿›è¡Œè§£é™¤é˜»å¡ mask &amp;= ~set; SIG_SETMASK: è¦†ç›–å†…æ ¸ä¸­åŸæ¥çš„å€¼ - set: å·²ç»åˆå§‹åŒ–å¥½çš„ç”¨æˆ·è‡ªå®šä¹‰çš„ä¿¡å·é›† - oldset: ä¿å­˜è®¾ç½®ä¹‹å‰çš„å†…æ ¸ä¸­çš„é˜»å¡çš„ä¿¡å·é›†çš„çŠ¶æ€, å¯ä»¥æ˜¯ NULL - è¿”å›å€¼: æˆåŠŸè¿”å›: 0 å¤±è´¥è¿”å›: -1 å¹¶è®¾ç½®é”™è¯¯å·: EFAULFã€EINVAL int sigpending(sigset_t *set); - åŠŸèƒ½: è·å–å†…æ ¸ä¸­çš„æœªå†³ä¿¡å·é›† - å‚æ•°: set, ä¼ å‡ºå‚æ•°, ä¿å­˜çš„æ˜¯å†…æ ¸ä¸­çš„æœªå†³ä¿¡å·é›†ä¸­çš„ ä¿¡æ¯ */#include &lt;stdio.h&gt;#include &lt;signal.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt; // æ‰€æœ‰çš„å¸¸è§„ä¿¡å· kill -l (1 - 31) æœªå†³çŠ¶æ€æ‰“å°åˆ°å±å¹• // è®¾ç½®æŸäº›ä¿¡å·æ˜¯é˜»å¡çš„,é€šè¿‡é”®ç›˜äº§ç”Ÿè¿™äº›ä¿¡å·int main() &#123; // è®¾ç½®2ã€3ä¿¡å·é˜»å¡ SIGINT(CTRL + C)ã€SIGQUIT(CTRL + \\) sigset_t set; sigemptyset(&amp;set); // å°†2å·å’Œ3å·ä¿¡å·æ·»åŠ åˆ°ä¿¡å·é›†ä¸­ sigaddset(&amp;set, SIGINT); sigaddset(&amp;set, SIGQUIT); // ä¿®æ”¹å†…æ ¸ä¸­çš„é˜»å¡ä¿¡å·é›† sigprocmask(SIG_BLOCK, &amp;set, NULL); int cnt = 0; while(1) &#123; cnt++; // è·å–å½“å‰çš„æœªå†³ä¿¡å·é›†çš„æ•°æ® sigset_t pendingset; sigemptyset(&amp;pendingset); sigpending(&amp;pendingset); // éå†å‰31ä½ for(int i = 1; i &lt;= 31; i++) &#123; if(sigismember(&amp;pendingset, i) == 1) &#123; printf(&quot;1&quot;); &#125;else if(sigismember(&amp;pendingset, i) == 0) &#123; printf(&quot;0&quot;); &#125; else &#123; printf(&quot;sigismember&quot;); exit(0); &#125; &#125; printf(&quot;\\n&quot;); sleep(1); if(cnt == 10) &#123; // æ¥è§¦é˜»å¡ sigprocmask(SIG_UNBLOCK, &amp;set, NULL); &#125; &#125; return 0;&#125; å‰å°è¿›ç¨‹å’Œåå°è¿›ç¨‹ run sigprocmask.c ç›´æ¥è¿è¡Œç¨‹åº CTRL + z ä¹Ÿåªæ˜¯è®©ç¨‹åºåå°è¿è¡Œ run sigprocmask.c &amp; &#x2F;&#x2F; è®©ç¨‹åºåœ¨åå°è¿è¡Œ fg &#x2F;&#x2F; åˆ‡æ¢åˆ°å‰å° sigactionä¿¡å·æ•æ‰ å°½é‡ä½¿ç”¨ sigaction å› ä¸ºæ ‡å‡†ä¸ä¸€æ · 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384/************************************************************************* &gt; File Name: sigaction.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ25æ—¥ æ˜ŸæœŸä¸‰ 11æ—¶32åˆ†35ç§’ ************************************************************************//* * #include &lt;signal.h&gt; * int sigaction(int signum, const struct sigaction *act, struct sigaction *oldact); * - åŠŸèƒ½: æ£€æŸ¥æˆ–è€…æ”¹å˜ä¿¡å·çš„å¤„ç†,ä¿¡å·æ•æ‰ * - å‚æ•°: * - signum: éœ€è¦æ•æ‰ä¿¡å·çš„ç¼–å·æˆ–è€…å®å€¼,ä¸èƒ½æ•æ‰çš„ä¿¡å·(SIGKILL and SIGSTOP) * - act: æ•æ‰ä¿¡å·ä¹‹åçš„å¤„ç†åŠ¨ä½œ * - oldact: ä¸Šä¸€æ¬¡å¯¹ä¿¡å·çš„æ•æ‰ç›¸å…³çš„è®¾ç½®,ä¸€èˆ¬è¡¥ä½¿ç”¨,ä¼ é€’NULL * - è¿”å›å€¼: * æˆåŠŸ 0 * å¤±è´¥ -1 * * struct sigaction &#123; * å‡½æ•°æŒ‡é’ˆ, æŒ‡å‘çš„å‡½æ•°å°±æ˜¯ä¿¡å·æ•æ‰åˆ°ä¹‹åçš„å¤„ç†å‡½æ•° * void (*sa_handler)(int); * * ä¸å¸¸ç”¨ - ä¿¡å·çš„ç¼–å·, ä¿¡å·çš„ç›¸å…³çš„ä¿¡æ¯, ä¿¡å·çš„ç›¸å…³çš„ä¿¡æ¯ * void (*sa_sigaction)(int, siginfo_t *, void *); * * ä¸´æ—¶é˜»å¡ä¿¡å·é›†,ä¿¡å·æ•æ‰å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­, ä¸´æ—¶é˜»å¡æŸäº›ä¿¡å· * sigset_t sa_mask; * * ä½¿ç”¨é‚£ä¸€ä¸ªä¿¡å·å¤„ç†å¯¹æ•æ‰åˆ°çš„ä¿¡å·è¿›è¡Œå¤„ç† * è¿™ä¸ªå€¼ 0 è¡¨ç¤ºä½¿ç”¨sa_handler * ä¹Ÿå¯ä»¥æ˜¯ SA_SIGINFO è¡¨ç¤ºä½¿ç”¨ sa_sigaction * int sa_flags; * * å‘—åºŸå¼ƒæ‰äº† * void (*sa_restorer)(void); * &#125;; */#include &lt;stdio.h&gt;#include &lt;sys/time.h&gt;#include &lt;signal.h&gt;#include &lt;stdlib.h&gt;void myalarm(int num) &#123; printf(&quot;æ•è·çš„ä¿¡å·çš„ç¼–å·æ˜¯: %d \\n&quot;, num); printf(&quot;xxxxxxx\\n&quot;); return ;&#125;int main() &#123; struct sigaction act; act.sa_flags = 0; act.sa_handler = myalarm; // æ¸…ç©ºä¸´æ—¶ä¿¡å·é›† sigemptyset(&amp;act.sa_mask); // æ³¨å†Œä¿¡å·æ•æ‰ sigaction(SIGALRM, &amp;act, NULL); struct itimerval new_value; // è®¾ç½®é—´éš”æ—¶é—´ new_value.it_interval.tv_sec = 2; new_value.it_interval.tv_usec = 0; // è®¾ç½®å»¶è¿Ÿçš„æ—¶é—´, 3å¦™ä¹‹åå¼€å§‹ç¬¬ä¸€æ¬¡å®šæ—¶ new_value.it_value.tv_sec = 3; new_value.it_value.tv_usec = 0; // éé˜»å¡ int ret = setitimer(ITIMER_REAL, &amp;new_value, NULL); printf(&quot;å®šæ—¶å™¨å¼€å§‹äº†\\n&quot;); if(ret == -1) &#123; perror(&quot;setitimer&quot;); exit(-1); &#125; // getchar(); while(1); return 0;&#125; å†…æ ¸å®ç°ä¿¡å·æ•æ‰çš„è¿‡ç¨‹ SIGCHLD - è§£å†³åƒµå°¸è¿›ç¨‹SIGCHLDä¿¡å·äº§ç”Ÿçš„æ¡ä»¶ å­è¿›ç¨‹ç»ˆæ­¢æ—¶ å­è¿›ç¨‹æ¥æ”¶åˆ° SIGSTOP ä¿¡å·åœæ­¢æ—¶ å­è¿›ç¨‹å¤„åœ¨åœæ­¢æ€,æ¥å—åˆ°SIGCONTåå”¤é†’æ—¶ ä»¥ä¸Šä¸‰ç§æ¡ä»¶éƒ½ä¼šç»™çˆ¶è¿›ç¨‹å‘é€ SIGCHLD ä¿¡å·, çˆ¶è¿›ç¨‹é»˜è®¤ä¼šå¿½ç•¥è¯¥ä¿¡å· åˆ›å»º20ä¸ªå­è¿›ç¨‹12345678910111213141516171819202122232425262728293031323334353637383940414243444546/************************************************************************* &gt; File Name: sigchld.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ25æ—¥ æ˜ŸæœŸä¸‰ 17æ—¶19åˆ†37ç§’ ************************************************************************//* * SIGCHLDä¿¡å·äº§ç”Ÿçš„3ä¸ªæ¡ä»¶: * 1.å­è¿›ç¨‹ç»“æŸ * 2.å­è¿›ç¨‹æš‚åœäº† * 3.å­è¿›ç¨‹ç»§ç»­è¿è¡Œ * éƒ½ä¼šç»™çˆ¶è¿›ç¨‹å‘é€è¯¥ä¿¡å·,çˆ¶è¿›ç¨‹é»˜è®¤å¿½ç•¥è¯¥ä¿¡å· * ä½¿ç”¨SIGCHLDä¿¡å·è§£å†³åƒµå°¸è¿›ç¨‹çš„é—®é¢˜ */#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;unistd.h&gt;int main() &#123; // åˆ›å»ºä¸€äº›å­è¿›ç¨‹ pid_t pid; for(int i = 0; i &lt; 20; i++) &#123; pid = fork(); if(pid == 0) &#123; // å­ break; &#125; &#125; if(pid &gt; 0) &#123; // çˆ¶ while(1) &#123; printf(&quot;parent process pid : %d \\n&quot;, getpid()); sleep(2); &#125; &#125; else if(pid == 0) &#123; // å­ printf(&quot;child process pid : %d \\n&quot;, getpid()); &#125; return 0;&#125; çˆ¶è¿›ç¨‹ç»“æŸå­è¿›ç¨‹å°±æ­»äº† waitã€waitpid ä¸€æ¬¡åªèƒ½å›æ”¶ä¸€ä¸ªå­è¿›ç¨‹ ç‚¹æˆ‘å¸¦ä½ å»çœ‹wait - waitpid æ®µé”™è¯¯(æ ¸å¿ƒå†…å­˜ä»¥è½¬æ¢) - ä»£ç æ¸…é™¤åƒµå°¸è¿›ç¨‹1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980/************************************************************************* &gt; File Name: sigchld.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ25æ—¥ æ˜ŸæœŸä¸‰ 17æ—¶19åˆ†37ç§’ ************************************************************************//* * SIGCHLDä¿¡å·äº§ç”Ÿçš„3ä¸ªæ¡ä»¶: * 1.å­è¿›ç¨‹ç»“æŸ * 2.å­è¿›ç¨‹æš‚åœäº† * 3.å­è¿›ç¨‹ç»§ç»­è¿è¡Œ * éƒ½ä¼šç»™çˆ¶è¿›ç¨‹å‘é€è¯¥ä¿¡å·,çˆ¶è¿›ç¨‹é»˜è®¤å¿½ç•¥è¯¥ä¿¡å· * ä½¿ç”¨SIGCHLDä¿¡å·è§£å†³åƒµå°¸è¿›ç¨‹çš„é—®é¢˜ */#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;unistd.h&gt;#include &lt;signal.h&gt;#include &lt;sys/wait.h&gt;void myFun(int num) &#123; printf(&quot;æ•æ‰åˆ°çš„ä¿¡å· : %d\\n&quot;, num); // å›æ”¶å­è¿›ç¨‹PCBçš„èµ„æº /* while(1) &#123; wait(NULL); &#125; */ while(1) &#123; int ret = waitpid(-1, NULL, WNOHANG); if(ret &gt; 0) &#123; printf(&quot;child die , pid = %d\\n&quot;, ret); &#125; else if(ret == 0) &#123; // printf(&quot;è¿˜æœ‰å­è¿›ç¨‹æ´»ç€\\n&quot;); break; &#125; else if(ret == -1) &#123; // æ²¡æœ‰å­è¿›ç¨‹äº† break; &#125; &#125; return ;&#125;int main() &#123; // åˆ›å»ºä¸€äº›å­è¿›ç¨‹ pid_t pid; for(int i = 0; i &lt; 20; i++) &#123; pid = fork(); if(pid == 0) &#123; // å­ break; &#125; &#125; if(pid &gt; 0) &#123; // çˆ¶ // æ•æ‰å­è¿›ç¨‹æ­»äº¡æ—¶å‘é€çš„SIGCHLDä¿¡å· struct sigaction act; act.sa_flags = 0; act.sa_handler = myFun; sigemptyset(&amp;act.sa_mask); sigaction(SIGCHLD, &amp;act, NULL); while(1) &#123; printf(&quot;parent process pid : %d \\n&quot;, getpid()); sleep(2); &#125; &#125; else if(pid == 0) &#123; // å­ printf(&quot;child process pid : %d \\n&quot;, getpid()); &#125; return 0;&#125; sigaction(SIGCHLD, &amp;act, NULL); ä¿¡å·æ•æ‰ ä¿¡å·æ•æ‰è¿˜æ²¡æœ‰å»æ³¨å†ŒæˆåŠŸ å­è¿›ç¨‹å°±ç»“æŸäº† å®Œäº†å†å»ä¿¡å·æ•æ‰ å°±ä¸èƒ½å›æ”¶å­è¿›ç¨‹äº† å›æ”¶æ”¹è¿›12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788/************************************************************************* &gt; File Name: sigchld.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ25æ—¥ æ˜ŸæœŸä¸‰ 17æ—¶19åˆ†37ç§’ ************************************************************************//* * SIGCHLDä¿¡å·äº§ç”Ÿçš„3ä¸ªæ¡ä»¶: * 1.å­è¿›ç¨‹ç»“æŸ * 2.å­è¿›ç¨‹æš‚åœäº† * 3.å­è¿›ç¨‹ç»§ç»­è¿è¡Œ * éƒ½ä¼šç»™çˆ¶è¿›ç¨‹å‘é€è¯¥ä¿¡å·,çˆ¶è¿›ç¨‹é»˜è®¤å¿½ç•¥è¯¥ä¿¡å· * ä½¿ç”¨SIGCHLDä¿¡å·è§£å†³åƒµå°¸è¿›ç¨‹çš„é—®é¢˜ */#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;unistd.h&gt;#include &lt;signal.h&gt;#include &lt;sys/wait.h&gt;void myFun(int num) &#123; printf(&quot;æ•æ‰åˆ°çš„ä¿¡å· : %d\\n&quot;, num); // å›æ”¶å­è¿›ç¨‹PCBçš„èµ„æº /* while(1) &#123; wait(NULL); &#125; */ while(1) &#123; int ret = waitpid(-1, NULL, WNOHANG); if(ret &gt; 0) &#123; printf(&quot;child die , pid = %d\\n&quot;, ret); &#125; else if(ret == 0) &#123; // printf(&quot;è¿˜æœ‰å­è¿›ç¨‹æ´»ç€\\n&quot;); break; &#125; else if(ret == -1) &#123; // æ²¡æœ‰å­è¿›ç¨‹äº† break; &#125; &#125; return ;&#125;int main() &#123; // æå‰è®¾ç½®å¥½é˜»å¡ä¿¡å·é›†, é˜»å¡SIGCHLD,å› ä¸ºæœ‰å¯èƒ½å­è¿›ç¨‹å¾ˆå¿«ç»“æŸ,çˆ¶è¿›ç¨‹è¿˜æ²¡æ³¨å†Œå¥½ä¿¡å·æ•æ‰ sigset_t set; sigemptyset(&amp;set); sigaddset(&amp;set, SIGCHLD); sigprocmask(SIG_BLOCK, &amp;set, NULL); // åˆ›å»ºä¸€äº›å­è¿›ç¨‹ pid_t pid; for(int i = 0; i &lt; 20; i++) &#123; pid = fork(); if(pid == 0) &#123; // å­ break; &#125; &#125; if(pid &gt; 0) &#123; // çˆ¶ // æ•æ‰å­è¿›ç¨‹æ­»äº¡æ—¶å‘é€çš„SIGCHLDä¿¡å· struct sigaction act; act.sa_flags = 0; act.sa_handler = myFun; sigemptyset(&amp;act.sa_mask); sigaction(SIGCHLD, &amp;act, NULL); // æ³¨å†Œå®Œä¿¡å·æ•æ‰ä»¥å,è§£é™¤é˜»å¡ sigprocmask(SIG_UNBLOCK, &amp;set, NULL); while(1) &#123; printf(&quot;parent process pid : %d \\n&quot;, getpid()); sleep(2); &#125; &#125; else if(pid == 0) &#123; // å­ printf(&quot;child process pid : %d \\n&quot;, getpid()); &#125; return 0;&#125;","categories":[{"name":"Linuxå¤šè¿›ç¨‹å¼€å‘","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"[object Object]","slug":"object-Object","permalink":"https://tutouwang.vercel.app/tags/object-Object/"}]},{"title":"å†…å­˜æ˜ å°„","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘/å†…å­˜æ˜ å°„","date":"2022-05-17T03:09:38.000Z","updated":"2022-05-29T08:00:00.311Z","comments":true,"path":"2022/05/17/Linuxå¤šè¿›ç¨‹å¼€å‘/å†…å­˜æ˜ å°„/","link":"","permalink":"https://tutouwang.vercel.app/2022/05/17/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/%E5%86%85%E5%AD%98%E6%98%A0%E5%B0%84/","excerpt":"","text":"å†…å­˜æ˜ å°„å†…å­˜æ˜ å°„(Memory-mapped I&#x2F;O)æ˜¯å°†ç£ç›˜æ–‡ä»¶çš„æ•°æ®æ˜ å°„åˆ°å†…å­˜,ç”¨æˆ·é€šè¿‡ä¿®æ”¹å†…å­˜å°±èƒ½ä¿®æ”¹ç£ç›˜æ–‡ä»¶ çˆ¶å­è¿›ç¨‹é—´é€šä¿¡123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101/************************************************************************* &gt; File Name: mmap-parent-child-ipc.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ15æ—¥ æ˜ŸæœŸæ—¥ 21æ—¶25åˆ†03ç§’ ************************************************************************//* * #include &lt;sys/mman.h&gt; * void *mmap(void *addr, size_t length, int prot, int flags, int fd, off_t offset); * - åŠŸèƒ½: å°†ä¸€ä¸ªæ–‡ä»¶æˆ–è€…è®¾å¤‡çš„æ•°æ®æ˜ å°„åˆ°å†…å­˜ä¸­ * - å‚æ•°: * - void *addr : NULL // ç”±å†…æ ¸æŒ‡å®š * - length : è¦æ˜ å°„çš„æ•°æ®é•¿åº¦, è¿™ä¸ªå€¼ä¸èƒ½ä¸º0,å»ºè®®ä½¿ç”¨æ–‡ä»¶çš„é•¿åº¦ã€‚ * è·å–æ–‡ä»¶é•¿åº¦ : statã€lseek * - prot : å¯¹ç”³è¯·çš„å†…å­˜æ˜  * - PROT_EXEC : å¯æ‰§è¡Œçš„æƒé™ * - PROT_READ : è¯»æƒé™ * - PROT_WRITE : å†™æƒé™ * - PROT_NONE : æ²¡æœ‰æƒé™ * è¦æ“ä½œæ˜ å°„å†…å­˜,å¿…é¡»è¦æœ‰è¯»çš„æƒé™ * PROT_READã€PROT_READ|PROT_WRITE * - flags : * - MAP_SHARED : æ˜ å°„åŒºçš„æ•°æ®ä¼šè‡ªåŠ¨å’Œç£ç›˜æ–‡ä»¶è¿›è¡ŒåŒæ­¥,è¿›ç¨‹é—´é€šä¿¡,å¿… éœ€è¦è®¾ç½®è¿™ä¸ªé€‰é¡¹ * - MAP_PRIVATE : ä¸åŒæ­¥,å†…å­˜æ˜ å°„å™¨çš„æ•°æ®æ”¹å˜äº†,å¯¹åŸçš„æ–‡ä»¶ä¸ä¼šä¿®æ”¹, é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ã€‚(copy on write) * - fd: éœ€è¦æ˜ å°„çš„æ–‡ä»¶æè¿°ç¬¦ * - é€šè¿‡openå¾—åˆ°ï¼Œopençš„æ˜¯ä¸€ä¸ªç£ç›˜æ–‡ä»¶ * - æ³¨æ„: æ–‡ä»¶çš„å¤§å°ä¸èƒ½ä¸º0, openæŒ‡å®šçš„æƒé™ä¸èƒ½å’Œprotå‚æ•°æœ‰å†²çªã€‚ * open åªè¯»/è¯»å†™ prot : PROT_READ(å¿…é¡»æœ‰) * prot : PROT_READ open:åªè¯»/è¯»å†™ (å°äºopençš„æƒé™) * prot : PROT_READ | PROT_WRITE open: åªèƒ½æ˜¯è¯»å†™ * - offset: ä¾¿å®œé‡, ä¸€èˆ¬ä¸ç”¨ã€‚å¿…é¡»æŒ‡å®šçš„æ˜¯4kçš„æ­£æ•°å€ã€‚0è¡¨ç¤ºä¸åç§» * - è¿”å›å€¼: è¿”å›åˆ›å»ºçš„å†…å­˜çš„é¦–åœ°å€ * å¤±è´¥è¿”å›MAP_FAILED, (void *) -1 * int munmap(void *addr, size_t length); * - åŠŸèƒ½: é‡Šæ”¾å†…å­˜æ˜ å°„ * - å‚æ•°: * - addr : è¦é‡Šæ”¾çš„å†…å­˜çš„é¦–åœ°å€ * - length : è¦é‡Šæ”¾çš„å†…å­˜å¤§å°, è¦å’Œ mmap å‡½æ•°ä¸­çš„lengthå‚æ•°çš„å€¼ä¸€æ · * *//* * ä½¿ç”¨å†…å­˜æ˜ å°„å®ç°è¿›ç¨‹é€šä¿¡: * 1.æœ‰å…³ç³»çš„è¿›ç¨‹(çˆ¶å­è¿›ç¨‹) * - è¿˜æœ‰æ²¡æœ‰å­è¿›ç¨‹çš„æ—¶å€™ * - é€šè¿‡å”¯ä¸€çš„çˆ¶è¿›ç¨‹, å…ˆåˆ›å»ºå†…å­˜æ˜ å°„åŒº * - æœ‰äº†å†…å­˜æ˜ å°„åŒºä»¥å, åˆ›å»ºå­è¿›ç¨‹ * - çˆ¶å­è¿›ç¨‹å…±äº«åˆ›å»ºçš„å†…å­˜æ˜ å°„åŒº * * 2.æ²¡æœ‰å…³ç³»çš„è¿›ç¨‹é€šä¿¡ * - å‡†å¤‡ä¸€ä¸ªå¤§å°ä¸æ˜¯0çš„ç£ç›˜æ–‡ä»¶ * - è¿›ç¨‹ 1 é€šè¿‡ç£ç›˜æ–‡ä»¶åˆ›å»ºå†…å­˜æ˜ å°„åŒº * - å¾—åˆ°ä¸€ä¸ªæ“ä½œè¿™å—å†…å­˜çš„æŒ‡é’ˆ * - è¿›ç¨‹ 2 é€šè¿‡ç£ç›˜æ–‡ä»¶åˆ›å»ºå†…å­˜æ˜ å°„åŒº * - å¾—åˆ°ä¸€ä¸ªæ“ä½œè¿™å—å†…å­˜çš„æŒ‡é’ˆ * - ä½¿ç”¨å†…å­˜æ˜ å°„åŒºå®ç°è¿›ç¨‹é€šä¿¡ * æ³¨æ„: å†…å­˜æ˜ å°„åŒºé€šä¿¡,æ˜¯éé˜»å¡çš„ */#include &lt;stdio.h&gt;#include &lt;sys/mman.h&gt;#include &lt;fcntl.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;sys/wait.h&gt;int main() &#123; // 1. æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ int fd = open(&quot;test.txt&quot;, O_RDWR); int size = lseek(fd, 0, SEEK_END); // è·å–æ–‡ä»¶çš„å¤§å° // 2.åˆ›å»ºæ–‡ä»¶ mmap(åœ°å€ã€å¤§å°ã€æƒé™å’Œopenå¯¹åº”èµ·æ¥ã€åŒæ­¥ã€æ–‡ä»¶æè¿°ç¬¦ã€åç§»é‡) void *ptr = mmap(NULL, size, PROT_READ | PROT_WRITE, MAP_SHARED, fd, 0); if(ptr == MAP_FAILED) &#123; perror(&quot;mmap&quot;); exit(0); &#125; // åˆ›å»ºå­è¿›ç¨‹ pid_t pid = fork(); if(pid &gt; 0) &#123; wait(NULL); // çˆ¶è¿›ç¨‹ char buf[64]; strcpy(buf, (char*)ptr); printf(&quot;read data : %s\\n&quot;, buf); &#125; else if(pid == 0)&#123; // å­è¿›ç¨‹ strcpy((char *)ptr, &quot;nihao a, son !!!&quot;); &#125; // å…³é—­å†…å­˜æ˜ å°„åŒº munmap(ptr, size); return 0;&#125; å†…å­˜æ˜ å°„çš„æ³¨æ„äº‹é¡¹ å¦‚æœå¯¹mmapçš„è¿”å›å€¼(ptr)åš++æ“ä½œ(ptr++),munmapæ˜¯å¦èƒ½å¤ŸæˆåŠŸ? â€‹ void *ptr &#x3D; mmap(â€¦) â€‹ ptr++ï¼› å¯ä»¥å¯¹å…¶è¿›è¡Œ++ æ“ä½œ â€‹ ä½†æ˜¯ munmap(ptr, len) &#x2F;&#x2F; é”™è¯¯ï¼Œè¦ä¿å­˜åœ°å€ å¦‚æœopenæ—¶O_RDONLYï¼Œmmapæ—¶protå‚æ•°æŒ‡å®šPROT_READ | PROT_WRITEä¼šæ€æ ·? â€‹ é”™è¯¯,è¿”å›ä¸€ä¸ªå® MAP_FAILED â€‹ open() å‡½æ•°ä¸­çš„æƒé™å»ºè®®å’Œprotå‚æ•°çš„æƒé™ä¿æŒä¸€è‡´ å¦‚æœæ–‡ä»¶åç§»é‡ä¸º1000ä¼šæ€æ ·? åç§»é‡æ˜¯4kçš„æ•´æ•°å€ï¼Œè¿”å› MAP_FAILED mmapä»€ä¹ˆæƒ…å†µä¸‹ä¼šè°ƒç”¨å¤±è´¥? â€‹ - ç¬¬äºŒä¸ªå‚æ•°: length &#x3D; 0 ï¼ˆæ˜ å°„æ•°æ®é•¿åº¦ï¼‰ ä¸èƒ½å†å†…å­˜ä¸­æ˜ å°„ä¸º 0 â€‹ - ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š prot â€‹ åªæŒ‡å®šäº†å†™æƒé™ â€‹ prot PROT_READ | PROT_WRITE â€‹ ç¬¬5ä¸ªå‚æ•°(æ–‡ä»¶æè¿°ç¬¦) fd é€šè¿‡openå‡½æ•°æ—¶æŒ‡å®šçš„ O_RDONLY æˆ–è€… O_WRONLY å¯ä»¥opençš„æ—¶å€™O_CREATä¸€ä¸ªæ–°æ–‡ä»¶æ¥åˆ›å»ºæ˜ å°„åŒºå—? â€‹ å¯ä»¥çš„ï¼Œä½†æ–‡ä»¶çš„å¤§å°å¦‚æœä¸º0çš„è¯ï¼Œè‚¯å®šä¸è¡Œ â€‹ å¯ä»¥å¯¹æ–°çš„æ–‡ä»¶è¿›è¡Œæ‰©å±• â€‹ lseek() â€‹ truncate() mmapåå…³é—­æ–‡ä»¶æè¿°ç¬¦ï¼Œå¯¹mmapæ˜ å°„æœ‰æ²¡æœ‰å½±å“? int fd &#x3D; open(â€œxxxâ€); mmap(â€¦, fd, 0); close(fd); &#x2F;&#x2F; å…³é—­ä¸ä¼šäº§ç”Ÿé—®é¢˜ æ˜ å°„åŒºè¿˜å­˜åœ¨ï¼Œåˆ›å»ºæ˜ å°„åŒºçš„fdè¢«å…³é—­,æ²¡æœ‰ä»»ä½•å½±å“ å¯¹ptrè¶Šç•Œæ“ä½œä¼šæ€æ ·? â€‹ void * ptr &#x3D; mmap(null, 100, â€¦) â€‹ 4k â€‹ è¶Šç•Œæ“ä½œçš„æ˜¯éæ³•çš„å†…å­˜ -&gt; æ®µé”™è¯¯ ä½¿ç”¨å†…å­˜æ˜ å°„å®ç°æ–‡ä»¶æ‹·è´éœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªtest.txt 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172/************************************************************************* &gt; File Name: copy.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ18æ—¥ æ˜ŸæœŸä¸‰ 10æ—¶47åˆ†03ç§’ ************************************************************************//* * æ€è·¯: * 1.å¯¹åŸå§‹çš„æ–‡ä»¶è¿›è¡Œå†…å­˜æ˜ å°„ * 2.åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ (æ‹“å±•è¯¥æ–‡ä»¶) * 3.æŠŠæ–°æ–‡ä»¶çš„æ•°æ®æ˜ å°„è¦å†…å­˜ä¸­ * 4.é€šè¿‡å†…å­˜æ‹·è´å°†ç¬¬ä¸€ä¸ªæ–‡ä»¶çš„å†…å­˜æ•°æ®æ‹·è´åˆ°æ–°çš„æ–‡ä»¶å†…å­˜ä¸­ * 5.é‡Šæ”¾èµ„æº * */#include &lt;stdio.h&gt;#include &lt;sys/mman.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;// ä½¿ç”¨å†…å­˜æ˜ å°„å®ç°æ–‡ä»¶æ‹·è´int main() &#123; // å¯¹åŸå§‹çš„æ–‡ä»¶è¿›è¡Œå†…å­˜æ˜ å°„ int fd = open(&quot;test.txt&quot;, O_RDWR); if(fd == -1) &#123; perror(&quot;open&quot;); exit(-1); &#125; // è·å–åŸå§‹æ–‡ä»¶å¤§å° int len = lseek(fd, 0, SEEK_END); // åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ int fd1 = open(&quot;cpy.txt&quot;, O_RDWR | O_CREAT, 0664); // å¯¹æ–°åˆ›å»ºæ–‡ä»¶è¿›ç¨‹æ‹“å±• truncate(&quot;cpy.txt&quot;, len); write(fd1, &quot; &quot;, 1); // å†…å­˜æ˜ å°„ void *ptr = mmap(NULL, len, PROT_READ| PROT_WRITE, MAP_SHARED, fd, 0); void *ptr1 = mmap(NULL, len, PROT_READ| PROT_WRITE, MAP_SHARED, fd1, 0); if(ptr == MAP_FAILED) &#123; perror(&quot;mmap&quot;); exit(-1); &#125; if(ptr1 == MAP_FAILED) &#123; perror(&quot;mmap&quot;); exit(-1); &#125; // å†…å­˜æ‹·è´ memcpy(ptr1, ptr, len); // é‡Šæ”¾èµ„æº munmap(ptr, len); munmap(ptr1, len); close(fd1); close(fd); return 0;&#125; åŒ¿åæ˜ å°„åªèƒ½åšçˆ¶å­è¿›ç¨‹ä¸­çš„é€šä¿¡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/************************************************************************* &gt; File Name: mmap-anon.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ18æ—¥ æ˜ŸæœŸä¸‰ 13æ—¶10åˆ†14ç§’ ************************************************************************//* * åŒ¿åæ˜ å°„: ä¸éœ€è¦æ–‡ä»¶å®ä½“è¿›ç¨‹ä¸€ä¸ªå†…å­˜æ˜ å°„ */#include &lt;stdio.h&gt;#include &lt;sys/mman.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;#include &lt;sys/wait.h&gt;int main() &#123; // åˆ›å»ºåŒ¿åæ˜ å°„åŒº int len = 4069; void *ptr = mmap(NULL, len, PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANONYMOUS, -1, 0); if(ptr == MAP_FAILED) &#123; perror(&quot;mmap&quot;); exit(-1); &#125; // çˆ¶å­è¿›ç¨‹é—´é€šä¿¡ pid_t pid = fork(); if(pid &gt; 0) &#123; // çˆ¶ strcpy((char *)ptr, &quot;hello&quot;); wait(NULL); &#125; else if(pid == 0) &#123; // å­ sleep(1); printf(&quot;%s\\n&quot;, (char *)ptr); &#125; int ret = munmap(ptr, len); if(ret == -1) &#123; perror(&quot;munmap&quot;); exit(-1); &#125; return 0;&#125;","categories":[{"name":"Linuxå¤šè¿›ç¨‹å¼€å‘","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"ä¸‰è§’å½¢æ±‚é¢ç§¯","slug":"æœ‰è¶£çš„çŸ¥è¯†/ä¸‰è§’å½¢æ±‚é¢ç§¯","date":"2022-05-15T12:08:27.000Z","updated":"2022-05-15T12:27:52.792Z","comments":true,"path":"2022/05/15/æœ‰è¶£çš„çŸ¥è¯†/ä¸‰è§’å½¢æ±‚é¢ç§¯/","link":"","permalink":"https://tutouwang.vercel.app/2022/05/15/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/%E4%B8%89%E8%A7%92%E5%BD%A2%E6%B1%82%E9%9D%A2%E7%A7%AF/","excerpt":"","text":"è¡Œåˆ—å¼ - ç›´è§’åæ ‡å™¨ç»™å®š A(x1, y1) B(x2, y2) C(x3, y3) ä»¥çŸ¥ä¸‰è§’è¡Œ åº•(a) - é«˜(h)$S &#x3D; (a * h ) &#x2F; 2$ æµ·ä¼¦å…¬å¼$p &#x3D; (a + b + c) &#x2F; 2$ $S&#x3D;sqrt[p(p-a)(p-b)(p-c)]$ $&#x3D;sqrt[(1&#x2F;16)(a+b+c)(a+b-c)(a+c-b)(b+c-a)]$ $&#x3D; 1 &#x2F; 4 sqrt [(a+b+c)(a+b-c)(a+c-b)(b+c-a)] $ åˆ©ç”¨æ­£ç„å·²çŸ¥ä¸‰è§’å½¢ä¸¤è¾¹a,b,è¿™ä¸¤è¾¹å¤¹è§’Cï¼Œåˆ™ ï¼Œå³ä¸¤å¤¹è¾¹ä¹‹ç§¯ä¹˜å¤¹è§’æ­£å¼¦å€¼çš„ä¸€åŠã€‚","categories":[],"tags":[{"name":"æœ‰è¶£çš„çŸ¥è¯†","slug":"æœ‰è¶£çš„çŸ¥è¯†","permalink":"https://tutouwang.vercel.app/tags/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/"}]},{"title":"STL_äºŒåˆ†","slug":"STLå‰–æ/STL-äºŒåˆ†","date":"2022-05-06T07:15:03.000Z","updated":"2022-05-06T08:12:33.962Z","comments":true,"path":"2022/05/06/STLå‰–æ/STL-äºŒåˆ†/","link":"","permalink":"https://tutouwang.vercel.app/2022/05/06/STL%E5%89%96%E6%9E%90/STL-%E4%BA%8C%E5%88%86/","excerpt":"","text":"æ•°ç»„æ˜¯å‡åºçš„æƒ…å†µä¾‹ï¼š1 3 5 7 7 10 11 lower_bound(begin, ned, key) â€” å¾—åˆ°ç¬¬ä¸€ä¸ª &gt;&#x3D; key çš„ä¸‹æ ‡ upper_bound(begin, ned, key) â€” å¾—åˆ°ç¬¬ä¸€ä¸ª &gt; key çš„ä¸‹æ ‡ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647/************************************************************************* &gt; File Name: äºŒåˆ†.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´05æœˆ06æ—¥ æ˜ŸæœŸäº” 15æ—¶18åˆ†04ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;algorithm&gt;#include &lt;cstring&gt;using namespace std;int f[] = &#123;1, 3, 5, 7, 7, 10, 11&#125;;void printNumber(int *f, int n) &#123; for(int i = 0; i &lt; n; i++) cout &lt;&lt; f[i] &lt;&lt; &quot; &quot;; cout &lt;&lt; endl; return ;&#125;int main() &#123; int n = sizeof(f) / sizeof(int); printNumber(f, n); int idx = -1; idx = lower_bound(f, f + sizeof(f) / sizeof(int), 7) - f; cout &lt;&lt; &quot;å‡åºæ•°ç»„ - lower_bound - key = 7, idx = &quot; &lt;&lt; idx &lt;&lt; endl; idx = upper_bound(f, f + sizeof(f) / sizeof(int), 7) - f; cout &lt;&lt; &quot;å‡åºæ•°ç»„ - upper_bound - key = 7, idx = &quot; &lt;&lt; idx &lt;&lt; endl; idx = upper_bound(f, f + sizeof(f) / sizeof(int), 12) - f; cout &lt;&lt; &quot;ä¸å­˜åœ¨çš„æƒ…å†µ - å‡åºæ•°ç»„ - upper_bound - key = 100, idx = &quot; &lt;&lt; idx &lt;&lt; endl; /***********************************************************************************************/ sort(f, f + n, greater&lt;int&gt;()); printNumber(f, n); idx = lower_bound(f, f + sizeof(f) / sizeof(int), 7) - f; cout &lt;&lt; &quot;é™åºæ•°ç»„ - lower_bound - key = 7, idx = &quot; &lt;&lt; idx &lt;&lt; endl; idx = upper_bound(f, f + sizeof(f) / sizeof(int), 7) - f; cout &lt;&lt; &quot;é™åºæ•°ç»„ - upper_bound - key = 7, idx = &quot; &lt;&lt; idx &lt;&lt; endl; idx = upper_bound(f, f + sizeof(f) / sizeof(int), 12) - f; cout &lt;&lt; &quot;ä¸å­˜åœ¨çš„æƒ…å†µ - å‡åºæ•°ç»„ - upper_bound - key = 100, idx = &quot; &lt;&lt; idx &lt;&lt; endl; return 0;&#125;","categories":[],"tags":[]},{"title":"åŸºç¡€åšå¼ˆ","slug":"åŸºç¡€ç®—æ³•/åŸºç¡€åšå¼ˆ","date":"2022-05-04T09:22:50.000Z","updated":"2022-05-04T09:23:43.826Z","comments":true,"path":"2022/05/04/åŸºç¡€ç®—æ³•/åŸºç¡€åšå¼ˆ/","link":"","permalink":"https://tutouwang.vercel.app/2022/05/04/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E5%9F%BA%E7%A1%80%E5%8D%9A%E5%BC%88/","excerpt":"","text":"åšå¼ˆè®º1.ç®€ä»‹ åšå¼ˆåšå¼ˆ&#x2F;åšå¼ˆè®ºï¼Œåˆç§°ä¸ºå¯¹ç­–è®ºï¼ˆGame Theoryï¼‰ã€èµ›å±€ç†è®ºç­‰ï¼Œæ—¢æ˜¯ç°ä»£æ•°å­¦çš„ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œä¹Ÿæ˜¯è¿ç­¹å­¦çš„ä¸€ä¸ªé‡è¦å­¦ç§‘ã€‚åšå¼ˆè®ºä¸»è¦ç ”ç©¶å…¬å¼åŒ–äº†çš„æ¿€åŠ±ç»“æ„é—´çš„ç›¸äº’ä½œç”¨ï¼Œæ˜¯ç ”ç©¶å…·æœ‰æ–—äº‰æˆ–ç«äº‰æ€§è´¨ç°è±¡çš„æ•°å­¦ç†è®ºå’Œæ–¹æ³•ï¼Œåšå¼ˆè®ºè€ƒè™‘æ¸¸æˆä¸­çš„ä¸ªä½“çš„é¢„æµ‹è¡Œä¸ºå’Œå®é™…è¡Œä¸ºï¼Œå¹¶ç ”ç©¶å®ƒä»¬çš„ä¼˜åŒ–ç­–ç•¥ã€‚ æ€»è€Œè¨€ä¹‹ï¼Œåšå¼ˆï¼Œå°±æ˜¯ä¸¤æ–¹ï¼ˆæˆ–è€…å¤šæ–¹ï¼‰åœ¨ä¸ºäº†æŸä¸€ç§ç›®æ ‡è¿›è¡Œçš„ç«äº‰ã€‚ åœ¨ç”Ÿæ´»ä¸­ï¼Œåšå¼ˆæ— å¤„ä¸åœ¨ï¼Œå›½ä¸å›½ä¹‹é—´çš„äº¤é”‹å°±æ˜¯ä¸€ç§åšå¼ˆï¼Œåœ¨æ¸¸æˆä¸­ä½ ä¸å¯¹æ‰‹çš„æœ‰æ¥æœ‰å›ä¹Ÿæ˜¯ä¸€ç§åšå¼ˆï¼Œé¢å¯¹è€æ¿æå‡ºåŠ å·¥èµ„çš„éœ€æ±‚åˆä¹Ÿæ˜¯ä¸€ç§åšå¼ˆï¼Œåœ¨åšå¼ˆä¸­ï¼Œé€‰æ‹©å»åšä»€ä¹ˆéå¸¸é‡è¦ï¼Œè¿™ä¹Ÿæ˜¯ååˆ†æœ‰ç ”ç©¶ä»·å€¼çš„ï¼Œä¸€ä¸ªæœ‰è¶£çš„é¢˜å¤–è¯ï¼šä»1994å¹´è¯ºè´å°”ç»æµå­¦å¥–æˆäºˆ3ä½åšå¼ˆè®ºä¸“å®¶å¼€å§‹ï¼Œå…±æœ‰7å±Šçš„è¯ºè´å°”ç»æµå­¦å¥–ä¸åšå¼ˆè®ºçš„ç ”ç©¶æœ‰å…³ã€‚ 2. åŸºç¡€æ¦‚å¿µ å¿…èƒœæ€ï¼šé€šè¿‡æŸä¸€æ­¥å¯ä»¥è½¬ç§»åˆ°å¿…è´¥æ€çš„å±€é¢ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºä¸€ä¸ªå¤„äºå¿…èƒœæ€çš„ç©å®¶ï¼Œä»–æ€»èƒ½æ‰¾åˆ°ä¸€ç§åˆæ³•æ“ä½œï¼Œå°†å½“å‰å±€é¢å˜æˆä¸€ä¸ªå¿…è´¥æ€ç„¶åäº¤ç»™å¯¹æ–¹ï¼Œå¦‚æœä¸­é€”ä¸å‡ºç°æ„å¤–çš„è¯ï¼Œæœ€ç»ˆè‡ªå·±å°±ä¼šå¾—åˆ°èƒœåˆ©ã€‚ä½†æ˜¯å¤„äºå¿…èƒœæ€å¹¶ä¸æ„å‘³ç€ä»»æ„çš„æ“ä½œéƒ½èƒ½å°†å½“å‰å±€é¢å˜æˆå¿…è´¥æ€ã€‚ å¿…è´¥æ€ï¼šé€šè¿‡æŸä¸€æ­¥åªèƒ½è½¬ç§»åˆ°å¿…èƒœæ€çš„å±€é¢ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤„äºå¿…è´¥æ€çš„ç©å®¶æ— è®ºåšä»€ä¹ˆæ“ä½œï¼Œéƒ½åªä¼šå°†å½“å‰çš„å±€é¢å˜æˆå¿…èƒœæ€ï¼Œç„¶åäº¤ç»™å¯¹æ–¹ï¼Œåªè¦å¯¹æ–¹è¶³å¤Ÿèªæ˜ï¼Œé‚£ä¹ˆè¯¥ç©å®¶å°†è¾“æ‰æ¯”èµ›ã€‚ å¯¹äºè¶³å¤Ÿèªæ˜çš„ä¸¤ä¸ªåšå¼ˆè€…æ¥è¯´ï¼Œæ¸¸æˆçš„èƒœè´Ÿåœ¨æ¯”èµ›å‰å°±å·²ç»çŸ¥é“(å½“ç„¶ï¼Œæˆ‘è¿™é‡Œåªæ˜¯è¯´åœ¨é¢˜ç›®é‡Œï¼Œåœ¨ç°å®ä¸­å¦‚æœæ˜¯ç¨å¾®å¤æ‚ä¸€ç‚¹çš„åšå¼ˆæ¸¸æˆï¼Œå•å‡­äººè„‘æ˜¯å¾ˆéš¾è¾¾åˆ°é‚£ç§æ°´å¹³)ï¼Œä¹Ÿå°±æ˜¯è¯´èƒœåˆ©çš„ä¸€æ–¹æ€»èƒ½æ‰¾åˆ°èƒœåˆ©çš„è·¯å¾„ï¼Œè€Œè¾“æ‰çš„é‚£ä¸€æ–¹æ— è®ºæ€æ ·èµ°ï¼Œèƒœåˆ©çš„ä¸€æ–¹éƒ½èƒ½æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´å…ˆåæ‰‹ä»¥åŠèµ·å§‹å±€é¢å¯ä»¥å†³å®šæ•´åœºåšå¼ˆçš„èƒœè´Ÿã€‚ 3.æ€æƒ³åšå¼ˆé—®é¢˜çš„ç‰¹ç‚¹ a) åšå¼ˆæ¨¡å‹ä¸ºä¸¤äººè½®æµå†³ç­–çš„éåˆä½œåšå¼ˆã€‚å³ä¸¤äººè½®æµè¿›è¡Œå†³ç­–ï¼Œå¹¶ä¸”ä¸¤äººéƒ½ä½¿ç”¨æœ€ä¼˜ç­–ç•¥æ¥è·å–èƒœåˆ© b) åšå¼ˆæ˜¯æœ‰é™çš„ã€‚å³æ— è®ºä¸¤äººæ€æ ·å†³ç­–ï¼Œéƒ½ä¼šåœ¨æœ‰é™æ­¥åå†³å‡ºèƒœè´Ÿ c) å…¬å¹³åšå¼ˆã€‚å³ä¸¤äººè¿›è¡Œå†³ç­–æ‰€éµå¾ªçš„è§„åˆ™ç›¸åŒ 4.å­¦ä¹ æ–¹æ³•å…³äºåšå¼ˆè®ºï¼Œæœ€ç†æƒ³çš„å­¦ä¹ æ–¹å¼è¿˜å½“å±ç†Ÿæ‚‰æ¨¡å‹ï¼Œå‡ ç§å¸¸ç”¨çš„åšå¼ˆè®ºæ¨¡å‹æœ‰ï¼šå·´ä»€åšå¼ˆï¼Œå¨ä½å¤«åšå¼ˆï¼Œæ–æ³¢é‚£å¥‘åšå¼ˆï¼Œå°¼å§†åšå¼ˆï¼Œé€šè¿‡ç†è§£æ¨¡å‹ä»¥åŠä»–ä»¬æ¨¡å‹å¯èƒ½äº§ç”Ÿçš„å˜ç§ï¼Œé¢å¯¹å„ç§é¢˜ç›®ä¹Ÿåªæ˜¯â€œæ¢æ±¤ä¸æ¢è¯â€çš„æ€ç»´ã€‚ åœ¨åŸºæœ¬äº†è§£å„ç±»æ¨¡å‹ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹å­¦ä¹ â€œåšå¼ˆæ ‘â€å’Œâ€œå†³ç­–æ ‘â€è¿™ç±»ç®—æ³•ï¼Œä»¥åŠå…¶ä»–ä¸€äº›å¯å‘å¼ç®—æ³•ï¼Œè¿™ä¸äººå·¥æ™ºèƒ½çš„æ€ç»´å¾ˆæ¥è¿‘ï¼Œæ­¤æ—¶ç®—æ³•éš¾åº¦å·²ç»ç›´çº¿ä¸Šå‡ï¼Œåœ¨ç»è¿‡è¿™ä¸ªç“¶é¢ˆä¹‹åï¼Œç­‰å¾…ä½ çš„æ˜¯ä¸€ç‰‡æ˜Ÿè¾°å¤§æµ·ã€‚ å·´ä»€åšå¼ˆ å·´ä»€åšå¼ˆçš„ä¸»è¦å†…å®¹ï¼šåªæœ‰ä¸€å †nä¸ªç‰©å“ï¼Œä¸¤ä¸ªäººè½®æµä»è¿™å †ç‰©å“ä¸­å–ç‰©ï¼Œè§„å®šæ¯æ¬¡è‡³å°‘å–ä¸€ä¸ªï¼Œæœ€å¤šå–mä¸ªã€‚æœ€åå–å…‰è€…å¾—èƒœã€‚å…¶ä¸­å®ƒå¼ºè°ƒçš„æ˜¯åªæœ‰ä¸€å †ç‰©å“ï¼šå–å…‰è€…èƒœ å¦‚æœ n % (m + 1) &#x3D;&#x3D; 0 å…ˆæ‰‹å¿…è´¥ â€‹ n % (m + 1) !&#x3D; 0 å…ˆåå¿…è´¥ ç›¸ä¿¡å¤§å®¶çœ‹è§è¿™ä¸ªä¸€å®šæœ‰å¾ˆå¤šç–‘æƒ‘å°±æ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ªå…¬å¼å°±èƒ½çœ‹åˆ°ç»“å±€ï¼ 1.å¦‚æœå®ƒèƒ½è¢«ï¼ˆm+1ï¼‰æ•´é™¤ï¼Œé‚£ä¹ˆå‡è®¾ä½ å…ˆæ‰‹ å–pä¸ªï¼Œé‚£ä¹ˆå¯¹æ‰‹æ€»èƒ½å–m+1-p ä¸ªï¼ˆå› ä¸º1&lt;&#x3D;p&lt;&#x3D;mï¼Œé‚£ä¹ˆ 1&lt;&#x3D;(m+1-p)&lt;&#x3D;m ä¹Ÿæ»¡è¶³å¯¹æ‰‹æ‰€å–æ•°é‡çš„æ¡ä»¶é™åˆ¶ï¼‰ï¼Œè¿™æ ·ä¸æ–­å¾ªç¯ä¸‹å»ï¼Œæœ€åæ‹¿åˆ°çŸ³å¤´çš„ä¸€å®šæ˜¯å¯¹æ‰‹ã€‚ 2.å¦‚æœå®ƒä¸èƒ½è¢«ï¼ˆm+1ï¼‰æ•´é™¤ï¼Œé‚£ä¹ˆä½ ä¸€å®šå¯ä»¥æ‹¿èµ°é‚£ä¸ªä½™æ•°kï¼ˆk&#x3D;n%(m+1)ï¼‰ è¿™æ ·å¯¹æ‰‹å°±ç›¸å½“äºé¢å¯¹äº† n%ï¼ˆm+1ï¼‰çš„å±€é¢ï¼Œä¹Ÿå°±æ˜¯1çš„æƒ…å†µã€‚ å·´ä»€åšå¼ˆ(ä¾‹é¢˜)å·´ä»€åšå¼ˆ-æ™®é€šhttp://acm.hdu.edu.cn/showproblem.php?pid=1846 123456789101112131415161718#include &lt;iostream&gt;using namespace std;// æœ€å…ˆå–å…‰çŸ³å­çš„ä¸€æ–¹ä¸ºèƒœbool Bash(int n, int m) &#123; return n % (m + 1) != 0 ? 1 : 0; // æ ¸å¿ƒä»£ç &#125;int main() &#123; int t, n, m; // n = ç»„æ•° n = çŸ³å­ä¸ªæ•° m = æ¯å›å–æœ€å¤šä¸ªæ•° cin &gt;&gt; t; for (int i = 0; i &lt; t; i++) &#123; cin &gt;&gt; n &gt;&gt; m; cout &lt;&lt; (Bash(n, m) ? &quot;first&quot; : &quot;second&quot;) &lt;&lt; endl; &#125; return 0;&#125; å·´ä»€åšå¼ˆ-å˜è¡Œhttp://acm.hdu.edu.cn/showproblem.php?pid=4764 12345678910111213#include &lt;iostream&gt;using namespace std;// é¢˜ç›®çš„æ„æ€å°±æ˜¯è°å–åˆ°æœ€åä¸€ä¸ªè°è¾“int main() &#123; int n, m; while (cin &gt;&gt; n &gt;&gt; m) &#123; if (!(n + m)) break; cout &lt;&lt; (((n - 1) % (m + 1)) == 0 ? &quot;Jiang&quot; : &quot;Tang&quot;) &lt;&lt; endl; &#125; return 0;&#125; å°¼å§†åšå¼ˆåœ¨è¯´å°¼å§†åšå¼ˆä¹‹å‰æˆ‘ä»¬éœ€è¦å»äº†è§£ä¸€ä¸ªä»€ä¹ˆå‘¢ï¼ å°±æ˜¯å¼‚æˆ– å¼‚æˆ– è‹±æ–‡åå­— exclusive OR ç¼©å†™ xor æ•°å­¦ç¬¦å· âŠ• è®¡ç®—æœºç¬¦å·æ˜¯ xor ä½†æ˜¯åˆ°åº•å¼‚æˆ–æ€ä¹ˆä½¿ç”¨ æ¯”å¦‚è¯´ 4 ^ 3 4 çš„äºŒè¿›åˆ¶ 1 0 0 3 çš„äºŒè¿›åˆ¶ 0 1 1 xor å¼‚æˆ– 1 1 1 å°±æ˜¯è¯´ä»–ä»¬ç›¸åŒä¸º0ä¸åŒä¸º1,å½“ç„¶åœ¨å…¶ä¸­ä½ åº”è¯¥è¿˜èƒ½çœ‹å‡ºä¸€ä¸ªé—®é¢˜æ˜¯ä»€ä¹ˆå‘¢ï¼ å°±æ˜¯å¤§å®¶å¯ä»¥ç®—ä¸€ä¸‹7çš„äºŒè¿›åˆ¶æ•°æ˜¯ä»€ä¹ˆ 1 1 1 å¯¹å§ï¼ ä»æ­¤é—®é¢˜çœ‹å‡ºä»–ä»¬å¼‚æˆ–çš„ç»“æœå°±ç­‰äºä»–ä»¬ä¸¤ä¸ªæ•°ç›¸åŠ  å¯¹å§ ï¼ï¼! å°±æ˜¯å¼‚æˆ–ä¹Ÿå«åŠåŠ è¿ç®— è¿™é‡Œèƒ½å¤§å®¶å¯ä»¥æ¯”å¦‚å†å»å®éªŒä¸€ä¸ªæ•°æ¯”å¦‚è¯´ 1 ^ 2 &#x3D; ä»€ä¹ˆå¯¹å§ï¼ï¼ï¼ ç°åœ¨è¯´äº†è¿™ä¹ˆå¤šéƒ½æ˜¯ä»€ä¹ˆå¯¹å§ï¼ï¼ï¼ å°±æ˜¯ä¸ºäº†æˆ‘ä»¬ä¹‹åè¦è®²çš„å°¼å§†åšå¼ˆåšçš„ é“ºå«ï¼ ä»€ä¹ˆæ˜¯å°¼å§†åšå¼ˆ æœ‰nå †çŸ³å­ï¼Œä¸¤äººä»æŸä¸€å †å–ä»»æ„å¤šä¸ªï¼Œè§„å®šè‡³å°‘å–èµ°1ä¸ªä¹‹å¤šå¯ä»¥å–èµ°è¿™å †çš„å…¨éƒ¨æœ€åå–å…‰è€…èƒœã€‚ åœ¨è¿™é‡Œå¤§å®¶å°±å¯èƒ½å‘ç°äº†è¿™å’Œåˆšåˆšçš„å·´ä»€åšå¼ˆä¸å·®ä»€ä¹ˆå¯¹å§ï¼ æƒ…å†µ â‘  å½“æœ‰ 1 å †çŸ³å­çš„æ—¶å€™å…ˆæ‰‹å¯ä»¥å…¨éƒ¨å–èµ°ï¼Œå¯¹å§ ï¼Œ ä¹‹åå…ˆæ‰‹èƒœåˆ© æƒ…å†µ â‘¡ å½“æœ‰ 2 å †çŸ³å­æ—¶å€™ æˆ‘ä»¬ä»¤ä¸€å †çŸ³å­ä¸º n å¦ä¸€å † m å‡è®¾ n &gt; m â€”â€“ n &#x3D; 4 â€”- m &#x3D; 3 ä¹‹åå…ˆæ‰‹å…ˆå– å› ä¸ºä¸¤ä¸ªäººéƒ½æ˜¯é¡¶å°–èªæ˜çš„äººéƒ½ä¼šå»å»å§è‡ªå·±åˆ©ç›Šæœ€å¤§åŒ– å°±æ˜¯æˆ‘ä»¬å…ˆå– n - m ä¸ªå‰©ä¸‹çš„æ— è®ºåæ‰‹æ€ä¹ˆå»å–æˆ‘ä»¬éƒ½å’Œåæ‰‹å»å–ç›¸åŒ ä¸ªæ•°çš„çŸ³å­è¿™æ ·æˆ‘ä»¬ä¸€å®šæ˜¯å¿…èƒœå±€ï¼Œ n &#x3D; 4 - &gt; äºŒè¿›åˆ¶ 1 0 0 m &#x3D; 3 - &gt; äºŒè¿›åˆ¶ 0 1 1 xor 1 1 1 3 (4 - 1) 0 1 1 3 0 1 1 xor 0 0 0 æˆ‘ä»¬è®©å¼‚æˆ–ä¸º0ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è®©ä¸¤ä¸ªçŸ³å­æ•°é‡ç›¸å¯¹ ä¹‹åä¸å°±åƒæˆ‘ä»¬ä¹‹å‰è¯´çš„ä¸ç®¡åæ‰‹å–å¤šå°‘æˆ‘ä»¬å…ˆæ‰‹éƒ½æ˜¯å¿…èƒœ æƒ…å†µ â‘¢ å½“æœ‰ 2 å †çŸ³å­æ—¶å€™ æˆ‘ä»¬ä»¤ä¸€å †çŸ³å­ä¸º n å¦ä¸€å † m å‡è®¾ n &#x3D; m â€”â€“ n &#x3D; 4 â€”- m &#x3D; 4 ä»åˆšæ‰ä¸Šå›¾çœ‹å‡ºä¸€ä½†å‡ºç° n &#x3D;&#x3D; m æ—¶å€™æ— è®ºå…ˆæ‰‹æ€ä¹ˆå– åæ‰‹å°±å¯ä»¥å–å’Œå…ˆæ‰‹ç›¸åŒçš„ä¸ªæ•° è¿™æ ·å…ˆæ‰‹å¿…è´¥ ï¼ˆå°±æ˜¯è¯´å› ä¸ºä¸¤ä¸ªéƒ½è¶³å¤Ÿèªæ˜æ‰€æœ‰è¯´å…ˆæ‰‹ä¸€å®šæ˜¯ä»€ä¹ˆæ¯”è´¥å±€ï¼‰ ä¹‹åå’±ä»¬ä¸å¯èƒ½è¯´æ˜¯åªæœ‰2å †æ˜¯å§ å¯èƒ½è¿˜æœ‰ 3 å † ï¼Œ 4 å † ï¼Œ 5 å †ï¼Œ6 å †â€¦..ç­‰ç­‰ æ¯”å¦‚è¯´ï¼ˆ1ï¼Œ 2 ï¼Œ3ï¼‰è¿™ç§æˆ‘ä»¬èƒ½çœ‹å‡º å…ˆæ‰‹å¿…è´¥ 1 äºŒè¿›åˆ¶ 0 0 1 2 äºŒè¿›åˆ¶ 0 1 0 3 äºŒè¿›åˆ¶ 0 1 1 +ï¼ˆxorï¼‰ â€‹ 0 0 0 éšæœºä¸¾ä¾‹ å †æ•° n &#x3D; 5 çŸ³å­ä¸ªæ•° 182 63 59 22 10 å–å…‰è€…èƒœ ç”² å…ˆ ä¹™ å çŸ³å­æ•° 128 64 32 16 8 4 2 1 182 1 0 1 1 0 1 1 0 63 0 0 1 1 1 1 1 1 59 0 0 1 1 1 0 1 1 22 0 0 0 1 0 1 1 0 10 0 0 0 0 1 0 1 0 xor 1 0 1 0 1 1 1 0 ç”² çŸ³å­æ•° 128 64 32 16 8 4 2 1 24 (182 - 128 - 32 - 4 - 2 + 8) 158 0 0 0 1 1 0 0 0 63 0 0 1 1 1 1 1 1 59 0 0 1 1 1 0 1 1 22 0 0 0 1 0 1 1 0 10 0 0 0 0 1 0 1 0 xor 0 0 0 0 0 0 0 0 ä¹™ çŸ³å­æ•° 128 64 32 16 8 4 2 1 24 0 0 0 1 1 0 0 0 31 (63 - 32) 0 0 0 1 1 1 1 1 59 0 0 1 1 1 0 1 1 22 0 0 0 1 0 1 1 0 10 0 0 0 0 1 0 1 0 xor 0 0 1 0 0 0 0 0 ç”² çŸ³å­æ•° 128 64 32 16 8 4 2 1 24 0 0 0 1 1 0 0 0 31 0 0 0 1 1 1 1 1 27 (59 - 32) 0 0 0 1 1 0 1 1 22 0 0 0 1 0 1 1 0 10 0 0 0 0 1 0 1 0 xor 0 0 0 0 0 0 0 0 ç»è¿‡å‡ æ¬¡åä¸€å®šä¼šå¾—åˆ°æƒ…å†µâ‘¡ å°¼å§†åšå¼ˆ-ä»£ç æ¨¡æ¿12345678910111213141516#include &lt;iostream&gt;using namespace std;int main() &#123; int n, t = 0; // n = å †æ•° cin &gt;&gt; n; while (n--) &#123; int d; cin &gt;&gt; d; t ^= d; &#125; if (t == 0) cout &lt;&lt; &quot;å…ˆæ‰‹å¿…è¾“&quot;; else cout &lt;&lt; &quot;å…ˆæ‰‹å¿…èƒœ&quot;; return 0;&#125;","categories":[{"name":"åŸºç¡€ç®—æ³•","slug":"åŸºç¡€ç®—æ³•","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/"}],"tags":[]},{"title":"è¿›ç¨‹é—´é€šä¿¡-IPC","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘/è¿›ç¨‹é—´é€šä¿¡","date":"2022-04-17T11:15:03.000Z","updated":"2022-05-29T08:00:30.022Z","comments":true,"path":"2022/04/17/Linuxå¤šè¿›ç¨‹å¼€å‘/è¿›ç¨‹é—´é€šä¿¡/","link":"","permalink":"https://tutouwang.vercel.app/2022/04/17/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1/","excerpt":"","text":"è¿›ç¨‹é—´é€šè®¯çš„æ¦‚å¿µè¿›ç¨‹æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„èµ„æºåˆ†é…å•å…ƒï¼Œä¸åŒè¿›ç¨‹ï¼ˆè¿™é‡Œæ‰€è¯´çš„è¿›ç¨‹é€šå¸¸æŒ‡çš„æ˜¯ç”¨æˆ·è¿›ç¨‹)ä¹‹é—´çš„èµ„æºæ˜¯ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰å…³è”ï¼Œä¸èƒ½åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­ç›´æ¥è®¿é—®å¦ä¸€ä¸ªè¿›ç¨‹çš„èµ„æºã€‚ ä½†æ˜¯ï¼Œè¿›ç¨‹ä¸æ˜¯å­¤ç«‹çš„ï¼Œä¸åŒçš„è¿›ç¨‹éœ€è¦è¿›è¡Œä¿¡æ¯çš„äº¤äº’å’ŒçŠ¶æ€çš„ä¼ é€’ç­‰ï¼Œå› æ­¤éœ€è¦è¿›ç¨‹é—´é€šä¿¡(IPC: Inter Processes Communication )ã€‚ GUIï¼šç”¨æˆ·å›¾åƒæ¥å£ IDEï¼šé›†æˆå¼€å‘ç¯å¢ƒ APIï¼šåº”ç”¨ç¨‹åºæ¥å£ è¿›ç¨‹é—´é€šä¿¡çš„ç›®çš„ï¼š æ•°æ®ä¼ è¾“:ä¸€ä¸ªè¿›ç¨‹éœ€è¦å°†å®ƒçš„æ•°æ®å‘é€ç»™å¦ä¸€ä¸ªè¿›ç¨‹ã€‚ é€šçŸ¥äº‹ä»¶:ä¸€ä¸ªè¿›ç¨‹éœ€è¦å‘å¦ä¸€ä¸ªæˆ–ä¸€ç»„è¿›ç¨‹å‘é€æ¶ˆæ¯ï¼Œé€šçŸ¥å®ƒï¼ˆå®ƒä»¬ï¼‰å‘ç”Ÿäº†æŸç§äº‹ä»¶ï¼ˆå¦‚è¿›ç¨‹ç»ˆæ­¢æ—¶è¦é€šçŸ¥çˆ¶è¿›ç¨‹)ã€‚ èµ„æºå…±äº«:å¤šä¸ªè¿›ç¨‹ä¹‹é—´å…±äº«åŒæ ·çš„èµ„æºã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œéœ€è¦å†…æ ¸æä¾›äº’æ–¥å’ŒåŒæ­¥æœºåˆ¶ã€‚ (åŒæ­¥(å°±æ˜¯æ’é˜Ÿçœ‹ç—… - å®‰å…¨)ã€å¼‚æ­¥(ä¸€ä¸ªåŒ»ç”Ÿä¸€èµ·çœ‹å¤šä¸ªç—…äºº - ä¸å®‰å…¨)) è¿›ç¨‹æ§åˆ¶:æœ‰äº›è¿›ç¨‹å¸Œæœ›å®Œå…¨æ§åˆ¶å¦ä¸€ä¸ªè¿›ç¨‹çš„æ‰§è¡Œï¼ˆå¦‚Debug è¿›ç¨‹)ï¼Œæ­¤æ—¶æ§åˆ¶è¿›ç¨‹å¸Œæœ›èƒ½å¤Ÿæ‹¦æˆªå¦ä¸€ä¸ªè¿›ç¨‹çš„æ‰€æœ‰é™·å…¥å’Œå¼‚å¸¸ï¼Œå¹¶èƒ½å¤ŸåŠæ—¶çŸ¥é“å®ƒçš„çŠ¶æ€æ”¹å˜ã€‚ Linuxè¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼ åŒ¿åç®¡é“ç®¡é“ä¹Ÿå«æ— åï¼ˆåŒ¿åï¼‰ç®¡é“ï¼Œå®ƒæ˜¯æ˜¯UNIXç³»ç»ŸIPC(è¿›ç¨‹é—´é€šä¿¡)çš„æœ€å¤è€å½¢å¼,æ‰€æœ‰çš„UNIXç³»ç»Ÿéƒ½æ”¯æŒè¿™ç§é€šä¿¡æœºåˆ¶ã€‚ ç»Ÿè®¡ä¸€ä¸ªç›®å½•ä¸­æ–‡ä»¶çš„æ•°ç›®å‘½ä»¤: ls | wc -lï¼Œä¸ºäº†æ‰§è¡Œè¯¥å‘½ä»¤, shellåˆ›å»ºäº†ä¸¤ä¸ªè¿›ç¨‹æ¥åˆ†åˆ«æ‰§è¡Œ ls å’Œ wcã€‚ ç®¡é“ç‰¹ç‚¹ åŒ¿åç®¡é“ - æœ‰åç®¡é“ å…±åŒç‰¹ç‚¹ç®¡é“å…¶å®æ˜¯ä¸€ä¸ªåœ¨å†…æ ¸&#39;å†…å­˜ä¸­&#39;é€šè¿‡ç®¡é“ä¼ é€’çš„æ•°æ®æ˜¯é¡ºåºçš„ï¼Œä»ç®¡é“ä¸­è¯»å–å‡ºæ¥çš„å­—èŠ‚çš„é¡ºåºå’Œå®ƒä»¬è¢«å†™å…¥ç®¡é“çš„é¡ºåºæ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚çš„ç¼“å†²å™¨ï¼Œè¿™ä¸ªç¼“å†²å™¨çš„å­˜å‚¨èƒ½åŠ›æ˜¯æœ‰é™çš„ï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿå¤§å°ä¸ä¸€å®šç›¸åŒã€‚ ç®¡é“æ‹¥æœ‰æ–‡ä»¶çš„ç‰¹è´¨:è¯»æ“ä½œã€å†™æ“ä½œï¼ŒåŒ¿åç®¡é“æ²¡æœ‰æ–‡ä»¶å®ä½“(æœ‰å…³ç³»çš„è¿›ç¨‹ çˆ¶è¿›ç¨‹ - å­è¿›ç¨‹ - å­™å­è¿›ç¨‹)ï¼Œæœ‰åç®¡é“æœ‰æ–‡ä»¶å®ä½“(æ²¡æœ‰å…³ç³»çš„è¿›ç¨‹),ä½†ä¸å­˜å‚¨æ•°æ®ã€‚å¯ä»¥æŒ‰ç…§æ“ä½œæ–‡ä»¶çš„æ–¹å¼å¯¹ç®¡é“è¿›è¡Œæ“ä½œã€‚ ä¸€ä¸ªç®¡é“æ˜¯ä¸€ä¸ªå­—èŠ‚æµ(ä¸€ä¸ªå­—èŠ‚ ä¸€ä¸ªå­—èŠ‚ åœ¨ç®¡é“é‡Œé¢)ï¼Œä½¿ç”¨ç®¡é“æ—¶ä¸å­˜åœ¨æ¶ˆæ¯æˆ–è€…æ¶ˆæ¯è¾¹ç•Œçš„æ¦‚å¿µï¼Œä»ç®¡é“è¯»å–æ•°æ®çš„è¿›ç¨‹å¯ä»¥è¯»å–ä»»æ„å¤§å°çš„æ•°æ®å—ï¼Œè€Œä¸ç®¡å†™å…¥è¿›ç¨‹å†™å…¥ç®¡é“çš„æ•°æ®å—çš„å¤§å°æ˜¯å¤šå°‘ã€‚ é€šè¿‡ç®¡é“ä¼ é€’çš„æ•°æ®æ˜¯é¡ºåºçš„ï¼Œä»ç®¡é“ä¸­è¯»å–å‡ºæ¥çš„å­—èŠ‚çš„é¡ºåºå’Œå®ƒä»¬è¢«å†™å…¥ç®¡é“çš„é¡ºåºæ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚ åœ¨ç®¡é“ä¸­çš„æ•°æ®çš„ä¼ é€’æ–¹å‘æ˜¯å•å‘çš„ï¼Œä¸€ç«¯ç”¨äºå†™å…¥ï¼Œä¸€ç«¯ç”¨äºè¯»å–ï¼Œç®¡é“æ˜¯åŠåŒå·¥çš„ã€‚ å•å·¥(é¥æ§å™¨å‘å°„ä¿¡å·ç»™ç”µè§†æœº ä½†æ˜¯ç”µè§†æœºä¸èƒ½ç»™é¥æ§å™¨å‘å°„ä¿¡å· è¿™å°±æ˜¯å•å·¥) åŒå·¥(æ‰“ç”µè¯ 1ç»™2æ‰“ç”µè¯ 1 è¯´ äºŒå¯ä»¥å¬åˆ°ã€2è¯´ 1å¯ä»¥å¬åˆ° åŒæ—¶) åŠåŒå·¥(åŒä¸€æ—¶é—´åªèƒ½ä¸€ä¸ªæ–¹å‘å°±å¥½æ¯”é‚£æ”¾å­¦ éƒ½å¾€å‡ºèµ°ä½ å°±è¿›ä¸å»(å½“ç„¶å•Š é™¤éä½ ä¸è¦å‘½çš„ç¡¬æŒ¤è¿›å»ï¼ï¼ï¼) å½“å‡ºæ¥çš„éƒ½èµ°å®Œäº†è¿›çš„åœ¨å¾€é‡Œè¿›) ä»ç®¡é“è¯»æ•°æ®æ˜¯ä¸€æ¬¡æ€§æ“ä½œï¼Œæ•°æ®ä¸€æ—¦è¢«è¯»èµ°ï¼Œå®ƒå°±ä»ç®¡é“ä¸­è¢«æŠ›å¼ƒï¼Œé‡Šæ”¾ç©ºé—´ä»¥ä¾¿å†™æ›´å¤šçš„æ•°æ®ï¼åœ¨ç®¡é“ä¸­æ— æ³•ä½¿ç”¨lseek ()æ¥éšæœºçš„è®¿é—®æ•°æ®ã€‚ åŒ¿åç®¡é“åªèƒ½åœ¨å…·æœ‰å…¬å…±ç¥–å…ˆçš„è¿›ç¨‹ï¼ˆçˆ¶è¿›ç¨‹ä¸å­è¿›ç¨‹ï¼Œæˆ–è€…ä¸¤ä¸ªå…„å¼Ÿè¿›ç¨‹ï¼Œå…·æœ‰äº²ç¼˜å…³ç³»ï¼‰ä¹‹é—´ä½¿ç”¨ ä¸ºä»€ä¹ˆå¯ä»¥ä½¿ç”¨ç®¡é“è¿›è¡Œè¿›ç¨‹é€šä¿¡ ç®¡é“(çº¢è‰²é•¿æ–¹ä½“) å·¦ä¾§è¯» å³ä¾§å†™ çˆ¶ - å­ è¿›ç¨‹ ç®¡é“çš„æ•°æ®ç»“æ„ åŒ¿åç®¡é“çš„ä½¿ç”¨ åˆ›å»ºåŒ¿åç®¡é“ 12#include &lt;unistd.h&gt;int pipe(int pipefd[2]); æŸ¥çœ‹ç®¡é“ç¼“å†²å¤§å°å‘½ä»¤ 1ulimit -a æŸ¥çœ‹ç®¡é“ç¼“å†²å¤§å°å‡½æ•° 123#include &lt;unistd.h&gt;long fpathconf(int fd, int name); ä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556/************************************************************************* &gt; File Name: pipe.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ18æ—¥ æ˜ŸæœŸä¸€ 19æ—¶08åˆ†03ç§’ ************************************************************************//* * #include &lt;unistd.h&gt; * int pipe(int pipefd[2]); * åŠŸèƒ½: åˆ›å»ºä¸€ä¸ªåŒ¿åç®¡é“, ç”¨æ¥è¿›ç¨‹é—´é€šä¿¡ * å‚æ•°: int pipefd[2] è¿™ä¸ªæ•°ç»„æ˜¯ä¸€ä¸ªä¼ å‡ºå‚æ•°ã€‚ * - pipefd[0] : å¯¹åº”ç®¡é“çš„è¯»ç«¯ * - pipefd[1] : å¯¹åº”ç®¡é“çš„å†™ç«¯ * è¿”å›å€¼: * æˆåŠŸè¿”å› 0 * å¤±è´¥è¿”å› -1 * æ³¨æ„: åŒ¿åç®¡é“åªèƒ½ç”¨äºå…·æœ‰å…³ç³»çš„è¿›ç¨‹ä¹‹é—´é€šä¿¡ (çˆ¶å­è¿›ç¨‹, å…„å¼Ÿè¿›ç¨‹, å­™å­è¿›ç¨‹) * */#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;#include &lt;sys/types.h&gt;// å­è¿›ç¨‹å‘é€æ•°æ®ç»™çˆ¶è¿›ç¨‹, çˆ¶è¿›ç¨‹è¯»å–åˆ°æ•°æ®è¾“å‡ºint main() &#123; // å† fork ä¹‹å‰åˆ›å»ºç®¡é“ int pipefd[2]; int ret = pipe(pipefd); if(ret == -1) &#123; perror(&quot;pipe&quot;); exit(0); &#125; // åˆ›å»ºå­è¿›ç¨‹ pid_t pid = fork(); if(pid &gt; 0) &#123; // çˆ¶è¿›ç¨‹ // ä»ç®¡é“çš„è¯»å–ç«¯è¯»å–æ•°æ® char buf[1024] = &#123;0&#125;; int len = read(pipefd[0], buf, sizeof(buf)); printf(&quot;parent revc : %s, pid : %d\\n&quot;, buf, getpid()); &#125; else if(pid == 0)&#123; // å­è¿›ç¨‹ char *str = &quot;hello,i am child&quot;; write(pipefd[1], str, strlen(str)); &#125; return 0;&#125; å…ˆçŒœæƒ³: å¦‚æœå­è¿›ç¨‹å†™å…¥å‰ sleep(10) å ä¸­ç«¯è¾“å‡ºä»€ä¹ˆï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758/************************************************************************* &gt; File Name: pipe.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ18æ—¥ æ˜ŸæœŸä¸€ 19æ—¶08åˆ†03ç§’ ************************************************************************//* * #include &lt;unistd.h&gt; * int pipe(int pipefd[2]); * åŠŸèƒ½: åˆ›å»ºä¸€ä¸ªåŒ¿åç®¡é“, ç”¨æ¥è¿›ç¨‹é—´é€šä¿¡ * å‚æ•°: int pipefd[2] è¿™ä¸ªæ•°ç»„æ˜¯ä¸€ä¸ªä¼ å‡ºå‚æ•°ã€‚ * - pipefd[0] : å¯¹åº”ç®¡é“çš„è¯»ç«¯ * - pipefd[1] : å¯¹åº”ç®¡é“çš„å†™ç«¯ * è¿”å›å€¼: * æˆåŠŸè¿”å› 0 * å¤±è´¥è¿”å› -1 * æ³¨æ„: åŒ¿åç®¡é“åªèƒ½ç”¨äºå…·æœ‰å…³ç³»çš„è¿›ç¨‹ä¹‹é—´é€šä¿¡ (çˆ¶å­è¿›ç¨‹, å…„å¼Ÿè¿›ç¨‹, å­™å­è¿›ç¨‹) * ç®¡é“é»˜è®¤æ˜¯é˜»å¡çš„, å¦‚æœç®¡é“ä¸­æ²¡æœ‰æ•°æ®, readé˜»å¡, å¦‚æœç®¡é“æ»¡äº†, writeé˜»å¡ * */#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;#include &lt;sys/types.h&gt;// å­è¿›ç¨‹å‘é€æ•°æ®ç»™çˆ¶è¿›ç¨‹, çˆ¶è¿›ç¨‹è¯»å–åˆ°æ•°æ®è¾“å‡ºint main() &#123; // å† fork ä¹‹å‰åˆ›å»ºç®¡é“ int pipefd[2]; int ret = pipe(pipefd); if(ret == -1) &#123; perror(&quot;pipe&quot;); exit(0); &#125; // åˆ›å»ºå­è¿›ç¨‹ pid_t pid = fork(); if(pid &gt; 0) &#123; // çˆ¶è¿›ç¨‹ // ä»ç®¡é“çš„è¯»å–ç«¯è¯»å–æ•°æ® char buf[1024] = &#123;0&#125;; int len = read(pipefd[0], buf, sizeof(buf)); printf(&quot;parent revc : %s, pid : %d\\n&quot;, buf, getpid()); &#125; else if(pid == 0)&#123; // å­è¿›ç¨‹ sleep(10); char *str = &quot;hello,i am child&quot;; write(pipefd[1], str, strlen(str)); &#125; return 0;&#125; å¤šæ¬¡å†™å…¥ è¯»å–1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980/************************************************************************* &gt; File Name: pipe.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ18æ—¥ æ˜ŸæœŸä¸€ 19æ—¶08åˆ†03ç§’ ************************************************************************//* * #include &lt;unistd.h&gt; * int pipe(int pipefd[2]); * åŠŸèƒ½: åˆ›å»ºä¸€ä¸ªåŒ¿åç®¡é“, ç”¨æ¥è¿›ç¨‹é—´é€šä¿¡ * å‚æ•°: int pipefd[2] è¿™ä¸ªæ•°ç»„æ˜¯ä¸€ä¸ªä¼ å‡ºå‚æ•°ã€‚ * - pipefd[0] : å¯¹åº”ç®¡é“çš„è¯»ç«¯ * - pipefd[1] : å¯¹åº”ç®¡é“çš„å†™ç«¯ * è¿”å›å€¼: * æˆåŠŸè¿”å› 0 * å¤±è´¥è¿”å› -1 * æ³¨æ„: åŒ¿åç®¡é“åªèƒ½ç”¨äºå…·æœ‰å…³ç³»çš„è¿›ç¨‹ä¹‹é—´é€šä¿¡ (çˆ¶å­è¿›ç¨‹, å…„å¼Ÿè¿›ç¨‹, å­™å­è¿›ç¨‹) * ç®¡é“é»˜è®¤æ˜¯é˜»å¡çš„, å¦‚æœç®¡é“ä¸­æ²¡æœ‰æ•°æ®, readé˜»å¡, å¦‚æœç®¡é“æ»¡äº†, writeé˜»å¡ * */#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;#include &lt;sys/types.h&gt;// å­è¿›ç¨‹å‘é€æ•°æ®ç»™çˆ¶è¿›ç¨‹, çˆ¶è¿›ç¨‹è¯»å–åˆ°æ•°æ®è¾“å‡ºint main() &#123; // å† fork ä¹‹å‰åˆ›å»ºç®¡é“ int pipefd[2]; int ret = pipe(pipefd); if(ret == -1) &#123; perror(&quot;pipe&quot;); exit(0); &#125; // åˆ›å»ºå­è¿›ç¨‹ pid_t pid = fork(); if(pid &gt; 0) &#123; // çˆ¶è¿›ç¨‹ // ä»ç®¡é“çš„è¯»å–ç«¯è¯»å–æ•°æ® printf(&quot;i am parent process, pid : %d\\n&quot;, getpid()); char buf[1024] = &#123;0&#125;; // å…³é—­å†™ç«¯ close(pipefd[1]); while(1) &#123; int len = read(pipefd[0], buf, sizeof(buf)); printf(&quot;parent revc : %s, pid : %d\\n&quot;, buf, getpid()); // char *str = &quot;i am parent&quot;; // write(pipefd[1], str, strlen(str)); // sleep(1); &#125; &#125; else if(pid == 0)&#123; // å­è¿›ç¨‹ printf(&quot;i am child process, pid : %d\\n&quot;, getpid()); char buf[1024]; // å…³é—­è¯»ç«¯ close(pipefd[0]); while(1) &#123; char *str = &quot;hello,i am child&quot;; write(pipefd[1], str, strlen(str)); // sleep(1); int len = read(pipefd[0], buf, sizeof(buf)); printf(&quot;pa child recv : %s, pid : %d\\n&quot;, buf, getpid()); bsize(buf, 1024); &#125; &#125; return 0;&#125; &#x2F;&#x2F; å‘å®Œæ•°æ®è¿˜æ²¡æœ‰æ•°å­—æ²¡æ¸…ç©º ps: å¦‚æœæ³¨é‡Šæ‰ sleep() å°±ä¼šå‘ç°é—®é¢˜ï¼å°±æ˜¯è‡ªå·±å†™çš„ä¼šè‡ªå·±è¯»å›å» å½“ç„¶åœ¨é¡¹ç›®ä¸­ä¸ä¼šå‡ºç°è¿™ç§æƒ…å†µ é¡¹ç›®ä¸­åªä¼šä¸€ç«¯è¯»ä¸€ç«¯å†™ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980/************************************************************************* &gt; File Name: pipe.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ18æ—¥ æ˜ŸæœŸä¸€ 19æ—¶08åˆ†03ç§’ ************************************************************************//* * #include &lt;unistd.h&gt; * int pipe(int pipefd[2]); * åŠŸèƒ½: åˆ›å»ºä¸€ä¸ªåŒ¿åç®¡é“, ç”¨æ¥è¿›ç¨‹é—´é€šä¿¡ * å‚æ•°: int pipefd[2] è¿™ä¸ªæ•°ç»„æ˜¯ä¸€ä¸ªä¼ å‡ºå‚æ•°ã€‚ * - pipefd[0] : å¯¹åº”ç®¡é“çš„è¯»ç«¯ * - pipefd[1] : å¯¹åº”ç®¡é“çš„å†™ç«¯ * è¿”å›å€¼: * æˆåŠŸè¿”å› 0 * å¤±è´¥è¿”å› -1 * æ³¨æ„: åŒ¿åç®¡é“åªèƒ½ç”¨äºå…·æœ‰å…³ç³»çš„è¿›ç¨‹ä¹‹é—´é€šä¿¡ (çˆ¶å­è¿›ç¨‹, å…„å¼Ÿè¿›ç¨‹, å­™å­è¿›ç¨‹) * ç®¡é“é»˜è®¤æ˜¯é˜»å¡çš„, å¦‚æœç®¡é“ä¸­æ²¡æœ‰æ•°æ®, readé˜»å¡, å¦‚æœç®¡é“æ»¡äº†, writeé˜»å¡ * */#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;#include &lt;sys/types.h&gt;// å­è¿›ç¨‹å‘é€æ•°æ®ç»™çˆ¶è¿›ç¨‹, çˆ¶è¿›ç¨‹è¯»å–åˆ°æ•°æ®è¾“å‡ºint main() &#123; // å† fork ä¹‹å‰åˆ›å»ºç®¡é“ int pipefd[2]; int ret = pipe(pipefd); if(ret == -1) &#123; perror(&quot;pipe&quot;); exit(0); &#125; // åˆ›å»ºå­è¿›ç¨‹ pid_t pid = fork(); if(pid &gt; 0) &#123; // çˆ¶è¿›ç¨‹ // ä»ç®¡é“çš„è¯»å–ç«¯è¯»å–æ•°æ® printf(&quot;i am parent process, pid : %d\\n&quot;, getpid()); char buf[1024] = &#123;0&#125;; while(1) &#123; int len = read(pipefd[0], buf, sizeof(buf)); printf(&quot;parent revc : %s, pid : %d\\n&quot;, buf, getpid()); char *str = &quot;i am parent&quot;; write(pipefd[1], str, strlen(str)); sleep(1); &#125; &#125; else if(pid == 0)&#123; // å­è¿›ç¨‹ printf(&quot;i am child process, pid : %d\\n&quot;, getpid()); char buf[1024]; // å…³é—­è¯»ç«¯ close(pipefd[0]); while(1) &#123; char *str = &quot;hello,i am child&quot;; write(pipefd[1], str, strlen(str)); sleep(1); // int len = read(pipefd[0], buf, sizeof(buf)); // printf(&quot;pa child recv : %s, pid : %d\\n&quot;, buf, getpid()); // bsize(buf, 1024); &#125; &#125; return 0;&#125; æŸ¥çœ‹ç®¡é“å¤§å° ulimit -a 1234567891011121314151617181920212223/************************************************************************* &gt; File Name: fpathconfig.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ19æ—¥ æ˜ŸæœŸäºŒ 19æ—¶05åˆ†50ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;int main() &#123; int pipefd[2]; int ret = pipe(pipefd); // è·å–ç®¡é“çš„å¤§å° å¯ä»¥æŸ¥çœ‹manæ‰‹å†Œæ¥æŸ¥çœ‹å®å€¼ long size = fpathconf(pipefd[0], _PC_PIPE_BUF); printf(&quot;pipe size : %ld&quot;, size); return 0;&#125; åŒ¿åç®¡é“ - æ¡ˆä¾‹ls | wc -l - ps aux | grep 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768/************************************************************************* &gt; File Name: parent-child-ipc.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ20æ—¥ æ˜ŸæœŸä¸‰ 09æ—¶21åˆ†59ç§’ ************************************************************************//* * å®ç° ps aux | grep xxx çˆ¶å­è¿›ç¨‹é€šä¿¡ * å­è¿›ç¨‹: ps aux, å­è¿›ç¨‹ç»“æŸå, å°†æ•°æ®å‘é€ç»™çˆ¶è¿›ç¨‹ * çˆ¶è¿›ç¨‹: è·å–åˆ°æ•°æ®, è¿‡æ»¤ * * pipe() * execlp() -&gt; ps aux ä¼šè¾“å‡ºåˆ°ç»ˆç«¯ * å­è¿›ç¨‹å°†æ ‡å‡†è¾“å‡º stdout_fileno é‡å®šå‘ç®¡é“çš„å†™ç«¯ dup2 */#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/wait.h&gt;int main() &#123; // åˆ›å»ºä¸€ä¸ªç®¡é“ int fd[2]; int ret = pipe(fd); if(ret == -1) &#123; perror(&quot;pipe&quot;); exit(0); &#125; // åˆ›å»ºå­è¿›ç¨‹ pid_t pid = fork(); if(pid &gt; 0) &#123; // çˆ¶è¿›ç¨‹ // å…³é—­å†™ç«¯ close(fd[1]); // ä»ç®¡é“ä¸­è¯»å–æ•°æ® char buf[1024]; int len = -1; while((len = read(fd[0], buf, sizeof(buf) - 1)) &gt; 0) &#123; // å› ä¸ºæ¯æ¬¡æœ€å¤šåªèƒ½è¯»å– 1024 æ‰€ä»¥éœ€è¦å¾ªç¯ // è¿‡æ»¤æ•°æ® printf(&quot;%s&quot;, buf); memset(buf, 0, sizeof(buf)); &#125; wait(NULL); &#125; else if(pid == 0) &#123; // å­è¿›ç¨‹ // å…³é—­è¯»ç«¯ close(fd[0]); // æ–‡ä»¶æè¿°ç¬¦çš„é‡å®šå‘ stdout_fileno -&gt; fd[1]; // æ‰§è¡Œ ps aux dup2(fd[1], STDOUT_FILENO); execlp(&quot;ps&quot;, &quot;ps&quot;, &quot;aux&quot;, NULL); perror(&quot;execlp&quot;); exit(0); &#125; else &#123; perror(&quot;fork&quot;); exit(0); &#125; return 0;&#125; ç®¡é“çš„è¯»å†™ç‰¹ç‚¹ä½¿ç”¨ç®¡é“æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç§ç‰¹æ®Šçš„æƒ…å†µï¼ˆå‡è®¾éƒ½æ˜¯I/Oæ“ä½œï¼‰ æ‰€æœ‰çš„æŒ‡å‘ç®¡é“å†™ç«¯æ–‡ä»¶æè¿°ç¬¦éƒ½å…³é—­äº† (ç®¡é“å†™ç«¯å¼•ç”¨è®¡æ•°ä¸º0)ï¼Œè¿›ç¨‹ä»ç®¡é“çš„è¯»ç«¯è¯»æ•°æ®ï¼Œé‚£ä¹ˆç®¡é“ä¸­å‰©ä½™çš„æ•°æ®è¢«è¯»å–ä»¥åï¼Œå†æ¬¡readä¼šè¿”å›0ï¼Œå°±åƒè¯»åˆ°æ–‡ä»¶æœ«å°¾ä¸€æ · å¦‚æœæœ‰æŒ‡å‘ç®¡é“çš„å†™ç«¯çš„æ–‡ä»¶æè¿°ç¬¦æ²¡æœ‰å…³é—­ï¼ˆç®¡é“çš„å†™ç«¯å¼•ç”¨è®¡æ•°å¤§äº0ï¼‰ï¼Œè€ŒæŒæœ‰ç®¡é“å†™ç«¯çš„ä¹Ÿæ²¡æœ‰å¾€ç®¡é“ä¸­å†™æ•°æ®ï¼Œè¿™ä¸ªæ—¶å€™æœ‰è¿›ç¨‹ä»ç®¡é“ä¸­è¯»å–æ•°æ®ï¼Œé‚£ä¹ˆç®¡é“ä¸­å‰©ä½™çš„æ•°æ®è¢«è¯»å–åï¼Œå†æ¬¡readä¼šé˜»å¡ï¼Œå€¼åˆ°ç®¡é“ä¸­æœ‰æ•°æ®å¯ä»¥è¯»äº†æ‰è¯»å–æ•°æ®å¹¶è¿”å›ã€‚ å¦‚æœæ‰€æœ‰æŒ‡å‘ç®¡é“çš„è¯»ç«¯çš„æ–‡ä»¶æè¿°ç¬¦éƒ½å…³é—­äº†ï¼ˆç®¡é“çš„è¯»ç«¯å¼•ç”¨è®¡æ•°ä¸º0ï¼‰è¿™ä¸ªæ—¶å€™æœ‰è¿›ç¨‹å‘ç®¡é“ä¸­å†™æ•°æ®ï¼Œé‚£ä¹ˆè¯¥è¿›ç¨‹ä¼šæ”¶åˆ°ä¸€ä¸ªä¿¡å·SIGPIPE(ç®¡é“ç ´è£‚),é€šå¸¸ä¼šå¯¼è‡´è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢ å¦‚æœæœ‰æŒ‡å‘ç®¡é“è¯»ç«¯çš„æ–‡ä»¶æè¿°ç¬¦æ²¡æœ‰å…³é—­ï¼ˆç®¡é“çš„è¯»ç«¯å¼•ç”¨è®¡æ•°å¤§äº0ï¼‰è€ŒæŒæœ‰ç®¡é“è¯»ç«¯çš„è¿›ç¨‹ä¹Ÿæ²¡æœ‰ä»ç®¡é“ä¸­è¯»æ•°æ®ï¼Œè¿™æ—¶æœ‰è¿›ç¨‹å‘ç®¡é“ä¸­å†™æ•°æ®ï¼Œé‚£ä¹ˆåœ¨ç®¡é“è¢«å†™æ»¡çš„æ—¶å€™åœ¨æ¬¡è°ƒç”¨writeæ—¶å€™å°±ä¼šè¢«é˜»å¡ç›´åˆ°ç®¡é“ä¸­æœ‰ç©ºä½ç½®çŒœèƒ½å†æ¬¡å†™å…¥æ•°æ®å¹¶è¿”å› æ€»ç»“ï¼š â€‹ è¯»ç®¡é“ï¼š â€‹ ç®¡é“ä¸­æœ‰æ•°æ®ï¼Œredè¿”å›å®é™…è¯»åˆ°çš„å­—èŠ‚æ•° â€‹ ç®¡é“ä¸­æ— æ•°æ®ï¼š â€‹ å†™ç«¯è¢«å…¨åŒ…å…³é—­ï¼Œreadè¿”å›0ï¼ˆç›¸å½“äºè¯»åˆ°æ–‡ä»¶æœ«å°¾ï¼‰ â€‹ å†™ç«¯æ²¡æœ‰å®Œå…¨å…³é—­ï¼Œreadé˜»å¡ç­‰å¾… â€‹ å†™ç®¡é“ï¼š â€‹ ç®¡é“è¯»ç«¯å…¨éƒ¨éƒ½å…³é—­ï¼Œè¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢ï¼ˆè¿›ç¨‹SIGPIPEä¿¡å·ï¼‰ â€‹ ç®¡é“è¯»ç«¯æ²¡æœ‰å®Œå…¨å…³é—­ï¼š â€‹ ç®¡é“å·²æ»¡ï¼šwrité˜»å¡ â€‹ ç®¡é“æ²¡æ»¡ï¼šwirtå°†æ•°æ®å†™å…¥ï¼Œå¹¶è¿”å›å®é™…å†™å…¥çš„å­—èŠ‚æ•°ã€‚ ç®¡é“ è¯»éé˜»å¡çŠ¶æ€123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475/************************************************************************* &gt; File Name: pipe.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ18æ—¥ æ˜ŸæœŸä¸€ 19æ—¶08åˆ†03ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;fcntl.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;#include &lt;sys/types.h&gt;/* * è®¾ç½®ç®¡é“éé˜»å¡ * int flags = fcntl(fd[0], F_GETFL); // è·å–åŸæ¥çš„flags * flags |= O_NONBLOCK; // ä¿®æ”¹flags * fcntl(fd[0], F_SETFL, flags); // è®¾ç½®æ–°çš„flgas * */// man 2 fcntl // å¿«æ·é”® shift + kint main() &#123; // å† fork ä¹‹å‰åˆ›å»ºç®¡é“ int pipefd[2]; int ret = pipe(pipefd); if(ret == -1) &#123; perror(&quot;pipe&quot;); exit(0); &#125; // åˆ›å»ºå­è¿›ç¨‹ pid_t pid = fork(); if(pid &gt; 0) &#123; // çˆ¶è¿›ç¨‹ // å…³é—­å†™ close(pipefd[1]); // ä»ç®¡é“çš„è¯»å–ç«¯è¯»å–æ•°æ® printf(&quot;i am parent process, pid : %d\\n&quot;, getpid()); char buf[1024] = &#123;0&#125;; int flags = fcntl(pipefd[0], F_GETFL); flags |= O_NONBLOCK; fcntl(pipefd[0], F_SETFL, flags); while(1) &#123; int len = read(pipefd[0], buf, sizeof(buf)); printf(&quot;parent revc : %s, pid : %d\\n&quot;, buf, getpid()); printf(&quot;len : %d\\n&quot;, len); memset(buf, 0 ,sizeof(buf)); sleep(2); &#125; &#125; else if(pid == 0)&#123; // å…³é—­ç®¡é“è¯» close(pipefd[0]); // å­è¿›ç¨‹ printf(&quot;i am child process, pid : %d\\n&quot;, getpid()); char buf[1024]; while(1) &#123; char *str = &quot;hello,i am child&quot;; write(pipefd[1], str, strlen(str)); sleep(5); &#125; &#125; return 0;&#125; æœ‰åç®¡é“åŒ¿åç®¡é“ï¼Œç”±äºæ²¡æœ‰åå­—ï¼Œåªèƒ½ç”¨äºäº²ç¼˜å…³ç³»çš„è¿›ç¨‹é—´é€šä¿¡ã€‚ä¸ºäº†å…‹æœè¿™ä¸ªç¼ºç‚¹ï¼Œæå‡ºäº†æœ‰åç®¡é“(FIFO)ï¼Œä¹Ÿå«å‘½åç®¡é“ã€FIFOæ–‡ä»¶ã€‚ æœ‰åç®¡é“(FIFO)ä¸åŒäºåŒ¿åç®¡é“ä¹‹å¤„åœ¨äºå®ƒæä¾›äº†ä¸€ä¸ªè·¯å¾„åä¸ä¹‹å…³è”ï¼Œä»¥FIFOçš„æ–‡ä»¶å½¢å¼å­˜åœ¨äºæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå¹¶ä¸”å…¶æ‰“å¼€æ–¹å¼ä¸æ‰“å¼€ä¸€ä¸ªæ™®é€šæ–‡ä»¶æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·å³ä½¿ä¸FIFO çš„åˆ›å»ºè¿›ç¨‹ä¸å­˜åœ¨äº²ç¼˜å…³ç³»çš„è¿›ç¨‹ï¼Œåªè¦å¯ä»¥è®¿é—®è¯¥è·¯å¾„ï¼Œå°±èƒ½å¤Ÿå½¼æ­¤é€šè¿‡ FIFOç›¸äº’é€šä¿¡ï¼Œå› æ­¤ï¼Œé€šè¿‡FIFOä¸ç›¸å…³çš„è¿›ç¨‹ä¹Ÿèƒ½äº¤æ¢æ•°æ®ã€‚ ä¸€æ—¦æ‰“å¼€äº† FIFOï¼Œå°±èƒ½åœ¨å®ƒä¸Šé¢ä½¿ç”¨ä¸æ“ä½œåŒ¿åç®¡é“å’Œå…¶ä»–æ–‡ä»¶çš„ç³»ç»Ÿè°ƒç”¨ä¸€æ ·çš„I&#x2F;Oç³»ç»Ÿè°ƒç”¨äº†(å¦‚read ( ) ã€ write ()å’Œclose())ã€‚ä¸ç®¡é“ä¸€æ ·, FIFOä¹Ÿæœ‰ä¸€ä¸ªå†™å…¥ç«¯å’Œè¯»å–ç«¯ï¼Œå¹¶ä¸”ä»ç®¡é“ä¸­è¯»å–æ•°æ®çš„é¡ºåºä¸å†™å…¥çš„é¡ºåºæ˜¯ä¸€æ ·çš„ã€‚FIFOçš„åç§°ä¹Ÿç”±æ­¤è€Œæ¥:å…ˆå…¥å…ˆå‡ºã€‚ æœ‰åç®¡é“(FIFO)å’ŒåŒ¿åç®¡é“ (pipe)æœ‰ä¸€äº›ç‰¹ç‚¹æ˜¯ç›¸åŒçš„ï¼Œä¸ä¸€æ ·çš„åœ°æ–¹åœ¨äº: æœ‰åç®¡é“ï¼ˆFIFOï¼‰å’ŒåŒ¿åç®¡é“ï¼ˆpipeï¼‰æœ‰ä¸€äº›ç‰¹ç‚¹æ˜¯ç›¸åŒçš„ï¼Œä¸ä¸€æ ·çš„åœ°æ–¹åœ¨äºï¼š FIFOåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ä½œä¸ºä¸€ä¸ªç‰¹æ®Šæ–‡ä»¶å­˜åœ¨ï¼Œä½† FIFOä¸­çš„å†…å®¹å´å­˜æ”¾åœ¨å†…å­˜ä¸­ã€‚ å½“ä½¿ç”¨FIFOçš„è¿›ç¨‹é€€å‡ºåï¼ŒFIFoæ–‡ä»¶å°†ç»§ç»­ä¿å­˜åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ä»¥ä¾¿ä»¥åä½¿ç”¨ã€‚ FIFO æœ‰åå­—ï¼Œä¸ç›¸å…³çš„è¿›ç¨‹å¯ä»¥é€šè¿‡æ‰“å¼€æœ‰åç®¡é“è¿›è¡Œé€šä¿¡ã€‚ æœ‰åç®¡é“çš„ä½¿ç”¨é€šè¿‡å‘½ä»¤åˆ›å»ºæœ‰åç®¡é“ mkfifo åå­— æ–‡ä»¶ç±»å‹ p å°±æ˜¯ä¸€ä¸ªç®¡é“æ–‡ä»¶ é€šè¿‡å‡½æ•°åˆ›å»ºæœ‰åç®¡é“ 123#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;int mkfifo(const char *pathname, mode_t mode); ä¸€æ—¦ä½¿ç”¨mkfifoåˆ›å»ºäº†ä¸€ä¸ªFIFOå°±å¯ä»¥ä½¿ç”¨openæ‰“å¼€å®ƒï¼Œå¸¸è§çš„æ–‡ä»¶I&#x2F;Oå‡½æ•°éƒ½å¯ä»¥ç”¨äºfifoã€‚å¦‚ï¼šcloseã€readã€writeã€unlinkç­‰ FIFOä¸¥æ ¼éµå¾ªå…ˆè¿›å…ˆå‡ºï¼ˆFirst in First outï¼‰, å¯¹ç®¡é“åŠFIFOçš„è¯»æ€»æ˜¯ä»å¼€å§‹å¤„è¿”å›æ•°æ®ï¼Œå¯¹å®ƒä»¬çš„å†™åˆ™æŠŠæ•°æ®æ·»åŠ åˆ°æœ«å°¾ã€‚ä»–ä»¬ä¸æ”¯æŒè¯¸å¦‚lseek()ç­‰æ–‡ä»¶å®šä½æ“ä½œ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647/************************************************************************* &gt; File Name: mkfifo.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ24æ—¥ æ˜ŸæœŸæ—¥ 19æ—¶24åˆ†40ç§’ ************************************************************************//* * åˆ›å»ºfifoæ–‡ä»¶ * 1.é€šè¿‡å‘½ä»¤: mkfifo åå­— * 2.é€šè¿‡å‡½æ•°: int mkfifo(const char *pathname, mode_t mode); * * #include &lt;sys/types.h&gt; * #include &lt;sys/stat.h&gt; * int mkfifo(const char *pathname, mode_t mode); * å‚æ•°: * - pathname: ç®¡é“åç§°çš„è·¯å¾„ * - mode: æ–‡ä»¶çš„æƒé™ å’Œ opne çš„ mode æ˜¯ä¸€æ ·çš„ * æ˜¯ä¸€ä¸ªå…«è¿›åˆ¶çš„æ•° * è¿”å›å€¼: * æˆåŠŸè¿”å›: 0 * å¤±è´¥è¿”å›: -1 */#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;int main() &#123; // åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨ int ret = access(&quot;fifo1&quot;, F_OK); if(ret == -1) &#123; printf(&quot;ç®¡é“ä¸å­˜åœ¨, åˆ›å»ºç®¡é“\\n&quot;); ret = mkfifo(&quot;fifo1&quot;, 0664); if(ret == -1) &#123; perror(&quot;mkfifo&quot;); exit(0); &#125; &#125; return 0;&#125; ä¸€ç«¯è¯»ã€ä¸€ç«¯å†™write 123456789101112131415161718192021222324252627282930313233343536373839404142434445/************************************************************************* &gt; File Name: write.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ24æ—¥ æ˜ŸæœŸæ—¥ 20æ—¶20åˆ†58ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;sys/stat.h&gt;#include &lt;sys/types.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;#include &lt;fcntl.h&gt;#include &lt;string.h&gt;// å‘ç®¡é“ä¸­å†™æ•°æ®int main() &#123; int ret = access(&quot;test&quot;, F_OK); if(ret == -1) &#123; perror(&quot;ç®¡é“ä¸å­˜åœ¨, åˆ›å»ºç®¡é“\\n&quot;); // åˆ›å»ºç®¡é“æ–‡ä»¶ ret = mkfifo(&quot;test&quot;, 0664); if(ret == -1) &#123; perror(&quot;mkfifo&quot;); exit(0); &#125; &#125; // æ‰“å¼€ç®¡é“ int fd = open(&quot;test&quot;, O_WRONLY); if(fd == -1) &#123; perror(&quot;open&quot;); exit(0); &#125; for(int i = 0; i &lt; 100; i++) &#123; char buf[1024]; sprintf(buf, &quot;hellow, %d\\n&quot;, i); printf(&quot;write data : %s\\n&quot;, buf); write(fd, buf, strlen(buf)); sleep(1); &#125; close(fd); return 0;&#125; read 12345678910111213141516171819202122232425262728293031323334353637383940/************************************************************************* &gt; File Name: read.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ24æ—¥ æ˜ŸæœŸæ—¥ 20æ—¶25åˆ†41ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;unistd.h&gt;#include &lt;fcntl.h&gt;#include &lt;string.h&gt;// ä»ç®¡é“ä¸­è¯»æ•°æ®int main() &#123; // æ‰“å¼€ç®¡é“æ–‡ä»¶ int fd = open(&quot;test&quot;, O_RDONLY); if(fd == -1) &#123; perror(&quot;open&quot;); exit(0); &#125; // è¯»æ•°æ® while(1) &#123; char buf[1024] = &#123;0&#125;; int len = read(fd, buf, sizeof(buf)); // if(len == 0) &#123; printf(&quot;å†™ç«¯æ–­å¼€é“¾æ¥äº†...\\n&quot;); break; &#125; printf(&quot;recv buf : %s\\n&quot;, buf); &#125; close(fd); return 0;&#125; æœ‰åç®¡é“çš„æ³¨æ„äº‹é¡¹ ä¸€ä¸ªä¸ºåªè¯»è€Œæ‰“å¼€ä¸€ä¸ªç®¡é“çš„è¿›ç¨‹ä¼šé˜»å¡ï¼Œç›´åˆ°å¦å¤–ä¸€ä¸ªè¿›ç¨‹ä¸ºåªå†™æ‰“å¼€ç®¡é“ ä¸€ä¸ªä¸ºåªå†™è€Œæ‰“å¼€ä¸€ä¸ªç®¡é“çš„è¿›ç¨‹ä¼šé˜»å¡ï¼Œç›´åˆ°å¦å¤–ä¸€ä¸ªè¿›ç¨‹ä¸ºåªè¯»æ‰“å¼€ç®¡é“ è¯»ç®¡é“ï¼š â€‹ ç®¡é“ä¸­æœ‰æ•°æ®ï¼Œreadè¿”å›å®é™…è¯»åˆ°çš„å­—èŠ‚æ•° â€‹ ç®¡é“ä¸­æ— æ•°æ®: â€‹ ç®¡é“å†™ç«¯è¢«å…¨éƒ¨å…³é—­ï¼Œreadè¿”å›0ï¼Œï¼ˆç›¸å½“äºè¯»åˆ°æ–‡ä»¶æœ«å°¾) â€‹ å†™ç«¯æ²¡æœ‰å…¨éƒ¨è¢«å…³é—­ï¼Œreadé˜»å¡ç­‰å¾… å†™ç®¡é“ï¼š â€‹ ç®¡é“è¯»ç«¯è¢«å…¨éƒ¨å…³é—­ï¼Œè¿›è¡Œå¼‚å¸¸ç»ˆæ­¢ï¼ˆæ”¶åˆ°ä¸€ä¸ªSIGPIPEä¿¡å·) â€‹ ç®¡é“è¯»ç«¯æ²¡æœ‰å…¨éƒ¨å…³é—­: â€‹ ç®¡é“å·²ç»æ»¡äº†ï¼Œwriteä¼šé˜»å¡ â€‹ ç®¡é“æ²¡æœ‰æ»¡,writeå°†æ•°æ®å†™å…¥ï¼Œå¹¶è¿”å›å®é™…å†™å…¥çš„å­—èŠ‚æ•°ã€‚ æœ‰åç®¡é“å®ç°ç®€å•ç‰ˆèŠå¤©åŠŸèƒ½ - ä¸€é—®ä¸€ç­” chatA12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091/************************************************************************* &gt; File Name: chatA.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ26æ—¥ æ˜ŸæœŸäºŒ 11æ—¶54åˆ†44ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;stdlib.h&gt;#include &lt;fcntl.h&gt;#include &lt;string.h&gt;int main() &#123; // åˆ¤æ–­æœ‰åç®¡é“1æ˜¯å¦å­˜åœ¨ int ret = access(&quot;fifo1&quot;, F_OK); if(ret == -1) &#123; // æ–‡ä»¶ä¸å­˜ printf(&quot;ç®¡é“æ–‡ä»¶ä¸å­˜åœ¨, åˆ›å»ºå¯¹åº”çš„æœ‰åç®¡é“\\n&quot;); // æ–‡ä»¶è·¯å¾„ ret = mkfifo(&quot;fifo1&quot;, 0664); if(ret == -1) &#123; perror(&quot;fifo1&quot;); exit(-1); &#125; &#125; // åˆ¤æ–­æœ‰åç®¡é“2æ˜¯å¦å­˜åœ¨ ret = access(&quot;fifo2&quot;, F_OK); if(ret == -1) &#123; // æ–‡ä»¶ä¸å­˜ printf(&quot;ç®¡é“æ–‡ä»¶ä¸å­˜åœ¨, åˆ›å»ºå¯¹åº”çš„æœ‰åç®¡é“\\n&quot;); // æ–‡ä»¶è·¯å¾„ ret = mkfifo(&quot;fifo2&quot;, 0664); if(ret == -1) &#123; perror(&quot;fifo2&quot;); exit(-1); &#125; &#125; // ä»¥åªå†™æ–¹å¼æ‰“å¼€ç®¡é“fifo1 --- 1 int fdw = open(&quot;fifo1&quot;, O_WRONLY); if(fdw == -1) &#123; perror(&quot;open - fifo1&quot;); exit(-1); &#125; printf(&quot;æ‰“å¼€fifo1æˆåŠŸï¼ç­‰å¾…å†™å…¥... ...\\n&quot;); // ä»¥åªè¯»æ–¹å¼æ‰“å¼€ç®¡é“fifo2 --- 2 int fdr = open(&quot;fifo2&quot;, O_RDONLY); if(fdr == -1) &#123; perror(&quot;open - fifo2&quot;); exit(-1); &#125; printf(&quot;æ‰“å¼€fifo2æˆåŠŸï¼ç­‰å¾…è¯»å–... ...\\n&quot;); char buf[128]; // å¾ªç¯å†™è¯»æ•°æ® while(1) &#123; memset(buf, 0, sizeof(buf)); // è·å–æ ‡å‡†è¾“å…¥(stdin)çš„æ•°æ® fgets(buf, sizeof(buf), stdin); // å†™æ•°æ® ret = write(fdw, buf, sizeof(buf)); if(ret == -1) &#123; perror(&quot;writ&quot;); exit(-1); &#125; // è¯»ç®¡é“æ•°æ® memset(buf, 0, sizeof(buf)); ret = read(fdr, buf, sizeof(buf)); if(ret &lt;= 0) &#123; perror(&quot;read&quot;); break; &#125; printf(&quot; buf : %s\\n&quot;, buf); &#125; // å…³é—­æ–‡ä»¶æè¿°ç¬¦ close(fdr); close(fdw); return 0;&#125; chatB1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889/************************************************************************* &gt; File Name: chatA.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ26æ—¥ æ˜ŸæœŸäºŒ 11æ—¶54åˆ†44ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;stdlib.h&gt;#include &lt;fcntl.h&gt;#include &lt;string.h&gt;int main() &#123; // åˆ¤æ–­æœ‰åç®¡é“1æ˜¯å¦å­˜åœ¨ int ret = access(&quot;fifo1&quot;, F_OK); if(ret == -1) &#123; // æ–‡ä»¶ä¸å­˜ printf(&quot;ç®¡é“æ–‡ä»¶ä¸å­˜åœ¨, åˆ›å»ºå¯¹åº”çš„æœ‰åç®¡é“\\n&quot;); // æ–‡ä»¶è·¯å¾„ ret = mkfifo(&quot;fifo1&quot;, 0664); if(ret == -1) &#123; perror(&quot;fifo1&quot;); exit(-1); &#125; &#125; // åˆ¤æ–­æœ‰åç®¡é“2æ˜¯å¦å­˜åœ¨ ret = access(&quot;fifo2&quot;, F_OK); if(ret == -1) &#123; // æ–‡ä»¶ä¸å­˜ printf(&quot;ç®¡é“æ–‡ä»¶ä¸å­˜åœ¨, åˆ›å»ºå¯¹åº”çš„æœ‰åç®¡é“\\n&quot;); // æ–‡ä»¶è·¯å¾„ ret = mkfifo(&quot;fifo2&quot;, 0664); if(ret == -1) &#123; perror(&quot;fifo2&quot;); exit(-1); &#125; &#125; // ä»¥åªè¯»æ–¹å¼æ‰“å¼€ç®¡é“fifo1 --- 1 int fdr = open(&quot;fifo1&quot;, O_RDONLY); if(fdr == -1) &#123; perror(&quot;open - fifo1&quot;); exit(-1); &#125; printf(&quot;æ‰“å¼€fifo1æˆåŠŸï¼ç­‰å¾…è¯»å–... ...\\n&quot;); // ä»¥åªå†™æ–¹å¼æ‰“å¼€ç®¡é“fifo2 --- 2 int fdw = open(&quot;fifo2&quot;, O_WRONLY); if(fdw == -1) &#123; perror(&quot;open - fifo2&quot;); exit(-1); &#125; printf(&quot;æ‰“å¼€fifo2æˆåŠŸï¼ç­‰å¾…å†™å…¥... ...\\n&quot;); char buf[128]; // å¾ªç¯è¯»å†™æ•°æ® while(1) &#123; // è¯»ç®¡é“æ•°æ® memset(buf, 0, sizeof(buf)); ret = read(fdr, buf, sizeof(buf)); if(ret &lt;= 0) &#123; perror(&quot;read&quot;); break; &#125; printf(&quot; buf : %s\\n&quot;, buf); memset(buf, 0, sizeof(buf)); // è·å–æ ‡å‡†è¾“å…¥(stdin)çš„æ•°æ® fgets(buf, sizeof(buf), stdin); // å†™æ•°æ® ret = write(fdw, buf, strlen(buf)); if(ret == -1) &#123; perror(&quot;writ&quot;); exit(-1); &#125; &#125; // å…³é—­æ–‡ä»¶æè¿°ç¬¦ close(fdr); close(fdw); return 0;&#125; é—®ï¼å¦‚ä½•å®ç°ä¸€æ–¹å¤šæ¬¡å‘é€æ¶ˆæ¯ï¼æ€ä¹ˆå®ç°ï¼Ÿå¯ä»¥forkåˆ›å»ºå­è¿›ç¨‹ä¸€èµ·è·‘ - æœ‰æ—¶é—´æˆ‘ä¸€å®šä»£ç å®ç°æµ‹è¯•ä¸€ä¸‹ ä»£ç å¦‚ä¸‹ A - B æ— é™é€šä¿¡ å—·å—·å«ï¼chatA 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293/************************************************************************* &gt; File Name: chatA.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ30æ—¥ æ˜ŸæœŸå…­ 19æ—¶58åˆ†44ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;int main() &#123; // åˆ¤æ–­ç®¡é“æ˜¯å¦å­˜åœ¨ - FIFO int ret = access(&quot;fifo1&quot;, F_OK); if(ret == -1) &#123; printf(&quot;FIFO1 æ–‡ä»¶ä¸å­˜åœ¨, æ­£åœ¨åˆ›å»º ... ... \\n&quot;); ret = mkfifo(&quot;fifo1&quot;, 0664); if(ret == -1) &#123; perror(&quot;mkfifo1&quot;); exit(-1); &#125; &#125; ret = access(&quot;fifo2&quot;, F_OK); if(ret == -1) &#123; printf(&quot;FIFO2 æ–‡ä»¶ä¸å­˜åœ¨, æ­£åœ¨åˆ›å»º ... ... \\n&quot;); ret = mkfifo(&quot;fifo2&quot;, 0664); if(ret == -1) &#123; perror(&quot;mkfifo2&quot;); exit(-1); &#125; &#125; // ä»¥åªå†™æ–¹å¼æ‰“å¼€ FIFO1 int fdw = open(&quot;fifo1&quot;, O_WRONLY); if(fdw == -1) &#123; perror(&quot;open-FIFO1&quot;); exit(-1); &#125; printf(&quot;æ‰“å¼€ FIFO1 æˆåŠŸ! ç­‰å¾…å†™å…¥....\\n&quot;); int fdr = open(&quot;fifo2&quot;, O_RDONLY); if(fdr == -1) &#123; perror(&quot;open-FIFO2&quot;); exit(-1); &#125; printf(&quot;æ‰“å¼€ FIFO2 æˆåŠŸ! ç­‰å¾…è¯»å–....\\n&quot;); // åˆ›å»ºè¿›ç¨‹ pid_t pid = fork(); // char *buf = (char *)malloc(sizeof(char) * 5); char buf[1024]; if(pid &gt; 0) &#123; // çˆ¶è¿›ç¨‹ while(1) &#123; memset(buf, 0, sizeof(buf)); // è·å–æ ‡å‡†è¾“å…¥(stdin)çš„æ•°æ® fgets(buf, sizeof(buf), stdin); ret = write(fdw, buf, sizeof(buf)); if(ret == -1) &#123; perror(&quot;writ&quot;); exit(-1); &#125; &#125; &#125; else if(pid == 0) &#123; // åˆ›å»ºå­è¿›ç¨‹ while(1) &#123; memset(buf, 0, sizeof(buf)); ret = read(fdr, buf, sizeof(buf)); if(ret &lt;= 0) &#123; perror(&quot;read&quot;); exit(-1); break; &#125; printf(&quot;buf : %s\\n&quot;, buf); &#125; &#125; // å…³é—­æ–‡ä»¶æè¿°ç¬¦ close(fdw); close(fdr); // free(buf); return 0;&#125; chatB 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091/************************************************************************* &gt; File Name: chatA.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ30æ—¥ æ˜ŸæœŸå…­ 19æ—¶58åˆ†44ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;int main() &#123; // åˆ¤æ–­ç®¡é“æ˜¯å¦å­˜åœ¨ - FIFO int ret = access(&quot;fifo1&quot;, F_OK); if(ret == -1) &#123; printf(&quot;FIFO1 æ–‡ä»¶ä¸å­˜åœ¨, æ­£åœ¨åˆ›å»º ... ... \\n&quot;); ret = mkfifo(&quot;fifo1&quot;, 0664); if(ret == -1) &#123; perror(&quot;mkfifo1&quot;); exit(-1); &#125; &#125; ret = access(&quot;fifo2&quot;, F_OK); if(ret == -1) &#123; printf(&quot;FIFO2 æ–‡ä»¶ä¸å­˜åœ¨, æ­£åœ¨åˆ›å»º ... ... \\n&quot;); ret = mkfifo(&quot;fifo2&quot;, 0664); if(ret == -1) &#123; perror(&quot;mkfifo2&quot;); exit(-1); &#125; &#125; // ä»¥åªè¯»æ–¹å¼æ‰“å¼€ FIFO1 int fdr = open(&quot;fifo1&quot;, O_RDONLY); if(fdr == -1) &#123; perror(&quot;open-FIFO1&quot;); exit(-1); &#125; printf(&quot;æ‰“å¼€ FIFO1 æˆåŠŸ! ç­‰å¾…è¯»å–....\\n&quot;); int fdw = open(&quot;fifo2&quot;, O_WRONLY); if(fdw == -1) &#123; perror(&quot;open-FIFO2&quot;); exit(-1); &#125; printf(&quot;æ‰“å¼€ FIFO2 æˆåŠŸ! ç­‰å¾…å†™å…¥....\\n&quot;); // åˆ›å»ºè¿›ç¨‹ pid_t pid = fork(); // char *buf = (char *)malloc(sizeof(char) * 1024); char buf[1024]; if(pid &gt; 0) &#123; // çˆ¶è¿›ç¨‹ while(1) &#123; memset(buf, 0, sizeof(buf)); ret = read(fdr, buf, sizeof(buf)); if(ret &lt;= 0) &#123; perror(&quot;read&quot;); // exit(-1); break; &#125; printf(&quot;buf : %s\\n&quot;, buf); &#125; &#125; else if(pid == 0) &#123; // åˆ›å»ºå­è¿›ç¨‹ while(1) &#123; memset(buf, 0, sizeof(buf)); // è·å–æ ‡å‡†è¾“å…¥(stdin)çš„æ•°æ® fgets(buf, sizeof(buf), stdin); ret = write(fdw, buf, sizeof(buf)); if(ret == -1) &#123; perror(&quot;writ&quot;); exit(-1); &#125; &#125; &#125; // å…³é—­æ–‡ä»¶æè¿°ç¬¦ close(fdr); close(fdw); return 0;&#125;","categories":[{"name":"Linuxå¤šè¿›ç¨‹å¼€å‘","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"wait-waitpid å‡½æ•°","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘/waitå‡½æ•°","date":"2022-04-11T07:49:11.000Z","updated":"2022-05-29T08:00:13.487Z","comments":true,"path":"2022/04/11/Linuxå¤šè¿›ç¨‹å¼€å‘/waitå‡½æ•°/","link":"","permalink":"https://tutouwang.vercel.app/2022/04/11/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/wait%E5%87%BD%E6%95%B0/","excerpt":"","text":"wait - å›æ”¶å­è¿›ç¨‹èµ„æº123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/************************************************************************* &gt; File Name: wait.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ12æ—¥ æ˜ŸæœŸäºŒ 19æ—¶01åˆ†25ç§’ ************************************************************************//* * #include &lt;sys/types.h&gt; * #include &lt;sys/wait.ch&gt; * pid_t wait(int *wstatus); * åŠŸèƒ½: ç­‰å¾…ä»»æ„ä¸€ä¸ªå­è¿›ç¨‹ç»“æŸ, å¦‚æœä»»æ„ä¸€ä¸ªå­è¿›ç¨‹ç»“æŸäº†,æ­¤å‡½æ•°ä¼šå›æ”¶å­è¿›ç¨‹çš„èµ„æº * å‚æ•°: int *wstatus * è¿›ç¨‹é€€å‡ºæ—¶çš„çŠ¶æ€ä¿¡æ¯,ä¼ å…¥çš„æ˜¯ä¸€ä¸ªintç±»å‹çš„åœ°å€, ä¼ å‡ºå‚æ•° * è¿”å›å€¼: * - æˆåŠŸ: è¿”å›è¢«å›æ”¶çš„å­è¿›ç¨‹çš„ID * - å¤±è´¥: -1 (æ‰€æœ‰çš„å­è¿›ç¨‹éƒ½ç»“æŸäº†, è°ƒç”¨å‡½æ•°å¤±è´¥) * è°ƒç”¨waitå‡½æ•°çš„è¿›ç¨‹ä¼šè¢«æŒ‚èµ·(é˜»å¡),ç›´åˆ°å®ƒçš„ä¸€ä¸ªå­è¿›ç¨‹é€€å‡ºæˆ–è€…æ”¶åˆ°ä¸€ä¸ªä¸èƒ½è¢«å¿½ç•¥çš„ä¿¡å·æ—¶æ‰è¢«å”¤é†’(ç›¸å½“äºç»§ç»­æ‰§è¡Œ) * å¦‚æœæ²¡æœ‰å­è¿›ç¨‹äº†,å‡½æ•°ç«‹åˆ»è¿”å›,è¿”å›-1:å¦‚æœå­è¿›ç¨‹éƒ½å·²ç»ç»“æŸäº†,ä¹Ÿä¼šç«‹å³è¿”å›-1 */#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;int main() &#123; // æœ‰ä¸€ä¸ªçˆ¶è¿›ç¨‹,åˆ›å»º5ä¸ªå­è¿›ç¨‹(å…„å¼Ÿ) pid_t pid; for(int i = 0; i &lt; 5; i++) &#123; pid = fork(); if(pid == 0) &#123; // å¹²æ‰å­è¿›ç¨‹ break; &#125; &#125; if(pid &gt; 0) &#123; // çˆ¶è¿›ç¨‹ while(1) &#123; printf(&quot;i am parent, pid = %d\\n&quot;, getpid()); sleep(1); &#125; &#125; else if(pid == 0) &#123; // å­è¿›ç¨‹ printf(&quot;child, pid = %d\\n&quot;, getpid()); &#125; return 0;&#125; 5æ¬¡å­è¿›ç¨‹ç»“æŸåçˆ¶è¿›ç¨‹ä¸€ç›´å†æ‰§è¡Œå°±ä¼šå‡ºç°åœ¨5ä¸ªå­¤å„¿è¿›ç¨‹ ç»“æŸæ‰çˆ¶è¿›ç¨‹ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162/************************************************************************* &gt; File Name: wait.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ12æ—¥ æ˜ŸæœŸäºŒ 19æ—¶01åˆ†25ç§’ ************************************************************************//* * #include &lt;sys/types.h&gt; * #include &lt;sys/wait.ch&gt; * pid_t wait(int *wstatus); * åŠŸèƒ½: ç­‰å¾…ä»»æ„ä¸€ä¸ªå­è¿›ç¨‹ç»“æŸ, å¦‚æœä»»æ„ä¸€ä¸ªå­è¿›ç¨‹ç»“æŸäº†,æ­¤å‡½æ•°ä¼šå›æ”¶å­è¿›ç¨‹çš„èµ„ æº * å‚æ•°: int *wstatus * è¿›ç¨‹é€€å‡ºæ—¶çš„çŠ¶æ€ä¿¡æ¯,ä¼ å…¥çš„æ˜¯ä¸€ä¸ªintç±»å‹çš„åœ°å€, ä¼ å‡ºå‚æ•° * è¿”å›å€¼: * - æˆåŠŸ: è¿”å›è¢«å›æ”¶çš„å­è¿›ç¨‹çš„ID * - å¤±è´¥: -1 (æ‰€æœ‰çš„å­è¿›ç¨‹éƒ½ç»“æŸäº†, è°ƒç”¨å‡½æ•°å¤±è´¥) * è°ƒç”¨waitå‡½æ•°çš„è¿›ç¨‹ä¼šè¢«æŒ‚èµ·(é˜»å¡),ç›´åˆ°å®ƒçš„ä¸€ä¸ªå­è¿›ç¨‹é€€å‡ºæˆ–è€…æ”¶åˆ°ä¸€ä¸ªä¸èƒ½è¢«å¿½ç•¥ çš„ä¿¡å·æ—¶æ‰è¢«å”¤é†’(ç›¸å½“äºç»§ç»­æ‰§è¡Œ) * å¦‚æœæ²¡æœ‰å­è¿›ç¨‹äº†,å‡½æ•°ç«‹åˆ»è¿”å›,è¿”å›-1:å¦‚æœå­è¿›ç¨‹éƒ½å·²ç»ç»“æŸäº†,ä¹Ÿä¼šç«‹å³è¿”å›-1 */#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;int main() &#123; // æœ‰ä¸€ä¸ªçˆ¶è¿›ç¨‹,åˆ›å»º5ä¸ªå­è¿›ç¨‹(å…„å¼Ÿ) pid_t pid; for(int i = 0; i &lt; 5; i++) &#123; pid = fork(); if(pid == 0) &#123; // å¹²æ‰å­è¿›ç¨‹ break; &#125; &#125; if(pid &gt; 0) &#123; // çˆ¶è¿›ç¨‹ while(1) &#123; printf(&quot;i am parent, pid = %d\\n&quot;, getpid()); int ret = wait(NULL); if(ret == -1) &#123; break; &#125; printf(&quot;child die, pid = %d\\n&quot;, ret); sleep(1); &#125; &#125; else if(pid == 0) &#123; // å­è¿›ç¨‹ printf(&quot;child, pid = %d\\n&quot;, getpid()); sleep(1); &#125; return 0;&#125; é€€å‡ºä¿¡æ¯ç›¸å…³å®å‡½æ•° æ­£å¸¸è¿è¡Œç»“æŸä»£ç 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677/************************************************************************* &gt; File Name: wait.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ12æ—¥ æ˜ŸæœŸäºŒ 19æ—¶01åˆ†25ç§’ ************************************************************************//* * #include &lt;sys/types.h&gt; * #include &lt;sys/wait.ch&gt; * pid_t wait(int *wstatus); * åŠŸèƒ½: ç­‰å¾…ä»»æ„ä¸€ä¸ªå­è¿›ç¨‹ç»“æŸ, å¦‚æœä»»æ„ä¸€ä¸ªå­è¿›ç¨‹ç»“æŸäº†,æ­¤å‡½æ•°ä¼šå›æ”¶å­è¿›ç¨‹çš„èµ„ æº * å‚æ•°: int *wstatus * è¿›ç¨‹é€€å‡ºæ—¶çš„çŠ¶æ€ä¿¡æ¯,ä¼ å…¥çš„æ˜¯ä¸€ä¸ªintç±»å‹çš„åœ°å€, ä¼ å‡ºå‚æ•° * è¿”å›å€¼: * - æˆåŠŸ: è¿”å›è¢«å›æ”¶çš„å­è¿›ç¨‹çš„ID * - å¤±è´¥: -1 (æ‰€æœ‰çš„å­è¿›ç¨‹éƒ½ç»“æŸäº†, è°ƒç”¨å‡½æ•°å¤±è´¥) * è°ƒç”¨waitå‡½æ•°çš„è¿›ç¨‹ä¼šè¢«æŒ‚èµ·(é˜»å¡),ç›´åˆ°å®ƒçš„ä¸€ä¸ªå­è¿›ç¨‹é€€å‡ºæˆ–è€…æ”¶åˆ°ä¸€ä¸ªä¸èƒ½è¢«å¿½ç•¥ çš„ä¿¡å·æ—¶æ‰è¢«å”¤é†’(ç›¸å½“äºç»§ç»­æ‰§è¡Œ) * å¦‚æœæ²¡æœ‰å­è¿›ç¨‹äº†,å‡½æ•°ç«‹åˆ»è¿”å›,è¿”å›-1:å¦‚æœå­è¿›ç¨‹éƒ½å·²ç»ç»“æŸäº†,ä¹Ÿä¼šç«‹å³è¿”å›-1 */#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;int main() &#123; // æœ‰ä¸€ä¸ªçˆ¶è¿›ç¨‹,åˆ›å»º5ä¸ªå­è¿›ç¨‹(å…„å¼Ÿ) pid_t pid; for(int i = 0; i &lt; 5; i++) &#123; pid = fork(); if(pid == 0) &#123; // å¹²æ‰å­è¿›ç¨‹ break; &#125; &#125; if(pid &gt; 0) &#123; // çˆ¶è¿›ç¨‹ while(1) &#123; printf(&quot;i am parent, pid = %d\\n&quot;, getpid()); //int ret = wait(NULL); int st; int ret = wait(&amp;st); if(ret == -1) &#123; break; &#125; if(WIFEXITED(st)) &#123; // æ˜¯ä¸æ˜¯æ­£å¸¸é€€å‡º printf(&quot;é€€å‡ºçš„çŠ¶æ€ç  : %d\\n&quot;, WEXITSTATUS(st)); &#125; if(WIFSIGNALED(st)) &#123; // æ˜¯ä¸æ˜¯å¼‚å¸¸ç»ˆæ­¢ printf(&quot;è¢«é‚£ä¸ªä¿¡å·å¹²æ‰äº†: %d\\n&quot;, WTERMSIG(st)); &#125; printf(&quot;child die, pid = %d\\n&quot;, ret); sleep(1); &#125; &#125; else if(pid == 0) &#123; // å­è¿›ç¨‹ printf(&quot;child, pid = %d\\n&quot;, getpid()); sleep(1); exit(0); &#125; return 0; // exit(0)&#125; ä¿¡å·å¹²æ‰ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879/************************************************************************* &gt; File Name: wait.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ12æ—¥ æ˜ŸæœŸäºŒ 19æ—¶01åˆ†25ç§’ ************************************************************************//* * #include &lt;sys/types.h&gt; * #include &lt;sys/wait.ch&gt; * pid_t wait(int *wstatus); * åŠŸèƒ½: ç­‰å¾…ä»»æ„ä¸€ä¸ªå­è¿›ç¨‹ç»“æŸ, å¦‚æœä»»æ„ä¸€ä¸ªå­è¿›ç¨‹ç»“æŸäº†,æ­¤å‡½æ•°ä¼šå›æ”¶å­è¿›ç¨‹çš„èµ„ æº * å‚æ•°: int *wstatus * è¿›ç¨‹é€€å‡ºæ—¶çš„çŠ¶æ€ä¿¡æ¯,ä¼ å…¥çš„æ˜¯ä¸€ä¸ªintç±»å‹çš„åœ°å€, ä¼ å‡ºå‚æ•° * è¿”å›å€¼: * - æˆåŠŸ: è¿”å›è¢«å›æ”¶çš„å­è¿›ç¨‹çš„ID * - å¤±è´¥: -1 (æ‰€æœ‰çš„å­è¿›ç¨‹éƒ½ç»“æŸäº†, è°ƒç”¨å‡½æ•°å¤±è´¥) * è°ƒç”¨waitå‡½æ•°çš„è¿›ç¨‹ä¼šè¢«æŒ‚èµ·(é˜»å¡),ç›´åˆ°å®ƒçš„ä¸€ä¸ªå­è¿›ç¨‹é€€å‡ºæˆ–è€…æ”¶åˆ°ä¸€ä¸ªä¸èƒ½è¢«å¿½ç•¥ çš„ä¿¡å·æ—¶æ‰è¢«å”¤é†’(ç›¸å½“äºç»§ç»­æ‰§è¡Œ) * å¦‚æœæ²¡æœ‰å­è¿›ç¨‹äº†,å‡½æ•°ç«‹åˆ»è¿”å›,è¿”å›-1:å¦‚æœå­è¿›ç¨‹éƒ½å·²ç»ç»“æŸäº†,ä¹Ÿä¼šç«‹å³è¿”å›-1 */#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;int main() &#123; // æœ‰ä¸€ä¸ªçˆ¶è¿›ç¨‹,åˆ›å»º5ä¸ªå­è¿›ç¨‹(å…„å¼Ÿ) pid_t pid; for(int i = 0; i &lt; 5; i++) &#123; pid = fork(); if(pid == 0) &#123; // å¹²æ‰å­è¿›ç¨‹ break; &#125; &#125; if(pid &gt; 0) &#123; // çˆ¶è¿›ç¨‹ while(1) &#123; printf(&quot;i am parent, pid = %d\\n&quot;, getpid()); //int ret = wait(NULL); int st; int ret = wait(&amp;st); if(ret == -1) &#123; break; &#125; if(WIFEXITED(st)) &#123; // æ˜¯ä¸æ˜¯æ­£å¸¸é€€å‡º printf(&quot;é€€å‡ºçš„çŠ¶æ€ç  : %d\\n&quot;, WEXITSTATUS(st)); &#125; if(WIFSIGNALED(st)) &#123; // æ˜¯ä¸æ˜¯å¼‚å¸¸ç»ˆæ­¢ printf(&quot;è¢«é‚£ä¸ªä¿¡å·å¹²æ‰äº†: %d\\n&quot;, WTERMSIG(st)); &#125; printf(&quot;child die, pid = %d\\n&quot;, ret); sleep(1); &#125; &#125; else if(pid == 0) &#123; // å­è¿›ç¨‹ while(1) &#123; printf(&quot;child, pid = %d\\n&quot;, getpid()); sleep(1); &#125; exit(0); &#125; return 0; // exit(0)&#125; waitpid - å›æ”¶å­è¿›ç¨‹èµ„æº12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485/************************************************************************* &gt; File Name: wait_pid.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ15æ—¥ æ˜ŸæœŸäº” 16æ—¶38åˆ†41ç§’ ************************************************************************//* * * #include &lt;sys/types.h&gt; * #include &lt;sys/wait.h&gt; * pid_t waitpid(pid_t pid, int *wstatus, int options); * åŠŸèƒ½: å›æ”¶æŒ‡å®šè¿›ç¨‹å·çš„å­è¿›ç¨‹,å¯ä»¥è®¾ç½®æ˜¯å¦é˜»å¡ã€‚ * å‚æ•°: * - pid: * PID &gt; 0 : å›æ”¶æŸä¸ªæŒ‡å®šå­è¿›ç¨‹çš„ PID * PID = 0 : å›æ”¶å½“å‰è¿›ç¨‹ç»„çš„æ‰€æœ‰å­è¿›ç¨‹ * è¿›ç¨‹ A -&gt; B A -&gt; C æ”¾åˆ°ä¸€ä¸ªé›†åˆ (A - B, A - C) &lt;- D åœ¨æŠŠDç»™åˆ«äººå°±ä¸è¾“å…¥å½“å‰ç»„ é‡Šæ”¾æ—¶å€™å°±ä¸Dæ²¡æœ‰å…³ç³»äº†ã€‚// ajx æŸ¥çœ‹ç»„æŸ¥çœ‹è¿›ç¨‹ç»„ * PID = -1 : å›æ”¶æ‰€æœ‰çš„å­è¿›ç¨‹ ç›¸å½“äº wait() (æœ€é•¿ç”¨) * PID &lt; -1 : æŸä¸ªè¿›ç¨‹ç»„çš„ç»„idçš„ç»å¯¹å€¼å›æ”¶æŒ‡å®šè¿›ç¨‹ç»„ä¸­çš„å­è¿›ç¨‹ * - options: è®¾ç½®é˜»å¡æˆ–è€…éé˜»å¡ * 0 : é˜»å¡ * WNOHANG : éé˜»å¡ * - è¿”å›å€¼: * &gt; 0 : è¿”å›å­è¿›ç¨‹çš„id * = 0 : options = WNOHANG, è¡¨ç¤ºè¿˜æœ‰å­è¿›ç¨‹æ´»ç€ * = -1 : é”™è¯¯, æˆ–è€…æ²¡æœ‰å­è¿›ç¨‹äº† * * */#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;stdlib.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/wait.h&gt;#include &lt;unistd.h&gt;int main() &#123; // æœ‰ä¸€ä¸ªçˆ¶è¿›ç¨‹, åˆ›å»º5ä¸ªå­è¿›ç¨‹ pid_t pid; // åˆ›å»º5ä¸ªå­è¿›ç¨‹ for(int i = 0; i &lt; 5; i++) &#123; pid = fork(); if(pid == 0) break; &#125; if(pid &gt; 0) &#123; while(1) &#123; printf(&quot;parent, pid = %d\\n&quot;, getpid()); sleep(1); int st; // int ret = waitpid(-1, &amp;st, 0); // é˜»å¡ int ret = waitpid(-1, &amp;st, WNOHANG); if(ret == - 1) break; // è¿˜æœ‰å­è¿›ç¨‹å­˜åœ¨ else if(ret == 0) &#123; continue; &#125; else if(ret &gt; 0) &#123; if(WIFEXITED(st)) &#123; // æ˜¯ä¸æ˜¯æ­£å¸¸é€€å‡º printf(&quot;é€€å‡ºçš„çŠ¶æ€ç  : %d\\n&quot;, WEXITSTATUS(st)); &#125; if(WIFSIGNALED(st)) &#123; // æ˜¯ä¸æ˜¯å¼‚å¸¸ç»ˆæ­¢ printf(&quot;è¢«é‚£ä¸ªä¿¡å·å¹²æ‰äº† : %d\\n&quot;,WTERMSIG(st)); &#125; printf(&quot;child die, pid = %d\\n&quot;, ret); &#125; sleep(1); &#125; &#125; else if(pid == 0) &#123; while(1) &#123; printf(&quot;child , pid = %d\\n&quot;, getpid()); sleep(1); &#125; exit(0); &#125; return 0;&#125;","categories":[{"name":"Linuxå¤šè¿›ç¨‹å¼€å‘","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"è¿›ç¨‹æ§åˆ¶","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘/è¿›ç¨‹æ§åˆ¶","date":"2022-04-10T10:45:44.000Z","updated":"2022-05-29T08:00:26.487Z","comments":true,"path":"2022/04/10/Linuxå¤šè¿›ç¨‹å¼€å‘/è¿›ç¨‹æ§åˆ¶/","link":"","permalink":"https://tutouwang.vercel.app/2022/04/10/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/%E8%BF%9B%E7%A8%8B%E6%8E%A7%E5%88%B6/","excerpt":"","text":"è¿›ç¨‹é€€å‡º12345#include &lt;stdlib.h&gt;void exit(int status);#include &lt;unistd.h&gt;void _exit(int status); 12345678910111213141516171819202122232425262728293031323334/************************************************************************* &gt; File Name: exit.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ10æ—¥ æ˜ŸæœŸæ—¥ 19æ—¶08åˆ†41ç§’ ************************************************************************//* #include &lt;stdlib.h&gt; void exit(int status); #include &lt;unistd.h&gt; void _exit(int status); çˆ¶è¿›ç¨‹å›æ”¶å­è¿›ç¨‹æ—¶å€™ä¼šç”¨åˆ°! statuså‚æ•°: æ˜¯è¿›ç¨‹é€€æ—¶çš„ä¸€ä¸ªçŠ¶æ€ä¿¡æ¯ã€‚çˆ¶è¿›ç¨‹å›æ”¶å­è¿›ç¨‹èµ„æºæ—¶å€™å¯ä»¥h è·å–åˆ°ã€‚*/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;unistd.h&gt;int main() &#123; printf(&quot;hello\\n&quot;); printf(&quot;world&quot;); //exit(0); // è¾“å‡º hello world --- \\n ä¼šåˆ·æ–°ç¼“å†²åŒº å§ç¼“å†²åŒº world è¾“å‡ºåˆ°æ§åˆ¶å° _exit(0); // è¾“å‡º hello return 0;&#125; å­¤å„¿è¿›ç¨‹çˆ¶è¿›ç¨‹è¿è¡Œç»“æŸï¼Œä½†å­è¿›ç¨‹è¿˜åœ¨è¿è¡Œ(æœªè¿è¡Œç»“æŸ)ï¼Œè¿™æ ·çš„å­è¿›ç¨‹å°±ç§°ä¸ºå­¤å„¿è¿›ç¨‹(Orphan Process). æ¯å½“å‡ºç°ä¸€ä¸ªå­¤å„¿è¿›ç¨‹æ—¶å€™,å†…æ ¸å°±æŠŠå­¤å„¿è¿›ç¨‹çš„çˆ¶è¿›ç¨‹è®¾ç½®ä¸ºinitï¼Œè€Œinitè¿›ç¨‹ä¼šå¾ªç¯åœ°wait()(è¿›ç¨‹èµ„æºé‡Šæ”¾)å®ƒçš„å·²ç»é€€å‡ºçš„å­è¿›ç¨‹ã€‚è¿™æ ·ï¼Œå½“ä¸€ä¸ªå­¤å„¿è¿›ç¨‹å‡„å‡‰åœ°ç»“æŸäº†å…¶ç”Ÿå‘½å‘¨æœŸçš„æ—¶å€™ï¼Œinitè¿›ç¨‹å°±ä¼šä»£è¡¨å…šå’Œæ”¿åºœå‡ºé¢å¤„ç†å®ƒçš„ä¸€åˆ‡å–„åå·¥ä½œ å› æ­¤å­¤å„¿è¿›ç¨‹å¹¶ä¸ä¼šæœ‰ä»€ä¹ˆå±å®³ã€‚ å¯¹æ¯”ä»£ç 12345678910111213141516171819202122232425262728293031/************************************************************************* &gt; File Name: fork_exit.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ10æ—¥ æ˜ŸæœŸæ—¥ 21æ—¶12åˆ†28ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;int main() &#123; pid_t pid = fork(); // åˆ¤æ–­æ˜¯çˆ¶è¿›ç¨‹ if(pid &gt; 0) &#123; printf(&quot;i am parent process, pid : %d, ppid : %d\\n&quot;, getpid(), getppid()); &#125; else if(pid == 0) &#123; printf(&quot;i am child process, pid : %d, ppid : %d\\n&quot;, getpid(), getppid()); sleep(1); &#125; for(int i = 0; i &lt; 3; i++) &#123; printf(&quot;i : %d, pid : %d\\n&quot;, i, getpid()); &#125; return 0;&#125; æ³¨æ„ pidã€ppid å˜åŒ– 12345678910111213141516171819202122232425262728293031/************************************************************************* &gt; File Name: fork_exit.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ10æ—¥ æ˜ŸæœŸæ—¥ 21æ—¶12åˆ†28ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;int main() &#123; pid_t pid = fork(); // åˆ¤æ–­æ˜¯çˆ¶è¿›ç¨‹ if(pid &gt; 0) &#123; printf(&quot;i am parent process, pid : %d, ppid : %d\\n&quot;, getpid(), getppid()); &#125; else if(pid == 0) &#123; sleep(1); printf(&quot;i am child process, pid : %d, ppid : %d\\n&quot;, getpid(), getppid()); &#125; for(int i = 0; i &lt; 3; i++) &#123; printf(&quot;i : %d, pid : %d\\n&quot;, i, getpid()); &#125; return 0; åƒµå°¸è¿›ç¨‹æ¯ä¸ªè¿›ç¨‹ç»“æŸä¹‹åï¼Œéƒ½ä¼šé‡Šæ”¾è‡ªå·±åœ°å€ç©ºé—´ä¸­çš„ç”¨æˆ·åŒºæ•°æ®ï¼Œå†…æ ¸åŒºçš„ PCBæ²¡æœ‰åŠæ³•è‡ªå·±é‡Šæ”¾æ‰ï¼Œéœ€è¦çˆ¶è¿›ç¨‹å»é‡Šæ”¾ã€‚ è¿›ç¨‹ç»ˆæ­¢æ—¶ï¼Œçˆ¶è¿›ç¨‹å°šæœªå›æ”¶ï¼Œå­è¿›ç¨‹æ®‹ç•™èµ„æºï¼ˆPCBï¼‰å­˜æ”¾äºå†…æ ¸ä¸­ï¼Œå˜æˆåƒµå°¸( zombie)è¿›ç¨‹ã€‚ åƒµå°¸è¿›ç¨‹ä¸èƒ½è¢«kill -9æ€æ­»ã€‚ è¿™æ ·å°±ä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœçˆ¶è¿›ç¨‹ä¸è°ƒç”¨wait()æˆ–waitpid()çš„è¯ï¼Œé‚£ä¹ˆä¿ç•™çš„é‚£æ®µä¿¡æ¯å°±ä¸ä¼šé‡Šæ”¾ï¼Œå…¶è¿›ç¨‹å·å°±ä¼šä¸€ç›´è¢«å ç”¨ï¼Œä½†æ˜¯ç³»ç»Ÿæ‰€èƒ½ä½¿ç”¨çš„è¿›ç¨‹å·æ˜¯æœ‰é™çš„ï¼Œ å¦‚æœå¤§é‡çš„äº§ç”Ÿåƒµå°¸è¿›ç¨‹ï¼Œå°†å› ä¸ºæ²¡æœ‰å¯ç”¨çš„è¿›ç¨‹å·è€Œå¯¼è‡´ç³»ç»Ÿä¸èƒ½äº§ç”Ÿæ–°çš„è¿›ç¨‹ï¼Œæ­¤å³ä¸ºåƒµå°¸è¿›ç¨‹çš„å±å®³ï¼Œåº”å½“é¿å…ã€‚ 123456789101112131415161718192021222324252627282930313233/************************************************************************* &gt; File Name: zombie.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ10æ—¥ æ˜ŸæœŸæ—¥ 21æ—¶12åˆ†28ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;int main() &#123; pid_t pid = fork(); // åˆ¤æ–­æ˜¯çˆ¶è¿›ç¨‹ if(pid &gt; 0) &#123; while(1) &#123; printf(&quot;i am parent process, pid : %d, ppid : %d\\n&quot;, getpid(), getppid()); sleep(1); &#125; &#125; else if(pid == 0) &#123; printf(&quot;i am child process, pid : %d, ppid : %d\\n&quot;, getpid(), getppid()); &#125; for(int i = 0; i &lt; 3; i++) &#123; printf(&quot;i : %d, pid : %d\\n&quot;, i, getpid()); &#125; return 0;&#125; æ–°æ‰“å¼€ä¸€ä¸ªçª—å£ ps aux æŸ¥çœ‹è¿›ç¨‹ å¯ä»¥è¯•ç€ç”¨ kill -9 è¿›ç¨‹id (æµ‹è¯•æ€æ­»åƒµå°¸è¿›ç¨‹) å¦‚æœçˆ¶è¿›ç¨‹ç»“æŸäº† å­è¿›ç¨‹å°±ä¼šè¢«è¿›ç¨‹ä¸º 1 çš„æ¥æ›¿ è¿›ç¨‹å›æ”¶åœ¨æ¯ä¸ªè¿›ç¨‹é€€å‡ºçš„æ—¶å€™ï¼Œå†…æ ¸é‡Šæ”¾è¯¥è¿›ç¨‹æ‰€æœ‰çš„èµ„æºã€åŒ…æ‹¬æ‰“å¼€çš„æ–‡ä»¶ã€å ç”¨çš„å†…å­˜ç­‰ã€‚ä½†æ˜¯ä»ç„¶ä¸ºå…¶ä¿ç•™ä¸€å®šçš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ä¸»è¦ä¸»è¦æŒ‡è¿›ç¨‹æ§åˆ¶å—PCBçš„ä¿¡æ¯(åŒ…æ‹¬è¿›ç¨‹å·ã€é€€å‡ºçŠ¶æ€ã€è¿è¡Œæ—¶é—´ç­‰)ã€‚ çˆ¶è¿›ç¨‹å¯ä»¥é€šè¿‡è°ƒç”¨waitæˆ–waitpidå¾—åˆ°å®ƒçš„é€€å‡ºçŠ¶æ€åŒæ—¶å½»åº•æ¸…é™¤æ‰è¿™ä¸ªè¿›ç¨‹ã€‚ wait()å’Œwaitpid()å‡½æ•°çš„åŠŸèƒ½ä¸€æ ·ï¼ŒåŒºåˆ«åœ¨äº, wait()å‡½æ•°ä¼šé˜»å¡ï¼Œwaitpid ()å¯ä»¥è®¾ç½®ä¸é˜»å¡, waitpid()è¿˜å¯ä»¥æŒ‡å®šç­‰å¾…å“ªä¸ªå­è¿›ç¨‹ç»“æŸã€‚ æ³¨æ„:ä¸€æ¬¡waitæˆ–waitpidè°ƒç”¨åªèƒ½æ¸…ç†ä¸€ä¸ªå­è¿›ç¨‹ï¼Œæ¸…ç†å¤šä¸ªå­è¿›ç¨‹åº”ä½¿ç”¨å¾ªç¯ã€‚","categories":[{"name":"Linuxå¤šè¿›ç¨‹å¼€å‘","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://tutouwang.vercel.app/tags/Linux/"}]},{"title":"execå‡½æ•°æ—","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘/execå‡½æ•°æ—","date":"2022-04-08T10:26:59.000Z","updated":"2022-05-29T08:00:03.580Z","comments":true,"path":"2022/04/08/Linuxå¤šè¿›ç¨‹å¼€å‘/execå‡½æ•°æ—/","link":"","permalink":"https://tutouwang.vercel.app/2022/04/08/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/exec%E5%87%BD%E6%95%B0%E6%97%8F/","excerpt":"","text":"å‡½æ•°æ—æ— ï¼š ä¸€æ—å°±æ˜¯ä¸€ç³»åˆ—å‡½æ•° ç›¸åŒæˆ–è€…ç›¸ä¼¼çš„ å¦‚oop å‡½æ•°é‡è½½ åå­—ä¸åŒ ä½†æ˜¯å®ç°çš„åŠŸèƒ½ç›¸ä¼¼çš„ execå‡½æ•°æ—ä»‹ç»execå‡½æ•°æ—çš„ä½œç”¨æ˜¯æ ¹æ®æŒ‡å®šçš„æ–‡ä»¶åæ‰¾åˆ°å¯æ‰§è¡Œæ–‡ä»¶ï¼Œå¹¶ç”¨å®ƒæ¥å–ä»£è°ƒç”¨è¿›ç¨‹çš„å†…å®¹ï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯åœ¨è°ƒç”¨è¿›ç¨‹å†…éƒ¨æ‰§è¡Œä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚ execå‡½æ•°æ—çš„å‡½æ•°æ‰§è¡ŒæˆåŠŸåä¸ä¼šè¿”å›ï¼Œå› ä¸ºè°ƒç”¨è¿›ç¨‹çš„å®ä½“ï¼ŒåŒ…æ‹¬ä»£ç æ®µï¼Œæ•°æ®æ®µå’Œå †æ ˆç­‰éƒ½å·²ç»è¢«æ–°çš„å†…å®¹å–ä»£ï¼åªç•™ä¸‹è¿›ç¨‹ID ç­‰ä¸€äº›è¡¨é¢ä¸Šçš„ä¿¡æ¯ä»ä¿æŒåŸæ ·ï¼Œé¢‡æœ‰äº›ç¥ä¼¼â€ä¸‰åå…­è®¡â€ä¸­çš„â€é‡‘è‰è„±å£³â€ã€‚çœ‹ä¸Šå»è¿˜æ˜¯æ—§çš„èº¯å£³ï¼Œå´å·²ç»æ³¨å…¥äº†æ–°çš„çµé­‚ã€‚åªæœ‰è°ƒç”¨å¤±è´¥äº†ï¼Œå®ƒä»¬æ‰ä¼šè¿”å› -1ï¼Œä»åŸç¨‹åºçš„è°ƒç”¨ç‚¹æ¥ç€å¾€ä¸‹æ‰§è¡Œã€‚ execå‡½æ•°æ—ä½œç”¨å›¾è§£æ›¿æ¢ æœ€åä¸€æ¡æ‰æ˜¯Linuxå‡½æ•°åº“çš„ å…¶ä»–éƒ½æ˜¯æ ‡å‡†cåº“çš„ execl1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556/************************************************************************* &gt; File Name: execl.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ10æ—¥ æ˜ŸæœŸæ—¥ 11æ—¶37åˆ†27ç§’ ************************************************************************//* #include &lt;unistd.h&gt; * int execl(const char *path, const char *arg, ...); * - å‚æ•°: * - path: éœ€è¦æŒ‡å®šçš„æ‰§è¡Œçš„æ–‡ä»¶çš„è·¯å¾„æˆ–è€…åç§° * a.out /test/é«˜å¹¶å‘/Linuxå¤šçº¿ç¨‹/execå‡½æ•°æ—/execl.aout * å»ºè®®å†™ç»å¯¹è·¯å¾„ * ./a.out hello world * - arg: æ˜¯æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶æ‰€éœ€è¦çš„å‚æ•°åˆ—è¡¨ * ç¬¬ä¸€ä¸ªå‚æ•°ä¸€èˆ¬æ²¡æœ‰ä»€ä¹ˆä½œç”¨, ä¸ºäº†æ–¹ä¾¿, ä¸€èˆ¬å¯å†™çš„æ˜¯æ‰§è¡Œçš„ç¨‹åºåç§° * ä»äºŒä¸ªå‚æ•°å¼€å§‹å¾€å, å°±æ˜¯ç¨‹åºæ‰§è¡Œçš„æ‰€éœ€è¦çš„å‚æ•°åˆ—è¡¨ * å‚æ•°æœ€åè¦ä»¥NULLç»“æŸ(å“¨å…µ) * - è¿”å›å€¼: * åªæœ‰è°ƒç”¨å¤±è´¥, æ‰ä¼šè¿”å›å€¼, è¿”å›-1, å¹¶è®¾ç½®errno * å¦‚æœè°ƒç”¨æˆåŠŸæ²¡æœ‰è¿”å›å€¼ï¼ * */#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;int main() &#123; // åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹, åœ¨å­è¿›ç¨‹ä¸­æ‰§è¡Œexecå‡½æ•°æ—ä¸­çš„å‡½æ•° pid_t pid = fork(); if(pid &gt; 0) &#123; // çˆ¶è¿›ç¨‹ printf(&quot;i am paren peocess, pid : %d\\n&quot;, getpid()); sleep(1); &#125; else if(pid == 0) &#123; // å­è¿›ç¨‹ // è‡ªå·±çš„å¯æ‰§è¡Œç¨‹åº --- å‚æ•° å¯æ‰§è¡Œæ–‡ä»¶ // execl(&quot;test&quot;, &quot;test&quot;, NULL); // which ps --- /usr/bin/ps // or // execl(&quot;/usr/bin/ps&quot;, &quot;ps&quot;, &quot;a&quot;,&quot;u&quot;,&quot;x&quot;, NULL); execl(&quot;/usr/bin/ps&quot;, &quot;ps&quot;, &quot;aux&quot;, NULL); printf(&quot;i am child proess pid = %d\\n&quot;, getpid()); &#125; for(int i = 0; i &lt; 3; i++) &#123; printf(&quot; i = %d, pid = %d\\n&quot;, i, getpid()); &#125; return 0;&#125; execlpenv // ç¯å¢ƒå˜é‡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/************************************************************************* &gt; File Name: execl.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ10æ—¥ æ˜ŸæœŸæ—¥ 11æ—¶37åˆ†27ç§’ ************************************************************************//* #include &lt;unistd.h&gt; * int execl(const char *file, const char *arg, ...); * - ä¼šåˆ°ç¯å¢ƒå˜é‡ä¸­æŸ¥æ‰¾æŒ‡å®šçš„å¯æ‰§è¡Œæ–‡ä»¶, å¦‚æœæ‰¾åˆ°äº†å°±æ‰§è¡Œ, æ‰¾ä¸åˆ°å°±æ‰§è¡Œä¸æˆåŠŸã€‚ * - å‚æ•°: * - file: éœ€è¦æ‰§è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶çš„æ–‡ä»¶å * - arg: æ˜¯æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶æ‰€éœ€è¦çš„å‚æ•°åˆ—è¡¨ * ç¬¬ä¸€ä¸ªå‚æ•°ä¸€èˆ¬æ²¡æœ‰ä»€ä¹ˆä½œç”¨, ä¸ºäº†æ–¹ä¾¿, ä¸€èˆ¬å¯å†™çš„æ˜¯æ‰§è¡Œçš„ç¨‹åºåç§° * ä»äºŒä¸ªå‚æ•°å¼€å§‹å¾€å, å°±æ˜¯ç¨‹åºæ‰§è¡Œçš„æ‰€éœ€è¦çš„å‚æ•°åˆ—è¡¨ * å‚æ•°æœ€åè¦ä»¥NULLç»“æŸ(å“¨å…µ) * - è¿”å›å€¼: * åªæœ‰è°ƒç”¨å¤±è´¥, æ‰ä¼šè¿”å›å€¼, è¿”å›-1, å¹¶è®¾ç½®errno * å¦‚æœè°ƒç”¨æˆåŠŸæ²¡æœ‰è¿”å›å€¼ï¼ * */#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;int main() &#123; // åˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹, åœ¨å­è¿›ç¨‹ä¸­æ‰§è¡Œexecå‡½æ•°æ—ä¸­çš„å‡½æ•° pid_t pid = fork(); if(pid &gt; 0) &#123; // çˆ¶è¿›ç¨‹ printf(&quot;i am paren peocess, pid : %d\\n&quot;, getpid()); sleep(1); &#125; else if(pid == 0) &#123; // å­è¿›ç¨‹ // è‡ªå·±çš„å¯æ‰§è¡Œç¨‹åº --- å‚æ•° å¯æ‰§è¡Œæ–‡ä»¶ // execl(&quot;test&quot;, &quot;test&quot;, NULL); // which ps --- /usr/bin/ps // or // execl(&quot;/usr/bin/ps&quot;, &quot;ps&quot;, &quot;a&quot;,&quot;u&quot;,&quot;x&quot;, NULL); execlp(&quot;ps&quot;, &quot;ps&quot;, &quot;aux&quot;, NULL); printf(&quot;i am child proess pid = %d\\n&quot;, getpid()); &#125; for(int i = 0; i &lt; 3; i++) &#123; printf(&quot; i = %d, pid = %d\\n&quot;, i, getpid()); &#125; return 0;&#125; execv1234567/* int execv(const char *path, char *const argv[]);* - argv: æ˜¯éœ€è¦çš„å‚æ•°çš„ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„** // ä½¿ç”¨ execv* char *argv[] = &#123;&quot;ps&quot;, &quot;aux&quot;, NULL&#125;;* execv(&quot;/usr/bin/ps&quot;, argv);*/ execve123456/* * int execve(const char *filename, char *const argv[], char *const envp[]); * å…ˆä»æŒ‡å®šç¯å¢ƒå˜é‡ä¸­ æŸ¥æ‰¾ å¦‚æœç¬¬ä¸€ä¸ªæŸ¥æ‰¾ä¸åˆ°å°±åˆ°ç¬¬äºŒä¸ªä¸­æŸ¥æ‰¾ ... * char *envp[] = &#123;&quot;/usr/bin&quot;, &quot;/usr/bin/test&quot;, &quot;xxxxx&quot;&#125;; */","categories":[{"name":"Linuxå¤šè¿›ç¨‹å¼€å‘","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"[object Object]","slug":"object-Object","permalink":"https://tutouwang.vercel.app/tags/object-Object/"}]},{"title":"STL-Sortè§£æ","slug":"OOP/æ‰‹åŠ¨å®ç°Sort","date":"2022-04-08T09:13:49.000Z","updated":"2022-07-12T02:47:52.618Z","comments":true,"path":"2022/04/08/OOP/æ‰‹åŠ¨å®ç°Sort/","link":"","permalink":"https://tutouwang.vercel.app/2022/04/08/OOP/%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0Sort/","excerpt":"","text":"STL-æºç æ–‡ä»¶ç™¾åº¦ç½‘ç›˜é“¾æ¥ï¼šhttps://pan.baidu.com/s/1eNo5hZkBndvO3-eZTCG6VAæå–ç ï¼šm207 cd SGI-STL-master&#x2F; cd SGI-STL\\ V3.3&#x2F; vim algorithm EXC tag sort&#x2F;&#x2F; è‡ªå·±æƒ³è¦æŸ¥æ‰¾çš„ cppreference https://en.cppreference.com/w/cpp/header STL_sort æ¨¡æ¿è§£ææºç  __intrsort_loop __stl_threshold &#x3D; 16; â€‹ æ‰€æœ‰å¾…æ’åºåŒºé—´ä¼šè¢«åˆ’åˆ†ä¸ºæ¯ä¸ªç»„å¤§å°ä¸º16çš„ç»„é—´æœ‰åºç»„å†…æ— åº â€“__depth_limit; â€‹ æ§åˆ¶é€’å½’æ·±, å½“åˆ°è¾¾ä¸€å®šæ·±åº¦å°±ä¼šæ”¹å˜æˆå †æ’åº æ‰‹åŠ¨å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428/************************************************************************* &gt; File Name: Sort.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2021å¹´11æœˆ10æ—¥ æ˜ŸæœŸä¸‰ 20æ—¶30åˆ†05ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;algorithm&gt;#include &lt;time.h&gt;#include &lt;functional&gt;using namespace std;// MAX_N == å­˜æ”¾æ•°ç»„å¤§å°ï¼Œn == å¾ªç¯å³è¾¹è¾¹ç•Œconst int MAX_N = 100, n = 20;#define BEGINS(x) namespace x &#123;#define ENDS(x) &#125; // end of namespace x// åˆå§‹åŒ–_BEGINESvoid init(int *f) &#123; for(int i = 0; i &lt; n; i++) *(f + i) = rand() % 10; return ;&#125;void output(int *first, int *last, const char *msg) &#123; cout &lt;&lt; msg; while(first != last) &#123; cout &lt;&lt; *first &lt;&lt; &quot; &quot;; ++first; &#125; cout &lt;&lt; endl; return ;&#125;// åˆå§‹åŒ–_ENDS// STL_è‡ªå¸¦sort_ä½¿ç”¨BEGINS(test1)bool cmp1(int a, int b) &#123; return a &gt; b;&#125;class CMP &#123;public : bool operator()(int a, int b) &#123; return a &lt; b; &#125;&#125;;int main() &#123; int f[MAX_N]; init(f); output(f, f + n, &quot;default : &quot;); sort(f, f + n); output(f, f + n, &quot;none : &quot;); sort(f, f + n, cmp1); output(f, f + n, &quot;cmp1 : &quot;); CMP cmp2; sort(f, f + n, cmp2); output(f, f + n, &quot;cmp2 : &quot;); return 0;&#125;ENDS(test1)// æ‰‹åŠ¨å®ç°sort firstEditionBEGINS(test2)bool cmp1(int a, int b) &#123; return a &gt; b;&#125;class CMP &#123;public : bool operator()(int a, int b) &#123; return a &lt; b; &#125;&#125;;void sort(int *first, int *last, function&lt;bool(int, int)&gt; cmp = less&lt;int&gt;()) &#123; if(first &gt;= last) return ; int *x = first, *y = last - 1, z = *first; while(x &lt; y) &#123; // while(x &lt; y &amp;&amp; *y &gt;= z) y--; while(x &lt; y &amp;&amp; cmp(z, *y)) y--; if(x &lt; y) *(x++) = *y; // while(x &lt; y &amp;&amp; *x &lt;= z) x++; while(x &lt; y &amp;&amp; cmp(*x, z)) x++; if(x &lt; y) *(y--) = *x; &#125; *x = z; sort(first, x, cmp); sort(x + 1, last, cmp); return ;&#125;int main() &#123; int f[MAX_N]; init(f); output(f, f + n, &quot;default : &quot;); sort(f, f + n); output(f, f + n, &quot;none : &quot;); sort(f, f + n, cmp1); output(f, f + n, &quot;cmp1 : &quot;); CMP cmp2; sort(f, f + n, cmp2); output(f, f + n, &quot;cmp2 : &quot;); return 0;&#125;ENDS(test2)// æ‰‹åŠ¨å®ç°sort secondEdition å•è¾¹é€’å½’æ³•BEGINS(test3)bool cmp1(int a, int b) &#123; return a &gt; b;&#125;class CMP &#123;public : bool operator()(int a, int b) &#123; return a &lt; b; &#125;&#125;;void sort(int *first, int *last, function&lt;bool(int, int)&gt; cmp = less&lt;int&gt;()) &#123; if(first &gt;= last) return ; while(first &lt; last) &#123; int *x = first, *y = last - 1, z = *first; while(x &lt; y) &#123; while(x &lt; y &amp;&amp; cmp(z, *y)) y--; if(x &lt; y) *(x++) = *y; while(x &lt; y &amp;&amp; cmp(*x, z)) x++; if(x &lt; y) *(y--) = *x; &#125; *x = z; sort(first, x, cmp); first = x + 1; &#125; return ;&#125;int main() &#123; int f[MAX_N]; init(f); output(f, f + n, &quot;default : &quot;); sort(f, f + n); output(f, f + n, &quot;none : &quot;); sort(f, f + n, cmp1); output(f, f + n, &quot;cmp1 : &quot;); CMP cmp2; sort(f, f + n, cmp2); output(f, f + n, &quot;cmp2 : &quot;); return 0;&#125;ENDS(test3)// æ‰‹åŠ¨å®ç°sort secondEdition å•è¾¹é€’å½’æ³•_æ— ç›‘ç£BEGINS(test4)bool cmp1(int a, int b) &#123; return a &gt; b;&#125;class CMP &#123;public : bool operator()(int a, int b) &#123; return a &lt; b; &#125;&#125;;void sort(int *first, int *last, function&lt;bool(int, int)&gt; cmp = less&lt;int&gt;()) &#123; while(first &lt; last) &#123; int *x = first, *y = last - 1, z = *first; do &#123; while(cmp(*x, z)) x++; while(cmp(z, *y)) y--; if(x &lt;= y) &#123; swap(*x, *y); x++, y--; &#125; &#125; while(x &lt;= y); sort(x, last, cmp); last = y + 1; &#125; return ;&#125;int main() &#123; int f[MAX_N]; init(f); output(f, f + n, &quot;default : &quot;); sort(f, f + n); output(f, f + n, &quot;none : &quot;); sort(f, f + n, cmp1); output(f, f + n, &quot;cmp1 : &quot;); CMP cmp2; sort(f, f + n, cmp2); output(f, f + n, &quot;cmp2 : &quot;); return 0;&#125;ENDS(test4)// æ‰‹åŠ¨å®ç°sort secondEdition å•è¾¹é€’å½’æ³•_æ— ç›‘ç£_æ’å…¥æ’åºBEGINS(test5)bool cmp1(int a, int b) &#123; return a &gt; b;&#125;class CMP &#123;public : bool operator()(int a, int b) &#123; return a &lt; b; &#125;&#125;;const int threshold = 16;void intro_loop(int *first, int *last, function&lt;bool(int, int)&gt; cmp = less&lt;int&gt;()) &#123; while(last - first &gt; threshold) &#123; int *x = first, *y = last - 1, z = *first; do &#123; while(cmp(*x, z)) x++; while(cmp(z, *y)) y--; if(x &lt;= y) &#123; swap(*x, *y); x++, y--; &#125; &#125; while(x &lt;= y); sort(x, last, cmp); last = y + 1; &#125; return ;&#125;void insertion_sort(int *first, int *last, function&lt;bool(int, int)&gt; cmp = less&lt;int&gt;()) &#123; int *ind = first; // æ‰¾åˆ°æœ€å°å€¼ for(int *i = first + 1; i &lt; last; ++i) &#123; if(cmp(*i, *ind)) ind = i; &#125; while(ind != first) &#123; swap(*ind, *(ind - 1)); --ind; &#125; for(int *i = first + 2; i &lt; last; ++i) &#123; int *j = i; while(cmp(*j, *(j - 1))) &#123; swap(*j, *(j - 1)); --j; &#125; &#125; return ;&#125;void sort(int *first, int *last, function&lt;bool(int, int)&gt; cmp = less&lt;int&gt;()) &#123; intro_loop(first, last, cmp); insertion_sort(first, last, cmp); return ;&#125;int main() &#123; int f[MAX_N]; init(f); output(f, f + n, &quot;default : &quot;); sort(f, f + n); output(f, f + n, &quot;none : &quot;); sort(f, f + n, cmp1); output(f, f + n, &quot;cmp1 : &quot;); CMP cmp2; sort(f, f + n, cmp2); output(f, f + n, &quot;cmp2 : &quot;); return 0;&#125;ENDS(test5)// æ‰‹åŠ¨å®ç°sort secondEdition å•è¾¹é€’å½’æ³•_æ— ç›‘ç£_æ’å…¥æ’åº_éšæœºè¿­ä»£å™¨(æŒ‡é’ˆå¯¹è±¡)BEGINS(test6)bool cmp1(int a, int b) &#123; return a &gt; b;&#125;class CMP &#123;public : bool operator()(int a, int b) &#123; return a &lt; b; &#125;&#125;;const int threshold = 16;class RandomIter&#123;public : RandomIter(int *ptr) : ptr(ptr)&#123;&#125; int &amp;operator*() &#123;return *ptr; &#125; RandomIter operator-(int x) &#123;return RandomIter(ptr - x); &#125; RandomIter operator+(int x) &#123;return RandomIter(ptr + x); &#125; int operator-(const RandomIter &amp;iter) &#123;return ptr - iter.ptr; &#125; // å‰ ++ operator++() // å ++ operator++(int) RandomIter &amp;operator++() &#123; ++ptr; return *this; &#125;; RandomIter &amp;operator--() &#123; --ptr; return *this; &#125;; bool operator&lt;(const RandomIter &amp;iter) const &#123; return this-&gt;ptr &lt; iter.ptr; &#125; bool operator&gt;(const RandomIter &amp;iter) const &#123; return iter &lt; *this; &#125; bool operator&lt;=(const RandomIter &amp;iter) const &#123; return !(iter &lt; *this); &#125; bool operator&gt;=(const RandomIter &amp;iter) const &#123; return !(*this &lt; iter); &#125; bool operator==(const RandomIter &amp;iter) const &#123; return !(iter &lt; *this) &amp;&amp; !(*this &lt; iter); &#125; bool operator!=(const RandomIter &amp;iter) &#123; return !(iter == *this); &#125;private : int *ptr;&#125;;void intro_loop(RandomIter first, RandomIter last, function&lt;bool(int, int)&gt; cmp = less&lt;int&gt;()) &#123; while(last - first &gt; threshold) &#123; RandomIter x = first, y = last - 1; int z = *first; do &#123; while(cmp(*x, z)) ++x; while(cmp(z, *y)) --y; if(x &lt;= y) &#123; swap(*x, *y); ++x, --y; &#125; &#125; while(x &lt;= y); intro_loop(x, last, cmp); last = y + 1; &#125; return ;&#125;void insertion_sort(RandomIter first, RandomIter last, function&lt;bool(int, int)&gt; cmp = less&lt;int&gt;()) &#123; RandomIter ind = first; // æ‰¾åˆ°æœ€å°å€¼ for(RandomIter i = first + 1; i &lt; last; ++i) &#123; if(cmp(*i, *ind)) ind = i; &#125; while(ind != first) &#123; swap(*ind, *(ind - 1)); --ind; &#125; for(RandomIter i = first + 2; i &lt; last; ++i) &#123; RandomIter j = i; while(cmp(*j, *(j - 1))) &#123; swap(*j, *(j - 1)); --j; &#125; &#125; return ;&#125;void sort(RandomIter first, RandomIter last, function&lt;bool(int, int)&gt; cmp = less&lt;int&gt;()) &#123; intro_loop(first, last, cmp); insertion_sort(first, last, cmp); return ;&#125;int main() &#123; int f[MAX_N]; init(f); output(f, f + n, &quot;default : &quot;); sort(f, f + n); output(f, f + n, &quot;none : &quot;); sort(f, f + n, cmp1); output(f, f + n, &quot;cmp1 : &quot;); CMP cmp2; sort(f, f + n, cmp2); output(f, f + n, &quot;cmp2 : &quot;); return 0;&#125;ENDS(test6)int main() &#123; // test1::main(); // test2::main(); // test3::main(); // test4::main(); // test5::main(); test6::main(); return 0;&#125; å¿«é€Ÿé€‰æ‹© nth_element","categories":[{"name":"OOP","slug":"OOP","permalink":"https://tutouwang.vercel.app/categories/OOP/"}],"tags":[]},{"title":"GDBå¤šçº¿ç¨‹è°ƒè¯•","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘/GDBå¤šçº¿ç¨‹è°ƒè¯•","date":"2022-04-06T09:09:41.000Z","updated":"2022-05-29T07:59:50.548Z","comments":true,"path":"2022/04/06/Linuxå¤šè¿›ç¨‹å¼€å‘/GDBå¤šçº¿ç¨‹è°ƒè¯•/","link":"","permalink":"https://tutouwang.vercel.app/2022/04/06/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/GDB%E5%A4%9A%E7%BA%BF%E7%A8%8B%E8%B0%83%E8%AF%95/","excerpt":"","text":"GDBå¤šè¿›ç¨‹è°ƒè¯•ä½¿ç”¨GDBè°ƒè¯•çš„æ—¶å€™ï¼ŒGDBé»˜è®¤åªèƒ½è·Ÿè¸ªä¸€ä¸ªè¿›ç¨‹ï¼Œå¯ä»¥åœ¨forkå‡½æ•°è°ƒç”¨ä¹‹å‰,é€šè¿‡æŒ‡ä»¤è®¾ç½®GDBè°ƒè¯•å·¥å…·è·Ÿè¸ªçˆ¶è¿›ç¨‹æˆ–è€…è·Ÿè¸ªè·Ÿè¸ªå­è¿›ç¨‹ï¼Œé»˜è®¤è·Ÿè¸ªçˆ¶è¿›ç¨‹ã€‚ è®¾ç½®è°ƒè¯•çˆ¶è¿›ç¨‹æˆ–è€…å­è¿›ç¨‹ï¼š set follow-fork-mode [paren(é»˜è®¤) | child] è®¾ç½®è°ƒè¯•æ¨¡å¼ï¼šset detach-on-fork [on | off] é»˜è®¤ on,è¡¨ç¤ºè°ƒè¯•å½“å‰è¿›ç¨‹çš„æ—¶å€™,å…¶ä»–çš„è¿›ç¨‹ç»§ç»­è¿è¡Œ, å¦‚æœä¸ºoff, è°ƒè¯•å½“å‰è¿›ç¨‹çš„æ—¶å€™, å…¶ä»–è¿›ç¨‹è¢«GDBæŒ‚èµ·ã€‚ æŸ¥çœ‹è°ƒè¯•çš„è¿›ç¨‹ï¼šinfo inferiors åˆ‡æ¢å½“å‰è°ƒè¯•çš„è¿›ç¨‹ï¼š inferior id ä½¿è¿›ç¨‹è„±ç¦»GDBè°ƒè¯•ï¼šdetach inferiors id ä½¿è¿›ç¨‹ç§»é™¤GDBè°ƒè¯•ï¼šremo inferiors id gdbå¤šçº¿ç¨‹æŠ¥é”™8.x ç‰ˆæœ¬è°ƒè¯•å¤šè¿›ç¨‹ä¼šæœ‰ä¸€äº›BUG inferior 2 info inferiors &#x2F;&#x2F; æŸ¥çœ‹","categories":[{"name":"Linuxå¤šè¿›ç¨‹å¼€å‘","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://tutouwang.vercel.app/tags/Linux/"}]},{"title":"è¿›ç¨‹çŠ¶æ€è½¬æ¢","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘/è¿›ç¨‹çŠ¶æ€è½¬æ¢","date":"2022-04-02T11:12:47.000Z","updated":"2022-05-29T08:00:07.171Z","comments":true,"path":"2022/04/02/Linuxå¤šè¿›ç¨‹å¼€å‘/è¿›ç¨‹çŠ¶æ€è½¬æ¢/","link":"","permalink":"https://tutouwang.vercel.app/2022/04/02/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/%E8%BF%9B%E7%A8%8B%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2/","excerpt":"","text":"è¿›ç¨‹çŠ¶æ€è½¬æ¢ä¸‰æ€æ¨¡å‹ï¼šå°±ç»ªæ€ã€è¿è¡Œæ€ã€é˜»å¡æ€ äº”æ€æ¨¡å‹ï¼šæ–°å»ºæ€ã€å°±ç»ªæ€ã€è¿è¡Œæ€ã€é˜»å¡æ€ã€ç»ˆæ­¢æ€ è¿›ç¨‹çš„çŠ¶æ€ æŸ¥çœ‹è¿›ç¨‹ man ps ps aux &#x2F; ajx (PPID çˆ¶è¿›ç¨‹çš„IPã€ PID è¿›ç¨‹çš„IDã€PGID è¿›ç¨‹ç»„çš„IDã€SID ç»˜è¯) aï¼šæ˜¾ç¤ºç»ˆç«¯ä¸Šçš„æ‰€æœ‰è¿›ç¨‹, åŒ…æ‹¬å…¶ä»–ç”¨æˆ·çš„è¿›ç¨‹ u: æ˜¾ç¤ºè¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯ x: æ˜¾ç¤ºæ²¡æœ‰æ§åˆ¶ç»ˆç«¯çš„è¿›ç¨‹ j: åˆ—å‡ºä¸ä½œä¸šæ§åˆ¶ç›¸å…³çš„ä¿¡æ¯ è¿›ç¨‹çŠ¶æ€è½¬æ¢STAT å‚æ•°æ„ä¹‰ï¼šâ€‹ D ä¸å¯ä¸­æ–­ Uninterruptibleï¼ˆusually IOï¼‰ â€‹ R æ­£åœ¨è¿è¡Œ, æˆ–åœ¨é˜Ÿåˆ—ä¸­çš„è¿›ç¨‹ â€‹ S (å¤§å†™) å¤„äºä¼‘çœ çŠ¶æ€ â€‹ T åœæ­¢æˆ–è¢«è¿½è¸ª â€‹ Z åƒµå°¸è¿›ç¨‹ â€‹ W è¿›å…¥å†…å­˜äº¤æ¢ (ä»å†…æ ¸2.6å¼€å§‹æ— æ•ˆ) â€‹ X æ€æ‰çš„è¿›ç¨‹ â€‹ &lt; é«˜ä¼˜å…ˆçº§ â€‹ N åº•ä¼˜å…ˆçº§ â€‹ s åŒ…å«å­è¿›ç¨‹ â€‹ + ä½äºå‰å°çš„è¿›ç¨‹ç»„ å®æ—¶æ˜¾ç¤ºè¿›ç¨‹çŠ¶æ€â€‹ top â€‹ å¯ä»¥åœ¨ä½¿ç”¨ top å‘½ä»¤æ—¶åŠ ä¸Š -d æ¥æŒ‡å®šæ˜¾ç¤ºä¿¡æ¯æ›´æ–°çš„æ—¶é—´é—´éš”ï¼Œåœ¨topå‘½ä»¤æ‰§è¡Œåï¼Œå¯ä»¥æŒ‰ä¸‹æŒ‰é”®å¯¹æ˜¾ç¤ºçš„ç»“æœæ’åº æŒ‰ é”® M æ ¹æ®å†…å­˜ä½¿ç”¨é‡æ’åº P æ ¹æ® CPU å æœ‰ç‡æ’åº T æ ¹æ®è¿›ç¨‹è¿è¡Œæ—¶é—´é•¿çŸ­ U æ ¹æ®ç”¨æˆ·åæ¥ç­›é€‰è¿›ç¨‹ K è¾“å…¥æŒ‡å®šçš„ PID æ€æ­»è¿›ç¨‹ æ€æ­»è¿›ç¨‹ kill [-signal] pid kill -l åˆ—å‡ºæ‰€æœ‰ä¿¡å· kill -SIGKILL è¿›ç¨‹ID kill -9 è¿›ç¨‹ID &#x2F;&#x2F; -l ä¿¡å· SIGKILL &#x2F; -9 å¼ºåˆ¶æ€æ­» Killall name æ ¹æ®è¿›ç¨‹åæ€æ­»è¿›ç¨‹ è¿›ç¨‹æ€æ­»æµ‹è¯•ç»ˆç«¯ æµ‹è¯• è¿è¡Œä»£ç  12345678910111213141516/************************************************************************* &gt; File Name: whil_lastiung.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ03æ—¥ æ˜ŸæœŸæ—¥ 10æ—¶39åˆ†54ç§’ ************************************************************************/#include&lt;stdio.h&gt;int main() &#123; while(1) &#123; printf(&quot;ç§ƒå¤´ç‹\\n&quot;); sleep(1); &#125; return 1;&#125; åå°è¿è¡Œ./a.out &amp; è¿›ç¨‹å·å’Œç›¸å…³å‡½æ•° pid è¿›ç¨‹ID ppid çˆ¶è¿›ç¨‹çš„ID pgpid ç”¨ç»„çš„ID è¿›ç¨‹åˆ›å»º - man 2 forkç³»ç»Ÿå…è®¸ä¸€ä¸ªè¿›ç¨‹åˆ›å»ºæ–°è¿›ç¨‹ï¼Œæ–°è¿›ç¨‹å³ä¸ºå­è¿›ç¨‹ï¼Œå­è¿›ç¨‹è¿˜å¯ä»¥åˆ›å»ºæ–°çš„å­è¿›ç¨‹ï¼Œå½¢æˆè®²ç¨‹æ ‘ç»“æ„æ¨¡å‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273/************************************************************************* &gt; File Name: fork.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´04æœˆ03æ—¥ æ˜ŸæœŸæ—¥ 14æ—¶14åˆ†05ç§’ ************************************************************************//* * #include &lt;sys/types.h&gt; * #include &lt;unistd.h&gt; * * pid_t fork(void) ; * å‡½æ•°çš„ä½œç”¨: ç”¨äºåˆ›å»ºå­è¿›ç¨‹ * è¿”å›å€¼: * fork()çš„è¿”å›å€¼ä¼šè¿”å›2æ¬¡ ä¸€æ¬¡åœ¨çˆ¶è¿›ç¨‹ä¸­ã€ä¸€æ¬¡åœ¨å­è¿›ç¨‹ä¸­ã€‚ * åœ¨çˆ¶è¿›ç¨‹ä¸­è¿”å›åˆ›å»ºçš„å­è¿›ç¨‹çš„ ID * åœ¨å­è¿›ç¨‹ä¸­è¿”å› 0 * å¦‚ä½•åŒºåˆ†å­è¿›ç¨‹å’Œçˆ¶è¿›ç¨‹: é€šè¿‡forkçš„è¿”å›å€¼ * åœ¨çˆ¶è¿›ç¨‹ä¸­è¿”å›-1, è¡¨ç¤ºåˆ›å»ºå­è¿›ç¨‹å¤±è´¥, å¹¶è®¾ç½®errno * * çˆ¶å­è¿›ç¨‹ä¹‹é—´çš„å…³ç³»: * åŒºåˆ«: * 1. fork() å‡½æ•°çš„è¿”å›å€¼ä¸åŒ * çˆ¶è¿›ç¨‹ä¸­: &gt; 0 è¿”å›çš„å­è¿›ç¨‹çš„ID * å­è¿›ç¨‹ä¸­: = 0 * 2. pcb ä¸­çš„ä¸€äº›æ•°æ® * å½“å‰çš„è¿›ç¨‹id pid * å½“å‰çš„è¿›ç¨‹çš„çˆ¶è¿›ç¨‹çš„id ppid * ä¿¡å·é›† * å…±åŒç‚¹: * æŸäº›çŠ¶æ€ä¸‹: å­è¿›ç¨‹ä¸­åˆšè¢«åˆ›å»ºå‡ºæ¥, è¿˜æ²¡æœ‰æ‰§è¡Œä»»ä½•çš„å†™æ•°æ®çš„æ“ä½œ * - ç”¨æˆ·åŒºçš„æ•°æ® * - æ–‡ä»¶æè¿°è¡¨ * çˆ¶å­è¿›ç¨‹å¯¹å˜é‡æ˜¯ä¸æ˜¯å…±äº«çš„ï¼Ÿ * - åˆšå¼€å§‹æ—¶å€™, æ˜¯ä¸€æ ·çš„å…±äº«ã€‚å¦‚æœä¿®æ”¹çš„æ•°æ®å°±ä¸å…±äº«äº† * - è¯»æ—¶å€™å…±äº«(å­è¿›ç¨‹è¢«åˆ›å»º, ä¸¤ä¸ªè¿›ç¨‹æ²¡æœ‰åšä»»ä½•çš„å†™çš„æ“ä½œ), å†™æ—¶æ‹·è´ */#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;unistd.h&gt;int main() &#123; int num = 10; pid_t pid = fork(); if(pid &gt; 0) &#123; printf(&quot;pid : %d\\n&quot;, pid); // å¦‚æœå¤§äº0,è¿”å›çš„æ˜¯åˆ›å»ºçš„å­è¿›ç¨‹çš„è¿›ç¨‹å·, å½“å‰çˆ¶è¿›ç¨‹ printf(&quot;i am parent process, pid : %d, ppid % d\\n&quot;, getpid(), getppid()); printf(&quot;parent num : %d \\n&quot;, num); num += 10; printf(&quot;parent num += 10 : %d \\n&quot;, num); &#125; else if(pid == 0) &#123; // å½“å‰æ˜¯å­è¿›ç¨‹ printf(&quot;i am child process, pid : %d, ppid : %d \\n&quot;, getpid(), getppid()); printf(&quot;child num : %d \\n&quot;, num); num += 100; printf(&quot;child num += 100 : %d \\n&quot;, num); &#125; for(int i = 0; i &lt; 3; i++) &#123; printf(&quot;i : %d, pid : %d\\n&quot;, i, getpid()); sleep(1); &#125; return 0;&#125; fork æ‰§è¡Œæµç¨‹ ä¿®æ”¹å­è¿›ç¨‹åå°±ä¼šå¼€è¾Ÿä¸€ä¸ªæ–°åœ°å€","categories":[{"name":"Linuxå¤šè¿›ç¨‹å¼€å‘","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/"}],"tags":[]},{"title":"è¿›ç¨‹æ¦‚è¿°","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘/è¿›ç¨‹æ¦‚è¿°","date":"2022-04-01T14:18:54.000Z","updated":"2022-05-29T08:00:35.430Z","comments":true,"path":"2022/04/01/Linuxå¤šè¿›ç¨‹å¼€å‘/è¿›ç¨‹æ¦‚è¿°/","link":"","permalink":"https://tutouwang.vercel.app/2022/04/01/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/%E8%BF%9B%E7%A8%8B%E6%A6%82%E8%BF%B0/","excerpt":"","text":"ç¨‹åºå’Œè¿›ç¨‹ç¨‹åºæ˜¯åŒ…å«ä¸€ç³»åˆ—ä¿¡æ¯çš„æ–‡ä»¶ï¼Œè¿™äº›ä¿¡æ¯æè¿°äº†å¦‚ä½•åœ¨è¿è¡Œæ—¶åˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼š äºŒè¿›åˆ¶æ ¼å¼æ ‡è¯†ï¼šæ¯ä¸ªç¨‹åºæ–‡ä»¶éƒ½åŒ…å«ç”¨äºæè¿°å¯æ‰§è¡Œæ–‡ä»¶æ ¼å¼çš„å…ƒä¿¡æ¯ã€‚å†…æ ¸åˆ©ç”¨æ­¤ä¿¡æ¯æ¥è§£é‡Šæ–‡ä»¶ä¸­çš„å…¶ä»–ä¿¡æ¯ã€‚ï¼ˆELFå¯æ‰§è¡Œè¿æ¥æ ¼å¼ï¼‰ æœºå™¨è¯­è¨€æŒ‡ä»¤ï¼šå¯¹ç¨‹åºç®—æ³•è¿›è¡Œç¼–ç ã€‚ ç¨‹åºå…¥å£åœ°å€ï¼šæ ‡è¯†ç¨‹åºå¼€å§‹æ‰§è¡Œæ—¶çš„èµ·å§‹æŒ‡ä»¤ä½ç½®ã€‚ æ•°æ®ï¼šç¨‹åºæ–‡ä»¶åŒ…å«çš„å˜é‡åˆå§‹å€¼å’Œç¨‹åºä½¿ç”¨çš„å­—é¢é‡å€¼ï¼ˆæ¯”å¦‚å­—ç¬¦ä¸²ï¼‰ã€‚ ç¬¦å·è¡¨åŠé‡å®šä½è¡¨ï¼šæè¿°ç¨‹åºä¸­å‡½æ•°å’Œå˜é‡çš„ä½ç½®åŠåç§°ã€‚è¿™äº›è¡¨æ ¼æœ‰å¤šé‡ç”¨é€”ï¼Œå…¶ä¸­åŒ…æ‹¬è°ƒè¯•å’Œè¿è¡Œæ—¶çš„ç¬¦å·è§£æï¼ˆåŠ¨æ€é“¾æ¥ï¼‰ã€‚ å…±äº«åº“å’ŒåŠ¨æ€é“¾æ¥ä¿¡æ¯ï¼šç¨‹åºæ–‡ä»¶æ‰€åŒ…å«çš„ä¸€äº›å­—æ®µï¼Œåˆ—å‡ºäº†ç¨‹åºè¿è¡Œæ—¶éœ€è¦ä½¿ç”¨çš„å…±äº«åº“ï¼Œä»¥åŠåŠ è½½å…±äº«åº“çš„åŠ¨æ€è¿æ¥å™¨çš„è·¯å¾„åã€‚ å…¶ä»–ä¿¡æ¯ï¼šç¨‹åºæ–‡ä»¶è¿˜åŒ…å«è®¸å¤šå…¶ä»–ä¿¡æ¯ï¼Œç”¨ä»¥æè¿°å¦‚ä½•åˆ›å»ºè¿›ç¨‹ã€‚ è¿›ç¨‹æ˜¯æ­£åœ¨è¿è¡Œçš„ç¨‹åºçš„å®ä¾‹ã€‚æ˜¯ä¸€ä¸ªå…·æœ‰ä¸€å®šç‹¬ç«‹åŠŸèƒ½çš„ç¨‹åºå…³äºæŸä¸ªæ•°æ®é›†åˆçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨ã€‚å®ƒæ˜¯æ“ä½œç³»ç»ŸåŠ¨æ€æ‰§è¡Œçš„åŸºæœ¬å•å…ƒï¼Œåœ¨ä¼ ç»Ÿçš„æ“ä½œç³»ç»Ÿä¸­ï¼Œè¿›ç¨‹æ—¢æ˜¯åŸºæœ¬çš„åˆ†é…å•å…ƒï¼Œä¹Ÿæ˜¯åŸºæœ¬çš„æ‰§è¡Œå•å…ƒã€‚ å¯ä»¥ç”¨ä¸€ä¸ªç¨‹åºæ¥åˆ›å»ºå¤šä¸ªè¿›ç¨‹ï¼Œè¿›ç¨‹æ˜¯ç”±å†…æ ¸å®šä¹‰çš„æŠ½è±¡å®ä½“ï¼Œå¹¶ä¸ºè¯¥å®ä½“åˆ†é…ç”¨ä»¥æ‰§è¡Œç¨‹åºçš„å„é¡¹ç³»ç»Ÿèµ„æºã€‚ä»å†…æ ¸çš„è§’åº¦çœ‹ï¼Œè¿›ç¨‹ç”±ç”¨æˆ·å†…å­˜ç©ºé—´å’Œä¸€ç³»åˆ—å†…æ ¸æ•°æ®ç»“æ„ç»„æˆï¼Œå…¶ä¸­ç”¨æˆ·å†…å­˜ç©ºé—´åŒ…å«äº†ç¨‹åºä»£ç åŠä»£ç æ‰€ä½¿ç”¨çš„å˜é‡ï¼Œè€Œå†…æ ¸æ•°æ®ç»“æ„åˆ™ç”¨äºç»´æŠ¤è¿›ç¨‹çŠ¶æ€ä¿¡æ¯ã€‚è®°å½•åœ¨å†…æ ¸æ•°æ®ç»“æ„ä¸­çš„ä¿¡æ¯åŒ…æ‹¬è®¸å¤šä¸è¿›ç¨‹ç›¸å…³çš„æ ‡è¯†å·ï¼ˆIDsï¼‰ã€è™šæ‹Ÿå†…å­˜è¡¨ã€æ‰“å¼€æ–‡ä»¶çš„æè¿°ç¬¦è¡¨ã€ä¿¡å·ä¼ é€’åŠå¤„ç†çš„æœ‰å…³ä¿¡æ¯ã€è¿›ç¨‹èµ„æºä½¿ç”¨åŠé™åˆ¶ã€å½“å‰å·¥ä½œç›®å½•å’Œå¤§é‡çš„å…¶ä»–ä¿¡æ¯ã€‚ å•é“ã€å¤šé“ç¨‹åºè®¾è®¡ å•é“ç¨‹åºï¼Œå³åœ¨è®¡ç®—æœºå†…å­˜ä¸­åªå…è®¸ä¸€ä¸ªçš„ç¨‹åºè¿è¡Œã€‚ å¤šé“ç¨‹åºè®¾è®¡æŠ€æœ¯æ˜¯åœ¨è®¡ç®—æœºå†…å­˜ä¸­åŒæ—¶å­˜æ”¾å‡ é“ç›¸äº’ç‹¬ç«‹çš„ç¨‹åºï¼Œä½¿å®ƒä»¬åœ¨ç®¡ç†ç¨‹åºæ§åˆ¶ä¸‹ï¼Œç›¸äº’ç©¿æ’è¿è¡Œï¼Œä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šç¨‹åºåœ¨è®¡ç®—æœºç³»ç»Ÿä¸­åŒå¤„äºå¼€å§‹åˆ°ç»“æŸä¹‹é—´çš„çŠ¶æ€, è¿™äº›ç¨‹åºå…±äº«è®¡ç®—æœºç³»ç»Ÿèµ„æºã€‚å¼•å…¥å¤šé“ç¨‹åºè®¾è®¡æŠ€æœ¯çš„æ ¹æœ¬ç›®çš„æ˜¯ä¸ºäº†æé«˜ CPU çš„åˆ©ç”¨ç‡ã€‚ å¯¹äºä¸€ä¸ªå• CPU ç³»ç»Ÿæ¥è¯´ï¼Œç¨‹åºåŒæ—¶å¤„äºè¿è¡ŒçŠ¶æ€åªæ˜¯ä¸€ç§å®è§‚ä¸Šçš„æ¦‚å¿µï¼Œä»–ä»¬è™½ç„¶éƒ½å·²ç»å¼€å§‹è¿è¡Œï¼Œä½†å°±å¾®è§‚è€Œè¨€ï¼Œä»»æ„æ—¶åˆ»ï¼ŒCPU ä¸Šè¿è¡Œçš„ç¨‹åºåªæœ‰ä¸€ä¸ªã€‚ åœ¨å¤šé“ç¨‹åºè®¾è®¡æ¨¡å‹ä¸­ï¼Œå¤šä¸ªè¿›ç¨‹è½®æµä½¿ç”¨ CPUã€‚è€Œå½“ä¸‹å¸¸è§ CPU ä¸ºçº³ç§’çº§ï¼Œ1ç§’å¯ä»¥æ‰§è¡Œå¤§çº¦ 10 äº¿æ¡æŒ‡ä»¤ã€‚ç”±äºäººçœ¼çš„ååº”é€Ÿåº¦æ˜¯æ¯«ç§’çº§ï¼Œæ‰€ä»¥çœ‹ä¼¼åŒæ—¶åœ¨è¿è¡Œã€‚ æ—¶é—´ç‰‡ æ—¶é—´ç‰‡ï¼ˆtimesliceï¼‰åˆç§°ä¸ºâ€œé‡å­ï¼ˆquantumï¼‰â€æˆ–â€œå¤„ç†å™¨ç‰‡ï¼ˆprocessor sliceï¼‰â€æ˜¯æ“ä½œç³»ç»Ÿåˆ†é…ç»™æ¯ä¸ªæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹å¾®è§‚ä¸Šçš„ä¸€æ®µ CPU æ—¶é—´ã€‚äº‹å®ä¸Šï¼Œè™½ç„¶ä¸€å°è®¡ç®—æœºé€šå¸¸å¯èƒ½æœ‰å¤šä¸ª CPUï¼Œä½†æ˜¯åŒä¸€ä¸ª CPU æ°¸è¿œä¸å¯èƒ½çœŸæ­£åœ°åŒæ—¶è¿è¡Œå¤šä¸ªä»»åŠ¡ã€‚åœ¨åªè€ƒè™‘ä¸€ä¸ª CPU çš„æƒ…å†µä¸‹ï¼Œè¿™äº›è¿›ç¨‹â€œçœ‹èµ·æ¥åƒâ€åŒæ—¶è¿è¡Œçš„ï¼Œå®åˆ™æ˜¯è½®ç•ªç©¿æ’åœ°è¿è¡Œï¼Œç”±äºæ—¶é—´ç‰‡é€šå¸¸å¾ˆçŸ­ï¼ˆåœ¨ Linux ä¸Šä¸º 5msï¼800msï¼‰ï¼Œç”¨æˆ·ä¸ä¼šæ„Ÿè§‰åˆ°ã€‚ æ—¶é—´ç‰‡ç”±æ“ä½œç³»ç»Ÿå†…æ ¸çš„è°ƒåº¦ç¨‹åºåˆ†é…ç»™æ¯ä¸ªè¿›ç¨‹ã€‚é¦–å…ˆï¼Œå†…æ ¸ä¼šç»™æ¯ä¸ªè¿›ç¨‹åˆ†é…ç›¸ç­‰çš„åˆå§‹æ—¶é—´ç‰‡ï¼Œç„¶åæ¯ä¸ªè¿›ç¨‹è½®ç•ªåœ°æ‰§è¡Œç›¸åº”çš„æ—¶é—´ï¼Œå½“æ‰€æœ‰è¿›ç¨‹éƒ½å¤„äºæ—¶é—´ç‰‡è€—å°½çš„çŠ¶æ€æ—¶ï¼Œå†…æ ¸ä¼šé‡æ–°ä¸ºæ¯ä¸ªè¿›ç¨‹è®¡ç®—å¹¶åˆ†é…æ—¶é—´ç‰‡ï¼Œå¦‚æ­¤å¾€å¤ã€‚ å¹¶è¡Œå’Œå¹¶å‘ å¹¶å‘ï¼šæœ‰é™çš„èµ„æºäº¤æ›¿ä½¿ç”¨ è¿›ç¨‹æ§åˆ¶å—(PCB) ä¸ºäº†ç®¡ç†è¿›ç¨‹ï¼Œå†…æ ¸å¿…é¡»å¯¹æ¯ä¸ªè¿›ç¨‹æ‰€åšçš„äº‹æƒ…è¿›è¡Œæ¸…æ¥šçš„æè¿°ã€‚å†…æ ¸ä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸€ä¸ª PCB(Processing Control Block)è¿›ç¨‹æ§åˆ¶å—ï¼Œç»´æŠ¤è¿›ç¨‹ç›¸å…³çš„ä¿¡æ¯ï¼ŒLinux å†…æ ¸çš„è¿›ç¨‹æ§åˆ¶å—æ˜¯ task_struct ç»“æ„ä½“ã€‚ åœ¨ &#x2F;usr&#x2F;src&#x2F;linux-headers-xxx&#x2F;include&#x2F;linux&#x2F;sched.h æ–‡ä»¶ä¸­å¯ä»¥æŸ¥çœ‹ struct task_struct ç»“æ„ä½“å®šä¹‰ã€‚å…¶å†…éƒ¨æˆå‘˜æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬åªéœ€è¦æŒæ¡ä»¥ä¸‹éƒ¨åˆ†å³å¯ï¼š è¿›ç¨‹idï¼šç³»ç»Ÿä¸­æ¯ä¸ªè¿›ç¨‹æœ‰å”¯ä¸€çš„ idï¼Œç”¨ pid_t ç±»å‹è¡¨ç¤ºï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•° è¿›ç¨‹çš„çŠ¶æ€ï¼šæœ‰å°±ç»ªã€è¿è¡Œã€æŒ‚èµ·ã€åœæ­¢ç­‰çŠ¶æ€ è¿›ç¨‹åˆ‡æ¢æ—¶éœ€è¦ä¿å­˜å’Œæ¢å¤çš„ä¸€äº›CPUå¯„å­˜å™¨ æè¿°è™šæ‹Ÿåœ°å€ç©ºé—´çš„ä¿¡æ¯ æè¿°æ§åˆ¶ç»ˆç«¯çš„ä¿¡æ¯ ulimit - a è¿›ç¨‹å¯ç”¨èµ„æºä¸Šé™","categories":[{"name":"Linuxå¤šè¿›ç¨‹å¼€å‘","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/"}],"tags":[{"name":"Linux","slug":"Linux","permalink":"https://tutouwang.vercel.app/tags/Linux/"}]},{"title":"æ ‡å‡†cåº“IOå‡½æ•°å’ŒLinuxç³»ç»ŸIOå‡½æ•°å¯¹æ¯”","slug":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨/æ ‡å‡†cåº“IOå‡½æ•°å’ŒLinuxç³»ç»ŸIOå‡½æ•°å¯¹æ¯”","date":"2022-03-10T11:48:40.000Z","updated":"2022-05-27T01:54:26.207Z","comments":true,"path":"2022/03/10/LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨/æ ‡å‡†cåº“IOå‡½æ•°å’ŒLinuxç³»ç»ŸIOå‡½æ•°å¯¹æ¯”/","link":"","permalink":"https://tutouwang.vercel.app/2022/03/10/LInux-%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/%E6%A0%87%E5%87%86c%E5%BA%93IO%E5%87%BD%E6%95%B0%E5%92%8CLinux%E7%B3%BB%E7%BB%9FIO%E5%87%BD%E6%95%B0%E5%AF%B9%E6%AF%94/","excerpt":"","text":"æ ‡å‡†Cåº“IOå‡½æ•° è‡ªå¸¦å¸®åŠ©æ–‡æ¡£ ç¬¬ä¸‰ç«  è™šæ‹Ÿåœ°å€ç©ºé—´ Linuxç³»ç»ŸIOå‡½æ•°å¸®åŠ©æ–‡æ¡£ ~Linux : man 2 openåœç•™åœ¨å‡½æ•°ä¸ŠShif + kå¯è¿›è¡Œå¿«é€Ÿè·³è½¬ 123456789101112131415161718192021// ä¸ºç¤¾ä¹ˆå®šä¹‰ä¸‰ä¸ªå¤´æ–‡ä»¶ï¼šä¸åŒçš„å®å®šä¹‰åœ¨ä¸¤ä¸ªæ–‡ä»¶é‡Œ#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;// å® flags = æ ‡è®°(åªè¯»ã€å¯è¯»ã€å¯è¯»å¯å†™ ...)// æ‰“å¼€ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ–‡ä»¶int open(const char *pathname, int flags); å‚æ•°: - pathname : è¦æ‰“å¼€çš„æ–‡ä»¶è·¯å¾„ - flags : å¯¹æ–‡ä»¶çš„æ“ä½œæƒé™è¿˜æœ‰å…¶çš„ä»–è®¾ç½® O_RDONLY (åªè¯»), O_WRONLY (åªå†™), O_RDWR (å¯è¯»å¯å†™) è¿™ä¸‰ä¸ªæ˜¯äº’æ–¥çš„ è¿”å›å€¼ï¼šè¿”å›ä¸€ä¸ªæ–°çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå¦‚æœå¤±è´¥äº†è¿”å› -1 ï¼Œå¦åˆ™è¿”å›ä¸€ä¸ªæ•´å½¢æ–‡ä»¶æè¿°ç¬¦ errnoï¼šå±äºLinuxç³»ç»Ÿå‡½æ•°åº“ï¼Œåº“é‡Œçš„ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè®°å½•çš„æ˜¯æœ€è¿‘çš„é”™è¯¯å·ã€‚ #include &lt;stdio.h&gt; void perror(const char *s); ä½œç”¨ï¼šæ‰“å°errnoå¯¹åº”çš„é”™è¯¯æè¿° å‚æ•°:ç”¨æˆ·æè¿°ï¼Œæ¯”å¦‚hello,æœ€ç»ˆç‚¹è¾“å‡ºçš„å†…å®¹æ˜¯ hello:xxx(å®é™…çš„é”™è¯¯æè¿°) // åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶int open(const char *pathname, int flags, mode_t mode); æ²¡æœ‰åˆ›å»º a.txt ä»£ç  1234567891011121314151617181920212223242526/************************************************************************* &gt; File Name: open_test1.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´03æœˆ11æ—¥ æ˜ŸæœŸäº” 22æ—¶30åˆ†53ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;#include &lt;unistd.h&gt;int main() &#123; int fd = open(&quot;a.txt&quot;, O_RDONLY); if(fd == -1) &#123; perror(&quot;open&quot;); &#125; // è¯»å†™æ“ä½œ // å…³é—­ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦ close(fd); return 0;&#125; åˆ›å»ºæ–‡ä»¶ touch a.txt è®¾ç½®umask umask 022 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/************************************************************************* &gt; File Name: open_test1.c &gt; Author: &gt; Mail: &gt; Created Time: 2022å¹´03æœˆ11æ—¥ æ˜ŸæœŸäº” 22æ—¶30åˆ†53ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;#include &lt;unistd.h&gt;/* * int open(const char *pathname, int flags, mode_t mode); * å‚æ•° : * - pathname : è¦åˆ›å»ºçš„æ–‡ä»¶è·¯å¾„ * - flags : å¯¹æ–‡ä»¶æ“ä½œçš„æƒé™å’Œå…¶ä»–çš„è®¾ç½® * - å¿…é€‰é¡¹ : O_RDONLY, O_WDONLY, O_WEONLY è¿™ä¸‰ä¸ªäº’æ–¥ * - å¯é€‰é¡¹ ï¼šO_CREAT (æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶) * - mode : å…«è¿›åˆ¶çš„æ•°, è¡¨ç¤ºåˆ›å»ºå‡ºçš„æ–°çš„æ–‡ä»¶çš„æ“çºµæƒé™, ä¾‹å¦‚ï¼š0775 (0å¼€å¤´è¡¨ç¤º å…«è¿›åˆ¶) * RWX(è¯»ã€å†™ã€ å¯æ‰§è¡Œã€ä¸‰ç»„ å½“å‰ç”¨æˆ·çš„æƒé™ã€å½“å‰ç”¨æˆ·æ‰€åœ¨ç¥–çš„æƒé™ã€å…¶ä»–ç»„) = 777 * æœ€ç»ˆçš„æƒé™æ˜¯ : mode &amp; ~umask(0002) // ä¸åŒç”¨æˆ·ä¸ä¸€æ · è¿™ä¸ªå€¼ä¹Ÿèƒ½ æ›´æ”¹ * å…«è¿›åˆ¶ -&gt; äºŒè¿›åˆ¶ * 0777 -&gt; 111 111 111 * &amp; 0775 -&gt; 111 111 101 * -------------------------- * 111 111 101 * æŒ‰ä½ä¸ï¼š0å’Œä»»ä½•æ•°éƒ½ä¸º0 * * umask : ä½œç”¨å°±æ˜¯æŠ¹å»æŸäº›æƒé™ * flags : æˆ–çš„ä½œç”¨ * å‚æ•°æ˜¯ä¸€ä¸ªintç±»å‹çš„æ•°æ®,å 4ä¸ªå­—èŠ‚32ä½ã€‚ * 32ä¸ªä½ï¼Œæ¯ä¸€ä½å°±æ˜¯ä¸€ä¸ªæ ‡å¿—ä½ã€‚ * 1 - R * 2 - W * 3 - RW * 4 - CR * */int main() &#123; // åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ int fd = open(&quot;create.txt&quot;, O_RDWR | O_CREAT, 0777); if(fd == -1) &#123; perror(&quot;open&quot;); &#125; // å…³é—­ close(fd); return 0;&#125; å¸®åŠ©æ–‡æ¡£ : man 2 copy123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869/************************************************************************* &gt; File Name: copyfile.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´03æœˆ17æ—¥ æ˜ŸæœŸå›› 20æ—¶48åˆ†17ç§’ ************************************************************************/#include &lt;unistd.h&gt;#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;/* * * #include &lt;unistd.h&gt; * ssize_t read(int fd, void *buf, size_t count); * å‚æ•°: * - fd: æ–‡ä»¶æè¿°ç¬¦, openå¾—åˆ°çš„,é€šè¿‡è¿™ä¸ªæ–‡ä»¶æè¿°ç¬¦æ“ä½œæŸä¸ªæ–‡ä»¶ * - buf: ç¼“å†²åŒºè¯»å–æ•°æ®å­˜æ”¾çš„åœ°æ–¹æ•°ç»„çš„åœ°å€ (ä¼ å‡ºå‚æ•°) * - count: æŒ‡å®šçš„æ•°ç»„å¤§å° * è¿”å›å€¼: * - æˆåŠŸ: * &gt; 0: è¿”å›å®é™…çš„è¯»å–åˆ°çš„å­—æ•° * = 0: æ–‡ä»¶å·²ç»è¯»å–å®Œ * - å¤±è´¥: - 1, å¹¶è®¾ç½®errno * #include &lt;unistd.h&gt; * ssize_t write(int fd, const void *buf, size_t count); * å‚æ•°ï¼š * - fd: æ–‡ä»¶æè¿°, openå¾—åˆ°çš„,yé€šè¿‡è¿™ä¸ª * - buf: è¦å¾€ç£ç›˜å†™å…¥çš„æ•°æ® * - count: è¦å†™çš„æ•°æ®çš„å®é™…å¤§å° * è¿”å›å€¼: * æˆåŠŸ: å®é™…å†™å…¥çš„å¤§å° * å¤±è´¥: è¿”å›-1,å¹¶è®¾ç½®errno * */int main() &#123; // 1.é€šè¿‡openæ‰“å¼€english.txt // ç›¸å¯¹è·¯å¾„&quot;æ–‡ä»¶å.åç¼€&quot; // ç»å¯¹è·¯å¾„&quot;c:/xxx/xxx/æ–‡ä»¶å.åç¼€&quot; int srcfd = open(&quot;english.txt&quot;, O_RDONLY); if(srcfd == -1) &#123; perror(&quot;opne&quot;); return -1; &#125; // 2.åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶(æ‹·è´æ–‡ä»¶) int destfd = open(&quot;cpy.txt&quot;, O_WRONLY | O_CREAT, 0664); if(destfd == -1) &#123; perror(&quot;open&quot;); return -1; &#125; // 3.é¢‘ç¹çš„è¯»å†™æ“ä½œ char buf[1024] = &#123;0&#125;; int len = 0; while((len = read(srcfd, buf, sizeof(buf))) &gt; 0) &#123; // destfd: ç›®æ ‡æ–‡ä»¶æ–‡ä»¶æè¿°ç¬¦ write(destfd, buf, len); &#125; // 4.å…³é—­æ–‡ä»¶ close(destfd); close(srcfd) ; return 0;&#125; å¸®åŠ©æ–‡æ¡£ : man 2 lseekLinux çš„ lseek åœ¨æ ‡å‡†cåº“ä¸­ man 3 fseek ä¸ºä»€ä¹ˆè¦æ‰©å±•æ¯”å¦‚è¯´ä¸‹è½½ä¸€ä¸ªå¤§å°æ–‡ä»¶å¤§å°ä¸º5G(ä¸‹è½½æ—¶å€™ä¹Ÿæ­£åœ¨ç”¨ç£ç›˜)å‡å¦‚ç£ç›˜å¤§å°ä¹ˆæœ‰5G(å°±ä¸èƒ½æ­£ç¡®ä¸‹è½½ä¸‹æ¥)æ‰€ä»¥ä¼šæèµ·å ç”¨ä¸€ç‚¹ç‚¹åœ¨æ›¿æ¢ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273/************************************************************************* &gt; File Name: lseek.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´03æœˆ20æ—¥ æ˜ŸæœŸæ—¥ 16æ—¶40åˆ†30ç§’ ************************************************************************//* * æ ‡å‡†cåº“ * #inline &lt;stdio.h&gt; * int fseek(FLE *stream, long offset, int whence); * * Linuxç³»ç»Ÿå‡½æ•° * #include &lt;sys/types.h&gt; * #include &lt;unistd.h&gt; * oof_t lseek(int fd, oof_t offset, int whence); * å‚æ•°: * - fd: æ–‡ä»¶æè¿°, é€šè¿‡openå¾—åˆ°çš„, é€šè¿‡è¿™ä¸ªfdæ“ä½œæŸä¸ªæ–‡ä»¶ * - offset: åç§»é‡ * - whence: * SEEK_SET The file offset is set to offset bytes. * è®¾ç½®æ–‡ä»¶æŒ‡é’ˆçš„åç§»é‡ * SEEK_CUR The file offset is set to its current location plus offset bytes. * è®¾ç½®ä¾¿å®œé‡: å½“å‰ä½ç½® + ç¬¬ äºŒä¸ªå‚æ•° offsetçš„å€¼ * SEEK_END The file offset is set to the size of the file plus offset bytes. * è®¾ç½®åç§»é‡: æ–‡ä»¶å¤§å° + ç¬¬ äºŒä¸ªå‚æ•°offseçš„å€¼ * è¿”å›å€¼: è¿”å›æ–‡ä»¶æŒ‡é’ˆçš„ä½ç½® * ä½œç”¨: * 1.ç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆ * lseek(fd, 0, SEEL_SET); * * 2.è·å–å½“å‰æ–‡ä»¶æŒ‡é’ˆä½ç½® * lseek(fd, 0, SEEK_CUR); * * 3.å¯ä»¥è·å–æ–‡ä»¶é•¿åº¦ * lseek(fd, 0, SEEK_END); * * 4.æ‹“å±•æ–‡ä»¶çš„é•¿åº¦,å½“æ–‡ä»¶10b, 110b, å¢åŠ äº†100ä¸ªå­—èŠ‚ * lseek(fd, 100, SEEK_END); * // æ³¨æ„ï¼šéœ€è¦äº›ä¸€æ¬¡æ•°æ® */#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;fcntl.h&gt;#include &lt;unistd.h&gt;int main() &#123; int fd = open(&quot;hello.txt&quot;, O_RDWR); if(fd == -1) &#123; perror(&quot;open&quot;); return -1; &#125; // æ‰©å±•æ–‡ä»¶çš„é•¿åº¦ int ret = lseek(fd, 100, SEEK_END); if(ret == -1) &#123; perror(&quot;open&quot;); return -1; &#125; // å†™å…¥ä¸€ä¸ªç©ºæ ¼æ•°æ® write(fd, &quot; &quot;, 1); // å…³é—­æ–‡ä»¶ close(fd); return 0;&#125; å¸®åŠ©æ–‡æ¡£ : man 2 stat 1234567891011121314151617181920212223242526272829303132333435363738394041424344/************************************************************************* &gt; File Name: stat.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´03æœˆ23æ—¥ æ˜ŸæœŸä¸‰ 16æ—¶29åˆ†33ç§’ ************************************************************************//* #include &lt;sys/types.h&gt; #include &lt;sys/stat.h&gt; #include &lt;unistd.h&gt; int stat(const char *pathname, struct stat *statbuf); ä½œç”¨: è·å–ä¸€ä¸ªæ–‡ä»¶ç›¸å…³çš„ä¸€äº›ä¿¡æ¯ å‚æ•°; - pathname: æ“ä½œæ–‡ä»¶çš„è·¯å¾„ - statbuf: ç»“æ„ä½“å˜é‡, ä¼ å‡ºå‚æ•°, ç”¨äºä¿å­˜è·å–çš„æ–‡ä»¶ä¿¡æ¯ è¿”å›å€¼: æˆåŠŸ: è¿”å›0 å¤±è´¥: è¿”å›-1, å¹¶è®¾ç½®errno int fstat(int fd, struct stat *statbuf); int lstat(const char *pathname, struct stat *statbuf);*/#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;unistd.h&gt;int main() &#123; struct stat statbuf; int ret = stat(&quot;a.txt&quot;, &amp;statbuf); if(ret == -1) &#123; perror(&quot;stat&quot;); return -1; &#125; printf(&quot;size: %ld\\n&quot;, statbuf.st_size); return 0;&#125; æ¨¡æ‹Ÿå®ç° ls -l å‘½ä»¤ å‚è€ƒæ–‡æ¡£ man 3 getpwuid å‚è€ƒæ–‡æ¡£ man 3 getgrgid 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102/************************************************************************* &gt; File Name: ls-l.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´03æœˆ26æ—¥ æ˜ŸæœŸå…­ 15æ—¶29åˆ†49ç§’ -***********************************************************************/// æ¨¡æ‹Ÿå®ç° ls -l æŒ‡ä»¤// -rw-r--r-- 1 qz qz 11 3æœˆ 26 15:30 a.txt#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;unistd.h&gt;#include &lt;stdlib.h&gt;#include &lt;pwd.h&gt;#include &lt;grp.h&gt;#include &lt;time.h&gt;#include &lt;string.h&gt;int main(int argc, char* argv[]) &#123; // åˆ¤æ–­è¾“å…¥çš„å‚æ•°æ˜¯å¦æ­£ç¡® if(argc &lt; 2) &#123; printf(&quot;%s filename\\n&quot;, argv[0]); return -1; &#125; // é€šè¿‡statå‡½æ•°è·å–ç”¨æˆ·ä¼ å…¥çš„æ–‡ä»¶ä¿¡æ¯ struct stat st; int ret = stat(argv[1], &amp;st); if(ret == -1) &#123; perror(&quot;stat&quot;); return -1; &#125; // è·å–æ–‡ä»¶ç±»å‹å’Œæ–‡ä»¶æƒé™ char *perms = (char *)calloc(sizeof(char), 11); switch(st.st_mode &amp; S_IFMT) &#123; case S_IFLNK: perms[0] = &#x27;l&#x27;; break; case S_IFDIR: perms[0] =&#x27;d&#x27;; break; case S_IFREG: perms[0] =&#x27;-&#x27;; break; case S_IFBLK: perms[0] =&#x27;b&#x27;; break; case S_IFCHR: perms[0] =&#x27;c&#x27;; break; case S_IFSOCK: perms[0] =&#x27;s&#x27;; break; case S_IFIFO: perms[0] =&#x27;p&#x27;; break; default: perms[0] = &#x27;?&#x27;; &#125; // åˆ¤æ–­æ–‡ä»¶çš„è®¿é—®æƒé™ // æ–‡ä»¶æ‰€æœ‰è€… perms[1] = (st.st_mode &amp; S_IRUSR) ? &#x27;r&#x27; : &#x27;-&#x27;; perms[2] = (st.st_mode &amp; S_IWUSR) ? &#x27;w&#x27; : &#x27;-&#x27;; perms[3] = (st.st_mode &amp; S_IXUSR) ? &#x27;x&#x27; : &#x27;-&#x27;; // æ–‡ä»¶æ‰€æœ‰ç»„ perms[4] = (st.st_mode &amp; S_IRGRP) ? &#x27;r&#x27; : &#x27;-&#x27;; perms[5] = (st.st_mode &amp; S_IWGRP) ? &#x27;w&#x27; : &#x27;-&#x27;; perms[6] = (st.st_mode &amp; S_IXGRP) ? &#x27;x&#x27; : &#x27;-&#x27;; // å…¶ä»–äºº perms[7] = (st.st_mode &amp; S_IROTH) ? &#x27;r&#x27; : &#x27;-&#x27;; perms[8] = (st.st_mode &amp; S_IWOTH) ? &#x27;w&#x27; : &#x27;-&#x27;; perms[9] = (st.st_mode &amp; S_IXOTH) ? &#x27;x&#x27; : &#x27;-&#x27;; // ç¡¬é“¾æ¥æ•° int linkNum = st.st_nlink; // æ–‡ä»¶æ‰€æœ‰è€… char *fileUser = getpwuid(st.st_uid)-&gt;pw_name; // æ–‡ä»¶æ‰€åœ¨ç»„ char *fileGrp = getgrgid(st.st_gid)-&gt;gr_name; // æ–‡ä»¶å¤§å° long int fileSize = st.st_size; // ä¿®æ”¹çš„æ—¶é—´ ä» 1970å¹´ ä¼šè‡ªå¸¦ä¸€ä¸ªæ¢è¡Œ char *time = ctime(&amp;st.st_mtime); char mtime[512] =&#123;0&#125;; strncpy(mtime, time, strlen(time) - 1); char buf[1024]; sprintf(buf, &quot;%s %d %s %s %ld %s %s&quot;, perms, linkNum, fileUser, fileGrp, fileSize, mtime, argv[1]); printf(&quot;%s\\n&quot;, buf); return 0;&#125; æ–‡ä»¶å±æ€§man 2 access 12345678910111213141516171819202122232425262728293031/************************************************************************* &gt; File Name: chmod.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´03æœˆ27æ—¥ æ˜ŸæœŸæ—¥ 11æ—¶21åˆ†04ç§’ ************************************************************************//* include &lt;sys/stat.h&gt; int chmod(const char *pathname, mode_t mode); ä¿®æ”¹æ–‡ä»¶çš„æƒé™ å‚æ•°: - pathname: éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶è·¯å¾„ - mode: éœ€è¦ä¿®æ”¹çš„æƒé™å€¼, å…«è¿›åˆ¶çš„æ•° è¿”å›: hæˆåŠŸè¿”å›0, å¤±è´¥è¿”å›-1*/#include &lt;stdio.h&gt;#include &lt;sys/stat.h&gt;int main() &#123; int ret = chmod(&quot;a.txt&quot;, 0775); if(ret == -1) &#123; perror(&quot;chmod&quot;); return -1; &#125; return 0;&#125; man 2 truncate 1234567891011121314151617181920212223242526272829303132333435/************************************************************************* &gt; File Name: truncate.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´03æœˆ27æ—¥ æ˜ŸæœŸæ—¥ 17æ—¶35åˆ†17ç§’ ************************************************************************//* #include &lt;unistd.h&gt; #include &lt;sys/types.h&gt; int truncate(const char *path, off_t length); ä½œç”¨: ç¼©å‡æˆ–è€…æ‰©å±•æ–‡ä»¶çš„å°ºå¯¸è‡³æŒ‡å®šçš„å¤§å° å‚æ•°: - path: éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶çš„kè·¯å¾„ - length: éœ€è¦æœ€ç»ˆæ–‡ä»¶å˜æˆçš„å¤§å° å¦‚æœ ä¸€ä¸ªæ–‡ä»¶(10K) æƒ³å˜æˆä¸€ä¸ª(5k)å°±ä¼šæŠŠåé¢æˆªå–æ‰ è¿”å›: æˆåŠŸ0,å¤±è´¥-1*/#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;sys/types.h&gt;int main() &#123; int ret = truncate(&quot;b.txt&quot;, 20); // int ret = truncate(&quot;b.txt&quot;, 5); if(ret == -1) &#123; perror(&quot;truncat&quot;); return -1; &#125; return 0;&#125; ç›®å½•æ“ä½œå‡½æ•°man 2 mkdir 1234567891011121314151617181920212223242526272829303132333435363738394041/************************************************************************* &gt; File Name: mkdir.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´03æœˆ28æ—¥ æ˜ŸæœŸä¸€ 11æ—¶39åˆ†42ç§’ ************************************************************************//* include &lt;sys/stat.h&gt; #include &lt;sys/types.h&gt; int mkdir(const char *pathname, mode_t mode); ä½œç”¨: åˆ›å»ºä¸€ä¸ªç›®å½• å‚æ•°: pathname: åˆ›å»ºçš„ç›®å½•çš„è·¯å¾„ mode: æƒé™, å…«è¿›åˆ¶ è¿”å›: æˆåŠŸè¿”å›0, å¤±è´¥è¿”å›-1 // åˆ é™¤ int rmdir(const char *pathname); // æ›´å ç¬¬ä¸€ä¸ªå‚æ•°æ—§çš„åå­— ç¬¬äºŒä¸ªå‚æ•°æ–°çš„åå­— int rename(const char *oldpath, const char *newpath);*/#include &lt;stdio.h&gt;#include &lt;sys/stat.h&gt;#include &lt;sys/types.h&gt;int main() &#123; // 0777 0æ˜¯å…«è¿›åˆ¶ // ä¸€å®šè¦æœ‰å¯æ‰§è¡Œæƒé™ x è¦ä¸å°±æ°¸ä¸äº† ä½ ä¸ä¿¡è¯•è¯• int ret = mkdir(&quot;aaa&quot;, 0777); if(ret == -1) &#123; perror(&quot;mkdir&quot;); return -1; &#125; return 0;&#125; man 2 getcwd å·¥ä½œè·¯å¾„ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566/************************************************************************* &gt; File Name: getcwd.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´03æœˆ29æ—¥ æ˜ŸæœŸäºŒ 09æ—¶27åˆ†16ç§’ ************************************************************************//* #include &lt;unistd.h&gt; int chdir(const char *path); ä½œç”¨: ä¿®æ”¹è¿›ç¨‹çš„å·¥ä½œç›®å½• æ¯”å¦‚åœ¨/home/root å¯åŠ¨äº†ä¸€ä¸ªå¯æ‰§ç¨‹åº a.out, è¿›ç¨‹çš„å·¥ä½œç›®å½• å‚æ•°: path: éœ€è¦ä¿®æ”¹çš„å·¥ä½œç›®å½• #nclude &lt;unistd.h&gt; char *getcwd(char *buf, size_t size); ä½œç”¨: è·å–å½“å‰å·¥ä½œç›®å½• å‚æ•°: - buf: å­˜å‚¨çš„è·¯å¾„, æŒ‡å‘çš„æ˜¯ä¸€ä¸ªæ•°ç»„(ä¼ å‡ºå‚æ•°) - size: æ•°ç»„å¤§å° è¿”å›å€¼: è¿”å›çš„æŒ‡å‘çš„ä¸€å—å†…å­˜, è¿™ä¸ªæ•°æ®å°±æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°*/#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;#include &lt;sys/stat.h&gt;#include &lt;sys/types.h&gt;#include &lt;fcntl.h&gt;int main() &#123; // è·å–å½“å‰å·¥ä½œç›®å½• char buf[128]; getcwd(buf, sizeof(buf)); printf(&quot;å½“å‰çš„å·¥ä½œç›®å½•æ˜¯ : %s\\n&quot;, buf); // ä¿®æ”¹å·¥ä½œç›®å½• ä¸‹é¢æ˜¯ç›¸å¯¹è·¯å¾„ ä¸æ˜¯ç»å¯¹è·¯å¾„ int ret = chdir(&quot;../test&quot;); if(ret == -1) &#123; perror(&quot;chdir&quot;); return -1; &#125; // åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ int fd = open(&quot;w.txt&quot;, O_CREAT| O_RDWR, 0664); if(fd == -1) &#123; perror(&quot;open&quot;); return -1; &#125; // å…³é—­æ–‡ä»¶æè¿°ç¬¦ close(fd); // è·å–å½“å‰å·¥ä½œç›®å½• char buf1[128]; getcwd(buf1, sizeof(buf1)); printf(&quot;å½“å‰çš„å·¥ä½œç›®å½•æ˜¯ : %s\\n&quot;, buf1); return 0;&#125; man 3 opendir 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899/************************************************************************* &gt; File Name: readFileNum.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´03æœˆ30æ—¥ æ˜ŸæœŸä¸‰ 10æ—¶01åˆ†49ç§’ ************************************************************************//* // æ‰“å¼€ç›®å½• #nclude &lt;sys/types.h&gt; #include &lt;dirent.h&gt; DIR *opendir(const char *name); å‚æ•°: - name: éœ€è¦æ‰“å¼€çš„ç›®å½•åç§° è¿”å›å€¼: DIR * ç±»å‹ç†è§£ä¸ºç›®å½•æµ å¤±è´¥è¿”å› NULL // è¯»å–ç›®å½•ä¸­çš„æ•°æ® #include &lt;dirent.h&gt; struct diren *readdir(DIR *dirp); å‚æ•°: - dirp æ˜¯ opendir è¿”å›çš„ç»“æœ è¿”å›å€¼: struct dirent ä»£è¡¨è¯»å–åˆ°çš„æ–‡ä»¶çš„ä¿¡æ¯ è¯»å–åˆ°äº†æœ«å°¾æˆ–è€…å¤±è´¥äº†, è¿”å›NULL // å…³é—­ç›®å½• #include &lt;sys/types.h&gt; #include &lt;dirent.h&gt; int closedir(DIR *dirp);*/#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;dirent.h&gt;#include &lt;string.h&gt;#include &lt;stdlib.h&gt;int getFileNum(const char *path);// è¯»å–æŸä¸ªç›®å½•ä¸‹çš„æ™®é€šæ–‡ä»¶çš„ä¸ªæ•°int main(int argc, char *argv[]) &#123; if(argc &lt; 2) &#123; printf(&quot;%s path\\n&quot;, argv[0]); return -1; &#125; int num = getFileNum(argv[1]); printf(&quot;æ™®é€šæ–‡ä»¶çš„ä¸ªæ•°: %d \\n&quot;, num); return 0;&#125;// ç”¨äºè·å–ç›®å½•ä¸‹æ‰€æœ‰æ™®é€šæ–‡ä»¶çš„ä¸ªæ•°int getFileNum(const char *path) &#123; // æ‰“å¼€ç›®å½• DIR *dir = opendir(path); if(dir == NULL) &#123; perror(&quot;opendir&quot;); exit(0); &#125; struct dirent *ptr; // è®°å½•æ™®é€šæ–‡ä»¶çš„ä¸ªæ•° int total = 0; while((ptr = readdir(dir)) != NULL) &#123; // è·å–åç§° char *dname = ptr-&gt;d_name; // å¿½ç•¥æ‰ .å’Œ .. if(strcmp(dname, &quot;.&quot;) == 0 || strcmp(dname, &quot;..&quot;) == 0) continue; // åˆ¤æ–­æ˜¯å¦æ˜¯æ™®é€šæ–‡ä»¶ if(ptr-&gt;d_type == DT_DIR) &#123; // ç›®å½•, éœ€è¦ç»§ç»­è¯»å–è¿™ä¸ªç›®å½• char newpath[256]; sprintf(newpath, &quot;%s%s&quot;, path, dname); total += getFileNum(newpath); &#125; if(ptr-&gt;d_type == DT_REG) &#123; // æ™®é€šæ–‡ä»¶ total++; &#125; &#125; // å…³é—­ç›®å½• closedir(dir); return total;&#125; dupï¼Œdup2å‡½æ•°man 2 dup 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950/************************************************************************* &gt; File Name: dup.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´03æœˆ30æ—¥ æ˜ŸæœŸä¸‰ 16æ—¶03åˆ†03ç§’ ************************************************************************//* * #include &lt;unistd.h&gt; * int dup(int oldfd); * ä½œç”¨: å¤åˆ¶ä¸€ä¸ªæ–°çš„æ–‡ä»¶æè¿°ç¬¦ * fd = 3, fd1 = dup(fd); * fdæŒ‡å‘çš„æ˜¯a.txt, fd1ä¹Ÿæ˜¯æŒ‡å‘çš„a.txt * ä»ç©ºé—²çš„æ–‡ä»¶æè¿°ç¬¦è¡¨ä¸­æ‰¾åˆ°ä¸€ä¸ªæœ€å°çš„, ä½œä¸ºæ–°çš„æ‹·è´çš„æ–‡ä»¶æè¿° ç¬¦ * * */#include &lt;stdio.h&gt;#include &lt;unistd.h&gt;// åˆ›å»ºæ–‡ä»¶#include &lt;fcntl.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;string.h&gt;int main() &#123; // ç¬¬ä¸€ä¸ªè¯»å†™ ç¬¬äºŒåˆ›å»º int fd = open(&quot;a.txt&quot;, O_RDWR | O_CREAT, 0664); int fd1 = dup(fd); if(fd1 == -1) &#123; perror(&quot;dup&quot;); return -1; &#125; printf(&quot;fd : %d \\n fd1 : %d&quot;, fd, fd1); close(fd); char *str = &quot;hello, world&quot;; int ret = write(fd1, str, strlen(str)); if(ret == -1) &#123; perror(&quot;write&quot;); return -1; &#125; close(fd1); return 0;&#125; man 2 dup2 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061/************************************************************************* &gt; File Name: dup2.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´03æœˆ31æ—¥ æ˜ŸæœŸå›› 14æ—¶25åˆ†22ç§’ ************************************************************************//* * #include &lt;unistd.h&gt; * int dup2(int oldfd, int newfd); * ä½œç”¨: é‡å®šå‘æ–‡ä»¶æè¿°ç¬¦ * oldfd æŒ‡å‘ a.txt, newfd æŒ‡å‘ b.txt * è°ƒç”¨å‡½æ•°æˆåŠŸå: newfd å’Œ b.txt åš close(), newfd æŒ‡å‘äº† a.txt * oldfd å¿…é¡»æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ–‡ä»¶æè¿°ç¬¦ * oldfd å’Œ newfd å€¼ç›¸åŒç›¸å½“äºä»€ä¹ˆä¹Ÿæ²¡åš */#include &lt;stdio.h&gt;#include &lt;sys/types.h&gt;#include &lt;sys/stat.h&gt;#include &lt;unistd.h&gt;#include &lt;fcntl.h&gt;#include &lt;string.h&gt;int main() &#123; int fd = open(&quot;1.txt&quot;, O_RDWR | O_CREAT, 0664); if(fd == -1) &#123; perror(&quot;open&quot;); &#125; int fd1 = open(&quot;2.txt&quot;, O_RDWR | O_CREAT, 0664); if(fd == -1) &#123; perror(&quot;open&quot;); return -1; &#125; printf(&quot;fd : %d, fd1 : %d\\n&quot;, fd, fd1); int fd2 = dup2(fd, fd1); if(fd2 == -1) &#123; perror(&quot;dup2&quot;); return -1; &#125; // é€šè¿‡fd1å»å†™æ•°æ®, å®é™…æ“ä½œçš„æ˜¯1.txt, è€Œä¸æ˜¯2.txt char * str = &quot;hello, dup2&quot;; int len = write(fd1, str, strlen(str)); if(len == -1) &#123; perror(&quot;write&quot;); return -1; &#125; printf(&quot;fd : %d, fd1 : %d, fd2 : %d \\n&quot;, fd, fd1, fd2); close(fd); close(fd1); return 0;&#125; man 2 fucnt123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869/************************************************************************* &gt; File Name: fcntl.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´03æœˆ31æ—¥ æ˜ŸæœŸå›› 18æ—¶55åˆ†53ç§’ ************************************************************************//* * #include &lt;unistd.h&gt; * #include &lt;fcntl.h&gt; * * int fcntl(int fd, int cmd, ...); * å‚æ•°: * - fd: è¡¨ç¤ºéœ€è¦æ“ä½œçš„æ–‡ä»¶æè¿°ç¬¦ * - cmd: è¡¨ç¤ºæ–‡ä»¶æè¿°ç¬¦è¿›è¡Œå¦‚ä½•æ“ä½œ * 1. F_DUPFD: å¤åˆ¶æ–‡ä»¶æè¿°ç¬¦,å¤åˆ¶çš„æ˜¯ä¸€ä¸ªå‚æ•°fd,å¾—åˆ°ä¸€ä¸ªæ–°çš„ * int ret = fcntl(fd, F_DUPFD); * 2. F_GETFL: è·å–æŒ‡å®šçš„æ–‡ä»¶æè¿°ç¬¦æ–‡ä»¶çŠ¶æ€flag * è·å–çš„flagå’Œé€šè¿‡openå‡½æ•°ä¼ é€’çš„flagæ˜¯ä¸€ä¸ªä¸œè¥¿ * 3. F_SETFL: è®¾ç½®æ–‡ä»¶æè¿°ç¬¦æ–‡ä»¶çŠ¶æ€falg * å¿…é€‰é¡¹: O_RDONLY, O_WRODNLY, O_RDWR ä¸å¯ä»¥è¢«ä¿®æ”¹ * å¯é€‰æ€§: O_APPEND, O_NONBLOCK * O_APPEND: è¡¨ç¤ºè¿½åŠ æ•°æ® * O_NONBLOCK: è®¾ç½®æˆéé˜»å¡ * é˜»å¡å’Œéé˜»å¡: æŒ‡çš„æ˜¯å‡½æ•°è°ƒç”¨çš„è¡Œä¸ºã€‚add() */#include &lt;stdio.h&gt;#include &lt;fcntl.h&gt;#include &lt;unistd.h&gt;#include &lt;string.h&gt;int main() &#123; // 1.å¤åˆ¶æ–‡ä»¶æè¿°ç¬¦ // int fd = open(&quot;1.txt&quot;, O_RDONLY); // int ret = fcntl(fd, F_DUPFD); // 2.ä¿®æ”¹æˆ–è€…è·å–æ–‡ä»¶çŠ¶æ€flag --- å½“å‰æ–‡ä»¶åªè¯» int fd = open(&quot;1.txt&quot;, O_RDWR); if(fd == -1) &#123; perror(&quot;open&quot;); return -1; &#125; // è·å–æ–‡ä»¶æè¿°ç¬¦çŠ¶æ€ int flag = fcntl(fd,F_GETFL); if(flag == -1) &#123; perror(&quot;fcntl_GET&quot;); return -1; &#125; flag |= O_APPEND; // ä¿®æ”¹æ–‡ä»¶æè¿°ç¬¦çŠ¶æ€çš„flag, ç»™flagåŠ å…¥O_APPENDè¿™ä¸ªæ ‡è®° int ret = fcntl(fd, F_SETFL, flag); if(ret == -1) &#123; perror(&quot;fcntl_SET&quot;); return -1; &#125; char *str = &quot;nihao&quot;; write(fd, str, strlen(str)); close(fd); return 0;&#125;","categories":[{"name":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨","slug":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨","permalink":"https://tutouwang.vercel.app/categories/LInux-%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"}],"tags":[{"name":"LInux","slug":"LInux","permalink":"https://tutouwang.vercel.app/tags/LInux/"}]},{"title":"Vimå¤åˆ¶ä»£ç é”™ä½é—®é¢˜","slug":"æœ‰è¶£çš„çŸ¥è¯†/å¤åˆ¶ä»£ç é”™ä½é—®é¢˜","date":"2022-03-09T02:10:56.000Z","updated":"2022-03-09T06:37:32.830Z","comments":true,"path":"2022/03/09/æœ‰è¶£çš„çŸ¥è¯†/å¤åˆ¶ä»£ç é”™ä½é—®é¢˜/","link":"","permalink":"https://tutouwang.vercel.app/2022/03/09/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/%E5%A4%8D%E5%88%B6%E4%BB%A3%E7%A0%81%E9%94%99%E4%BD%8D%E9%97%AE%E9%A2%98/","excerpt":"","text":"Vimä¸­å¤åˆ¶ç²˜è´´ç¼©è¿›é”™ä¹±é—®é¢˜çš„è§£å†³æ–¹Vimä¸­å¤åˆ¶ç²˜è´´ç¼©è¿›é”™ä¹±é—®é¢˜çš„è§£å†³æ–¹æ¡ˆ å½“ä½ æŠŠè¿™æ®µç¼©è¿›ä¼˜ç¾çš„ä»£ç ç›´æ¥ctrl+c(ctrl+shift + c)ï¼Œctrl+våˆ°Vimçš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°å¦‚ä¸‹æ¶å¿ƒçš„æƒ…å†µ å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§ç›´æ¥ç²˜è´´çš„æ–¹å¼ä¼šå¯¼è‡´ä»£ç ä¸¢å¤±å’Œç¼©è¿›é”™ä¹±ç­‰æƒ…å†µã€‚ è§£å†³æ–¹æ¡ˆvimè¿›å…¥pasteæ¨¡å¼ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š :set paste è¿›å…¥pasteæ¨¡å¼ä¹‹åï¼Œå†æŒ‰iè¿›å…¥æ’å…¥æ¨¡å¼ï¼Œè¿›è¡Œå¤åˆ¶ã€ç²˜è´´å°±å¾ˆæ­£å¸¸äº†ã€‚å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œè¾“å…¥ :set nopaste è§£é™¤pasteæ¨¡å¼ã€‚ pasteæ¨¡å¼ä¸»è¦å¸®æˆ‘ä»¬åšäº†å¦‚ä¸‹äº‹æƒ…ï¼š textwidthè®¾ç½®ä¸º0wrapmarginè®¾ç½®ä¸º0set noaiset nosisofttabstopè®¾ç½®ä¸º0revinsé‡ç½®ruleré‡ç½®showmatché‡ç½®formatoptionsä½¿ç”¨ç©ºå€¼","categories":[{"name":"æœ‰è¶£çš„çŸ¥è¯†","slug":"æœ‰è¶£çš„çŸ¥è¯†","permalink":"https://tutouwang.vercel.app/categories/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[]},{"title":"GDBè°ƒè¯•","slug":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨/GDBè°ƒè¯•","date":"2022-03-08T09:34:18.000Z","updated":"2022-09-24T07:59:13.983Z","comments":true,"path":"2022/03/08/LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨/GDBè°ƒè¯•/","link":"","permalink":"https://tutouwang.vercel.app/2022/03/08/LInux-%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/GDB%E8%B0%83%E8%AF%95/","excerpt":"","text":"ä»€ä¹ˆæ˜¯ GDB GDBæ˜¯ç”± GNUè½¯ä»¶ç³»ç»Ÿç¤¾åŒºæä¾›çš„è°ƒè¯•å·¥å…·ï¼ŒåŒGCC é…å¥—ç»„æˆäº†ä¸€å¥—å®Œæ•´çš„å¼€å‘ç¯å¢ƒï¼ŒGDBæ˜¯ Linuxå’Œè®¸å¤šç±»Unixç³»ç»Ÿä¸­çš„æ ‡å‡†å¼€å‘ç¯å¢ƒã€‚ ä¸€èˆ¬æ¥è¯´ï¼ŒGDBä¸»è¦å¸®åŠ©ä½ å®Œæˆä¸‹é¢å››ä¸ªæ–¹å‘çš„åŠŸèƒ½ï¼š å¯åŠ¨ç¨‹åºï¼Œå¯ä»¥æŒ‰ç…§è‡ªå®šä¹‰çš„è¦æ±‚éšå¿ƒæ‰€æ¬²çš„è¿è¡Œç¨‹åº å¯è®©è¢«è°ƒè¯•çš„ç¨‹åºåœ¨æŒ‡å®šçš„è°ƒç½®çš„æ–­ç‚¹å¤„åœä½(æ–­ç‚¹å¯ä»¥æ˜¯æ¡ä»¶è¡¨è¾¾å¼) å½“ç¨‹åºè¢«åœä½æ—¶,å¯ä»¥æ£€æŸ¥æ­¤æ—¶ç¨‹åºä¸­å‘ç”Ÿçš„äº‹ å¯ä»¥æ”¹å˜ç¨‹åºï¼Œå°†ä¸€ä¸ªBUGäº§ç”Ÿçš„å½±å“ä¿®æ­£ä»è€Œæµ‹è¯•å…¶ä»– BUG å‡†å¤‡å·¥ä½œ é€šå¸¸ï¼Œåœ¨ä¸ºè°ƒè¯•è€Œç¼–è¯‘æ—¶ï¼Œæˆ‘ä»¬ä¼šå…³æ‰ç¼–è¯‘å™¨çš„ä¼˜åŒ–é€‰é¡¹ï¼ˆâ€™-oâ€™) ï¼Œå¹¶æ‰“å¼€è°ƒè¯•é€‰é¡¹(â€˜-gâ€™)ã€‚å¦å¤–ï¼Œ â€˜-Wallâ€™åœ¨å°½é‡ä¸å½±å“ç¨‹åºè¡Œä¸ºçš„æƒ…å†µä¸‹é€‰é¡¹æ‰“å¼€æ‰€æœ‰warning(è­¦å‘Š)ï¼Œä¹Ÿå¯ä»¥å‘ç°è®¸å¤šé—®é¢˜ï¼Œé¿å…ä¸€äº›ä¸å¿…è¦çš„ BUGã€‚ gcc -g -Wall program.c -o program â€˜gâ€™ é€‰é¡¹çš„ä½œç”¨æ˜¯åœ¨æ‰§è¡Œæ–‡ä»¶ä¸­åŠ å…¥æºä»£ç çš„ä¿¡æ¯ï¼Œæ¯”å¦‚å¯æ‰§è¡Œæ–‡ä»¶ä¸­ç¬¬å‡ æ¡æœºå™¨æŒ‡ä»¤å¯¹åº”æºä»£ç çš„ç¬¬å‡ è¡Œï¼Œä½†å¹¶ä¸æ˜¯æŠŠæ•´ä¸ªæºæ–‡ä»¶åµŒå…¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œå¯ä»¥åœ¨è°ƒè¯•æ—¶å¿…é¡»ä¿è¯ gdb èƒ½æ‰¾æ‰“æºæ–‡ä»¶ -w çš„æ„æ€æ˜¯å…³é—­ç¼–è¯‘æ—¶çš„è­¦å‘Šï¼Œä¹Ÿå°±æ˜¯ç¼–è¯‘åä¸æ˜¾ç¤ºä»»ä½•warningï¼Œå› ä¸ºæœ‰æ—¶åœ¨ç¼–è¯‘ä¹‹åç¼–è¯‘å™¨ä¼šæ˜¾ç¤ºä¸€äº›ä¾‹å¦‚æ•°æ®è½¬æ¢ä¹‹ç±»çš„è­¦å‘Šï¼Œè¿™äº›è­¦å‘Šæ˜¯æˆ‘ä»¬å¹³æ—¶å¯ä»¥å¿½ç•¥çš„ã€‚ -Wallé€‰é¡¹æ„æ€æ˜¯ç¼–è¯‘åæ˜¾ç¤ºæ‰€æœ‰è­¦å‘Šã€‚ -Wé€‰é¡¹ç±»ä¼¼-Wallï¼Œä¼šæ˜¾ç¤ºè­¦å‘Šï¼Œä½†æ˜¯åªæ˜¾ç¤ºç¼–è¯‘å™¨è®¤ä¸ºä¼šå‡ºç°é”™è¯¯çš„è­¦å‘Šã€‚ åœ¨ç¼–è¯‘ä¸€äº›é¡¹ç›®çš„æ—¶å€™å¯ä»¥-Wå’Œ-Wallé€‰é¡¹ä¸€èµ·ä½¿ç”¨ã€‚ GDBå‘½ä»¤-å¯åŠ¨ã€é€€å‡ºã€æŸ¥çœ‹ä»£ç  å¯åŠ¨å’Œé€€å‡º gdb å¯æ‰§è¡Œç¨‹åº quit ç»™ç¨‹åºè®¾ç½®å‚æ•°&#x2F;è·å–è®¾ç½®å‚æ•° set args 10 20 show args GDB ä½¿ç”¨å¸®åŠ© help æŸ¥çœ‹å½“å‰æ–‡ä»¶ä»£ç  (å›è½¦ç»§ç»­æ‰§è¡Œä¸Šä¸€è¡Œå‘½ä»¤) list&#x2F;l (ä»é»˜è®¤ä½ç½®æ˜¾ç¤º) list&#x2F;l è¡Œå· (ä»æŒ‡å®šçš„è¡Œæ˜¾ç¤º) list&#x2F;l å‡½æ•°å (ä»æŒ‡å®šçš„å‡½æ•°æ˜¾ç¤º) æŸ¥çœ‹éå½“å‰æ–‡ä»¶æ–‡ä»¶ list&#x2F;l æ–‡ä»¶åï¼šè¡Œå· list&#x2F;l æ–‡ä»¶åï¼šå‡½æ•°å è®¾ç½®æ˜¾ç¤ºè¡Œæ•° show list&#x2F;listsize set list&#x2F;listsize è¡Œæ•° gdb è°ƒè¯•ä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940/************************************************************************* &gt; File Name: gdb_test1.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´03æœˆ09æ—¥ æ˜ŸæœŸä¸‰ 10æ—¶19åˆ†28ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;int test(int a) &#123; int sum = 0; for(int i = 0; i &lt; a; i++) &#123; sum += i; &#125; return sum;&#125;// ./test1 10 20 // ä¼ é€’å‚æ•°å°±ä¼šç»™mainé‡Œé¢int main(int argc, char* argv[]) &#123; int a, b; printf(&quot;argc = %d\\n&quot;, argc); if(argc &lt; 3) &#123; a = 10; b = 30; &#125; else &#123; a = atoi(argv[1]); b = atoi(argv[2]); &#125; printf(&quot;a = %d, b = %d\\n&quot;, a, b); printf(&quot;a + b = %d \\n&quot;, a + b); for(int i = 0; i &lt; a; i++) &#123; printf(&quot;i = %d\\n&quot;, i); int res = test(i); printf(&quot;res value : %d \\n&quot;, res); &#125; printf(&quot;THE END !!! \\n&quot;); return 0;&#125; vim ä¸‹ set nu gcc test1.c -o test1 -g åŠ ä¸Šè°ƒè¯•ä¿¡æ¯ &#x2F;&#x2F; æºä»£ç æ–‡ä»¶è¦è¦å’Œå¯æ‰§è¡Œç¨‹åºåœ¨ä¸€èµ·å¦åˆ™ gdb ä¸­å‘½ä»¤ä¸å¯ä½¿ç”¨ gcc test1.c -o test2 ä¸åŠ è°ƒè¯•ä¿¡æ¯ å¯ä»¥ ll å¯¹æ¯”ä¸€ä¸‹ä¸¤ä¸ªæ–‡ä»¶å¤§å° sshå‘½ä»¤ gdb å¯æ‰§è¡Œç¨‹åº(test1) è¿›å…¥åˆ°gdbæ¨¡å¼ GDBè°ƒè¯•ä¸­è®¾ç½®å‚æ•° ï¼šset args 10 20 GDB è·å–è®¾ç½®å‚æ•° ï¼š show args å¯ä»¥çœ‹ä¸Šé¢ ç‚¹æˆ‘è·³è½¬ è°ƒè¯•å¤šä¸ªæ–‡ä»¶1234567gcc main.c a.c b.c -o main -ggdb main&#x2F;&#x2F; æŸ¥çœ‹å…¶ä¸­ä¸€ä¸ªæ–‡ä»¶&#x2F;&#x2F; æ³¨æ„ä¸èƒ½æ˜¯ä¸€ä¸ªæ–‡ä»¶ä¾‹å¦‚ list mian.cl a.c:1 &#x2F;&#x2F; å°±ä¼šè¿›å…¥ a.c çš„ç¬¬ä¸€è¡Œ ä»¥è¡Œå·ä¸ºä¸­å¿ƒæ˜¾ç¤ºorl a.c:å‡½æ•°å &#x2F;&#x2F; å°±ä¼šè¿›å…¥ a.c çš„ç¬¬å‡½æ•°ä¸ºä¸­å¿ƒæ˜¾ç¤º GDBå‘½ä»¤-æ–­ç‚¹æ“ä½œ è®¾ç½®æ–­ç‚¹ b&#x2F;break è¡Œå· b&#x2F;break å‡½æ•°å b&#x2F;break æ–‡ä»¶åï¼šè¡Œå· b&#x2F;break æ–‡ä»¶å: å‡½æ•° æŸ¥çœ‹æ–­ç‚¹ i&#x2F;info b&#x2F;break åˆ é™¤æ–­ç‚¹ d&#x2F;del&#x2F;delete æ–­ç‚¹ç¼–å· è®¾ç½®æ–­ç‚¹æ— æ•ˆ dis&#x2F;disable æ–­ç‚¹ç¼–å· è®¾ç½®æ–­ç‚¹ç”Ÿæ•ˆ ena&#x2F;enable æ–­ç”µç¼–å· è®¾ç½®æ¡ä»¶æ–­ç‚¹(ä¸€èˆ¬åœ¨å¾ªç¯çš„ä½ç½®) b&#x2F;break 10 if i &#x3D;&#x3D; 5 æ–­ç‚¹è®¾ç½® æ–­ç‚¹ç¼–å·ï¼šNum ä¸‹é¢æ•°å­—(æ–­ç”µç¼–å·) è®¾ç½®æ–­ç‚¹æ— æ•ˆ End &#x3D; n æ­£å¸¸æ˜¯ y æƒ³è¦æ–­ç‚¹å†æ¬¡ç”Ÿæ•ˆ è®¾ç½®æ–­ç‚¹ç”Ÿæ•ˆ (å‘½ä»¤)end&#x2F;enable æ–­ç”µç¼–å· GDBå‘½ä»¤-è°ƒè¯•å‘½ä»¤ è¿è¡ŒGDBç¨‹åº start (ç¨‹åºåœåœ¨ç¬¬ä¸€è¡Œ) run (é‡åˆ°æ–­ç‚¹æ‰åœ) ç»§ç»­è¿è¡Œï¼Œåˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹åœ c&#x2F;continue å‘ä¸‹æ‰§è¡Œä¸€è¡Œä»£ç  (ä¸ä¼šè¿›å…¥å‡½æ•°ä½“) n&#x2F;next å˜é‡æ“ä½œ p&#x2F;print å˜é‡å (æ‰“å°å˜é‡å€¼) ptype å˜é‡å (æ‰“å°å˜é‡ç±»å‹) å‘ä¸‹å•æ­¥è°ƒè¯• (é‡åˆ°å‡½æ•°è¿›å…¥å‡½æ•°ä½“) s&#x2F;step finish (è·³å‡ºå‡½æ•°ä½“) è‡ªåŠ¨å˜é‡æ“ä½œ display num (è‡ªåŠ¨æ‰“å°æŒ‡å®šå˜é‡çš„å€¼) i&#x2F;info display undisplay ç¼–å· å…¶ä»–æ“ä½œ set var å˜é‡å &#x3D; å˜é‡å€¼ until (è·³å‡ºå¾ªç¯)","categories":[{"name":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨","slug":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨","permalink":"https://tutouwang.vercel.app/categories/LInux-%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"}],"tags":[{"name":"LInux","slug":"LInux","permalink":"https://tutouwang.vercel.app/tags/LInux/"}]},{"title":"Makefile","slug":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨/Makefile","date":"2022-03-04T10:24:52.000Z","updated":"2022-04-01T13:30:29.028Z","comments":true,"path":"2022/03/04/LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨/Makefile/","link":"","permalink":"https://tutouwang.vercel.app/2022/03/04/LInux-%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/Makefile/","excerpt":"","text":"ä»€ä¹ˆæ˜¯Makefile ä¸€ä¸ªå·¥ç¨‹ä¸­çš„æºæ–‡ä»¶ä¸è®¡å…¶æ•°ï¼å…¶æŒ‰ç±»å‹ã€åŠŸèƒ½ã€æ¨¡å—åˆ†åˆ«æ”¾åœ¨è‹¥å¹²ä¸ªç›®å½•ä¸­ï¼ŒMakefileæ–‡ä»¶å®šä¹‰äº†ä¸€ç³»åˆ—çš„è§„åˆ™æ¥æŒ‡å®šå“ªäº›æ–‡ä»¶è¦ç”Ÿç¼–æ‰iè¯‘.å“ªäº›æ–‡ä»¶éœ€è¦åç¼–è¯‘ï¼Œå“ªäº›æ–‡ä»¶éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œç”šè‡³äºè¿›è¡Œæ›´å¤æ‚çš„åŠŸèƒ½æ“ä½œï¼Œå› ä¸º Makefileæ–‡ä»¶å°±åƒä¸€ä¸ªShell è„šæœ¬ä¸€æ ·,ä¹Ÿå¯ä»¥æ‰§è¡Œæ“ä½œç³»ç»Ÿçš„å‘½ Makefileå¸¦æ¥çš„å¥½å¤„å°±æ˜¯â€œè‡ªåŠ¨åŒ–ç¼–è¯‘â€ï¼Œä¸€æ—¦å†™å¥½åªéœ€è¦ä¸€ä¸ªmakeå‘½ä»¤ï¼Œæ•´ä¸ªå·¥ç¨‹å®Œå…¨è‡ªåŠ¨ç¼–è¯‘ï¼æå¤§çš„æé«˜äº†è½¯ä»¶å¼€å‘çš„æ•ˆç‡ã€‚make æ˜¯ä¸€ä¸ªå‘½ä»¤å·¥å…·ï¼Œæ˜¯ä¸€ä¸ªè§£é‡ŠMakefileæ–‡ä»¶ä¸­æŒ‡ä»¤çš„å‘½ä»¤å·¥å…·ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œå¤§å¤šæ•°çš„IDEéƒ½æœ‰è¿™ä¸ªå‘½ä»¤.æ¯”å¦‚Delphi çš„ makeï¼ŒVisual C++çš„nmake,Linux ä¸‹GNUçš„makeã€‚ Makefileæ–‡ä»¶å‘½åå’Œè§„åˆ™ æ–‡ä»¶å‘½å makefile æˆ–è€… Makefile Makefile è§„åˆ™ ä¸€ä¸ªMakefileæ–‡ä»¶ä¸­å¯ä»¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªè§„åˆ™ ç›®æ ‡ â€¦:ä¾èµ– â€¦ (â€¦ è¡¨ç¤ºå¤šä¸ªä¾èµ–) â€‹ (Tab)å‘½ä»¤(Shell å‘½ä»¤) â€‹ â€¦ ç›®æ ‡ : æœ€ç»ˆè¦ç”Ÿæˆçš„æ–‡ä»¶(ä¼ªç›®æ ‡é™¤å¤–) ä¾èµ– ï¼šç”Ÿæˆç›®æ ‡æ‰€éœ€è¦çš„æ–‡ä»¶æˆ–è€…æ˜¯ç›®æ ‡ å‘½ä»¤ ï¼šé€šè¿‡æ‰§è¡Œå‘½ä»¤å¯¹ä¾èµ–æ“ä½œç”Ÿæˆç›®æ ‡(å‘½ä»¤å‰å¿…é¡» Tab ç¼©è¿›) makeå®‰è£…sudo apt install make make ä½¿ç”¨ - ç¬¬ä¸€ç‰ˆ Makefile12app:sub.c add.c mult.c div.c main.c gcc sub.c mult.c div.c main.c -o app sub.c 1234567#include &lt;stdio.h&gt;#include &quot;head.h&quot;int subtract(int a, int b)&#123; return a-b;&#125; mult.c 1234567#include &lt;stdio.h&gt;#include &quot;head.h&quot;int multiply(int a, int b)&#123; return a*b;&#125; div.c 1234567#include &lt;stdio.h&gt;#include &quot;head.h&quot;double divide(int a, int b)&#123; return (double)a/b;&#125; main.c 1234567891011121314#include &lt;stdio.h&gt;#include &quot;head.h&quot;int main()&#123; int a = 20; int b = 12; printf(&quot;a = %d, b = %d\\n&quot;, a, b); printf(&quot;a + b = %d\\n&quot;, add(a, b)); printf(&quot;a - b = %d\\n&quot;, subtract(a, b)); printf(&quot;a * b = %d\\n&quot;, multiply(a, b)); printf(&quot;a / b = %f\\n&quot;, divide(a, b)); return 0;&#125; head.h 1234567891011#ifndef _HEAD_H#define _HEAD_H// åŠ æ³•int add(int a, int b);// å‡æ³•int subtract(int a, int b);// ä¹˜æ³•int multiply(int a, int b);// é™¤æ³•double divide(int a, int b);#endif å·¥ä½œåŸç† å‘½ä»¤åœ¨æ‰§è¡Œå‰ï¼Œéœ€è¦æ£€æŸ¥è§„åˆ™ä¸­çš„ä¾èµ–æ˜¯å¦uæ‰èƒ½åœ¨ å¦‚æœå­˜åœ¨ï¼Œæ‰§è¡Œå‘½ä»¤ å¦‚æœä¸å­˜åœ¨ï¼Œå‘ä¸‹æ£€æŸ¥å…¶å®ƒå‘½ä»¤è§„åˆ™ï¼Œæ£€æŸ¥æœ‰æ²¡æœ‰ä¸€ä¸ªè§„åˆ™ç”¨æ¥ç”Ÿæˆè¿™ä¸ªä¾èµ–çš„ï¼Œå¦‚æœæ‰¾åˆ°åˆ™æ‰§è¡Œè¯¥è§„åˆ™ä¸­çš„å‘½ä»¤ æ£€æµ‹æ›´æ–°ï¼Œåœ¨æ‰§è¡Œè§„åˆ™çš„å‘½ä»¤æ—¶ï¼Œä¼šæ¯”è¾ƒç›®æ ‡å’Œä¾èµ–çš„æ–‡ä»¶çš„æ—¶é—´(ç›´æ¥è¾“å…¥ make) å¦‚æœä¾èµ–çš„æ—¶é—´æ¯”ç›®æ ‡æ—¶é—´æ™šï¼Œéœ€è¦é‡æ–°ç”Ÿæˆç›®æ ‡ å¦‚æœä¾èµ–çš„æ—¶é—´æ¯”ç›®æ ‡æ—¶é—´æ—©ï¼Œç›®æ ‡ä¸éœ€è¦æ›´æ–°ï¼Œå¯¹åº”è§„åˆ™ä¸­çš„å‘½ä»¤ä¸éœ€è¦æ‰§è¡Œ ç¬¬äºŒç‰ˆ Makefile123456789101112app:sub.o add.o mult.o div.o main.o gcc sub.o mult.o div.o main.o -o appusb.o:sub.c gcc -c sub.c -o sub.oadd.o:add.c gcc -c add.c -o add.omult.o:mult.c gcc -c mult.c -o mult.odiv.o:div.c gcc -c div.c -o div.omain.o:main.c gcc -c main.c -o main.o å˜é‡ è‡ªå®šä¹‰å˜é‡ å˜é‡å &#x3D; å˜é‡å€¼ var &#x3D; hello $(var) é¢„å®šä¹‰å˜é‡ AR : å½’æ¡£ç»´æŠ¤ç¨‹åºçš„åç§°ï¼Œé»˜è®¤å€¼ ar CC ï¼š C ç¼–è¯‘å™¨çš„åç§°ï¼Œé»˜è®¤å€¼ä¸º cc CXX : C++ ç¼–è¯‘å™¨çš„åç§°ã€‚é»˜è®¤å€¼ä¸º g++ $@ : ç›®æ ‡çš„å®Œæ•´åç§° $&lt; : ç¬¬ä¸€ä¸ªä¾èµ–æ–‡ä»¶åç§° $^ : æ‰€æœ‰ä¾èµ–æ–‡ä»¶ è·å–å˜é‡çš„å€¼ $(å˜é‡å) 1234app:main.c a.c b.c gcc -c main.c a.c b.c#è‡ªåŠ¨å˜é‡åªèƒ½åœ¨è§„åˆ™çš„å‘½ä»¤ä¸­ä½¿ç”¨ ç›®æ ‡å°±æ˜¯(app) $(cc) -c $^ -o $@ ç¬¬ä¸‰ç‰ˆ Makefile1234567891011121314151617# å®šä¹‰å˜é‡src = sub.o add.o mult.o div.o main.otarget = app$(target):$(src) $(CC) $(src) -o $(target)sub.o:sub.c gcc -c sub.c -o sub.oadd.o:add.c gcc -c add.c -o add.omult.o:mult.c gcc -c mult.c -o mult.odiv.o:div.c gcc -c div.c -o div.omain.o:main.c gcc -c main.c -o main.o æ¨¡å¼åŒ¹é…12345678# %.o:%.c# - %:é€šé…ç¬¦ï¼ŒåŒ¹é…ä¸€ä¸ªå­—ç¬¦# - ä¸¤ä¸ª%åŒ¹é…çš„æ˜¯åŒä¸€ä¸ªå­—ç¬¦ä¸²# %.o:%.c# gcc -c %&lt; -o $@sub.o:sub.c gcc -c sub.c -o sub.o %&lt;å•¥æ„æ€è¯·ç‚¹æˆ‘ ç¬¬å››ç‰ˆ Makefile12345678# å®šä¹‰å˜é‡src = sub.o add.o mult.o div.o main.otarget = app$(target):$(src) $(CC) $(src) -o $(target)%.o:%.c $(CC) -c $&lt; -o $@ å‡½æ•° $(wildcard PATTERNâ€¦) åŠŸèƒ½:è·å–æŒ‡å®šç›®å½•ä¸‹æŒ‡å®šç±»å‹çš„æ–‡ä»¶åˆ—è¡¨ å‚æ•°ï¼šPATTERNæŒ‡çš„æ˜¯æŸä¸ªæˆ–å¤šä¸ªç›®å½•ä¸‹çš„å¯¹åº”çš„æŸç§ç±»å‹çš„æ–‡ä»¶ï¼Œå¦‚æœæœ‰å¤šä¸ªç›®å½•ï¼Œä¸€èˆ¬ä½¿ç”¨ç©ºæ ¼é—´éš” è¿”å›ï¼šå¾—åˆ°çš„è‹¥å¹²ä¸ªæ–‡ä»¶çš„æ–‡ä»¶åˆ—è¡¨ï¼Œæ–‡ä»¶ä¹‹é—´ä½¿ç”¨ç©ºæ ¼é—´éš” ç¤ºä¾‹ $(wildcard *.c ./sub/*.c)(ç¬¬ä¸€ä¸ª*.è·å–å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰.cæ–‡ä»¶ ç¬¬äºŒä¸ªæ˜¯.&#x2F;sub ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ å¤šä¸ªç›®å½•å¯ä»¥ç”¨ç©ºæ ¼éš”å¼€) è¿”å›å€¼æ ¼å¼ï¼ša.c b.c c.c d.c f.c $(patsubst &lt;pattern&gt;, &lt;replacement&gt;, &lt;text&gt;) åŠŸèƒ½ï¼šæŸ¥æ‰¾&lt;text&gt;ä¸­çš„å•è¯ï¼ˆå•è¯ä»¥â€ç©ºæ ¼â€ã€â€Tabâ€æˆ–â€å›è½¦â€â€æ¢è¡Œâ€åˆ†å‰²ï¼‰æ˜¯å¦ç¬¦åˆæ¨¡å¼&lt;pattern&gt;,å¦‚æœåŒ¹é…çš„è¯ï¼Œåˆ™å¯ä»¥&lt;replacemnt&gt;æ›¿æ¢ã€‚ &lt;sattern&gt;å¯ä»¥åŒ…æ‹¬é€šé…ç¬¦$,è¡¨ç¤ºä»»æ„é•¿åº¦çš„å­—ä¸²ã€‚å¦‚æœ&lt;replacement&gt;ä¸­åŒ…å«$,é‚£ä¹ˆï¼Œ&lt;replacemnt&gt;ä¸­çš„è¿™ä¸ª$å°†æ˜¯&lt;pattern&gt;ä¸­çš„é‚£ä¸ª$æ‰€ä»£è¡¨çš„å­—ä¸²ã€‚(å¯ä»¥ç”¨â€™\\â€˜æ¥è½¬ä¹‰ï¼Œä»¥â€™\\%â€™æ¥è¡¨ç¤ºçœŸå®å«ä¹‰çš„â€™%â€™å­—ç¬¦) è¿”å›ï¼šå‡½æ•°è¿”å›è¢«æ›¿æ¢è¿‡çš„å­—ç¬¦ä¸² ç¤ºä¾‹ï¼š $(patsubst %.c, %.o, x.c bar.c) è¿”å›å€¼æ ¼å¼ï¼šx.o bar.o ç¬¬äº”ç‰ˆ Makefile12345678910# å®šä¹‰å˜é‡src = $(wildcard ./*.c)objs = $(patsubst %.c, %.o, $(src))target = app$(target):$(objs) $(CC) $(objs) -o $(target)%.o:%.c $(CC) -c $&lt; -o $@ ç¬¬äº”ç‰ˆ Makefile12345678910# å®šä¹‰å˜é‡src = $(wildcard ./*.c)objs = $(patsubst %.c, %.o, $(src))target = app$(target):$(objs) $(CC) $(objs) -o $(target)%.o:%.c $(CC) -c $&lt; -o $@ ç¬¬å…­ç‰ˆ Makefile12345678910111213141516# å®šä¹‰å˜é‡# å¯ä»¥å•ç‹¬ç›´è¡Œä¸€æ®µ make cleansrc = $(wildcard ./*.c)objs = $(patsubst %.c, %.o, $(src))target = app$(target):$(objs) $(CC) $(objs) -o $(target)%.o:%.c $(CC) -c $&lt; -o $@ # å› ä¸ºcleanæ²¡æœ‰ä¾èµ–å¯ä»¥è®¾ç½®ä¸€ä¸ªå°¾ç›®æ ‡.PHONY:clean clean: rm $(objs) -f","categories":[{"name":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨","slug":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨","permalink":"https://tutouwang.vercel.app/categories/LInux-%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"}],"tags":[{"name":"LInux","slug":"LInux","permalink":"https://tutouwang.vercel.app/tags/LInux/"}]},{"title":"sscanf/spintfå¦™ç”¨","slug":"æœ‰è¶£çš„çŸ¥è¯†/sscanf-spintfå¦™ç”¨","date":"2022-02-25T02:12:40.000Z","updated":"2022-04-03T10:26:52.077Z","comments":true,"path":"2022/02/25/æœ‰è¶£çš„çŸ¥è¯†/sscanf-spintfå¦™ç”¨/","link":"","permalink":"https://tutouwang.vercel.app/2022/02/25/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/sscanf-spintf%E5%A6%99%E7%94%A8/","excerpt":"","text":"leetcode-åŠ›æ‰£(537)123456789int a1,b1,a2,b2;sscanf(num1,&quot;%d+%di&quot;,&amp;a1,&amp;b1); sscanf(num2,&quot;%d+%di&quot;,&amp;a2,&amp;b2);string s;sscanf(s.c_str(), &quot;%d:%d&quot;, ); //è¯»å–å®éƒ¨å’Œè™šéƒ¨ char* ans=(char*)malloc(sizeof(char)*13); sprintf(ans,&quot;%d+%di&quot;,a1*a2-b1*b2,a1*b2+a2*b1);","categories":[{"name":"æœ‰è¶£çš„çŸ¥è¯†","slug":"æœ‰è¶£çš„çŸ¥è¯†","permalink":"https://tutouwang.vercel.app/categories/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[]},{"title":"gcc/g++åŒºåˆ«ä¸æµç¨‹","slug":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨/gcc-g-åŒºåˆ«ä¸æµç¨‹","date":"2022-02-20T12:50:35.000Z","updated":"2022-05-22T15:05:06.445Z","comments":true,"path":"2022/02/20/LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨/gcc-g-åŒºåˆ«ä¸æµç¨‹/","link":"","permalink":"https://tutouwang.vercel.app/2022/02/20/LInux-%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/gcc-g-%E5%8C%BA%E5%88%AB%E4%B8%8E%E6%B5%81%E7%A8%8B/","excerpt":"","text":"gcc&#x2F;G++gccå·¥ä½œæµç¨‹æºä»£ç (.h, .c, .cpp) - &gt; é¢„å¤„ç†å™¨ - &gt; é¢„å¤„ç†åæºä»£ç  (.i) - &gt; ç¼–è¯‘å™¨ - &gt; æ±‡ç¼–ä»£ç ï¼ˆ.s) - &gt; æ±‡ç¼–å™¨ - &gt; ç›®æ ‡ä»£ç ï¼ˆ.o) å¤„ç†æŒ‡ä»¤ gcc&#x2F;g++çš„åŒºåˆ« -D å®çš„åå­—","categories":[{"name":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨","slug":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨","permalink":"https://tutouwang.vercel.app/categories/LInux-%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"}],"tags":[{"name":"LInux","slug":"LInux","permalink":"https://tutouwang.vercel.app/tags/LInux/"}]},{"title":"äºŒç»´çŸ©é˜µæ˜ å°„æˆä¸€ç»´","slug":"æœ‰è¶£çš„çŸ¥è¯†/äºŒç»´çŸ©é˜µæ˜ å°„æˆä¸€ç»´","date":"2022-02-16T06:56:35.000Z","updated":"2022-05-23T14:24:24.358Z","comments":true,"path":"2022/02/16/æœ‰è¶£çš„çŸ¥è¯†/äºŒç»´çŸ©é˜µæ˜ å°„æˆä¸€ç»´/","link":"","permalink":"https://tutouwang.vercel.app/2022/02/16/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/%E4%BA%8C%E7%BB%B4%E7%9F%A9%E9%98%B5%E6%98%A0%E5%B0%84%E6%88%90%E4%B8%80%E7%BB%B4/","excerpt":"","text":"äºŒç»´æ•°ç»„æ˜ å°„æˆä¸€ç»´ - (0ï¼Œ0)å¼€å§‹ è®¾ä¸€ç»´æ•°ç»„ä¸‹æ ‡ä¸ºindex,äºŒç»´é•¿åº¦ä¸º$n*m$åˆ™ ä¸€ç»´æ•°ç»„è½¬ä¸ºäºŒç»´æ•°ç»„ 12row = index / m // è¡Œcol = index % m // åˆ— äºŒç»´æ•°ç»„è½¬æ¢ä¸ºä¸€ç»´æ•°ç»„ 1index = row * m + col","categories":[{"name":"æœ‰è¶£çš„çŸ¥è¯†","slug":"æœ‰è¶£çš„çŸ¥è¯†","permalink":"https://tutouwang.vercel.app/categories/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[]},{"title":"å¹¶æŸ¥é›† â€” 1","slug":"åŸºç¡€æ•°æ®ç»“æ„/å¹¶æŸ¥é›†_1","date":"2022-01-23T08:21:07.000Z","updated":"2022-05-22T15:05:06.443Z","comments":true,"path":"2022/01/23/åŸºç¡€æ•°æ®ç»“æ„/å¹¶æŸ¥é›†_1/","link":"","permalink":"https://tutouwang.vercel.app/2022/01/23/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%B9%B6%E6%9F%A5%E9%9B%86_1/","excerpt":"","text":"å¹¶æŸ¥é›†è¿é€šæ€§é—®é¢˜ï¼š åŸºäºæŸ“è‰²çš„æ€æƒ³ï¼Œä¸€å¼€å§‹æ‰€æœ‰ç‚¹çš„é¢œè‰²ä¸åŒ è¿æ¥ä¸¤ä¸ªç‚¹çš„æ“ä½œï¼Œå¯ä»¥çœ‹æˆå°†ä¸€ç§é¢œè‰²çš„ç‚¹æŸ“æˆå¦ä¸€ç§é¢œè‰² å¦‚æœä¸¤ä¸ªç‚¹é¢œè‰²ä¸€æ ·ï¼Œè¯æ˜è”é€šï¼Œå¦åˆ™ä¸è”é€š è¿™ç§æ–¹æ³•å«åšå¹¶æŸ¥é›†çš„:ã€Quick-Findç®—æ³•ã€‘ Quick-Find è¿‘ä¼¼$ O(1) $æŸ¥è¯¢ Quick-Find é»˜è®¤çš„åšæ³•å§å‰ä¸€ä¸ªæ•°å­—çš„é¢œè‰²æ”¹æˆåä¸€ä¸ªé¢œè‰²(å¤§ç™½è¯ï¼šå°±æ˜¯è®©4æ¥åˆ°3åé¢ï¼Œè®©3ä½œä¸ºæ ¹èŠ‚ç‚¹) è¿™é‡Œè¦è¯´æ˜ä¸€ä¸‹ ï¼š æ— è®ºä»¥ 4 è¿˜æ˜¯ä»¥ 3 ä½œä¸ºæ ¹èŠ‚ç‚¹éƒ½æ˜¯å¯ä»¥çš„è¿™ä¸ªä¸é‡è¦ - èŠ‚ç‚¹çš„é“¾æ¥å…¶å®æ˜¯ä¸¤ä¸ªé›†åˆçš„é“¾æ¥ 4 å’Œ 8 é“¾æ¥æ˜¯ç›´æ¥å§4æ¥åˆ°8ä¸‹é¢ä¹ˆï¼Ÿ(å…¶å®ä¸å¯¹) ç›¸å½“äº 4 å’Œ 3å·²ç»å±äºä¸€ä¸ªé›†åˆé‚£ä¹ˆä½ è¦æ”¹4å½“ç„¶3ä¹Ÿè¦æ”¹å˜æ‰€ä»¥3å’Œ4çš„ä¸‹æ ‡éƒ½è¦æ”¹æˆ8 Quick-Find æ—¶é—´å¤æ‚åº¦åˆ†æ è”é€šåˆ¤æ–­ï¼šè¿‘ä¼¼$O(1)$ åˆå¹¶æ“ä½œï¼š$O(n)$ Quick-Union Quick-Unionuç®—æ³•æ˜¯é€‰å…ˆæ‰¾æ ¹èŠ‚ç‚¹åˆ¤æ–­æ˜¯å¦å¤„åœ¨åŒä¸€æ ¹èŠ‚ç‚¹çŒœèƒ½åœ¨åˆå¹¶ Quick-Union æ€»ç»“é—®é¢˜æ€è€ƒï¼š(éœ€è¦è‡ªå·±æ‰‹åŠ¨æ¨¡æ‹Ÿä¸€ä¸‹) å¦‚æœä¸çœ‹ä¸Šè¿° Quick-Union æ­£å¸¸åˆå¹¶æƒ…å†µåœ¨æç«¯æƒ…å†µä¸‹ä¼šé€€åŒ–æˆä¸€æ¡é“¾ - è¿™å°±æ˜¯ä¸€ä¸ª$O(n)$æ“ä½œ å°†èŠ‚ç‚¹æ•°é‡å¤šçš„æ¥åˆ°å°‘çš„æ ‘ä¸Šé¢ï¼Œå¯¼è‡´äº†é€€åŒ– å°†æ ‘é«˜æ·±åº¦çš„æ¥åˆ°æµ…çš„ä¸Šé¢ï¼Œå¯¼è‡´é€€åŒ– é—®é¢˜æ€è€ƒï¼šè‹¥è¦æ”¹è¿›ï¼Œæ˜¯æŒ‰ç…§èŠ‚ç‚¹æ•°é‡è¿˜æ˜¯èŠ‚ç‚¹é«˜åº¦åˆå¹¶ï¼Ÿ å¯ä»¥å¾—åˆ°ï¼š æ ‘é«˜åˆå¹¶åˆ°æ ‘çŸ®çš„ä¸Šé¢(æ ‘é«˜ä¸å˜) å¦‚æœä¸€æ£µæ ‘å¾ˆçŸ®ä½†æ˜¯åŒ…å«äº†å¾ˆå¤šèŠ‚ç‚¹å’Œä¸€é¢—é«˜æ ‘æœ‰è¾ƒå°‘èŠ‚ç‚¹åœ¨è¿™ç§æƒ…å†µä¸‹å°±éœ€è¦èŠ‚ç‚¹æ•°é‡ä¸ºåˆå¹¶æ¡ä»¶ è°çš„èŠ‚ç‚¹æ•°é‡å¤šå°±å¾€é‚£ä¸ªæ ‘ä¸Šåˆå¹¶ å¹³å‡æŸ¥æ‰¾æ¬¡æ•°æ¯ä¸ªèŠ‚ç‚¹æ·±åº¦ç›¸åŠ ä¹‹å’Œé™¤æ€»èŠ‚ç‚¹æ•°é‡ æŒ‰ç§©åˆå¹¶ä¸‹å›¾ ä½†æ˜¯è¦æŠŠ0æ¥åˆ°3ä¸‹é¢å°±è·¯å¾„å‹ç¼© + æŒ‰ç§©åˆå¹¶äº†å°±å¼€å¤´æ‰€çœ‹åˆ°çš„æ ·å­ å¹¶æŸ¥é›†å››ç§ç®—æ³• ä»£ç è§ å¹¶æŸ¥é›†2","categories":[{"name":"åŸºç¡€æ•°æ®ç»“æ„","slug":"åŸºç¡€æ•°æ®ç»“æ„","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"tags":[]},{"title":"å¹¶æŸ¥é›† â€” 2","slug":"åŸºç¡€æ•°æ®ç»“æ„/å¹¶æŸ¥é›†_2","date":"2022-01-23T08:21:07.000Z","updated":"2022-05-22T15:05:06.441Z","comments":true,"path":"2022/01/23/åŸºç¡€æ•°æ®ç»“æ„/å¹¶æŸ¥é›†_2/","link":"","permalink":"https://tutouwang.vercel.app/2022/01/23/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%B9%B6%E6%9F%A5%E9%9B%86_2/","excerpt":"","text":"[TOC] å¹¶æŸ¥é›†(Union Find)å¹¶æŸ¥é›†ä¸»è¦è®²çš„å°±æ˜¯è¿é€šæ€§é—®é¢˜ æ¯”å¦‚è¯´ç°åœ¨å’±ä»¬è¿™ä¸ªæ•™å­¦æ¥¼ï¼Œè¢«å¤§æ°´æ·¹äº†æ¯”å¦‚è¯´ä¸€æ¥¼å’Œå…¶å®ƒæ¥¼å±‚éƒ½è¢«å¤§æ°´æ·¹äº†ï¼Œå°±å”¯ç‹¬å’±ä»¬æ•™å®¤æ²¡æœ‰ï¼Œå¯ä»¥è¯´æ˜ä»€ä¹ˆï¼Œå’±ä»¬ç°åœ¨å°±æ˜¯ä¸ä¸–éš”ç»äº†ï¼Œä¹‹åå‘¢å°±è¢«å¤§æ°´æ·¹æ²¡çš„ä¸ªä¸ªæ¥¼å±‚æ°´æ˜¯ä¸æ˜¯éƒ½å¯ä»¥æ¥å›èµ°ï¼Œæ¯”å¦‚æµåˆ°äº†å’±ä»¬æ•™å®¤æ°å·§å…³ä¸Šäº†ä»¬ï¼Œä¹‹åæ°´å°±æ²¡æµè¿›æ¥ï¼Œè¯´æ˜ä»€ä¹ˆå’±ä»¬ç°åœ¨æ˜¯ä¸è¿™ä¸ªæ•™å­¦æ¥¼çš„ä¸€é—´æ•™å®¤éƒ½ä¸è¿å›¾ï¼Œå¦‚æœè¯´å’±ä»¬ä¸éš”å£æ˜¯è¿é€šçš„ï¼Œè€Œä¸”å’±ä»¬éš”å£è¿˜è¢«å¤§æ°´æ·¹æ²¡äº†ï¼Œä½ è¯´å’±ä»¬è¿™å±‹æ˜¯ä¸æ˜¯ä¹Ÿè¢«æ·¹æ²¡äº†ã€‚ è‹¥æŸä¸ªå®¶æ—äººå‘˜è¿‡äºåºå¤§ï¼Œè¦åˆ¤æ–­ä¸¤ä¸ªæ˜¯å¦æ˜¯äº²æˆšï¼Œç¡®å®ä¸å®¹æ˜“ï¼Œç»™å‡ºæŸä¸ªäº²æˆšå…³ç³»å›¾ï¼Œæ±‚ä»»æ„ç»™å‡ºçš„ä¸¤ä¸ªäººæ˜¯å¦å…·æœ‰äº²æˆšå…³ç³»ã€‚ æ ‘å½¢ç»“æ„åœ¨æ˜¥ç§‹æˆ˜å›½æ—¶æœŸæœ‰å„ç§æ€æƒ³å­¦æœ¯æµæ´¾çš„æˆå°±ï¼Œæœ‰ å­”å­ å¢¨å­ è€å­ è¿˜æœ‰è°æ¯”å¦‚ éŸ©éå­ç­‰ç­‰ ä»æˆ‘ä»¬å½“å‰å›¾ä¸­æˆ‘é—¨å¯ä»¥çœ‹å‡ºæˆ‘ä»¬æœ‰å‡ ä¸ªè¿åŒå— æœ‰3ä¸ªå¯¹æŠŠ æ¯”å¦‚è¯´æœ‰ä¸€å¤© 2 å· è·Ÿ 4å· æ‰“èµ·æ¥æ¥äº†è¯´ä½ å†™çš„ä¸œè¥¿ä¸å¦‚æˆ‘ï¼Œï¼ˆè¿™é‡Œæœ‰ä¸ªè§„å®šå°±æ˜¯è¯´å¾’å¼Ÿä¸€å®šä¸å¦‚å¸ˆå‚…ï¼‰å®Œäº†4å·æœ¬èº«å°±æ˜¯1å·çš„å¾’å¼Ÿè‚¯å®šä¸å¦‚2å· å½“ç„¶ 4å·æœ‰å¸ˆå‚… ä¹‹å4å·æ‰¾åˆ°è‡ªå·±çš„å¸ˆå‚… 1 å· è¯´ä»Šå¤©æˆ‘è¢«äººç¾è¾±äº†å¯¹å§é‚£å½“å¸ˆå‚…çš„è‚¯å®šä¸èƒ½åšäº‹ä¸ç®¡å¯¹å§ ä¹‹åä¸€çœ‹ è¯´è¿™2å·ä¹Ÿè€å­”çš„å¾’å¼Ÿä¸€çœ‹è¿™ä¸æ˜¯å°±æ˜¯ä¸€ä¸ªå¸ˆå‚…ä¹ˆé‚£å°±åˆ«æŠ¥ä»‡äº† è®© 4 å· ç»™ 2 å·è®¤ä¸ªé”™ å°±æ˜¯ä¸‹æ¬¡çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥æ€ä¹ˆçœ‹ å°±æ˜¯å…ˆçŸ¥é“è‡ªå·±çš„å¸ˆå‚…çš„å¸ˆå‚…æ˜¯è°å¯¹å§ åœ¨çœ‹ä½ è¦æ‰¾çš„äººçš„å¸ˆå‚…çš„å¸ˆå‚…ï¼ˆè¿™å¸ˆå‚…å¯èƒ½è¿˜æœ‰å¸ˆå‚…æ‰€æœ‰è¦æ‰¾åˆ°æœ€åä¸€ä¸ªå¸ˆå‚…ï¼‰æ˜¯è° å¦‚æœä»–ä»¬æœ€åçš„å¸ˆå‚…éƒ½æ˜¯åŒä¸€ä¸ªäººé‚£ä»–ä»¬æ˜¯ä¸æ˜¯å°±æ˜¯ä¸€å®¶äººå±äºåŒä¸€ä¸ªå¸ˆå‚… ï¼ˆå¯ä»¥è¯´æ˜ä»–ä»¬åœ¨é€šä¸€è¯¾æ ‘ä¸­è¯´æ˜å®ƒä»¬ä¿©ä¸ªè¿åŒï¼‰ å…¶å®æˆ‘ä»¬åœ¨è¿åŒæ€§ä¸­ä¸åœ¨ä¹è¿æ¥æˆä»€ä¹ˆæ ·å­è°æ˜¯è°çš„å¾’å¼Ÿæˆ‘åªåœ¨ä¹ä»–ä»¬èƒ½ä¸èƒ½è¿åŒæœ€åçš„ç¥–å¸ˆï¼Œç¥–å¸ˆçˆ·æ˜¯ä¸æ˜¯åŒä¸€ä¸ªäºº è¿™ä¸ªä¸¤ä¸ªç‚¹èƒ½ä¸èƒ½è¿åŒ Ps æ¯”å¦‚ ï¼ˆ1ï¼Œ 2ï¼‰ ä¸ºä¸€ä¸ªé›†åˆ æ•°ç»„è¡¨ç¤º ï¼ˆ1ï¼Œ4ï¼‰ ï¼ˆ4ï¼Œ7ï¼‰ è¿™é‡Œä»£è¡¨ä¸¤ä¸ªé›†åˆé“¾æ¥ï¼Œè¿™é‡Œé“¾æ¥çš„æ—¶å€™ä½ è¯´æ˜¯ 1 å½“ä½œæ ¹èŠ‚ç‚¹è¿˜æ˜¯ 4 å½“ä½œæ ¹èŠ‚ç‚¹ 1 å…¶å®æ˜¯æ— æ‰€è°“çš„ã€‚è¿™é‡Œå‡å®š 4ä¸ºæ ¹èŠ‚ç‚¹æˆ‘ä»¬å¯ä»¥å¾—åˆ° å›¾ è¿™ä¸¤ä¸ªç‚¹çš„è¿åŒä¸ä»…ä»…æ˜¯ä¸¤ä¸ªç‚¹çš„è¿åŒè€Œæ˜¯ä¸¤ä¸ªé›†åˆçš„è¿é€šï¼ˆå…¶å®ä»–ä»¬éƒ½å±ä¸€ä¸ªä¸ªä½“ï¼‰ æ¯”å¦‚ä½ çš„çˆ¸å’Œä½ å¦ˆæ˜¯ä¸¤ä¸ªå§“å¯¹å§ ä»–ä»¬åœ¨æ²¡ç»“å©šä¹‹å‰æ˜¯ä»€ä¹ˆï¼Œä¸¤ä¸ªå®¶çš„äººå°±å¯ä»¥æ¯”ä½œä»€ä¹ˆä¸¤ä¸ªé›†åˆï¼Œä¹‹åä»–ä»¬ç»“å©šäº† æ˜¯åªæœ‰ä»–ä¿©æ˜¯ä¸€å®¶äººä¹ˆ ä¸æ˜¯å§ æ˜¯ä¸¤å®¶äººï¼Œè¿™å°±å¥½æ¯”æˆ‘ä»¬ä¸¤ä¸ªç‚¹çš„é“¾æ¥ã€‚ æˆ‘ä»¬å¯ä»¥ç”¨æ•°ç»„è¡¨ç¤º åˆå§‹åŒ–æŠŠæ¯ä¸ªç‚¹æ‰€åœ¨çš„é›†åˆåˆå§‹åŒ–ä¸ºå…¶è‡ªèº«ã€‚ åˆå§‹åŒ–åŠ ç²— ä¸ºä¸‹æ ‡ æˆ‘ä»¬å¯ä»¥ç”¨ç”¨å®ƒè‡ªèº«å»åˆå§‹åŒ–ï¼ˆä¹Ÿå¯ä»¥ç”¨ -1 ä½†æ˜¯åæœŸåœ¨ä¼˜åŒ–çš„æ—¶å€™ä¼šæœ‰ç‚¹éº»çƒ¦ï¼‰ 0 1 2 3 0 1 2 3 4 5 6 7 4 5 6 7 0 1 2 3 0 4 2 3 4 5 6 7 4 5 6 4 ç«èµ›é˜¶æ®µæˆ‘ä»¬ä¼šç”¨åˆ°çš„ç®—æ³• find union123456789101112131415161718// æœ´ç´ int find_root(int x, int parent[]) &#123; while (parent[x] != x) &#123; x = parent[x]; &#125; return x;&#125;// æŸ¥æ‰¾--ä¼˜åŒ–int find_root(int x, int parent[]) &#123; if (parent[x] != x) &#123; parent[x] = find_root(parent[x], parent); &#125; return parent[x]; // return x == parent[x] ? x : parent[x] = find_root(parent[x], parent); // return parent[x] = (x == parent[x] ? x : find_root(parent[x], parent));&#125; 123456789101112131415161718192021// åˆå¹¶void merge(int x, int y, int parent[], int height[]) &#123; int x_root = find_root(x, parent); int y_root = find_root(y, parent); if (x_root != y_root) &#123; // parent[x_root] = y_root; // åŸå…ˆä»£ç  // å®‰ç§©åˆå¹¶ if (height[x_root] == height[y_root]) &#123; parent[x_root] = y_root; // ç›¸ç­‰è®©yçš„æ ‘é«˜ +1 height[y_root]++; &#125; else if (height[x_root] &gt; height[y_root]) &#123; parent[y_root] = x_root; &#125; else &#123; parent[x_root] = y_root; &#125; return ; &#125; mark = 1; return ;&#125; è·¯å¾„å‹ç¼©â€“æŒ‰ç§©åˆå¹¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172#include&lt;iostream&gt;using namespace std;const int MAX_N = 1e4;int mark = 0;// åˆå§‹åŒ–void inital(int n, int parent[], int height[]) &#123; for (int i = 1; i &lt;= n; i++) &#123; parent[i] = i; height[i] = 0; &#125; return ;&#125;// è·¯å¾„å‹ç¼©int find_root(int x, int parent[]) &#123; if (parent[x] != x) &#123; parent[x] = find_root(parent[x], parent); &#125; return parent[x]; // &#125;// è·¯å¾„å‹ç¼©--éé€’å½’ç‰ˆint find_root1(int x, int parent[]) &#123; int k = x; while (parent[k] != k) &#123; k = parent[k]; &#125; while (x != k) &#123; int temp = parent[x]; parent[x] = k; x = temp; &#125; return k;&#125;void merge(int x, int y, int parent[], int height[]) &#123; int x_root = find_root(x, parent); int y_root = find_root(y, parent); if (x_root != y_root) &#123; // parent[x_root] = y_root; // åŸå…ˆä»£ç  // æŒ‰ç§©åˆå¹¶ if (height[x_root] == height[y_root]) &#123; parent[x_root] = y_root; // ç›¸ç­‰è®©yçš„æ ‘é«˜ +1 height[y_root]++; &#125; else if (height[x_root] &gt; height[y_root]) &#123; parent[y_root] = x_root; &#125; else &#123; parent[x_root] = y_root; &#125; return ; &#125; mark = 1; return ;&#125;int main() &#123; int n, m, parent[MAX_N + 10], height[MAX_N + 10]; cin &gt;&gt; n &gt;&gt; m; inital(m, parent, height); for (int i = 0; i &lt; n; i++) &#123; int x, y; cin &gt;&gt; x &gt;&gt; y; merge(x, y, parent, height); &#125; if (mark) cout &lt;&lt; &quot;æœ‰ç¯ï¼&quot; &lt;&lt; endl; else cout &lt;&lt; &quot;æ— ç¯ï¼&quot; &lt;&lt; endl; return 0;&#125; è·¯å¾„å‹ç¼©æ˜¯æ€ä¹ˆå®ç°çš„ æ£€æµ‹æ˜¯å¦å­˜åœ¨ç¯æˆ‘ä»¬å¦‚ä½•å»æ£€æµ‹ä¸€ä¸ªå›¾æ˜¯å¦å­˜åœ¨ç¯ç¯è·¯ å¦‚ä¸‹ æˆ‘ä»¬æœ‰ 0ï¸âƒ£ 1ï¸âƒ£ 2ï¸âƒ£ 3ï¸âƒ£ 4ï¸âƒ£ 5ï¸âƒ£ æŠŠæ¯ä¸ªç‚¹çœ‹æˆå•ä¸ªé›†åˆæ¯”å¦‚æˆ‘ä»¬ç›¸è¿ï¼ˆ0 ï¼Œ1ï¼‰ ï¼ˆ1ï¼Œ2ï¼‰ ï¼ˆ1ï¼Œ3ï¼‰ï¼ˆ2ï¼Œ4ï¼‰ï¼ˆ2ï¼Œ3ï¼‰ æˆ‘ä»¬åœ¨åˆå¹¶æ—¶å€™éœ€è¦å…ˆæŸ¥è¯¢ä¸€ä¸‹ä»–ä»¬æ˜¯å¦å±äºåŒä¸€é›†åˆï¼Œå¦‚æœä¸å±äºåŒä¸€é›†åˆæˆ‘æ‰èƒ½åˆå¹¶ï¼Œåä¹‹è¦æ˜¯å®ƒä»¬åœ¨åˆå¹¶å°±ä¼šæ„æˆå›è·¯ã€‚ å¦‚æœä¸è€ƒè™‘é“¾æ¥çº¢è‰²ä¸¤ç‚¹ï¼Œåˆå¹¶é›†åˆä¹‹åæ˜¯{0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4} æˆ‘ä»¬å¯ä»¥å¾—åˆ°ç«™åœ¨ä»»æ„ç‚¹åˆ°è¾¾å¦ä¸€ä»»æ„ç‚¹ã€‚ä¸æ„æˆç¯ å¦‚æœè¯´æˆ‘ä»¬åœ¨å·²è¿æ¥ä¸­ä»»æ„é€‰æ‹©ä¸¤ä¸ªå»é“¾æ¥ä»–ä¸€å®šä¼šæˆç¯å¯¹å§ã€‚ğŸ”¶ æ¯”å¦‚çº¢è‰²ä¸¤ç‚¹é“¾æ¥ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° 1ï¼Œ 2ï¼Œ 3 ç‚¹å½¢æˆäº†ç¯ã€‚ å½¢æˆç¯è·¯ æˆ‘ä»¬æ€ä¹ˆçŸ¥é“ä»–æ˜¯æˆç¯äº†å‘¢æˆ‘ä»¬æŠŠ 1 å½“åšæ ¹ç»“ç‚¹ ï¼Œ0ï¼Œ 2ï¼Œ4ï¼Œ3 éƒ½å±äº 1 çš„å­©å­æˆ–è€…æ˜¯å­™å­ å½“ä½ å»é“¾æ¥ ï¼ˆ2ï¼Œ 3ï¼‰æ—¶å€™ä½ ä¼šå‘ç°ä»–ä»¬éƒ½å±äº 1 ä¸‹å°±å¦‚æˆ‘ä»¬åˆšæ‰æ‰€è¯´ ğŸ”¶å› ä¸ºæˆ‘ä»¬çŸ¥é“ä¸¤ä¸ªé›†åˆåœ¨åˆå¹¶çš„æ—¶å€™ä¸€å®šä¼šå…ˆå»æ‰¾æ ¹èŠ‚ç‚¹ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#include&lt;iostream&gt;using namespace std;const int MAX_N = 1e4;int mark = 0;int parent[MAX_N + 10];// åˆå§‹åŒ–void inital(int n, int parent[]) &#123; for (int i = 1; i &lt;= n; i++) &#123; parent[i] = i; &#125; return ;&#125;int find_root(int x, int parent[]) &#123; if (parent[x] != x) &#123; parent[x] = find_root(parent[x], parent); &#125; return parent[x];&#125;void merge(int x, int y, int parent[]) &#123; int x_root = find_root(x, parent); int y_root = find_root(y, parent); if (x_root != y_root) &#123; parent[x_root] = y_root; return ; &#125; mark = 1; return ;&#125;int main() &#123; int n, m; // ç»„æ•° æœ€å¤§å€¼ cin &gt;&gt; n &gt;&gt; m; inital(m, parent); for (int i = 0; i &lt; n; i++) &#123; int x, y; cin &gt;&gt; x &gt;&gt; y; merge(x, y, parent); &#125; if (mark) cout &lt;&lt; &quot;æœ‰ç¯ï¼&quot; &lt;&lt; endl; else cout &lt;&lt; &quot;æ— ç¯ï¼&quot; &lt;&lt; endl; return 0;&#125; å¹¶æŸ¥é›†â€“æ•°æ®ç»“æ„å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#include &lt;stdlib.h&gt;#include &lt;stdio.h&gt;struct UnionSet &#123; int *parent;&#125;;// åˆå§‹åŒ–UnionSet *init(int n) &#123; UnionSet *U = (UnionSet *)malloc(sizeof(UnionSet)); U-&gt;parent = (int *)malloc(sizeof(int) * (n + 1)); for (int i = 1; i &lt;= n; i++) &#123; U-&gt;parent[i] = i; &#125; return U;&#125;int find_root(UnionSet *U, int x) &#123; if (U-&gt;parent[x] != x) &#123; return find_root(U, U-&gt;parent[x]); &#125; return x;&#125;void merge(UnionSet *U, int x, int y) &#123; int x_root = find_root(U, x); int y_root = find_root(U, y); if (x_root != y_root) &#123; U-&gt;parent[x_root] = y_root; &#125; return ;&#125;int main() &#123; int n, m; scanf(&quot;%d%d&quot;, &amp;n, &amp;m); UnionSet *U = init(n); // è¿›è¡Œ M æ¬¡æ“ä½œ for (int i = 1; i &lt;= m; i++) &#123; int a, b, c; scanf(&quot;%d%d%d&quot;, &amp;a, &amp;b, &amp;c); switch(a) &#123; case 1: merge(U, b, c); break; // åˆå¹¶æ“ä½œ case 2: printf(&quot;%s\\n&quot;, find_root(U, b) == find_root(U, c) ? &quot;Yes&quot; : &quot;No&quot;); &#125; &#125; return 0;&#125; ä¾‹é¢˜â€“é¢˜è§£æµ·è´¼ #71 æœ‹å‹åœˆ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465/************************************************************************* &gt; File Name: æµ·è´¼_#71å¹¶æŸ¥é›†_è·¯å¾„å‹ç¼©ä¼˜åŒ–.cpp &gt; Author: &gt; Mail: &gt; Created Time: 2021å¹´01æœˆ18æ—¥ æ˜ŸæœŸä¸€ 15æ—¶33åˆ†00ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;cstdio&gt;using namespace std;const int MAX_N = 1e4;// åˆå§‹åŒ–void initialization(int n, int parent[]) &#123; for (int i = 1; i &lt;= n; i++) &#123; parent[i] = i; &#125; return ;&#125;// è·¯å¾„å‹ç¼©int find_root(int x, int parent[]) &#123; if (parent[x] != x) &#123; parent[x] = find_root(parent[x], parent); &#125; return parent[x];&#125;// æœ´ç´ ç®—æ³•int find_root1(int x, int parent[]) &#123; while (parent[x] != x) &#123; x = parent[x]; &#125; return x;&#125;void merge(int x, int y, int parent[]) &#123; int x_root = find_root(x, parent); int y_root = find_root(y, parent); if (x_root != y_root) &#123; parent[x_root] = y_root; &#125; return ;&#125;int main() &#123; int n, m, parent[MAX_N + 10]; cin &gt;&gt; n &gt;&gt; m; initialization(n, parent); for (int i = 0; i &lt; m; i++) &#123; int a, b, c; scanf(&quot;%d%d%d&quot;, &amp;a, &amp;b, &amp;c); if (a == 1) &#123; // æ·»åŠ  merge(b, c, parent); &#125; else &#123; // æŸ¥çœ‹ if (find_root(b, parent) - find_root(c, parent)) &#123; printf(&quot;No\\n&quot;); &#125; else printf(&quot;Yes\\n&quot;); &#125; &#125; return 0;&#125; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576/************************************************************************* &gt; File Name: æµ·è´¼_#71å¹¶æŸ¥é›†_è·¯å¾„å‹ç¼©_å®‰ç§©åˆå¹¶_ä¼˜åŒ–.cpp &gt; Author: &gt; Mail: &gt; Created Time: 2021å¹´01æœˆ18æ—¥ æ˜ŸæœŸä¸€ 21æ—¶33åˆ†00ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;cstdio&gt;using namespace std;const int MAX_N = 1e4;// åˆå§‹åŒ– void initialization(int n, int parent[], int height[]) &#123; for (int i = 1; i &lt;= n; i++) &#123; parent[i] = i; // å¼€å§‹æ ‘é«˜ä¸º 0 height[i] = 0; &#125; return ;&#125;// è·¯å¾„å‹ç¼©int find_root(int x, int parent[]) &#123; if (parent[x] != x) &#123; parent[x] = find_root(parent[x], parent); &#125; return parent[x];&#125;// æœ´ç´ ç®—æ³•int find_root1(int x, int parent[]) &#123; while (parent[x] != x) &#123; x = parent[x]; &#125; return x;&#125;void merge(int x, int y, int parent[], int height[]) &#123; int x_root = find_root(x, parent); int y_root = find_root(y, parent); if (x_root != y_root) &#123; if (height[x_root] == height[y_root]) &#123; parent[x_root] = y_root; // ç›¸ç­‰è®©yçš„æ ‘é«˜ +1 height[y_root]++; &#125; else if (height[x_root] &gt; height[y_root]) &#123; parent[y_root] = x_root; &#125; else &#123; parent[x_root] = y_root; &#125; &#125; return ;&#125;int main() &#123; int n, m, parent[MAX_N + 10], height[MAX_N + 10]; cin &gt;&gt; n &gt;&gt; m; initialization(n, parent, height); for (int i = 0; i &lt; m; i++) &#123; int a, b, c; scanf(&quot;%d%d%d&quot;, &amp;a, &amp;b, &amp;c); if (a == 1) &#123; // æ·»åŠ  merge(b, c, parent, height); &#125; else &#123; // æŸ¥çœ‹ if (find_root(b, parent) - find_root(c, parent)) &#123; printf(&quot;No\\n&quot;); &#125; else printf(&quot;Yes\\n&quot;); &#125; &#125; return 0;&#125; æ´›è°· P1551 äº²æˆš123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#include&lt;iostream&gt;using namespace std;const int MAX_N = 1e4;int arr[MAX_N];void initial(int n) &#123; for (int i = 1; i &lt;= n; i++) &#123; arr[i] = i; &#125;&#125;int find(int x) &#123; if (arr[x] != x) &#123; x = find(arr[x]); &#125; return arr[x];&#125;void merge(int x, int y) &#123; int x_root = find(x); int y_root = find(y); if (x_root != y_root) &#123; arr[x_root] = y_root; &#125; return ;&#125;int main() &#123; int n, m, p; cin &gt;&gt; n &gt;&gt; m &gt;&gt; p; initial(n); while (m--) &#123; int mi, mj; cin &gt;&gt; mi &gt;&gt; mj; merge(mi, mj); &#125; while (p--) &#123; int mi, mj; cin &gt;&gt; mi &gt;&gt; mj; if (find(mi) == find(mj)) &#123; cout &lt;&lt; &quot;Yes&quot; &lt;&lt; endl; &#125; else &#123; cout &lt;&lt; &quot;No&quot; &lt;&lt; endl; &#125; &#125; return 0;&#125;","categories":[{"name":"åŸºç¡€æ•°æ®ç»“æ„","slug":"åŸºç¡€æ•°æ®ç»“æ„","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"tags":[]},{"title":"ç”±æ•°æ®èŒƒå›´åæ¨ç®—æ³•å¤æ‚åº¦ä»¥åŠç®—æ³•å†…å®¹","slug":"æœ‰è¶£çš„çŸ¥è¯†/ç”±æ•°æ®èŒƒå›´åæ¨ç®—æ³•å¤æ‚åº¦ä»¥åŠç®—æ³•å†…å®¹","date":"2022-01-22T07:51:38.000Z","updated":"2022-01-22T07:53:23.211Z","comments":true,"path":"2022/01/22/æœ‰è¶£çš„çŸ¥è¯†/ç”±æ•°æ®èŒƒå›´åæ¨ç®—æ³•å¤æ‚åº¦ä»¥åŠç®—æ³•å†…å®¹/","link":"","permalink":"https://tutouwang.vercel.app/2022/01/22/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/%E7%94%B1%E6%95%B0%E6%8D%AE%E8%8C%83%E5%9B%B4%E5%8F%8D%E6%8E%A8%E7%AE%97%E6%B3%95%E5%A4%8D%E6%9D%82%E5%BA%A6%E4%BB%A5%E5%8F%8A%E7%AE%97%E6%B3%95%E5%86%85%E5%AE%B9/","excerpt":"","text":"ä¸€èˆ¬ACMæˆ–è€…ç¬”è¯•é¢˜çš„æ—¶é—´é™åˆ¶æ˜¯1ç§’æˆ–2ç§’ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒC++ä»£ç ä¸­çš„æ“ä½œæ¬¡æ•°æ§åˆ¶åœ¨ 107âˆ¼108107âˆ¼108 ä¸ºæœ€ä½³ã€‚ ä¸‹é¢ç»™å‡ºåœ¨ä¸åŒæ•°æ®èŒƒå›´ä¸‹ï¼Œä»£ç çš„æ—¶é—´å¤æ‚åº¦å’Œç®—æ³•è¯¥å¦‚ä½•é€‰æ‹©ï¼š nâ‰¤30nâ‰¤30, æŒ‡æ•°çº§åˆ«, dfs+å‰ªæï¼ŒçŠ¶æ€å‹ç¼©dp nâ‰¤100nâ‰¤100 &#x3D;&gt; O(n3)O(n3)ï¼Œfloydï¼Œdpï¼Œé«˜æ–¯æ¶ˆå…ƒ nâ‰¤1000nâ‰¤1000 &#x3D;&gt; O(n2)O(n2)ï¼ŒO(n2logn)O(n2logn)ï¼Œdpï¼ŒäºŒåˆ†ï¼Œæœ´ç´ ç‰ˆDijkstraã€æœ´ç´ ç‰ˆPrimã€Bellman-Ford nâ‰¤10000nâ‰¤10000 &#x3D;&gt; O(nâˆ—nâˆš)O(nâˆ—n)ï¼Œå—çŠ¶é“¾è¡¨ã€åˆ†å—ã€è«é˜Ÿ nâ‰¤100000nâ‰¤100000 &#x3D;&gt; O(nlogn)O(nlogn) &#x3D;&gt; å„ç§sortï¼Œçº¿æ®µæ ‘ã€æ ‘çŠ¶æ•°ç»„ã€set&#x2F;mapã€heapã€æ‹“æ‰‘æ’åºã€dijkstra+heapã€prim+heapã€Kruskalã€spfaã€æ±‚å‡¸åŒ…ã€æ±‚åŠå¹³é¢äº¤ã€äºŒåˆ†ã€CDQåˆ†æ²»ã€æ•´ä½“äºŒåˆ†ã€åç¼€æ•°ç»„ã€æ ‘é“¾å‰–åˆ†ã€åŠ¨æ€æ ‘ nâ‰¤1000000nâ‰¤1000000 &#x3D;&gt; O(n)O(n), ä»¥åŠå¸¸æ•°è¾ƒå°çš„ O(nlogn)O(nlogn) ç®—æ³• &#x3D;&gt; å•è°ƒé˜Ÿåˆ—ã€ hashã€åŒæŒ‡é’ˆæ‰«æã€å¹¶æŸ¥é›†ï¼Œkmpã€ACè‡ªåŠ¨æœºï¼Œå¸¸æ•°æ¯”è¾ƒå°çš„ O(nlogn)O(nlogn) çš„åšæ³•ï¼šsortã€æ ‘çŠ¶æ•°ç»„ã€heapã€dijkstraã€spfa nâ‰¤10000000nâ‰¤10000000 &#x3D;&gt; O(n)O(n)ï¼ŒåŒæŒ‡é’ˆæ‰«æã€kmpã€ACè‡ªåŠ¨æœºã€çº¿æ€§ç­›ç´ æ•°nâ‰¤109nâ‰¤109 &#x3D;&gt; O(nâˆš)O(n)ï¼Œåˆ¤æ–­è´¨æ•° nâ‰¤1018nâ‰¤1018 &#x3D;&gt; O(logn)O(logn)ï¼Œæœ€å¤§å…¬çº¦æ•°ï¼Œå¿«é€Ÿå¹‚ï¼Œæ•°ä½DP nâ‰¤101000nâ‰¤101000 &#x3D;&gt; O((logn)2)O((logn)2)ï¼Œé«˜ç²¾åº¦åŠ å‡ä¹˜é™¤ nâ‰¤10100000nâ‰¤10100000 &#x3D;&gt; O(logkÃ—loglogk)ï¼Œkè¡¨ç¤ºä½æ•°O(logkÃ—loglogk)ï¼Œkè¡¨ç¤ºä½æ•°ï¼Œé«˜ç²¾åº¦åŠ å‡ã€FFT&#x2F;NTT æ¥æºï¼šAcWing","categories":[{"name":"æœ‰è¶£çš„çŸ¥è¯†","slug":"æœ‰è¶£çš„çŸ¥è¯†","permalink":"https://tutouwang.vercel.app/categories/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[]},{"title":"STL-ç®€ä»‹","slug":"æœ‰è¶£çš„çŸ¥è¯†/STL-ç®€ä»‹","date":"2022-01-22T07:49:05.000Z","updated":"2022-01-22T07:53:34.820Z","comments":true,"path":"2022/01/22/æœ‰è¶£çš„çŸ¥è¯†/STL-ç®€ä»‹/","link":"","permalink":"https://tutouwang.vercel.app/2022/01/22/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/STL-%E7%AE%80%E4%BB%8B/","excerpt":"","text":"C++ STLç®€ä»‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100vector, å˜é•¿æ•°ç»„ï¼Œå€å¢çš„æ€æƒ³ size() è¿”å›å…ƒç´ ä¸ªæ•° empty() è¿”å›æ˜¯å¦ä¸ºç©º clear() æ¸…ç©º front()&#x2F;back() push_back()&#x2F;pop_back() begin()&#x2F;end() [] æ”¯æŒæ¯”è¾ƒè¿ç®—ï¼ŒæŒ‰å­—å…¸åºpair&lt;int, int&gt; first, ç¬¬ä¸€ä¸ªå…ƒç´  second, ç¬¬äºŒä¸ªå…ƒç´  æ”¯æŒæ¯”è¾ƒè¿ç®—ï¼Œä»¥firstä¸ºç¬¬ä¸€å…³é”®å­—ï¼Œä»¥secondä¸ºç¬¬äºŒå…³é”®å­—ï¼ˆå­—å…¸åºï¼‰stringï¼Œå­—ç¬¦ä¸² size()&#x2F;length() è¿”å›å­—ç¬¦ä¸²é•¿åº¦ empty() clear() substr(èµ·å§‹ä¸‹æ ‡ï¼Œ(å­ä¸²é•¿åº¦)) è¿”å›å­ä¸² c_str() è¿”å›å­—ç¬¦ä¸²æ‰€åœ¨å­—ç¬¦æ•°ç»„çš„èµ·å§‹åœ°å€queue, é˜Ÿåˆ— size() empty() push() å‘é˜Ÿå°¾æ’å…¥ä¸€ä¸ªå…ƒç´  front() è¿”å›é˜Ÿå¤´å…ƒç´  back() è¿”å›é˜Ÿå°¾å…ƒç´  pop() å¼¹å‡ºé˜Ÿå¤´å…ƒç´ priority_queue, ä¼˜å…ˆé˜Ÿåˆ—ï¼Œé»˜è®¤æ˜¯å¤§æ ¹å † size() empty() push() æ’å…¥ä¸€ä¸ªå…ƒç´  top() è¿”å›å †é¡¶å…ƒç´  pop() å¼¹å‡ºå †é¡¶å…ƒç´  å®šä¹‰æˆå°æ ¹å †çš„æ–¹å¼ï¼špriority_queue&lt;int, vector&lt;int&gt;, greater&lt;int&gt;&gt; q;stack, æ ˆ size() empty() push() å‘æ ˆé¡¶æ’å…¥ä¸€ä¸ªå…ƒç´  top() è¿”å›æ ˆé¡¶å…ƒç´  pop() å¼¹å‡ºæ ˆé¡¶å…ƒç´ deque, åŒç«¯é˜Ÿåˆ— size() empty() clear() front()&#x2F;back() push_back()&#x2F;pop_back() push_front()&#x2F;pop_front() begin()&#x2F;end() []set, map, multiset, multimap, åŸºäºå¹³è¡¡äºŒå‰æ ‘ï¼ˆçº¢é»‘æ ‘ï¼‰ï¼ŒåŠ¨æ€ç»´æŠ¤æœ‰åºåºåˆ— size() empty() clear() begin()&#x2F;end() ++, -- è¿”å›å‰é©±å’Œåç»§ï¼Œæ—¶é—´å¤æ‚åº¦ O(logn) set&#x2F;multiset insert() æ’å…¥ä¸€ä¸ªæ•° find() æŸ¥æ‰¾ä¸€ä¸ªæ•° count() è¿”å›æŸä¸€ä¸ªæ•°çš„ä¸ªæ•° erase() (1) è¾“å…¥æ˜¯ä¸€ä¸ªæ•°xï¼Œåˆ é™¤æ‰€æœ‰x O(k + logn) (2) è¾“å…¥ä¸€ä¸ªè¿­ä»£å™¨ï¼Œåˆ é™¤è¿™ä¸ªè¿­ä»£å™¨ lower_bound()&#x2F;upper_bound() lower_bound(x) è¿”å›å¤§äºç­‰äºxçš„æœ€å°çš„æ•°çš„è¿­ä»£å™¨ upper_bound(x) è¿”å›å¤§äºxçš„æœ€å°çš„æ•°çš„è¿­ä»£å™¨ map&#x2F;multimap insert() æ’å…¥çš„æ•°æ˜¯ä¸€ä¸ªpair erase() è¾“å…¥çš„å‚æ•°æ˜¯pairæˆ–è€…è¿­ä»£å™¨ find() [] æ³¨æ„multimapä¸æ”¯æŒæ­¤æ“ä½œã€‚ æ—¶é—´å¤æ‚åº¦æ˜¯ O(logn) lower_bound()&#x2F;upper_bound()unordered_set, unordered_map, unordered_multiset, unordered_multimap, å“ˆå¸Œè¡¨ å’Œä¸Šé¢ç±»ä¼¼ï¼Œå¢åˆ æ”¹æŸ¥çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(1) ä¸æ”¯æŒ lower_bound()&#x2F;upper_bound()ï¼Œ è¿­ä»£å™¨çš„++ï¼Œ--bitset, åœ§ä½ bitset&lt;10000&gt; s; ~, &amp;, |, ^ &gt;&gt;, &lt;&lt; &#x3D;&#x3D;, !&#x3D; [] count() è¿”å›æœ‰å¤šå°‘ä¸ª1 any() åˆ¤æ–­æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ª1 none() åˆ¤æ–­æ˜¯å¦å…¨ä¸º0 set() æŠŠæ‰€æœ‰ä½ç½®æˆ1 set(k, v) å°†ç¬¬kä½å˜æˆv reset() æŠŠæ‰€æœ‰ä½å˜æˆ0 flip() ç­‰ä»·äº~ flip(k) æŠŠç¬¬kä½å–å æ¥è‡ªAcwing","categories":[{"name":"æœ‰è¶£çš„çŸ¥è¯†","slug":"æœ‰è¶£çš„çŸ¥è¯†","permalink":"https://tutouwang.vercel.app/categories/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[]},{"title":"å †ä¸ä¼˜å…ˆé˜Ÿåˆ—","slug":"åŸºç¡€æ•°æ®ç»“æ„/å †ä¸ä¼˜å…ˆé˜Ÿåˆ—","date":"2022-01-22T04:03:52.000Z","updated":"2022-05-22T15:05:06.444Z","comments":true,"path":"2022/01/22/åŸºç¡€æ•°æ®ç»“æ„/å †ä¸ä¼˜å…ˆé˜Ÿåˆ—/","link":"","permalink":"https://tutouwang.vercel.app/2022/01/22/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%A0%86%E4%B8%8E%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/","excerpt":"","text":"å›é¡¾ - äºŒå‰æ ‘å®Œå…¨äºŒå‰æ ‘ ç¼–å·ä¸º i çš„å­—èŠ‚ç‚¹ å·¦å­©å­ç¼–å· ï¼š2 * i å³å­©å­ç¼–å· ï¼š2 * i + 1 å¯ä»¥ä½¿ç”¨è¿ç»­ç©ºé—´å­˜å‚¨ (æ•°ç»„) å † å¤§é¡¶å † åœ¨ä»»æ„ä¸€ä¸ªä¸‰å…ƒç»„ä¸­ æ ¹ å¤§äºå·¦å­©å­å’Œå³å­©å­ 12 - 11 - 10 æ ¹èŠ‚ç‚¹ (æå¤§) å…¨å±€æœ€å¤§ å°é¡¶å † åœ¨ä»»æ„ä¸€ä¸ªä¸‰å…ƒç»„ä¸­ æ ¹ å°äºå·¦å­©å­å’Œå³å­©å­ 3 - 7 - 4 æ ¹èŠ‚ç‚¹ (æå°) å…¨å±€æœ€å° å † - å°¾éƒ¨æ’å…¥è°ƒæ•´ (è‡ªä¸‹å‘ä¸Š)ä¾æ¬¡å’Œå’Œæ ¹æ¯”è¾ƒ 13 &gt; 7 äº¤æ¢ 13 &gt; 11 äº¤æ¢ 13 &gt; 12 äº¤æ¢ å † - å¤´éƒ¨å¼¹å‡ºè°ƒæ•´ (è‡ªä¸Šå‘ä¸‹)ä»å †çš„æœ€åå…ƒç´ ç›´æ¥æ”¾åˆ°å †é¡¶ ä¹‹ååœ¨åœ¨æ ¹èŠ‚ç‚¹çš„ä¸‰å…ƒç»„ä¸­æ¯”è¾ƒæ˜¯æ˜¯å¦æ»¡è¶³æ¡ä»¶ å¦‚æœä¸æ»¡è¶³æœ€å¤§å€¼å’Œæ ¹äº¤æ¢ä¸€ç›´æ“ä½œ 12 &gt; 7 äº¤æ¢ 11 &gt; 7 äº¤æ¢ æ—¶é—´å¤æ‚åº¦åˆ†æ æ’å…¥è°ƒæ•´æ—¶é—´å¤æ‚åº¦ - å±‚åºéå† ï¼š $O(log^N)$ åˆ é™¤è°ƒæ•´æ—¶é—´å¤æ‚åº¦ $O(log^N)$ å»ºå †æ—¶é—´å¤æ‚åº¦ ï¼š $O(Nlog^N)$ å †æ’åº - (å¤§é¡¶å †æƒ…å†µ)å£è¯€ï¼š å°†å †é¡¶å…ƒç´ ä¸å †å°¾å…ƒç´ äº¤æ¢ å°†æ­¤æ“ä½œçœ‹æœ€åšæ˜¯å †é¡¶å…ƒç´ å¼¹å‡ºæ“ä½œ æŒ‰ç…§å¤´éƒ¨å¼¹å‡ºä»¥åçš„ç­–ç•¥è°ƒæ•´æ¨ å¦‚æœæƒ³è¦ä¸€ä¸ªä»å°åˆ°å¤§çš„æ’åº é‚£ä¹ˆå°±å»ºç«‹ä¸€ä¸ªå¤§é¡¶å † å¦‚æœæƒ³è¦ä¸€ä¸ªä»å¤§åˆ°å°çš„æ’åº é‚£ä¹ˆå°±å»ºç«‹ä¸€ä¸ªå°é¡¶å † å † - ä¼˜å…ˆé˜Ÿåˆ— å †ä»£ç å®ç° - (å¤§é¡¶å †ä¸¾ä¾‹)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192/************************************************************************* &gt; File Name: å †-ä¼˜å…ˆé˜Ÿåˆ—.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ22æ—¥ æ˜ŸæœŸå…­ 15æ—¶45åˆ†42ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;#define swap(a, b) &#123;\\ __typeof(a) __temp = a;\\ a = b; b = __temp;\\&#125;typedef struct priority_queue &#123; int *data; int cnt, size;&#125; priority_queue;priority_queue *init(int n) &#123; priority_queue *q = (priority_queue *)malloc(sizeof(priority_queue)); q-&gt;data = (int *)malloc(sizeof(int) * n + 1); q-&gt;size =n; q-&gt;cnt = 0; return q;&#125;int empty(priority_queue *q) &#123; return q-&gt;cnt == 0;&#125;int top(priority_queue *q) &#123; return q-&gt;data[1];&#125;int push(priority_queue *q, int val) &#123; if(q == NULL) return 0; if(q-&gt;cnt == q-&gt;size) return 0; q-&gt;data[++(q-&gt;cnt)] = val; int ind = q-&gt;cnt; // å¤§é¡¶å † while(ind &gt;&gt; 1 &amp;&amp; q-&gt;data[ind] &gt; q-&gt;data[ind &gt;&gt; 1]) &#123; swap(q-&gt;data[ind], q-&gt;data[ind &gt;&gt; 1]); ind &gt;&gt;= 1; &#125; return 1;&#125;int pop(priority_queue *q) &#123; if(q == NULL) return 0; if(empty(q)) return 0; q-&gt;data[1] = q-&gt;data[q-&gt;cnt--]; int ind = 1; // ind &lt;&lt; 1 &lt;= q-&gt;cnt è¯æ˜å·¦å­©å­å­˜åœ¨ while((ind &lt;&lt; 1) &lt;= q-&gt;cnt) &#123; int temp = ind, l = ind &lt;&lt; 1, r = ind &lt;&lt; 1 | 1; if(q-&gt;data[l] &gt; q-&gt;data[temp]) temp = l; // r &lt;= q-&gt;cnt è¯æ˜å³å­©å­å­˜åœ¨ if(r &lt;= q-&gt;cnt &amp;&amp; q-&gt;data[r] &gt; q-&gt;data[temp]) temp = r; if(ind == temp) break; swap(q-&gt;data[ind], q-&gt;data[temp]); ind = temp; &#125; return 1;&#125;void clear(priority_queue * q) &#123; if(q == NULL) return ; free(q-&gt;data); free(q); return ;&#125;int main() &#123; srand(time(0)); #define MAX_OP 20 priority_queue *q = init(MAX_OP); for(int i = 0; i &lt; MAX_OP; i++) &#123; int val = rand() % 100; push(q, val); printf(&quot;insert %d to the priority_queue!\\n&quot;, val); &#125; for(int i = 0; i &lt; MAX_OP; i++) &#123; printf(&quot;%d &quot;, top(q)); pop(q); &#125; printf(&quot;\\n&quot;); return 0;&#125; çº¿æ€§å»ºå †æ³• - (è‡ªä¸Šå‘ä¸‹) å‘ä¸Šè°ƒæ•´æ¬¡æ•°åˆ†æ åœ¨ç¬¬ 1 å±‚æ—¶å€™(0è¡¨ç¤ºå‘ä¸Šè°ƒæ•´0æ¬¡) $0 * 2^0$ ($2^0$ä»£è¡¨ç¬¬ä¸€å±‚æœ‰å¤šå°‘ä¸ªèŠ‚ç‚¹) ç¬¬ä¸‰æ¬¡å±‚æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šå‘ä¸Šè°ƒæ•´2æ¬¡ $0 * 2^1 + 1 * 2^1 + 2 * 2^2 + 3 + 2^3 + â€¦ + (n - 1) * 2^{n-1}$ 0æ¬¡ 1ä¸ªèŠ‚ç‚¹ 1æ¬¡ 2ä¸ªèŠ‚ç‚¹ â€¦ n - 1æ¬¡ $2^{n-1}$èŠ‚ç‚¹ $0 * 2^{n - 1} + 1 * 2^{n - 2}$ å †æ’åº - ä»£ç å®ç°(çº¿æ€§å»ºå †æ³•)12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364/************************************************************************* &gt; File Name: å †-æ’åº.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ22æ—¥ æ˜ŸæœŸå…­ 19æ—¶34åˆ†46ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;#define swap(a, b) &#123;\\ __typeof(a) __temp = a;\\ a = b; b = __temp;\\&#125;void downUpdate(int *arr, int n, int ind) &#123; while((ind &lt;&lt; 1) &lt;= n) &#123; int temp = ind, l = ind &lt;&lt; 1, r = (ind &lt;&lt; 1) + 1; // if(arr[l] &gt; arr[temp]) temp = l; if(arr[l] &lt; arr[temp]) temp = l; // if(r &lt;= n &amp;&amp; arr[r] &gt; arr[temp]) temp = r; if(r &lt;= n &amp;&amp; arr[r] &lt; arr[temp]) temp = r; if(ind == temp) break; swap(arr[ind], arr[temp]); ind = temp; &#125; return ;&#125;void heap_Sort(int *arr, int n) &#123; arr -= 1; for(int i = n &gt;&gt; 1; i &gt;= 1; i--) &#123; downUpdate(arr, n, i); &#125; for(int i = n; i &gt; 1; i--) &#123; swap(arr[i], arr[1]); downUpdate(arr, i - 1, 1); &#125; return ;&#125;void output(int *arr, int n) &#123; for(int i = 0; i &lt; n; i++) &#123; printf(&quot;%d &quot;, arr[i]); &#125; printf(&quot;\\n&quot;);&#125;int main() &#123; srand(time(0)); #define MAX_N 20 int *arr = (int *)malloc(sizeof(int) * MAX_N); for(int i = 0; i &lt; MAX_N; i++) &#123; arr[i] = rand() % 100; &#125; output(arr, MAX_N); printf(&quot;\\n&quot;); heap_Sort(arr, MAX_N); output(arr, MAX_N); free(arr); #undef MAX_N return 0;&#125; æ—¶é—´å¤æ‚åº¦åˆ†æ $O(log^N)$","categories":[{"name":"åŸºç¡€æ•°æ®ç»“æ„","slug":"åŸºç¡€æ•°æ®ç»“æ„","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"tags":[]},{"title":"å“ˆå¸Œè¡¨","slug":"åŸºç¡€æ•°æ®ç»“æ„/å“ˆå¸Œè¡¨","date":"2022-01-20T13:51:03.000Z","updated":"2022-01-21T10:20:16.993Z","comments":true,"path":"2022/01/20/åŸºç¡€æ•°æ®ç»“æ„/å“ˆå¸Œè¡¨/","link":"","permalink":"https://tutouwang.vercel.app/2022/01/20/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%93%88%E5%B8%8C%E8%A1%A8/","excerpt":"","text":"å“ˆå¸Œè¡¨ é€šè¿‡æ•°ç»„ä¸‹æ ‡ç´¢å¼•åˆ°å€¼ ä»»æ„ç±»å‹æ˜ å°„æˆä¸€ä¸ªæ•´å‹ (ä¸‹æ ‡) ç®€å•ä¸¾ä¾‹ val % size å‡å¦‚ val &#x3D; 16ã€size &#x3D; 9 16 % 9 &#x3D; 7 (ä¸‹æ ‡) å‡å¦‚ val &#x3D; 7ã€size &#x3D; 9 7 % 9 &#x3D; 7 (ä¸‹æ ‡) äº§ç”Ÿå†²çªäº† - ä¼˜ç§€çš„å“ˆå¸Œéƒ½ä¼šå†²çª ä¸‹æ ‡ 0 1 2 3 4 5 6 7 8 16 è§£å†³å“ˆå¸Œå†²çªçš„ å›› ç§ æ–¹æ³• å¼€æ”¾å®šå€¼æ³• æ‹‰é“¾æ³• åœ¨å“ˆå¸Œæ³• (åœ¨æ•£åˆ—æ³•) å»ºç«‹å…¬å…±æº¢å‡ºåŒº è§£å†³å“ˆå¸Œå†²çªæ–¹æ³• - å¼€æ”¾å®šå€¼æ³•å¯ä»¥ä½¿ç”¨å¼€æ”¾å®šå€¼æ³• (äºŒæ¬¡æ¢æµ‹æ³•) - ä¸å¥½ç”¨ä¼šå †èš ä¸‹æ ‡7åé¢8æ˜¯ç©ºç€çš„æ‰€ä»¥7å¯ä»¥å­˜æ”¾åˆ°æ­¤å¤„ ä¸‹æ ‡ 0 1 2 3 4 5 6 7 8 16 7 è§£å†³å“ˆå¸Œå†²çªæ–¹æ³• - æ‹‰é“¾æ³•é¡¾åæ€ä¹‰æ‹‰é“¾æ³•å°±æ˜¯ä»¥ä¸‹æ ‡ä¸º7çš„ä½ç½®åšæˆä¸€ä¸ªé“¾è¡¨ ä¸‹æ ‡ 0 1 2 3 4 5 6 7 8 16 7 è§£å†³å“ˆå¸Œå†²çªæ–¹æ³• - åœ¨å“ˆå¸Œæ³• (åœ¨æ•£åˆ—æ³•)å¦‚æœç¬¬ä¸€ä¸ªå“ˆå¸Œå‡½æ•°å†²çªäº†ï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆ©ç”¨ç¬¬äºŒä¸ªå“ˆå¸Œå‡½æ•°åœ¨å»åšæ˜ å°„ï¼Œå¦‚æœåœ¨å†²çªäº†é‚£ä¹ˆå°±åˆ©ç”¨ç¬¬ä¸‰ä¸ªå“ˆå¸Œå‡½æ•°åœ¨åšã€‚ã€‚ã€‚(ç¦æ­¢å¥—å¨ƒ)ğŸ¤ è§£å†³å“ˆå¸Œå†²çªæ–¹æ³• - å»ºç«‹å…¬å…±æº¢å‡ºåŒºå°†å†²çªçš„å…ƒç´ é›†ä¸­å»ç®¡ç† æ—¶é—´å¤æ‚åº¦ å¹³å‡å¤æ‚åº¦ ï¼š $O(1)$ å­—ç¬¦ä¸²-å“ˆå¸Œ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104/************************************************************************* &gt; File Name: å“ˆå¸Œ.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ21æ—¥ æ˜ŸæœŸäº” 16æ—¶28åˆ†39ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;string.h&gt;typedef struct Node &#123; char *str; struct Node *next;&#125; Node;typedef struct HashTable &#123; Node **data; int size;&#125; HashTable;Node *init_node(char *str, Node *head) &#123; Node *p =(Node *)malloc(sizeof(Node)); // æ·±æ‹·è´ p-&gt;str = strdup(str); p-&gt;next = head; return p;&#125;HashTable *init_hash(int n) &#123; HashTable *h = (HashTable *)malloc(sizeof(HashTable)); // åˆ©ç”¨ç‡ h-&gt;size = (n &lt;&lt; 1); h-&gt;data = (Node **)calloc(h-&gt;size, sizeof(Node *)); return h;&#125;int BKDRHash(char *str) &#123; // seed å¯ä»¥æ˜¯ä»»æ„ä¸€è´¨æ•° int seed = 31, hash = 0; for(int i = 0; str[i]; i++) hash = hash * seed + str[i]; // ç¡®ä¿ head æ˜¯ä¸€ä¸ªæ­£æ•° return hash &amp; 0x7fffffff;&#125;int insert(HashTable *h, char *str) &#123; if(h == NULL) return 0; int hash = BKDRHash(str); int ind = hash % h-&gt;size; h-&gt;data[ind] = init_node(str, h-&gt;data[ind]); return 1;&#125;int search(HashTable *h, char *str) &#123; if(h == NULL) return 0; int hash = BKDRHash(str); int ind = hash % h-&gt;size; Node *p = h-&gt;data[ind]; while(p &amp;&amp; strcmp(p-&gt;str, str)) p = p-&gt;next; return p != NULL;&#125;void clear_node(Node *node) &#123; if(node == NULL) return ; Node *p = node, *t; while(p) &#123; t = p-&gt;next; free(p-&gt;str); free(p); p = t; &#125; return ;&#125;void clear(HashTable *h) &#123; if(h == NULL) return ; for(int i = 0; i &lt; h-&gt;size; i++) &#123; clear_node(h-&gt;data[i]); &#125; free(h); return ;&#125;int main() &#123; #define MAX_N 100 int op; char str[MAX_N + 5] = &#123;0&#125;; HashTable *h = init_hash(MAX_N); while(~scanf(&quot;%d%s&quot;, &amp;op, str)) &#123; switch(op) &#123; case 0 : &#123; printf(&quot;insert %s to HashTable\\n&quot;, str); insert(h, str); &#125; break; case 1 : &#123; printf(&quot;search %s from HashTable result = %d\\n&quot;, str, search(h, str)); &#125;break; &#125; &#125; #undef MAX_N clear(h); return 0;&#125;","categories":[{"name":"åŸºç¡€æ•°æ®ç»“æ„","slug":"åŸºç¡€æ•°æ®ç»“æ„","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"tags":[]},{"title":"äºŒåˆ†æŸ¥æ‰¾ä¸ä¸‰åˆ†æŸ¥æ‰¾","slug":"åŸºç¡€æ•°æ®ç»“æ„/äºŒåˆ†æŸ¥æ‰¾ä¸ä¸‰åˆ†æŸ¥æ‰¾","date":"2022-01-20T07:51:45.000Z","updated":"2022-05-22T15:05:06.444Z","comments":true,"path":"2022/01/20/åŸºç¡€æ•°æ®ç»“æ„/äºŒåˆ†æŸ¥æ‰¾ä¸ä¸‰åˆ†æŸ¥æ‰¾/","link":"","permalink":"https://tutouwang.vercel.app/2022/01/20/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E4%B8%8E%E4%B8%89%E5%88%86%E6%9F%A5%E6%89%BE/","excerpt":"","text":"äºŒåˆ†æŸ¥æ‰¾ (æŠ˜åŠæŸ¥æ‰¾)æ¡ä»¶ å•è°ƒæ€§ - (ä¸€èˆ¬å•è°ƒé€’å‡) ç‰¹æ®Šæƒ…å†µ - 1 æŸ¥æ‰¾ç¬¬æœ€åå‡ºç°çš„ 1 å¦‚æœå¾…æŸ¥å€¼ä¸å­˜åœ¨çš„æƒ…å†µå¯ä»¥è®¾ç½®ä¸€ä¸ªè™šæ‹Ÿå¤´ ç‰¹æ®Šæƒ…å†µ - 2 æŸ¥æ‰¾ç¬¬ä¸€ä¸ª 1 å¦‚æœå¾…æŸ¥å€¼ä¸å­˜åœ¨çš„æƒ…å†µå¯ä»¥è®¾ç½®ä¸€ä¸ªè™šæ‹Ÿå°¾ æ—¶é—´å¤æ‚åº¦ å¹³å‡å¤æ‚åº¦ ï¼š $O(log^N)$ ä¸‰åˆ†æŸ¥æ‰¾","categories":[{"name":"åŸºç¡€æ•°æ®ç»“æ„","slug":"åŸºç¡€æ•°æ®ç»“æ„","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"tags":[]},{"title":"æ’åºåˆé›† 5 ç§ - æ’å…¥ã€å†’æ³¡ã€å½’å¹¶ã€é€‰æ‹©ã€å¿«æ’","slug":"åŸºç¡€æ•°æ®ç»“æ„/æ’åºåˆé›†","date":"2022-01-19T02:32:08.000Z","updated":"2022-05-22T15:05:06.438Z","comments":true,"path":"2022/01/19/åŸºç¡€æ•°æ®ç»“æ„/æ’åºåˆé›†/","link":"","permalink":"https://tutouwang.vercel.app/2022/01/19/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%8E%92%E5%BA%8F%E5%90%88%E9%9B%86/","excerpt":"","text":"æ’åºç®—æ³•åˆ†ç±» ç¨³å®š ï¼š( æ’å…¥ã€å†’æ³¡ã€å½’å¹¶) éç¨³å®š (ä¸ç¨³å®š) ï¼š(é€‰æ‹©ã€å¿«æ’) å†…éƒ¨ ï¼š(æ•´ä½“ä¸€æ¬¡æ€§çš„åŠ å…¥åˆ°å†…å­˜å½“ä¸­,æ•´ä½“çš„å»æ’åº) å¤–éƒ¨ ï¼š (å¯¹ä¸€ä¸ªæ•°æ®æ–‡ä»¶æ’åºçš„è¯å¯ä»¥ä¸å°†æ•´ä¸ªæ–‡ä»¶éƒ½åŠ è½½åˆ°å†…å­˜é‡Œé¢è¿›è¡Œæ’åº - å½’å¹¶ï¼ ) æ’å…¥æ’åº (insert_Sort)å£è¯€ : å°†æ•°ç»„åˆ†æˆã€å·²æ’åºåŒºã€‘ å’Œ ã€å¾…æ’åºåŒºã€‘ å°†ã€å¾…æ’åºåŒºã€‘ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå‘å‰æ’å…¥åˆ°ã€å·²æ’åºåŒºã€‘ ç›´åˆ°ã€å¾…æ’åºåŒºã€‘æ²¡æœ‰å…ƒç´ ä¸ºæ­¢ æ—¶é—´å¤æ‚åº¦åˆ†æ æœ€å¥½ ï¼š0 æ¬¡ æœ€å ï¼šn - 1 æ¬¡ å¹³å‡å¤æ‚åº¦ ï¼š( æœ€å¥½ + æœ€å ) &#x2F; 2 : $\\frac{(n - 1)}{2} * N$ : $O(N^2)$ ä»£ç å®ç° - æ¨¡å—123456789// æ’å…¥æ’åºvoid insert_Sort(int *num, int n) &#123; for(int i = 1; i &lt; n; i++) &#123; for(int j = i; j &gt; 0 &amp;&amp; num[j] &lt; num[j - 1]; j--) &#123; swap(num[j], num[j - 1]); &#125; &#125; return ;&#125; å†’æ³¡æ’åº (bubble_Sort)å£è¯€ : å°†æ•°ç»„åˆ†æˆã€å·²æ’åºåŒºã€‘ å’Œ ã€å¾…æ’åºåŒºã€‘ ä»å¤´åˆ°å°¾æ‰«æã€å¾…æ’åºåŒºã€‘ï¼Œè‹¥å‰é¢å…ƒç´ æ¯”åé¢å…ƒç´ å¤§ï¼Œåˆ™äº¤æ¢ æ¯ä¸€è½®éƒ½ä¼šå°†ã€å¾…æ’åºåŒºã€‘ä¸­æœ€å¤§çš„æ”¾åˆ°ã€å·²æ’åºåŒºã€‘çš„å¼€å¤´ ç›´åˆ°ã€å¾…æ’åºåŒºã€‘æ²¡æœ‰å…ƒç´ ä¸ºæ­¢ å°ä¼˜åŒ– ï¼š å¦‚æœä¸€è½®ä¸­ä¸€æ¬¡äº¤æ¢éƒ½æ²¡æœ‰å°±è¯æ˜åºåˆ—å·²ç»æœ‰åºå¯ä»¥æå‰ç»“æŸ æ—¶é—´å¤æ‚åº¦ å¹³å‡å¤æ‚åº¦ ï¼š $O(N^2)$ ä»£ç å®ç° - æ¨¡å—12345678910111213// å†’æ³¡æ’åºvoid bubble_Sort(int *num, int n) &#123; int falg = 1; for(int i = 1; i &lt; n &amp;&amp; falg; i++) &#123; falg = 0; for(int j = 0; j &lt; n - i; j++) &#123; if(num[j] &lt;= num[j + 1]) continue; swap(num[j], num[j + 1]); falg++; &#125; &#125; return ;&#125; å½’å¹¶æ’åº - äºŒè·¯å½’å¹¶ (merge_Sort)æ ¸å¿ƒæ€æƒ³åˆ†æ²» å°†ã€å¾…æ’åºæ•°ç»„ã€‘åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ† å¦‚ ï¼š 9 7 8 5 4 1 2 3 6 5 åˆ†ä¸º : 9 7 8 5 4 â€” 1 2 3 6 5 å†åˆ†ï¼š9 7 â€” 8 5 4 â€” 1 2 â€” 365 è¾¾åˆ°è¶³å¤Ÿå°å¹¶ä¸”ç«‹é©¬èƒ½æ‹¿åˆ°ç­”æ¡ˆçš„è§„æ¨¡ ä¸Šä¸€å±‚ ï¼š ã€ â€” æˆ‘æ˜¯ç©ºæ•°ç»„ â€” ã€‘ å¯ä»¥å¾—åˆ° 7 9 â€” 4 5 8 â€” 1 2 â€” 3 5 6 ç»„å†…æœ‰åºç»„é—´æ— åº ä¸€ä¸ªæŒ‡å‘ğŸ‘† ____ğŸ‘† åˆå¹¶æˆä¸€ä¸ªæœ‰åºæ•°ç»„ - åœ¨æ‹·è´åˆ°åŸæ•°ç»„ ä»–ä»¬ä¸¤ä¸ªæ¯”è¾ƒè°å°å°±æ’å…¥åˆ°ä¸Šé¢æ•°ç»„ æ—¶é—´å¤æ‚åº¦ å¹³å‡å¤æ‚åº¦ ï¼š $O(Nlog^N)$ ä»£ç å®ç° - æ¨¡å—12345678910111213141516171819202122232425// å½’å¹¶æ’åºvoid merge_Sort(int *num, int l, int r) &#123; if(r - l &lt;= 1) &#123; if(r - l == 1 &amp;&amp; num[r] &lt; num[l]) &#123; swap(num[r], num[l]); &#125; return ; &#125; int mid = (r + l) &gt;&gt; 1; merge_Sort(num, l, mid); merge_Sort(num, mid + 1, r); int *temp = (int *)malloc(sizeof(int) * (r - l + 1)); int p1 = l, p2 = mid + 1, cnt = 0; while(p1 &lt;= mid || p2 &lt;= r) &#123; if(p2 &gt; r || (p1 &lt;= mid &amp;&amp; num[p1] &lt;= num[p2])) &#123; temp[cnt++] = num[p1++]; &#125; else &#123; temp[cnt++] = num[p2++]; &#125; &#125; memcpy(num + l, temp, sizeof(int) * (r - l + 1)); free(temp); return ;&#125; ç¨³å®šæ’åºä»£ç åˆé›† - æ’å…¥ã€å†’æ³¡ã€å½’å¹¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104/************************************************************************* &gt; File Name: ç¨³å®šæ’åºåˆé›†-æ’å…¥ã€å†’æ³¡ã€å½’å¹¶.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ19æ—¥ æ˜ŸæœŸä¸‰ 17æ—¶02åˆ†43ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;#include &lt;string.h&gt;// typeof(a) ç›¸å½“äºè·å– a çš„ç±»å‹ åœ¨å®šä¹‰ä¸€ä¸ªå˜é‡ __temp#define swap(a, b) &#123;\\ __typeof(a) __temp = a;\\ a = b, b = __temp;\\&#125;#define TEST(arr, n, func, args...) &#123;\\ int *num = (int *)malloc(sizeof(int) * n);\\ memcpy(num, arr, sizeof(int) * n);\\ output(num, n);\\ printf(&quot;%s = &quot;, #func);\\ func(args);\\ output(num, n);\\ free(num);\\ printf(&quot;\\n&quot;);\\&#125;// æ’å…¥æ’åºvoid insert_Sort(int *num, int n) &#123; for(int i = 1; i &lt; n; i++) &#123; for(int j = i; j &gt; 0 &amp;&amp; num[j] &lt; num[j - 1]; j--) &#123; swap(num[j], num[j - 1]); &#125; &#125; return ;&#125;// å†’æ³¡æ’åºvoid bubble_Sort(int *num, int n) &#123; int falg = 1; for(int i = 1; i &lt; n &amp;&amp; falg; i++) &#123; falg = 0; for(int j = 0; j &lt; n - i; j++) &#123; if(num[j] &lt;= num[j + 1]) continue; swap(num[j], num[j + 1]); falg++; &#125; &#125; return ;&#125;// å½’å¹¶æ’åºvoid merge_Sort(int *num, int l, int r) &#123; if(r - l &lt;= 1) &#123; if(r - l == 1 &amp;&amp; num[r] &lt; num[l]) &#123; swap(num[r], num[l]); &#125; return ; &#125; int mid = (r + l) &gt;&gt; 1; merge_Sort(num, l, mid); merge_Sort(num, mid + 1, r); int *temp = (int *)malloc(sizeof(int) * (r - l + 1)); int p1 = l, p2 = mid + 1, cnt = 0; while(p1 &lt;= mid || p2 &lt;= r) &#123; if(p2 &gt; r || (p1 &lt;= mid &amp;&amp; num[p1] &lt;= num[p2])) &#123; temp[cnt++] = num[p1++]; &#125; else &#123; temp[cnt++] = num[p2++]; &#125; &#125; memcpy(num + l, temp, sizeof(int) * (r - l + 1)); free(temp); return ;&#125;void randint(int *arr, int n) &#123; while(n--) arr[n] = rand() % 100; return ;&#125;void output(int *arr, int n) &#123; for(int i = 0; i &lt; n; i++) &#123; i &amp;&amp; printf(&quot;, &quot;); printf(&quot;%d&quot;, arr[i]); &#125; printf(&quot;\\n&quot;);&#125;int main() &#123; srand(time(0)); #define MAX_N 20 int arr[MAX_N]; randint(arr, MAX_N); TEST(arr, MAX_N, insert_Sort, num, MAX_N); TEST(arr, MAX_N, bubble_Sort, num, MAX_N); TEST(arr, MAX_N, merge_Sort, num, 0, MAX_N - 1); #undef MAX_N return 0;&#125; åˆ†ç•Œçº¿ğŸ‘‡ä¸ç¨³å®šäº† é€‰æ‹©æ’åº (select_Sort)å£è¯€ : å°†æ•°ç»„åˆ†æˆã€å·²æ’åºåŒºã€‘ å’Œ ã€å¾…æ’åºåŒºã€‘ æ¯ä¸€è½®ä»ã€å¾…æ’åºåŒºã€‘ä¸­é€‰æ‹©ä¸€ä¸ªæœ€å°çš„å…ƒç´ æ–¹åˆ°ã€å·²æ’åºåŒºã€‘çš„å°¾éƒ¨ ç›´åˆ°ã€å¾…æ’åºåŒºã€‘æ²¡æœ‰å…ƒç´ ä¸ºæ­¢ æ—¶é—´å¤æ‚åº¦ å¹³å‡å¤æ‚åº¦ ï¼š $O(N^2)$ ä»£ç å®ç° - æ¨¡å—1234567891011// é€‰æ‹©æ’åºvoid select_Sort(int *num, int n) &#123; for(int i = 0; i &lt; n - 1; i++) &#123; int ind = i; for(int j = i + 1; j &lt; n; j++) &#123; if(num[ind] &gt; num[j]) ind = j; &#125; swap(num[i], num[ind]); &#125; return ;&#125; å¿«é€Ÿæ’åº (quick_Sort)å£è¯€ : é€‰æ‹©åŸºå‡†æ•° ï¼š ä¸€èˆ¬é€‰æ‹©åºåˆ—çš„ç¬¬ä¸€ä¸ªæ•° (åŸºå‡†å€¼) è¿›è¡Œï¼ˆpartitionï¼‰æ“ä½œï¼šä½œç”¨å°±æ˜¯ä½¿å¾—å¾…æ’åºçš„åºåˆ—åˆ†ä¸ºäº†ä¸¤éƒ¨åˆ† å‰éƒ¨åˆ†éƒ½å°äºåŸºå‡†å€¼ â€” åé¢ä¸€éƒ¨åˆ†éƒ½å¤§äºåŸºå‡†å€¼ (ä¸€è½®partition æ“ä½œ) head &#x3D; ç¬¬ä¸€ä¸ªæ•°(åŸºå‡†å€¼) tail &#x3D; æœ€åä¸€ä¸ªå…ƒç´  tail æ“ä½œ ä»åå¾€å‰æ‰¾ç¬¬ä¸€ä¸ªå°äºåŸºå‡†å€¼çš„æ•° - æ‰¾åˆ°ä¹‹åå¡«åˆ°å¤´æŒ‡é’ˆçš„ä½ç½® head æ“ä½œ ä»å‰å¾€åæ‰¾åˆ°æ‰¾åˆ°ä¸€ä¸ªå¤§äºåŸºå‡†å€¼çš„æ•° - æ‰¾åˆ°ä¹‹åå¡«åˆ°å°¾é’ˆçš„ä½ç½® æ—¶é—´å¤æ‚åº¦ å¹³å‡å¤æ‚åº¦ ï¼š $O(Nlog^N)$ å®Œå…¨é€†åº ï¼š $ O(N^2)$ - (å°±å˜æˆäº†é€‰æ‹©æ’åº) ä»£ç å®ç° - æ¨¡å— - æœªä¼˜åŒ– - å¡«å‘æ³•1234567891011121314151617// å¿«æ’ â€” ç¬¬ä¸€ç‰ˆvoid quick_Sort(int *num, int l, int r) &#123; if(l &gt; r) return ; int x = l, y = r, z = num[l]; while(x &lt; y) &#123; // å…ˆä»åå¾€å‰æ‰«å› ä¸ºç¬¬ä¸€ä¸ªä½ç½®æ˜¯ç©ºç€å¯ä»¥è¦†ç›–æ‰ while(x &lt; y &amp;&amp; num[y] &gt; z) y--; if(x &lt; y) num[x++] = num[y]; while(x &lt; y &amp;&amp; num[x] &lt; z) x++; if(x &lt; y) num[y--] = num[x]; &#125; // å¤´å°¾æŒ‡é’ˆé‡åˆ num[x] = z; quick_Sort(num, l, x - 1); quick_Sort(num, x + 1, r); return ;&#125; ä»£ç å®ç° - æ¨¡å— - ä¼˜åŒ– - åŸºå‡†å€¼ä¸¤ç‚¹å–ä¸­æ³•ã€æ— ç›‘ç£ä¼˜åŒ–(å»æ‰x &lt; y)ã€å•è¾¹é€’å½’æ³•123456789101112131415161718// å¿«æ’ â€” ç¬¬äºŒç‰ˆ åŸºå‡†å€¼ä¸¤ç‚¹å–ä¸­æ³•ã€æ— ç›‘ç£ä¼˜åŒ–(å»æ‰x &lt; y)ã€å• è¾¹é€’å½’æ³•void quick_Sort1(int *num, int l, int r) &#123; while(l &lt; r) &#123; int x = l, y = r, z = num[(l + r) &gt;&gt; 1]; do &#123; while(num[x] &lt; z) x++; while(num[y] &gt; z) y--; if(x &lt;= y) &#123; swap(num[x], num[y]); x++, y--; &#125; &#125; while(x &lt;= y); quick_Sort1(num, l, y); l = x; &#125; return ;&#125; ä¸ç¨³å®šæ’åºä»£ç åˆé›† - é€‰æ‹©ã€å¿«é€Ÿã€å¿«é€Ÿä¼˜åŒ–123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103/************************************************************************* [0] &gt; File Name: ç¨³å®šæ’åºåˆé›†-æ’å…¥ã€å†’æ³¡ã€å½’å¹¶.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ19æ—¥ æ˜ŸæœŸä¸‰ 17æ—¶02åˆ†43ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;#include &lt;string.h&gt;// typeof(a) ç›¸å½“äºè·å– a çš„ç±»å‹ åœ¨å®šä¹‰ä¸€ä¸ªå˜é‡ __temp#define swap(a, b) &#123;\\ __typeof(a) __temp = a;\\ a = b, b = __temp;\\&#125;#define TEST(arr, n, func, args...) &#123;\\ int *num = (int *)malloc(sizeof(int) * n);\\ memcpy(num, arr, sizeof(int) * n);\\ output(num, n);\\ printf(&quot;%s = &quot;, #func);\\ func(args);\\ output(num, n);\\ free(num);\\ printf(&quot;\\n&quot;);\\&#125;// é€‰æ‹©æ’åºvoid select_Sort(int *num, int n) &#123; for(int i = 0; i &lt; n - 1; i++) &#123; int ind = i; for(int j = i + 1; j &lt; n; j++) &#123; if(num[ind] &gt; num[j]) ind = j; &#125; swap(num[i], num[ind]); &#125; return ;&#125;// å¿«æ’ â€” ç¬¬ä¸€ç‰ˆvoid quick_Sort(int *num, int l, int r) &#123; if(l &gt; r) return ; int x = l, y = r, z = num[l]; while(x &lt; y) &#123; // å…ˆä»åå¾€å‰æ‰«å› ä¸ºç¬¬ä¸€ä¸ªä½ç½®æ˜¯ç©ºç€å¯ä»¥è¦†ç›–æ‰ while(x &lt; y &amp;&amp; num[y] &gt; z) y--; if(x &lt; y) num[x++] = num[y]; while(x &lt; y &amp;&amp; num[x] &lt; z) x++; if(x &lt; y) num[y--] = num[x]; &#125; // å¤´å°¾æŒ‡é’ˆé‡åˆ num[x] = z; quick_Sort(num, l, x - 1); quick_Sort(num, x + 1, r); return ;&#125;// å¿«æ’ â€” ç¬¬äºŒç‰ˆ åŸºå‡†å€¼ä¸¤ç‚¹å–ä¸­æ³•ã€æ— ç›‘ç£ä¼˜åŒ–(å»æ‰x &lt; y)ã€å• è¾¹é€’å½’æ³•void quick_Sort1(int *num, int l, int r) &#123; while(l &lt; r) &#123; int x = l, y = r, z = num[(l + r) &gt;&gt; 1]; do &#123; while(num[x] &lt; z) x++; while(num[y] &gt; z) y--; if(x &lt;= y) &#123; swap(num[x], num[y]); x++, y--; &#125; &#125; while(x &lt;= y); quick_Sort1(num, l, y); l = x; &#125; return ;&#125;void randint(int *arr, int n) &#123; while(n--) arr[n] = rand() % 100; return ;&#125;void output(int *arr, int n) &#123; for(int i = 0; i &lt; n; i++) &#123; i &amp;&amp; printf(&quot;, &quot;); printf(&quot;%d&quot;, arr[i]); &#125; printf(&quot;\\n&quot;);&#125;int main() &#123; srand(time(0)); #define MAX_N 20 int arr[MAX_N]; randint(arr, MAX_N); TEST(arr, MAX_N, select_Sort, num, MAX_N); TEST(arr, MAX_N, quick_Sort, num, 0, MAX_N - 1); TEST(arr, MAX_N, quick_Sort1, num, 0, MAX_N - 1); #undef MAX_N return 0;&#125; æœ‰è¶£çš„çŸ¥è¯†12345g++ test.cpptime .&#x2F;a.out &gt; out_1&#x2F;&#x2F; æ¯”è¾ƒä¸¤ä¸ªæ–‡ä»¶æ˜¯å¦ç›¸ç­‰diff out_1 out_2","categories":[{"name":"åŸºç¡€æ•°æ®ç»“æ„","slug":"åŸºç¡€æ•°æ®ç»“æ„","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"tags":[{"name":"æ’åº","slug":"æ’åº","permalink":"https://tutouwang.vercel.app/tags/%E6%8E%92%E5%BA%8F/"}]},{"title":"å¹¿ä¹‰è¡¨è½¬äºŒå‰æ ‘","slug":"åŸºç¡€æ•°æ®ç»“æ„/å¹¿ä¹‰è¡¨è½¬äºŒå‰æ ‘","date":"2022-01-18T04:02:39.000Z","updated":"2022-05-22T15:05:06.438Z","comments":true,"path":"2022/01/18/åŸºç¡€æ•°æ®ç»“æ„/å¹¿ä¹‰è¡¨è½¬äºŒå‰æ ‘/","link":"","permalink":"https://tutouwang.vercel.app/2022/01/18/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E5%B9%BF%E4%B9%89%E8%A1%A8%E8%BD%AC%E4%BA%8C%E5%8F%89%E6%A0%91/","excerpt":"","text":"ä»£ç å®ç°å¹¿ä¹‰è¡¨è¿˜åŸäºŒå‰æ ‘ (æ ˆåŸç†)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190/************************************************************************* &gt; File Name: å¹¿ä¹‰è¡¨è½¬äºŒå‰æ ‘.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ18æ—¥ æ˜ŸæœŸäºŒ 14æ—¶33åˆ†25 ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;#include &lt;string.h&gt;typedef struct Node &#123; char data; struct Node *lchild, *rchild;&#125; Node;typedef struct Tree &#123; Node *root; int length;&#125; Tree;typedef struct Stack &#123; Node **data; int top, size;&#125; Stack;Node *getNewNode(char val) &#123; Node *p = (Node *)malloc(sizeof(Node)); p-&gt;data = val; p-&gt;lchild = p-&gt;rchild = NULL; return p;&#125;Tree *getNewTree() &#123; Tree *tree = (Tree *)malloc(sizeof(Tree)); tree-&gt;root = NULL; tree-&gt;length = 0; return tree;&#125;Stack *init_stack(int n) &#123; Stack *s = (Stack *)malloc(sizeof(Stack)); s-&gt;data = (Node **)malloc(sizeof(Node *) * n); s-&gt;top = -1; s-&gt;size = n; return s;&#125;Node *top(Stack *s) &#123; return s-&gt;data[s-&gt;top];&#125;int empty(Stack *s) &#123; return s-&gt;top == -1;&#125;int push(Stack *s, Node *val) &#123; if(s == NULL) return 0; if(s-&gt;size - 1 == s-&gt;top) return 0; s-&gt;data[++(s-&gt;top)] = val; return 1;&#125;int pop(Stack *s) &#123; if(s == NULL) return 0; if(empty(s)) return 0; s-&gt;top--; return 1;&#125;void clear_stack(Stack *s) &#123; if(s == NULL) return ; free(s-&gt;data); free(s); return ;&#125;void clear_node(Node *root) &#123; if(root == NULL) return ; clear_node(root-&gt;lchild); clear_node(root-&gt;rchild); free(root); return ;&#125;void clear_tree(Tree *tree) &#123; if(tree == NULL) return ; clear_node(tree-&gt;root); free(tree); return ;&#125;Node *build(const char *str, int *node_num) &#123; Stack *s = init_stack(strlen(str)); int falg = 0; Node *temp = NULL, *p =NULL; while(str[0]) &#123; switch(str[0]) &#123; case &#x27;(&#x27; : &#123; push(s, temp); falg = 0; &#125; break; case &#x27;)&#x27; : &#123; p = top(s); pop(s); &#125; break; case &#x27;,&#x27; : falg = 1; break; case &#x27; &#x27; : break; default : temp = getNewNode(str[0]); if(!empty(s) &amp;&amp; !falg) &#123; top(s)-&gt;lchild = temp; &#125; else if(!empty(s) &amp;&amp; falg)&#123; top(s)-&gt;rchild = temp; &#125; ++(*node_num); &#125; ++str; &#125; clear_stack(s); if(temp &amp;&amp; p == NULL) p = temp; return p;&#125;// å‰ æ ¹ å·¦ å³void pre_order_node(Node *root) &#123; if(root == NULL) return ; printf(&quot;%c &quot;, root-&gt;data); pre_order_node(root-&gt;lchild); pre_order_node(root-&gt;rchild); return ;&#125;// å‰void pre_order(Tree *tree) &#123; if(tree == NULL) return ; printf(&quot;pre_order (%d) : &quot;, tree-&gt;length); pre_order_node(tree-&gt;root); printf(&quot;\\n&quot;); return ;&#125;// ä¸­ å·¦ æ ¹ å³void in_order_node(Node *root) &#123; if(root == NULL) return ; in_order_node(root-&gt;lchild); printf(&quot;%c &quot;, root-&gt;data); in_order_node(root-&gt;rchild); return ;&#125;// ä¸­void in_order(Tree *tree) &#123; if(tree == NULL) return ; printf(&quot;in_order (%d) : &quot;, tree-&gt;length); in_order_node(tree-&gt;root); printf(&quot;\\n&quot;); return ;&#125;// å å·¦ å³ æ ¹void post_order_node(Node *root) &#123; if(root == NULL) return ; in_order_node(root-&gt;lchild); in_order_node(root-&gt;rchild); printf(&quot;%c &quot;, root-&gt;data); return ;&#125;// åvoid post_order(Tree *tree) &#123; if(tree == NULL) return ; printf(&quot;post_order (%d) : &quot;, tree-&gt;length); post_order_node(tree-&gt;root); printf(&quot;\\n&quot;); return ;&#125;int main() &#123; char str[1000] = &#123;0&#125;; int node_num = 0; scanf(&quot;%[^\\n]s&quot;, str); getchar(); Tree *tree = getNewTree(); tree-&gt; root = build(str, &amp;node_num); tree-&gt;length = node_num; pre_order(tree); in_order(tree); post_order(tree); return 0;&#125;","categories":[{"name":"åŸºç¡€æ•°æ®ç»“æ„","slug":"åŸºç¡€æ•°æ®ç»“æ„","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"tags":[{"name":"å¹¿ä¹‰è¡¨è½¬äºŒå‰æ ‘","slug":"å¹¿ä¹‰è¡¨è½¬äºŒå‰æ ‘","permalink":"https://tutouwang.vercel.app/tags/%E5%B9%BF%E4%B9%89%E8%A1%A8%E8%BD%AC%E4%BA%8C%E5%8F%89%E6%A0%91/"}]},{"title":"æ ‘ä¸äºŒå‰æ ‘","slug":"åŸºç¡€æ•°æ®ç»“æ„/æ ‘ä¸äºŒå‰æ ‘","date":"2022-01-17T06:34:23.000Z","updated":"2022-05-22T15:05:06.433Z","comments":true,"path":"2022/01/17/åŸºç¡€æ•°æ®ç»“æ„/æ ‘ä¸äºŒå‰æ ‘/","link":"","permalink":"https://tutouwang.vercel.app/2022/01/17/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91%E4%B8%8E%E4%BA%8C%E5%8F%89%E6%A0%91/","excerpt":"","text":"æ ‘æ ¹èŠ‚ç‚¹ å¯ä»¥çœ‹æˆä¸€ä¸ªé›†åˆ é“¾æ¥çš„çº¿å¯ä»¥çœ‹æˆå…³ç³» è·ŸèŠ‚ç‚¹ä¸‹é¢çš„å­é›† æ€ä¹ˆåˆ¤æ–­æœºå‰æ ‘ï¼šå…¶ä¸­æŸä¸ªèŠ‚ç‚¹æœ€å¤šçš„å­å­©å­ä¸ªæ•° ä¸‹é¢å°±æ˜¯ä¸€ä¸ªä¸‰å‰æ ‘ æ ‘çš„é«˜åº¦-æ·±åº¦ èŠ‚ç‚¹4æ·±åº¦ 2 æ˜¯ä»æ ¹èŠ‚ç‚¹å‘ä¸‹çœ‹ èŠ‚ç‚¹4é«˜åº¦ 4 æ˜¯ä»èŠ‚ç‚¹8å‘ä¸Šçœ‹æ˜¯4 ä»èŠ‚ç‚¹6å‘ä¸Šçœ‹æ˜¯ 2 å–æœ€å¤§ 4 èŠ‚ç‚¹4é«˜åº¦ åˆ†å±‚çœ‹ ä¹Ÿæ˜¯4 ä»€ä¹ˆæ˜¯èŠ‚ç‚¹çš„åº¦ æ•°æ®ç»“æ„çš„ç†è§£ åº¦ &#x3D; å‡ºåº¦ + å…¥åº¦ å›¾ åœ¨æ•°æ®ç»“æ„æ ‘çš„æè¿°ä¸­ åº¦ &#x3D;&#x3D; å‡ºåº¦ ä»å½“å‰èŠ‚ç‚¹æœ‰å¤šå°‘æ¡å‡ºè¾¹ èŠ‚ç‚¹æ•°é‡ç­‰äºè¾¹æ•°+1 æ ‘ è½¬ äºŒå‰æ ‘æ ‘ è½¬æ¢æˆ äºŒå‰æ ‘ å·¦å­©å­ - å³å…„å¼Ÿ åå­—é“¾è¡¨æ³• äºŒå‰æ ‘ æœ€å¤šæœ‰2ä¸ªå­å­©å­å«äºŒå‰æ ‘ - åº¦æœ€å¤§ä¸º2 èŠ‚ç‚¹1å‡ºåº¦æŒ‡å‘ èŠ‚ç‚¹ 2 å’Œ èŠ‚ç‚¹3 åˆ†åˆ«ä¸º å·¦å­©å­ å’Œ å³å­©å­ ä¸ºä»€ä¹ˆè¦è®²äºŒå‰æ ‘ å› ä¸ºæ‰€æœ‰çš„æ ‘éƒ½å¯ä»¥è½¬æ¢æˆ2å‰æ ‘ åº¦ä¸º0çš„èŠ‚ç‚¹æ¯”åº¦ä¸º2çš„èŠ‚ç‚¹å¤š1ä¸ª äºŒå‰æ ‘ä¸­ æœ‰åº¦ä¸º0 (n0)ï¼Œ 1(n1)ï¼Œ 2(n0) èŠ‚ç‚¹ä¸ªæ•°ç­‰äºè¾¹æ•°åŠ 1 n0 + n1 + n2 &#x3D; 0 + n1 + 2 * n2 + 1 n0 &#x3D; n2 + 1 äºŒå‰æ ‘ - éå† å‰åºéå† ï¼š æ ¹ã€å·¦ã€å³ â€” æ ¹ã€å·¦å­æ ‘ã€å³å­æ ‘ ï¼š 1ï¼Œ 2ï¼Œ 4ï¼Œ5ï¼Œ3ï¼Œ6 ä¸­åºéå† ï¼š å·¦ã€æ ¹ã€å³ â€” å·¦å­æ ‘ã€æ ¹ã€å³å­æ ‘ ï¼š 4ï¼Œ2ï¼Œ5ï¼Œ1ï¼Œ3ï¼Œ6 ååºéå† ï¼š å·¦ã€å³ã€æ ¹ â€” å·¦å­æ ‘ã€å³å­æ ‘ ã€æ ¹ ï¼š4ï¼Œ5ï¼Œ2ï¼Œ6ï¼Œ3ï¼Œ1 1.å…ˆåºéå†- root - å·¦ - å³ 123456void dfs(root) &#123; if(root) return ; f.push_back(roo-&gt;val); dfs(root-&gt;left); dfs(root-&gt;right);&#125; 2.ä¸­åºéå† å·¦ - root - å³ 123456void dfs(root) &#123; if(root) return ; dfs(root-&gt;left); f.push_back(root-&gt;val); dfs(root-&gt;right);&#125; 3.ååºéå† å·¦ - å³ - root 123456void dfs(root) &#123; if(root) return ; dfs(root-&gt;left); dfs(root-&gt;right); f.push_back(root-&gt;val);&#125; äºŒå‰æ ‘ - ä¸­å›½ç‰ˆ å®Œå…¨äºŒå‰ åªä¼šæœ‰ä¸€ä¸ªåº¦ä¸º 1 çš„èŠ‚ç‚¹ ç¼ºçœçš„åªä¼šæ˜¯å³å­©å­ æ»¡äºŒå‰æ ‘ æ¯ä¸€ä¸ªå±‚éƒ½ä¼šæ»¡æ»¡çš„ äºŒå‰æ ‘ - å›½é™…ç‰ˆ äºŒå‰æ ‘ - å®Œå…¨äºŒå‰æ ‘ ç¼–å·ä¸º i çš„å­èŠ‚ç‚¹ å·¦å­©å­ç¼–å· ï¼š2 * i å³å­©å­ç¼–å· ï¼š 2 * i + 1 å¯ä»¥ç”¨è¿ç»­ç©ºé—´å­˜å‚¨ï¼ˆæ•°ç»„ï¼‰å¯ä»¥ç”¨é¡ºåºè¡¨å®ç°ï¼(æ›´èŠ‚çœç©ºé—´) äºŒå‰æ ‘ - å¹¿ä¹‰è¡¨ å¹¿ä¹‰è¡¨å¦‚ä½•è¿˜åŸæˆä¸€ç§‘äºŒå‰æ ‘ æ¨èä½¿ç”¨ç¬¬ä¸€ç§å’Œç¬¬äºŒç§ äºŒå‰æ ‘ä»£ç å®ç° å¼•å…¥äºŒå‰æ’åºæ ‘çš„æ¦‚å¿µ å­˜åœ¨ä¸€è¯¾äºŒå‰æ ‘ä¸­ä¸‰å…ƒç»„ å¹¿ä¹‰è¡¨ä¸­ A, B, C A &gt; B &amp;&amp; A &lt; C (ç»´æŠ¤æ€§è´¨) ä¸­åºéå†å°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ— å‰ã€ä¸­ã€å éå†åºåˆ— å¾—åˆ°ä¸­åºå’Œä»»æ„ä¸¤ç§å°±å¯ä»¥è¿˜åŸå‡ºä¸€è¯¾æ ‘ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162/************************************************************************* &gt; File Name: äºŒå‰æ ‘.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ17æ—¥ æ˜ŸæœŸä¸€ 16æ—¶25åˆ†06ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;typedef struct Node &#123; int data; struct Node *lchild, *rchild;&#125; Node;typedef struct Tree &#123; Node *root; int length;&#125; Tree;Node *getNewNode(int val) &#123; // ä¸ºä»€ä¹ˆä½¿ç”¨calloc(å¯¹è±¡æ•°ç›®, æ¯ä¸ªå¯¹è±¡å¤§å°)å¯ä»¥è‡ªåŠ¨åˆå§‹åŒ–ã€‚ Node *p = (Node *)calloc(1, sizeof(Node)); p-&gt;data = val; // å¯çœå» // p-&gt;lchild = NULL; // p-&gt;rchild = NULL; return p;&#125;Tree *getNewTree() &#123; Tree *tree = (Tree *)malloc(sizeof(Tree)); tree-&gt;root = NULL; tree-&gt;length = 0; return tree;&#125;void clear_node(Node *root) &#123; if(root == NULL) return ; clear_node(root-&gt;lchild); clear_node(root-&gt;rchild); free(root); return ;&#125;void clear(Tree *tree) &#123; if(tree == NULL) return ; clear_node(tree-&gt;root); free(tree); return ;&#125;// A &gt; B &amp;&amp; A &lt; CNode *insert_node(Node *root, int val, int *falg) &#123; if(root == NULL) &#123; *falg = 1; return getNewNode(val); &#125; if(root-&gt;data == val) return root; if(root-&gt;data &lt; val) root-&gt;rchild = insert_node(root-&gt;rchild, val, falg); else root-&gt;lchild = insert_node(root-&gt;lchild, val,falg); return root;&#125;// è¿™æ’å…¥æ˜¯æ ¹æ®äºŒå‰æ’åºæ ‘ ä¸ä¼šæ’å…¥é‡å¤å…ƒç´  falg = æ ‡è®°void insert(Tree *tree, int val) &#123; if(tree == NULL) return ; int falg = 0; tree-&gt;root = insert_node(tree-&gt;root, val, &amp;falg); tree-&gt;length += falg; return ;&#125;// å‰åºvoid pre_order_node(Node *root) &#123; if(root == NULL) return ; printf(&quot;%d &quot;, root-&gt;data); pre_order_node(root-&gt;lchild); pre_order_node(root-&gt;rchild); return ;&#125;// å‰åº æ ¹ å·¦ å³void pre_order(Tree *tree) &#123; if(tree == NULL) return ; printf(&quot;pre_order : [&quot;); pre_order_node(tree-&gt;root); printf(&quot;]\\n&quot;); return ;&#125;// ä¸­åºvoid in_order_node(Node *root) &#123; if(root == NULL) return ; in_order_node(root-&gt;lchild); printf(&quot;%d &quot;, root-&gt;data); in_order_node(root-&gt;rchild); return ;&#125;// ä¸­åº å·¦ æ ¹ å³void in_order(Tree *tree) &#123; if(tree == NULL) return ; printf(&quot;in_order : [&quot;); in_order_node(tree-&gt;root); printf(&quot;]\\n&quot;); return ;&#125;// ååºvoid post_order_node(Node *root) &#123; if(root == NULL) return ; post_order_node(root-&gt;lchild); post_order_node(root-&gt;rchild); printf(&quot;%d &quot;, root-&gt;data); return ;&#125;// ååº å·¦ å³ æ ¹void post_order(Tree *tree) &#123; if(tree == NULL) return ; printf(&quot;post_order : [&quot;); post_order_node(tree-&gt;root); printf(&quot;]\\n&quot;); return ;&#125;void output_node(Node *root) &#123; if(root == NULL) return ; printf(&quot;%d &quot;, root-&gt;data); if(root-&gt;lchild == NULL &amp;&amp; root-&gt;rchild == NULL) return ; printf(&quot;(&quot;); output_node(root-&gt;lchild); printf(&quot;, &quot;); output_node(root-&gt;rchild); printf(&quot;)&quot;); return ;&#125;// å¹¿ä¹‰è¡¨æ‰“å°void output(Tree *tree) &#123; if(tree == NULL) return ; printf(&quot;tree(%d) : &quot;, tree-&gt;length); output_node(tree-&gt;root); return ;&#125;int main() &#123; srand(time(0)); #define MAX_OP 5 Tree *tree = getNewTree(); for(int i = 0; i &lt; MAX_OP; i++) &#123; int val = rand() % 100; insert(tree, val); output(tree), printf(&quot;\\n&quot;); &#125; pre_order(tree); in_order(tree); post_order(tree); #undef MAX_OP clear(tree); return 0;&#125;","categories":[{"name":"åŸºç¡€æ•°æ®ç»“æ„","slug":"åŸºç¡€æ•°æ®ç»“æ„","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"tags":[{"name":"æ ‘ä¸äºŒå‰æ ‘","slug":"æ ‘ä¸äºŒå‰æ ‘","permalink":"https://tutouwang.vercel.app/tags/%E6%A0%91%E4%B8%8E%E4%BA%8C%E5%8F%89%E6%A0%91/"}]},{"title":"æ ˆä¸é˜Ÿåˆ—","slug":"åŸºç¡€æ•°æ®ç»“æ„/æ ˆä¸é˜Ÿåˆ—","date":"2022-01-16T01:45:23.000Z","updated":"2022-05-22T15:05:06.437Z","comments":true,"path":"2022/01/16/åŸºç¡€æ•°æ®ç»“æ„/æ ˆä¸é˜Ÿåˆ—/","link":"","permalink":"https://tutouwang.vercel.app/2022/01/16/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97/","excerpt":"","text":"é˜Ÿåˆ— (FIFO)ç»“æ„æ“ä½œï¼šå°¾éƒ¨å…¥é˜Ÿã€å¤´éƒ¨å‡ºé˜Ÿï¼ˆæ’é˜Ÿåšæ ¸é…¸ï¼æ…ä¸€ä¸ªèµ°ä¸€ä¸ª å“ˆå“ˆå“ˆï¼ï¼‰ FIFO first in firas out : å…ˆè¿›å…ˆå‡º ç»“æ„å®šä¹‰ï¼š é˜Ÿåˆ—é•¿åº¦ (length) é˜Ÿå¤´ä½ç½® (head) é˜Ÿå°¾ä½ç½® (tail) ä»»æ„ç±»å‹å…ƒç´  (data_type) (int \\ char) è¿ç»­ç©ºé—´å­˜å‚¨ å¾ªç¯é˜Ÿåˆ—åœ¨é˜Ÿåˆ—ç»“æ„å®šä¹‰ä¹‹ä¸Š count è®¡æ•° (count) å¯åˆ¤æ–­æ»¡å’Œç©º tail % leng å‡ºé˜Ÿæ“ä½œ - å…¥é˜Ÿæ“ä½œ å‡ºé˜Ÿ (head +&#x3D; 1) å…¥é˜Ÿ (tail +&#x3D; 1) å‡æº¢å‡ºå‡ºé˜Ÿæ“ä½œ - å…¥é˜Ÿæ“ä½œ - å‡æº¢å‡ºä¼˜åŒ– å…¥é˜Ÿ (q-&gt;count !&#x3D; q-&gt;length) å½“å‰é˜Ÿåˆ—æ•°æ®æ€»é•¿åº¦ (count)ã€é˜Ÿåˆ—æ€»é•¿åº¦ (q-&gt;length) æ»¡è¶³æ¡ä»¶æƒ…å†µï¼š q-&gt;data[q-&gt;tail++] &#x3D; val; if(q-&gt;tail &#x3D;&#x3D; q-&gt;leng ) q-&gt;tail &#x3D; 0; q-&gt;count++; å‡ºé˜Ÿ empty(q) æ˜¯å¦å­˜åœ¨å…ƒç´  æ»¡è¶³æ¡ä»¶æƒ…å†µï¼š q-&gt;head++; if(q-&gt;head &#x3D;&#x3D; q-&gt;leng) q-&gt;head &#x3D; 0; q-&gt;countâ€“; é˜Ÿåˆ—ä»£ç æ¼”ç¤º - æ— å‡æº¢å‡ºä¼˜åŒ–123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596/************************************************************************* &gt; File Name: é˜Ÿåˆ— - å‡æº¢å‡º.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ16æ—¥ æ˜ŸæœŸæ—¥ 09æ—¶44åˆ†03ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;typedef struct Queue &#123; int *data; int head, tail; int length;&#125; Queue;Queue *init(int n) &#123; Queue *q = (Queue *)malloc(sizeof(Queue)); q-&gt;data = (int *)malloc(sizeof(int) * n); q-&gt;head = 0; q-&gt;tail = 0; q-&gt;length = n; return q;&#125;int push(Queue *q, int val) &#123; // ç©º if(q == NULL) return 0; // æ»¡ if(q-&gt;tail == q-&gt;length) return 0; q-&gt;data[q-&gt;tail++] = val; return 1;&#125;int empty(Queue *q) &#123; return q-&gt;tail == q-&gt;head;&#125;int pop(Queue *q) &#123; if(q == NULL) return 0; if(empty(q)) return 0; q-&gt;head++; return 1;&#125;int front(Queue *q) &#123; if(q == NULL) return -1; return q-&gt;data[q-&gt;head];&#125;void clear(Queue *q) &#123; if(q == NULL) return ; free(q-&gt;data); free(q); return ;&#125;void output(Queue *q) &#123; if(q == NULL) return ; printf(&quot;Queue(%d) [&quot;, q-&gt;length); for(int i = q-&gt;head; i &lt; q-&gt;tail; i++) &#123; i != q-&gt;head &amp;&amp; printf(&quot;,&quot;); printf(&quot;%d&quot;, q-&gt;data[i]); &#125; printf(&quot;]&quot;); printf(&quot;\\n&quot;); return ;&#125;int main() &#123; #define MAX_OP 20 srand(time(0)); Queue *q = init(MAX_OP); for(int i = 0; i &lt; MAX_OP; i++) &#123; // 0 1 2 int op = rand() % 3; int val = rand() % 100; switch(op) &#123; case 0: &#123; if(!empty(q)) &#123; printf(&quot;pop front from the Queue = %d \\n&quot;, pop(q)); &#125; &#125; break; case 1: &#123; printf(&quot;push %d to the Queue = %d\\n&quot;, val, push(q, val)); &#125; break; case 2: &#123; printf(&quot;front one from Queue = %d\\n&quot;, front(q)); &#125; break; &#125; output(q), printf(&quot;\\n&quot;); &#125; #undef MAX_OP clear(q); return 0;&#125; é˜Ÿåˆ—ä»£ç æ¼”ç¤º - å‡æº¢å‡ºä¼˜åŒ–123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102/************************************************************************* &gt; File Name: é˜Ÿåˆ— - å‡æº¢å‡ºä¼˜åŒ–.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ16æ—¥ æ˜ŸæœŸæ—¥ 09æ—¶44åˆ†03ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;typedef struct Queue &#123; int *data; int head, tail; int length; int count;&#125; Queue;Queue *init(int n) &#123; Queue *q = (Queue *)malloc(sizeof(Queue)); q-&gt;data = (int *)malloc(sizeof(int) * n); q-&gt;head = 0; q-&gt;tail = 0; q-&gt;count = 0; q-&gt;length = n; return q;&#125;int push(Queue *q, int val) &#123; // ç©º if(q == NULL) return 0; // æ»¡ if(q-&gt;length == q-&gt;count) return 0; q-&gt;data[q-&gt;tail++] = val; if(q-&gt;tail == q-&gt;length) q-&gt;tail = 0; q-&gt;count++; return 1;&#125;int empty(Queue *q) &#123; return q-&gt;count == 0;&#125;int pop(Queue *q) &#123; if(q == NULL) return 0; if(empty(q)) return 0; q-&gt;head++; if(q-&gt;head == q-&gt;length) q-&gt;head = 0; q-&gt;count--; return 1;&#125;int front(Queue *q) &#123; if(q == NULL) return -1; return q-&gt;data[q-&gt;head];&#125;void clear(Queue *q) &#123; if(q == NULL) return ; free(q-&gt;data); free(q); return ;&#125;void output(Queue *q) &#123; if(q == NULL) return ; printf(&quot;Queue(%d) [&quot;, q-&gt;length); for(int i = q-&gt;head, j = 0; j &lt; q-&gt;count; j++) &#123; j &amp;&amp; printf(&quot;,&quot;); printf(&quot;%d&quot;, q-&gt;data[(i + j) % q-&gt;length]); &#125; printf(&quot;]&quot;); printf(&quot;\\n&quot;); return ;&#125;int main() &#123; #define MAX_OP 20 srand(time(0)); Queue *q = init(4); for(int i = 0; i &lt; MAX_OP; i++) &#123; // 0 1 2 int op = rand() % 3; int val = rand() % 100; switch(op) &#123; case 0: &#123; if(!empty(q)) &#123; printf(&quot;pop front from the Queue = %d \\n&quot;, pop(q)); &#125; &#125; break; case 1: &#123; printf(&quot;push %d to the Queue = %d\\n&quot;, val, push(q, val)); &#125; break; case 2: &#123; printf(&quot;front one from Queue = %d\\n&quot;, front(q)); &#125; break; &#125; output(q), printf(&quot;\\n&quot;); &#125; #undef MAX_OP clear(q); return 0;&#125; é˜Ÿåˆ—ä»£ç æ¼”ç¤º - å‡æº¢å‡ºä¼˜åŒ– - è‡ªåŠ¨æ‰©å®¹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126/************************************************************************* &gt; File Name: æ ˆä¸é˜Ÿåˆ—.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ16æ—¥ æ˜ŸæœŸæ—¥ 09æ—¶44åˆ†03ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;typedef struct Queue &#123; int *data; int head, tail; int length; int count;&#125; Queue;Queue *init(int n) &#123; Queue *q = (Queue *)malloc(sizeof(Queue)); q-&gt;data = (int *)malloc(sizeof(int) * n); q-&gt;head = 0; q-&gt;tail = 0; q-&gt;count = 0; q-&gt;length = n; return q;&#125;int expand(Queue *q) &#123; int extr_size = q-&gt;length; int *p; while(extr_size) &#123; p = (int *)malloc(sizeof(int) * (extr_size + q-&gt;length)); // ä¸èƒ½ç”¨ realloc if(p != NULL) break; extr_size &gt;&gt;= 1; &#125; if(p == NULL) return 0; for(int i = q-&gt;head, j = 0; j &lt; q-&gt;count; j++) &#123; p[j] = q-&gt;data[(i + j) % q-&gt;length]; &#125; q-&gt;data = p; q-&gt;head = 0, q-&gt;tail = q-&gt;count; q-&gt;length += extr_size; return 1;&#125;int push(Queue *q, int val) &#123; // ç©º if(q == NULL) return 0; // æ»¡ if(q-&gt;length == q-&gt;count) &#123; if(!expand(q)) &#123; printf(&quot;è‡ªåŠ¨æ‰©å®¹å¤±è´¥ï¼\\n&quot;); return 0; &#125; printf(&quot;è‡ªåŠ¨æ‰©å®¹æˆåŠŸï¼\\n&quot;); &#125; q-&gt;data[q-&gt;tail++] = val; if(q-&gt;tail == q-&gt;length) q-&gt;tail = 0; q-&gt;count++; return 1;&#125;int empty(Queue *q) &#123; return q-&gt;count == 0;&#125;int pop(Queue *q) &#123; if(q == NULL) return 0; if(empty(q)) return 0; q-&gt;head++; if(q-&gt;head == q-&gt;length) q-&gt;head = 0; q-&gt;count--; return 1;&#125;int front(Queue *q) &#123; if(q == NULL) return -1; return q-&gt;data[q-&gt;head];&#125;void clear(Queue *q) &#123; if(q == NULL) return ; free(q-&gt;data); free(q); return ;&#125;void output(Queue *q) &#123; if(q == NULL) return ; printf(&quot;Queue(%d) [&quot;, q-&gt;length); for(int i = q-&gt;head, j = 0; j &lt; q-&gt;count; j++) &#123; j &amp;&amp; printf(&quot;,&quot;); printf(&quot;%d&quot;, q-&gt;data[(i + j) % q-&gt;length]); &#125; printf(&quot;]&quot;); printf(&quot;\\n&quot;); return ;&#125;int main() &#123; #define MAX_OP 20 srand(time(0)); Queue *q = init(1); for(int i = 0; i &lt; MAX_OP; i++) &#123; // 0 1 2 int op = rand() % 3; int val = rand() % 100; switch(op) &#123; case 0: &#123; if(!empty(q)) &#123; printf(&quot;pop front from the Queue = %d \\n&quot;, pop(q)); &#125; &#125; break; case 1: &#123; printf(&quot;push %d to the Queue = %d\\n&quot;, val, push(q, val)); &#125; break; case 2: &#123; printf(&quot;front one from Queue = %d\\n&quot;, front(q)); &#125; break; &#125; output(q), printf(&quot;\\n&quot;); &#125; #undef MAX_OP clear(q); return 0;&#125; æ ˆ (FILO) - (æ‰‹æªå¼¹å¤¹ğŸ”«)FILO first in last out : å…ˆè¿›åå‡º ç»“æ„å®šä¹‰ï¼š æ ˆå¤§å° (size) æ ˆé¡¶æŒ‡é’ˆ (top) æ ˆä¸­å…ƒç´  (data_type) è¿ç»­ç©ºé—´å­˜å‚¨ æ ˆä»£ç æ¼”ç¤º - è‡ªåŠ¨æ‰©å®¹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114/************************************************************************* &gt; File Name: æ ˆ.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ16æ—¥ æ˜ŸæœŸæ—¥ 17æ—¶20åˆ†08ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;typedef struct Stack &#123; int *data; int size; int top;&#125; Stack;Stack *init(int n) &#123; Stack *s = (Stack *) malloc(sizeof(Stack)); s-&gt;data = (int *)malloc(sizeof(int) * n); s-&gt;size = n; s-&gt;top = -1; return s;&#125;void clear(Stack *s) &#123; if(s == NULL) return ; free(s-&gt;data); free(s); return ;&#125;int expand(Stack *s) &#123; int extr_size = s-&gt;size; int *p; while(extr_size) &#123; p = (int *) realloc(s-&gt;data,sizeof(int) * ( extr_size * s-&gt;size)); if(p != NULL) break; extr_size &gt;&gt;= 1; &#125; if(p == NULL) return 0; s-&gt;data = p; s-&gt;size += extr_size; return 1;&#125;int push(Stack *s, int val) &#123; if(s == NULL) return 0; if(s-&gt;top == s-&gt;size - 1) &#123; if(!expand(s)) &#123; printf(&quot;è‡ªåŠ¨æ‰©å®¹å¤±è´¥ï¼\\n&quot;); return 0; &#125; printf(&quot;è‡ªå¸¦æ‰©å®¹æˆåŠŸï¼\\n&quot;); &#125; s-&gt;data[++(s-&gt;top)] = val; return 1;&#125;int empty(Stack *s) &#123; if(s == NULL) return 1; return s-&gt;top == -1;&#125;int pop(Stack *s) &#123; if(s == NULL) return 0; if(empty(s)) return 0; s-&gt;top--; return 1;&#125;int top(Stack *s) &#123; if(s == NULL) return 0; if(empty(s)) return 0; return s-&gt;data[s-&gt;top];&#125;void output(Stack *s) &#123; if(s == NULL) return ; printf(&quot;Stack(%d, %d) : [&quot;, s-&gt;size, s-&gt;top); for(int i = s-&gt;top; ~i; i--) &#123; i != s-&gt;top &amp;&amp; printf(&quot;, &quot;); printf(&quot;%d&quot;, s-&gt;data[i]); &#125; printf(&quot;]\\n&quot;); return ;&#125;int main() &#123; srand(time(0)); #define MAX_OP 20 Stack *s = init(1); for(int i = 0; i &lt; MAX_OP; i++) &#123; int val = rand() % 100; int op = rand() % 3; switch(op) &#123; case 0: &#123; if(s != NULL) printf(&quot;top %d from the Stack \\n&quot;, top(s)); &#125; break; case 1: &#123; printf(&quot;push %d to the Stack = %d\\n&quot;, val, push(s, val)); &#125; break; case 2: &#123; if(s != NULL) printf(&quot;pop %d from the Stack \\n&quot;, pop(s)); &#125; break; &#125; output(s), printf(&quot;\\n&quot;); &#125; #undef MAX_OP clear(s); return 0;&#125; é“¾æ ˆ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119/************************************************************************* &gt; File Name: é“¾æ ˆ.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ18æ—¥ æ˜ŸæœŸäºŒ 16æ—¶28åˆ†15 ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;typedef struct StackNode &#123; int data; StackNode *next;&#125; StackNode;typedef struct LinkStack &#123; StackNode *top; int length;&#125; LinkStack;StackNode *init_node(int val) &#123; StackNode *p = (StackNode * )malloc(sizeof(StackNode)); p-&gt;data = val; p-&gt;next = NULL; return p;&#125;LinkStack *init_stack() &#123; LinkStack *l = (LinkStack *)malloc(sizeof(LinkStack)); l-&gt;top = NULL; l-&gt;length = 0; return l;&#125;int empty(LinkStack *l) &#123; return l-&gt;top == NULL;&#125;int Stack_top(LinkStack *l) &#123; if(empty(l)) return -1; return l-&gt;top-&gt;data;&#125;int push(LinkStack *l, int val) &#123; if(l == NULL) return 0; StackNode *node = init_node(val); node-&gt;next = l-&gt;top; l-&gt;top = node; l-&gt;length += 1; return 1;&#125;void clear_node(StackNode *node) &#123; if(node == NULL) return ; free(node); return ;&#125;void clear(LinkStack *l) &#123; if(l == NULL) return ; StackNode *p = l-&gt;top, *t; while(p) &#123; t = p-&gt;next; clear_node(p); p = t; &#125; free(l); return ;&#125;int pop(LinkStack *l) &#123; if(l == NULL) return 0; if(empty(l)) return 0; StackNode *p = l-&gt;top; l-&gt;top = l-&gt;top-&gt;next; clear_node(p); l-&gt;length -= 1; return 1;&#125;void output_node(StackNode *p) &#123; if(p == NULL) return ; while(p) &#123; printf(&quot;%d &quot;, p-&gt;data); p = p-&gt;next; &#125; return ;&#125;void output(LinkStack *l) &#123; if(l == NULL) return ; printf(&quot;LinkStack(%d) : &quot;, l-&gt;length); output_node(l-&gt;top); printf(&quot;\\n&quot;); return ;&#125;int main() &#123; srand(time(0)); #define MAX_OP 20 LinkStack *s = init_stack(); for(int i = 0; i &lt; MAX_OP; i++) &#123; int op = rand() % 2; int val = rand() % 100; switch(op) &#123; case 0 : &#123; printf(&quot;pop %d from the LinkStack = &quot;, Stack_top(s)); printf(&quot;%d\\n&quot;, pop(s)); &#125; break; case 1 : &#123; printf(&quot;push %d to the form LinkStack = %d\\n&quot;, val, push(s, val)); &#125; break; &#125; output(s), printf(&quot;\\n&quot;); &#125; return 0;&#125; &#x2F;&#x2F; å¾…åš é“¾æ ˆã€é“¾é˜Ÿåˆ—ã€å¾ªç¯é˜Ÿåˆ—æ‰©å®¹ã€è¿˜æ²¡å®ç°","categories":[{"name":"åŸºç¡€æ•°æ®ç»“æ„","slug":"åŸºç¡€æ•°æ®ç»“æ„","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"tags":[{"name":"æ ˆä¸é˜Ÿåˆ—","slug":"æ ˆä¸é˜Ÿåˆ—","permalink":"https://tutouwang.vercel.app/tags/%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97/"}]},{"title":"é“¾è¡¨","slug":"åŸºç¡€æ•°æ®ç»“æ„/é“¾è¡¨","date":"2022-01-15T02:32:20.000Z","updated":"2022-05-22T15:05:06.433Z","comments":true,"path":"2022/01/15/åŸºç¡€æ•°æ®ç»“æ„/é“¾è¡¨/","link":"","permalink":"https://tutouwang.vercel.app/2022/01/15/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%93%BE%E8%A1%A8/","excerpt":"","text":"å•å‘é“¾è¡¨ç»“ç‚¹ç»„æˆéƒ¨åˆ† æ•°æ®åŸŸ - data æŒ‡é’ˆåŸŸ - next &#x2F; åç»§ æ’å…¥ - ç»“ç‚¹ æŠŠå¾…æ’å…¥æ•°æ®åˆ›å»ºæˆä¸€ä¸ªç»“ç‚¹ æŠŠå¾…æ’å…¥ç»“ç‚¹æŒ‡å‘æ–°å»ºç»“ç‚¹çš„next æŠŠå¾…æ’å…¥ç»“ç‚¹å‰ä¸€ä¸ªç»“ç‚¹çš„nextæŒ‡å‘æ–°å»ºç»“ç‚¹ ä»£ç æ¼”ç¤º - å•å‘é“¾è¡¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152/************************************************************************* &gt; File Name: é“¾è¡¨.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ15æ—¥ æ˜ŸæœŸå…­ 11æ—¶09åˆ†25ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;#define COLOR_HL(a, b) &quot;\\033[1;&quot; #b &quot;m&quot; a &quot;\\033[0m&quot;#define GREEN_HL(a) COLOR_HL(a, 32)typedef struct ListNode &#123; int data; struct ListNode *next;&#125; ListNode;typedef struct List &#123; // è™šæ‹Ÿå¤´ ListNode head; int length;&#125; List;ListNode *getNewNode(int);List *getLinkList();void clear_node(ListNode *);void clear(List *);int insert(List*, int, int);int erase(List *, int);void reverse(List *);ListNode* getNewNode(int val) &#123; // sizeof ListNode å¯ä»¥ä¸åŠ æ‹¬å· å¯èƒ½æ˜¯åœ¨cè¯­è¨€ä¸­ä¸è¡Œ ListNode *p = (ListNode *) malloc(sizeof (ListNode)); p-&gt;data = val; p-&gt;next = NULL; return p;&#125;List *getLinkList() &#123; List *l = (List *)malloc(sizeof(List)); l-&gt;head.next = NULL; l-&gt;length = 0; return l;&#125;void clear_node(ListNode *node) &#123; if(node == NULL) return ; free(node); return ;&#125;void clear(List * l) &#123; if(l == NULL) return ; ListNode *p = l-&gt;head.next; ListNode *t = NULL; if(p != NULL) &#123; t = p-&gt;next; clear_node(p); p = t; &#125; free(l); return ;&#125;int insert(List *l, int ind, int val) &#123; if(l == NULL) return 0; if(ind &lt; 0 || ind &gt; l-&gt;length) return 0; ListNode *p = getNewNode(val); ListNode *h = &amp;(l-&gt;head); while(ind--) h = h-&gt;next; p-&gt;next = h-&gt;next; h-&gt;next = p; l-&gt;length++; return 1;&#125;int erase(List *l, int ind) &#123; if(l == NULL) return 0; if(ind &lt; 0 || ind &gt;= l-&gt;length) return 0; ListNode *h = &amp;(l-&gt;head); // è¿™é‡Œè¯´æ˜ä¸€ä¸‹ä¸ºä»€ä¹ˆä¸ ç›´æ¥ h-&gt;next = h-&gt;next-&gt;next; // 1. è¿™ä¸ªæ“ä½œæ˜¯åˆæ³•çš„ ä½†æ˜¯è¦è¿™æ ·æ“ä½œçš„å°±ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ // 2. æ‰€æœ‰æˆ‘ä»¬è¿™é‡Œéœ€è¦ä¸€ä¸ªä¸´æ—¶å˜é‡ t æ¥å­˜å‚¨å¾…åˆ é™¤ç»“ç‚¹ ä¹‹åå¥½freeæ‰ ListNode *t = NULL; while(ind--) h = h-&gt;next; t = h-&gt;next; h-&gt;next = t-&gt;next; l-&gt;length--; clear_node(t); return 1;&#125;void output(List *l) &#123; if(l == NULL) return ; printf(&quot;List(%d) : &quot;, l-&gt;length); ListNode *h = l-&gt;head.next; while(h != NULL) &#123; printf(&quot;%d-&gt;&quot;, h-&gt;data); h = h-&gt;next; &#125; printf(&quot;NULL\\n\\n&quot;);&#125;void reverse(List *l) &#123; if(l == NULL) return ; ListNode *h = l-&gt;head.next; l-&gt;head.next = NULL; ListNode *t = NULL; while(h != NULL) &#123; t = h-&gt;next; t = l-&gt;head.next; l-&gt;head.next = h; h = t; &#125; return ;&#125;int main() &#123; srand(time(0)); // 20 æ¬¡æµ‹è¯• #define MAX_OP 20 List *l = getLinkList(); for(int i = 0; i &lt; MAX_OP; i++) &#123; int val = rand() % 100; int ind = rand() % (l-&gt;length + 3) - 1; // æƒ³å˜å¤§æ’å…¥æ¦‚ç‡ å¯ä»¥æŠŠ 2 å˜æˆ 4 // case 0 1 2 3 int op = rand() % 3; switch(op) &#123; case 0: &#123; printf(&quot;erase a iterm at %d from List = %d \\n&quot;, ind, erase(l, ind)); break; &#125; case 1: &#123; printf(&quot;insert %d at %d to List = %d \\n&quot;, val, ind, insert(l, ind, val)); break; &#125; case 2: &#123; printf(GREEN_HL(&quot;reverse the list ! \\n&quot;)); reverse(l); break; &#125; &#125; output(l); &#125; #undef MAX_OP clear(l); return 0;&#125; å•çº¿å¾ªç¯é“¾è¡¨ å¤´- -&gt; å°¾ åŒå‘é“¾è¡¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125/************************************************************************* &gt; File Name: åŒå‘é“¾è¡¨.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ18æ—¥ æ˜ŸæœŸäºŒ 17æ—¶05åˆ†55 ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;typedef struct Node &#123; int data; struct Node *next, *pre;&#125; Node;typedef struct Dlist &#123; Node head; int length;&#125; Dlist;Node *getNewNode(int val) &#123; Node *p = (Node *)malloc(sizeof(Node)); p-&gt;data = val; p-&gt;next = p-&gt;pre = NULL; return p;&#125;Dlist *init_list() &#123; Dlist *l = (Dlist *)malloc(sizeof(Dlist)); l-&gt;head.next = NULL; l-&gt;length = 0; return l;&#125;int insert(Dlist *l, int ind, int val) &#123; if(l == NULL) return 0; if(ind &lt; 0 || ind &gt; l-&gt;length) return 0; Node *p = &amp;(l-&gt;head), *node = getNewNode(val); while(ind--) p = p-&gt;next; node-&gt;next = p-&gt;next; p-&gt;next = node; node-&gt;pre = p; if(node-&gt;next != NULL) node-&gt;next-&gt;pre = node; l-&gt;length ++; return 1;&#125;void clear_node(Node *node) &#123; if(node == NULL) return ; free(node); return ;&#125;void clear(Dlist *l) &#123; if(l == NULL) return ; Node *p = l-&gt;head.next, *t; while(p) &#123; t = p-&gt;next; clear_node(p); p = t; &#125; free(l); return ;&#125;int erase(Dlist *l, int ind) &#123; if(l == NULL ) return 0; if(ind &lt; 0 || ind &gt;= l-&gt;length) return 0; Node *p= &amp;(l-&gt;head), *t; while(ind--) p = p-&gt;next; t = p-&gt;next; p-&gt;next = t-&gt;next; if(t-&gt;next != NULL) t-&gt;next-&gt;pre = p; clear_node(t); l-&gt;length--; return 1;&#125;void l_output(Dlist *l) &#123; if(l == NULL) return ; printf(&quot;L-Dlist(%d) : &quot;, l-&gt;length); for(Node *p = l-&gt;head.next; p; p = p-&gt;next) &#123; printf(&quot;%d-&gt;&quot;, p-&gt;data); &#125; printf(&quot;NULL\\n&quot;); return ;&#125;void r_output(Dlist *l) &#123; if(l == NULL) return ; printf(&quot;L-Dlist(%d) : &quot;, l-&gt;length); int ind = 0; Node *p = &amp;(l-&gt;head); while(ind++ != l-&gt;length) p = p-&gt;next; for(; p != &amp;(l-&gt;head); p = p-&gt;pre) &#123; printf(&quot;%d-&gt;&quot;, p-&gt;data); &#125; printf(&quot;head\\n&quot;); return ;&#125;int main() &#123; #define MAX_OP 20 Dlist *l = init_list(); for(int i = 0; i &lt; MAX_OP; i++) &#123; int val = rand() % 100; int ind = rand() % (l-&gt;length + 3) - 1; int op = rand() % 2; switch(op) &#123; case 0 : &#123; printf(&quot;erase a iterm at %d form lis = %d&quot;, ind, erase(l, ind)); &#125; break; case 1 : &#123; printf(&quot;insert %d at %d to Lis = %d\\n&quot;, val, ind, insert(l, ind, val)); &#125; break; &#125; l_output(l); r_output(l), printf(&quot;\\n&quot;); &#125; #undef MAX_OP clear(l); return 0;&#125; é“¾è¡¨ç¿»è½¬ åŠ›æ‰£206","categories":[{"name":"åŸºç¡€æ•°æ®ç»“æ„","slug":"åŸºç¡€æ•°æ®ç»“æ„","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"tags":[{"name":"é“¾è¡¨","slug":"é“¾è¡¨","permalink":"https://tutouwang.vercel.app/tags/%E9%93%BE%E8%A1%A8/"}]},{"title":"é¡ºåºè¡¨","slug":"åŸºç¡€æ•°æ®ç»“æ„/é¡ºåºè¡¨","date":"2022-01-14T03:11:14.000Z","updated":"2022-01-19T03:29:03.317Z","comments":true,"path":"2022/01/14/åŸºç¡€æ•°æ®ç»“æ„/é¡ºåºè¡¨/","link":"","permalink":"https://tutouwang.vercel.app/2022/01/14/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E9%A1%BA%E5%BA%8F%E8%A1%A8/","excerpt":"","text":"æ•°æ®ç»“æ„ &#x3D; ç»“æ„å®šä¹‰ + ç»“æ„æ“ä½œcppreference https://zh.cppreference.com/w/%E9%A6%96%E9%A1%B5 é¡ºåºè¡¨ - çº¿æ€§ç»“æ„ï¼šä¸€å¯¹ä¸€1.ä»€ä¹ˆæ˜¯é¡ºåºè¡¨ï¼Ÿ æ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„æ•°ç»„ ç»“æ„å®šä¹‰ï¼š ä¸€ç‰‡è¿ç»­å­˜å‚¨ç©ºé—´ å¯ä»¥å­˜å‚¨ä»»æ„ç±»å‹å€¼ (ç±»å‹éœ€è¦ä¸€è‡´ï¼Œintã€charã€ç»“æ„ä½“â€¦) (data_type) é¡ºåºè¡¨å¤§å° (size) é¡ºåºè¡¨ä»¥å­˜å‚¨ä¸ªæ•° (length) ç»“æ„æ“ä½œï¼š æ’å…¥å…ƒç´  (insert) å¦‚æœç¬¬ä¸€ä¸ªæ»¡è¶³åªæ‰§è¡Œ1ä¸æ»¡è¶³å¯ä»¥ç›´æ¥æ‰§è¡Œ 2 å¯ä»¥é€šè¿‡æ•´ç† ç›´æ¥ç”¨2æ¥å®ç° å¦‚æœä»£æ’å…¥æ•°æ®i ç­‰äºi == length é‚£ä¹ˆç›´æ¥åœ¨åé¢æ·»åŠ length++ åœ¨å¾…æ’å…¥ä½ç½®i æŠŠi + 1 åæ•°æ®å…¨éƒ¨å‘åç§»åŠ¨ä¸€ä½,å¹¶ä¸”legth++ åˆ é™¤å…ƒç´  (clear) å¾…åˆ ä½ç½® i æŠŠi + 1ä¹‹åä½ç½®çš„æ•°æ®å‘å‰ç§»åŠ¨ä¸€ä½ è¦†ç›–æ‰ length-- æ–°çŸ¥è¯†1234567891011121314151617181920212223242526272829#include &lt;stdlib.h&gt; // malloc éœ€è¦å¤´æ–‡ä»¶#include &lt;stdio.h&gt;#demine MAX_N 20/* å‡½æ•°ä¸­ // int arr[n + 1]; // æ ˆåŒº åœ¨Linuxç³»ç»Ÿä¸­åªæœ‰ 8M å¾ˆå° * malloc åŠ¨æ€å¼€è¾Ÿç©ºé—´ å¦‚æœä¸ç”¨éœ€è¦ä¸»åŠ¨é‡Šæ”¾ è¿”å›å€¼æ˜¯ä¸€å—è¿ç»­çš„åœ°å€(é€»è¾‘ä¸Š) void* * calloc å‚æ•°sizeä¸ºç”³è¯·åœ°å€çš„å•å…ƒå…ƒç´ é•¿åº¦ï¼Œnmembä¸ºå…ƒç´ ä¸ªæ•°ï¼Œå³åœ¨å†…å­˜ä¸­ç”³è¯·nmemb *sizeå­—èŠ‚å¤§å°çš„è¿ç»­åœ°å€ç©ºé—´ï¼Œ å¹¶èµ‹å€¼0-ç›¸å½“äºè‡ªå¸¦åˆå§‹åŒ–ï¼› * realloc ç»™ä¸€ä¸ªå·²ç»åˆ†é…äº†åœ°å€çš„æŒ‡é’ˆé‡æ–°åˆ†é…ç©ºé—´ï¼Œå‚æ•°pträ¸ºåŸæœ‰çš„ç©ºé—´åœ°å€ï¼Œsizeä¸ºé‡æ–°ç”³è¯·çš„åœ°å€é•¿åº¦ï¼› * free é‡Šæ”¾ **/int main() &#123; // å‡½æ•° malloc int *v = (int *) malloc(sizeof(int) * MAX_N); free(v); v = NULL; // å‡½æ•° calloc int *v1 = (int *) calloc(20, MAX_N * sizeof(int)); free(v); v = NULL; // å‡½æ•° realloc åœ¨ malloc åŸºç¡€ä¸Š // æ•°å­—æ•°é‡å¤§äºå½“å‰ malloc å¤§å° é‡æ–°åˆ†é… int *v = (int *) malloc(sizeof(int) * MAX_N); v = (int *) realloc (v, 5 * sizeof(int) * MAX_N); free(v); v = NULL; return 0;&#125; ä»£ç æ¼”ç¤º-é¡ºåºè¡¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113/************************************************************************* &gt; File Name: é¡ºåºè¡¨.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ14æ—¥ æ˜ŸæœŸäº” 12æ—¶03åˆ†03ç§’ ************************************************************************/#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#include &lt;time.h&gt;#define COLOR(a, b) &quot;\\033[&quot; #b &quot;m&quot; a&quot;\\033[0m&quot;#define GREEN(a) COLOR(a, 32)#define RED(a) COLOR(a, 31)typedef int Type;typedef struct Vector &#123; Type *data; int size, length;&#125; Vec;Vec *init(int n) &#123; // int arr[n + 1]; // æ ˆåŒº åœ¨Linuxç³»ç»Ÿä¸­åªæœ‰ 8M å¾ˆå° Vec *v = (Vec *)malloc(sizeof(Vec)); v-&gt;data = (Type *)malloc(sizeof(Type) * n); v-&gt;size = n; v-&gt;length = 0; return v;&#125;void clear(Vec *v) &#123; if(v == NULL) return ; // å¦‚æœå†…å­˜ç”³è¯·å¤±è´¥ free(v-&gt;data); // ç”³è¯·äº†2ä¸ªç©ºé—´ free(v); return ;&#125;// æ‰©å®¹int expand(Vec *v) &#123; int extr_size = v-&gt;size; Type *p; while(extr_size) &#123; p = (Type *)realloc(v-&gt;data, sizeof(Type) * (v-&gt;size + extr_size)); if(p != NULL) break; extr_size &gt;&gt;= 1; &#125; if(p == NULL) &#123; printf(RED(&quot;æ‰©å®¹å¤±è´¥\\n&quot;)); return 0; &#125; v-&gt;size += extr_size; v-&gt;data = p; printf(GREEN(&quot;å½“å‰å®¹é‡ : %d -- æ‰©å®¹åˆ° : %d\\n&quot;), v-&gt;size - extr_size, v-&gt;size); return 1;&#125;int insert(Vec *v, int ind, Type val) &#123; // ind éœ€è¦æ’å…¥çš„ä½ç½® if(v == NULL) return 0; if(ind &lt; 0 || ind &gt; v-&gt;length) return 0; if(v-&gt;length == v-&gt;size) &#123; if(!expand(v)) return 0; &#125; for(int i = v-&gt;length; i &gt; ind; i--) &#123; v-&gt;data[i] = v-&gt;data[i - 1]; &#125; v-&gt;data[ind] = val; v-&gt;length +=1; return 1;&#125;int erase(Vec *v, int ind) &#123; if(v == NULL) return 0; if(ind &lt; 0 || ind &gt;= v-&gt;length) return 0; for(int i = ind + 1; i &lt; v-&gt;length; i++) &#123; v-&gt;data[i - 1] = v-&gt;data[i]; &#125; v-&gt;length--; return 1;&#125;void output(Vec *v) &#123; if(v == NULL) return ; printf(&quot;Vector(%d) :[&quot;, v-&gt;length); for(int i = 0; i &lt; v-&gt;length; i++) &#123; i &amp;&amp; printf(&quot;,&quot;); printf(&quot;%d&quot;, v-&gt;data[i]); &#125; printf(&quot;]\\n&quot;); return ;&#125;int main() &#123; #define MAX_N 20 Vec *v = init(1); srand(time(0)); for(int i = 0; i &lt; MAX_N; i++) &#123; int op = rand() % 2; int ind = rand() % (v-&gt;length + 3) - 1; int val = rand() % 100; switch(op) &#123; case 0: printf(&quot;insert %d at %d to Vector = %d \\n&quot;, val, ind, insert(v, ind, val)); break; case 1: printf(&quot;erase a iterm at %d from Vector = %d\\n&quot;, ind, erase(v, ind)); break; &#125; output(v), printf(&quot;\\n&quot;); &#125; clear(v); #undef MAX_N return 0;&#125;","categories":[{"name":"åŸºç¡€æ•°æ®ç»“æ„","slug":"åŸºç¡€æ•°æ®ç»“æ„","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"}],"tags":[{"name":"é¡ºåºè¡¨","slug":"é¡ºåºè¡¨","permalink":"https://tutouwang.vercel.app/tags/%E9%A1%BA%E5%BA%8F%E8%A1%A8/"}]},{"title":"StackReverse","slug":"æœ‰è¶£çš„çŸ¥è¯†/StackReverse","date":"2022-01-06T02:14:14.000Z","updated":"2022-01-19T02:40:43.592Z","comments":true,"path":"2022/01/06/æœ‰è¶£çš„çŸ¥è¯†/StackReverse/","link":"","permalink":"https://tutouwang.vercel.app/2022/01/06/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/StackReverse/","excerpt":"","text":"Stack - ç¿»è½¬1234567891011121314151617181920212223242526272829303132333435363738394041424344/************************************************************************* &gt; File Name: stackRecerse.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2022å¹´01æœˆ06æ—¥ æ˜ŸæœŸå›› 10æ—¶15åˆ†16ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;stack&gt;using namespace std;void reverseStack(stack&lt;string&gt; &amp;f, string &amp;res) &#123; // å½“ç„¶è¿™é‡Œ string res ä¹Ÿå¯ä»¥å†™æˆå¦ä¸€ä¸ª æ ˆ è¿™é‡Œè¿™ä¸ªå¼•ç”¨ä¼šåŠ ç‚¹é€Ÿ if(!f.empty()) &#123; string t = f.top(); f.pop(); reverseStack(f, res); res += t + &quot; &quot;; &#125; return ;&#125;int main() &#123; stack&lt;string&gt; f, f1; f.push(&quot;a&quot;); f.push(&quot;b&quot;); f.push(&quot;c&quot;); f.push(&quot;d&quot;); f.push(&quot;e&quot;); f.push(&quot;f&quot;); f1 = f; while(!f1.empty()) &#123; cout &lt;&lt; f1.top() &lt;&lt; &quot; &quot;; f1.pop(); &#125; cout &lt;&lt; endl; string res; reverseStack(f, res); cout &lt;&lt; res; return 0;&#125;","categories":[{"name":"æœ‰è¶£çš„çŸ¥è¯†","slug":"æœ‰è¶£çš„çŸ¥è¯†","permalink":"https://tutouwang.vercel.app/categories/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[]},{"title":"å°†bè¿›åˆ¶æ•°è½¬åŒ–æˆåè¿›åˆ¶","slug":"æœ‰è¶£çš„çŸ¥è¯†/å°†bè¿›åˆ¶æ•°è½¬åŒ–æˆåè¿›åˆ¶","date":"2022-01-05T12:38:52.000Z","updated":"2022-01-19T02:42:48.862Z","comments":true,"path":"2022/01/05/æœ‰è¶£çš„çŸ¥è¯†/å°†bè¿›åˆ¶æ•°è½¬åŒ–æˆåè¿›åˆ¶/","link":"","permalink":"https://tutouwang.vercel.app/2022/01/05/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/%E5%B0%86b%E8%BF%9B%E5%88%B6%E6%95%B0%E8%BD%AC%E5%8C%96%E6%88%90%E5%8D%81%E8%BF%9B%E5%88%B6/","excerpt":"","text":"ç§¦ä¹éŸ¶ç®—æ³•-å°†bè¿›åˆ¶æ•°è½¬åŒ–æˆåè¿›åˆ¶æœ‰äºŒè¿›åˆ¶1010 å–å‡º ç¬¬ä¸€ä½ 1 1 * 2 + 0 &#x3D; 2 10 * 2 + 1 &#x3D;&#x3D; 2 * 2 + 1 10 &#x3D; 5 5 * 2 + 0 &#x3D; 10 æœ‰äºŒè¿›åˆ¶1010 äºŒè¿›åˆ¶è½¬æ¢æˆåè¿›åˆ¶:åŸºæ•°ä¹˜ä»¥æƒ,ç„¶åç›¸åŠ  $$ 1 * 2^3 + 0 * 2^2 + 1 * 2^1 + 0 * 2^0$$ $$ &#x3D; ((1 * 2 + 0) * 2 + 1 ) * 2 + 0$$ 123456int get(string s, b) &#123; int res = 0; for(auto c : s) res = res * b + c- &#x27;0&#x27;; return res;&#125;","categories":[{"name":"æœ‰è¶£çš„çŸ¥è¯†","slug":"æœ‰è¶£çš„çŸ¥è¯†","permalink":"https://tutouwang.vercel.app/categories/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/"}],"tags":[]},{"title":"ç»§æ‰¿_01","slug":"OOP/ç»§æ‰¿_01","date":"2021-11-19T11:50:51.000Z","updated":"2022-07-18T01:37:36.642Z","comments":true,"path":"2021/11/19/OOP/ç»§æ‰¿_01/","link":"","permalink":"https://tutouwang.vercel.app/2021/11/19/OOP/%E7%BB%A7%E6%89%BF_01/","excerpt":"","text":"ç»§æ‰¿123456789// æ´¾ç”Ÿç±» B åŸºç±» Aclass B&#123;public : &#125;;// class A : public B &#123; &#125;; ç»§æ‰¿æƒé™å½±å“çš„ä»€ä¹ˆ ç±»å¤–å¯¹äºè®¿é—®å­ç±»å¯¹ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•å’Œå±æ€§çš„è®¿é—®æƒé™ ç»§æ‰¿çš„å¥½å¤„ï¼š ä»£ç çš„å¤ç”¨æ€§ é€»è¾‘ä¸Šçš„é€’è¿›å…³ç³» 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172/************************************************************************* &gt; File Name: ç»§æ‰¿.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2021å¹´11æœˆ19æ—¥ æ˜ŸæœŸäº” 19æ—¶55åˆ†12ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123; // namesoace of x#define ENDS(x) &#125; // namespace of xBEGINS(test1)class Base &#123;public : int x;protected : int y;private : int z;&#125;;class public_Bace : public Base &#123;public : void main() &#123; x = 2; // ok, x public y = 2; // ok, y protected //z = 2; // no, z private &#125;&#125;;class protected_Bace : protected Base &#123;public : void main() &#123; x = 2; // ok, x public y = 2; // ok, y protected //z = 2; // no, z private &#125;&#125;;class private_Bace : private Base &#123;public : void main() &#123; x = 2; // ok, x public y = 2; // ok, y protected // z = 2; // no, z private &#125;&#125;;int main() &#123; public_Bace a; // éƒ½æ˜¯ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³• // ç»§æ‰¿ + x åœ¨çˆ¶ç±»ä¸­çš„æƒé™ = è¡¨ç°å‡ºæ¥çš„ a.x = 3; // ok, putback + public = public // a.y = 4; // no, public + protected = protected // a.z = 5; // no, public + private = private protected_Bace b; // b.x = 3; // no, protected + public = protected // b.y = 4; // no, protected + protected = protected // b.z = 5; // no, protected + private = private private_Bace c; // c.x = 3; // no, private + public = private // c.y = 4; // no, private + protected = private // c.z = 5; // no, private + private = private return 0;&#125;ENDS(test1)BEGINS(test2)class Base &#123;public : Base(string name) : class_name(name)&#123;&#125; int x; string class_name;private : int y;&#125;;class A : public Base &#123;public: A() : Base(&quot;class_A&quot;)&#123;&#125;&#125;;class B : public Base &#123;public: B() : Base(&quot;class_B&quot;)&#123;&#125;&#125;;class C : public Base &#123;public: C() : Base(&quot;class_C&quot;)&#123;&#125;&#125;;void func(Base &amp;b) &#123; cout &lt;&lt; &quot;nput class : &quot; &lt;&lt; b.class_name &lt;&lt; endl; return ;&#125;int main() &#123; A a; B b; C c; // éšå¼ç±»å‹è½¬æ¢ å­ç±» -&gt; çˆ¶ç±» func(a); func(b); func(c); cout &lt;&lt; &quot;sizeof(Base) = &quot; &lt;&lt; sizeof(Base) &lt;&lt; endl; cout &lt;&lt; &quot;sizeof(A) = &quot; &lt;&lt; sizeof(A) &lt;&lt; endl; return 0;&#125;ENDS(test2)BEGINS(test3)class Base &#123;public : Base(string name) : class_name(name)&#123;&#125; int x; string class_name;private : int y;&#125;;class A : public Base &#123;public: A() : Base(&quot;class_A&quot;)&#123;&#125;&#125;;class B : public Base &#123;public: B() : Base(&quot;class_B&quot;)&#123;&#125;&#125;;class C : public Base &#123;public: C() : Base(&quot;class_C&quot;)&#123;&#125;&#125;;void func(Base *b) &#123; cout &lt;&lt; &quot;nput class : &quot; &lt;&lt; b-&gt;class_name &lt;&lt; endl; return ;&#125;int main() &#123; A a; B b; C c; // å­ç±»çš„åœ°å€ä¹Ÿæ˜¯å¯ä»¥è½¬æ¢æˆçˆ¶ç±»çš„åœ°å€ func(&amp;a); func(&amp;b); func(&amp;c); return 0;&#125;ENDS(test3)int main() &#123; // test1::main(); // test2::main(); test3::main(); return 0;&#125; ç»§æ‰¿-æ„é€ å‡½æ•°æ„é€ é¡ºåºä¸ææ„é¡ºåºä¸€å®šæ˜¯ç›¸åçš„ å…ˆæ„é€ ä¸€å®šåææ„ å…ˆææ„å­ç±»çš„å±æ€§åææ„çˆ¶ç±»çš„å±æ€§ è±å½¢ç»§æ‰¿-å¤šç»§æ‰¿æ˜¯ä¸æ˜¯æ‰€æœ‰çš„é¢å‘å¯¹è±¡è¯­è¨€éƒ½å…è®¸å¤šç»§æ‰¿? ä¸æ˜¯ C#ã€java æ˜¯ä¸å…è®¸å¤šç»§æ‰¿çš„ A ( run () ) B ( run () ) C ( run () ) D ( run () ) è±å½¢ç»§æ‰¿æœ‰äº›åœºæ™¯æ˜¯å¯ä»¥ç¼–è¯‘é€šè¿‡ä½†æ˜¯è¾“å‡ºä¸ç¡®å®š å…ˆæ˜¯å®Œæˆ åŸºç±»æ„é€  åœ¨å®Œæˆ æ´¾ç”Ÿç±»æ„é€  æ‹·è´&amp;èµ‹å€¼â€“ç»§æ‰¿å…ˆå®Œæˆçˆ¶ç±»çš„æ‹·è´è¡Œä¸º åœ¨å®Œæˆå­ç±»çš„æ‹·è´è¡Œä¸º æ‹·è´è¡Œä¸º æ‹·è´æ„é€ å‡½æ•°ï¼šæ˜¾ç¤ºè°ƒç”¨çˆ¶ç±»æ‹·è´æ„é€  èµ‹å€¼è¿ç®—ç¬¦ï¼šæ˜¾ç¤ºè°ƒç”¨çˆ¶ç±»çš„èµ‹å€¼è¿ç®—å‡½æ•° 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232/************************************************************************* &gt; File Name: ç»§æ‰¿.cpp &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2021å¹´11æœˆ19æ—¥ æ˜ŸæœŸäº” 19æ—¶55åˆ†12ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;#define BEGINS(x) namespace x &#123; // namesoace of x#define ENDS(x) &#125; // namespace of xBEGINS(test1)class Base &#123;public : int x;protected : int y;private : int z;&#125;;class public_Bace : public Base &#123;public : void main() &#123; x = 2; // ok, x public y = 2; // ok, y protected //z = 2; // no, z private &#125;&#125;;class protected_Bace : protected Base &#123;public : void main() &#123; x = 2; // ok, x public y = 2; // ok, y protected //z = 2; // no, z private &#125;&#125;;class private_Bace : private Base &#123;public : void main() &#123; x = 2; // ok, x public y = 2; // ok, y protected // z = 2; // no, z private &#125;&#125;;int main() &#123; public_Bace a; // éƒ½æ˜¯ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³• // ç»§æ‰¿ + x åœ¨çˆ¶ç±»ä¸­çš„æƒé™ = è¡¨ç°å‡ºæ¥çš„ a.x = 3; // ok, putback + public = public // a.y = 4; // no, public + protected = protected // a.z = 5; // no, public + private = private protected_Bace b; // b.x = 3; // no, protected + public = protected // b.y = 4; // no, protected + protected = protected // b.z = 5; // no, protected + private = private private_Bace c; // c.x = 3; // no, private + public = private // c.y = 4; // no, private + protected = private // c.z = 5; // no, private + private = private return 0;&#125;ENDS(test1)BEGINS(test2)class Base &#123;public : Base(string name) : class_name(name)&#123;&#125; int x; string class_name;private : int y;&#125;;class A : public Base &#123;public: A() : Base(&quot;class_A&quot;)&#123;&#125;&#125;;class B : public Base &#123;public: B() : Base(&quot;class_B&quot;)&#123;&#125;&#125;;class C : public Base &#123;public: C() : Base(&quot;class_C&quot;)&#123;&#125;&#125;;void func(Base &amp;b) &#123; cout &lt;&lt; &quot;nput class : &quot; &lt;&lt; b.class_name &lt;&lt; endl; return ;&#125;int main() &#123; A a; B b; C c; // éšå¼ç±»å‹è½¬æ¢ å­ç±» -&gt; çˆ¶ç±» func(a); func(b); func(c); cout &lt;&lt; &quot;sizeof(Base) = &quot; &lt;&lt; sizeof(Base) &lt;&lt; endl; cout &lt;&lt; &quot;sizeof(A) = &quot; &lt;&lt; sizeof(A) &lt;&lt; endl; return 0;&#125;ENDS(test2)BEGINS(test3)class Base &#123;public : Base(string name) : class_name(name)&#123;&#125; int x; string class_name;private : int y;&#125;;class A : public Base &#123;public: A() : Base(&quot;class_A&quot;)&#123;&#125;&#125;;class B : public Base &#123;public: B() : Base(&quot;class_B&quot;)&#123;&#125;&#125;;class C : public Base &#123;public: C() : Base(&quot;class_C&quot;)&#123;&#125;&#125;;void func(Base *b) &#123; cout &lt;&lt; &quot;nput class : &quot; &lt;&lt; b-&gt;class_name &lt;&lt; endl; return ;&#125;int main() &#123; A a; B b; C c; // å­ç±»çš„åœ°å€ä¹Ÿæ˜¯å¯ä»¥è½¬æ¢æˆçˆ¶ç±»çš„åœ°å€ func(&amp;a); func(&amp;b); func(&amp;c); return 0;&#125;ENDS(test3)// çˆ¶ç±»å­ç±»çš„æ„é€ é¡ºåºBEGINS(test4)class ATTR_BASE &#123;public: ATTR_BASE(string name) : name(name)&#123; cout &lt;&lt; &quot;construct &quot; &lt;&lt; name &lt;&lt; endl; &#125; ~ATTR_BASE() &#123; cout &lt;&lt; &quot;destructor&quot; &lt;&lt; name &lt;&lt; endl; &#125; string name;&#125;;class ATTR1 : public ATTR_BASE&#123;public : ATTR1(string name) : ATTR_BASE(name) &#123;&#125;&#125;;class ATTR2 : public ATTR_BASE&#123;public : ATTR2(string name) : ATTR_BASE(name) &#123;&#125;&#125;;class Base &#123;public: Base() : attr1(&quot;attr1 in Base&quot;), attr2(&quot;attr2 in Base&quot;) &#123; cout &lt;&lt; &quot;Base constructor done&quot; &lt;&lt; endl; &#125; ~Base() &#123; cout &lt;&lt; &quot;Base destructor don&quot; &lt;&lt; endl; &#125;private : ATTR1 attr1; ATTR2 attr2;&#125;;// Base æ´¾ç”Ÿç±»class A : public Base &#123;public : A() : attr1(&quot;attr1 in A&quot;), attr2(&quot;attr2 in A&quot;)&#123; cout &lt;&lt; &quot;A constructor don&quot; &lt;&lt; endl; &#125; ~A() &#123; cout &lt;&lt; &quot;A destructor don&quot; &lt;&lt; endl; &#125;private : ATTR1 attr1; ATTR2 attr2;&#125;;int main() &#123; A a; return 0;&#125;ENDS(test4)int main() &#123; // test1::main(); // test2::main(); // test3::main(); test4::main(); return 0;&#125; æ„é€ ææ„é¡ºåº æ‹·è´æ„é€ æ‹·è´æ„é€ è¡Œä¸ºæ–¹å¼ ï¼š é»˜è®¤çš„ ï¼š é»˜è®¤è°ƒç”¨æ¯ä¸€ä¸ªå±æ€§çš„æ‹·è´å‡½æ•°é»˜è®¤çš„è°ƒç”¨çˆ¶ç±»çš„æ‹·è´å‡½æ•°","categories":[{"name":"OOP","slug":"OOP","permalink":"https://tutouwang.vercel.app/categories/OOP/"}],"tags":[]},{"title":"é™æ€é“¾æ¥åº“-é™æ€é“¾æ¥åº“","slug":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨/é™æ€é“¾æ¥åº“","date":"2021-11-14T11:49:27.000Z","updated":"2022-05-02T02:21:29.084Z","comments":true,"path":"2021/11/14/LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨/é™æ€é“¾æ¥åº“/","link":"","permalink":"https://tutouwang.vercel.app/2021/11/14/LInux-%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/%E9%9D%99%E6%80%81%E9%93%BE%E6%8E%A5%E5%BA%93/","excerpt":"","text":"å‘½åè§„åˆ™Linux Linux : libxxxx.so lib : å‰ç¼€ï¼ˆå›ºå®šï¼‰ xxxx : åº“çš„åå­—ï¼Œè‡ªå·±èµ· .so ï¼š åç¼€ï¼ˆå›ºå®šï¼‰ åœ¨Linuxä¸‹æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ Windwos Windows ï¼š libxxxx.dll é™æ€é“¾æ¥åº“æŠŠæ‰€æœ‰.cæ–‡ä»¶ è¿›è¡Œç¼–è¯‘ã€æ±‡ç¼– ä¸è¿›è¡Œé“¾æ¥ 1gcc -c test1.c test1.c test2.c test3.c r æ’å…¥ c åˆ›å»º så»ºç«‹ç´¢å¼• libåº“çš„åç§°.a 1ar rcs libcalc.a add.o sub.o mult.o gcc main.c -o app -I .&#x2F;å¤´æ–‡ä»¶ åŠ¨æ€åº“çš„åˆ¶ä½œgcc å¾—åˆ° .oæ–‡ä»¶ ï¼Œ å¾—åˆ°å’Œä½ç½®æ— å…³çš„ä»£ç  1gcc -c -fpic&#x2F;-fpIC a.c b.c gcc å¾—åˆ°åŠ¨æ€åº“ 1gcc -shared a.o b.o -o libxxxx.so","categories":[{"name":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨","slug":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨","permalink":"https://tutouwang.vercel.app/categories/LInux-%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"}],"tags":[{"name":"LInux","slug":"LInux","permalink":"https://tutouwang.vercel.app/tags/LInux/"}]},{"title":"Windowså­ç³»ç»Ÿæ­å»ºVim","slug":"æ•™ç¨‹/Windowså­ç³»ç»Ÿæ­å»ºVim","date":"2021-11-07T14:01:42.000Z","updated":"2022-05-22T15:15:04.323Z","comments":true,"path":"2021/11/07/æ•™ç¨‹/Windowså­ç³»ç»Ÿæ­å»ºVim/","link":"","permalink":"https://tutouwang.vercel.app/2021/11/07/%E6%95%99%E7%A8%8B/Windows%E5%AD%90%E7%B3%BB%E7%BB%9F%E6%90%AD%E5%BB%BAVim/","excerpt":"","text":"æ³¨æ„ï¼šæœ¬æ–‡æ¡£æ²¡æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·ä»”ç»†é˜…è¯»æ–‡æ¡£ï¼ŒæŒ‰æ­¥éª¤å®Œæˆï¼Œä¸è¦è½»æ˜“è´¨ç–‘æ–‡æ¡£çš„æ­£ç¡®æ€§ï¼›é‡åˆ°é—®é¢˜ï¼Œè¯·å¤§å®¶å…ˆä»”ç»†é˜…è¯»å±å¹•è¾“å‡ºï¼Œä¸è¦ç›´æ¥æé—® Windows10ä¸‹Linuxå­ç³»ç»Ÿ1ã€å¯ç”¨å¼€å‘è€…æ¨¡å¼è®¾ç½®-æ›´æ–°å’Œå®‰å…¨-é’ˆå¯¹å¼€å‘äººå‘˜-å¼€å‘äººå‘˜æ¨¡å¼-ç­‰å¾…å®Œæˆï¼ˆå¯ä»¥ä¸å¼€ï¼‰ 2ã€è®¾ç½®-ç¨‹åºå’ŒåŠŸèƒ½-å¯ç”¨æˆ–å…³é—­windowsåŠŸèƒ½-é€‚ç”¨äºLinuxçš„Windowså­ç³»ç»Ÿ-ç¡®å®š-ç­‰å¾…å®‰è£…å®Œæˆå¹¶é‡å¯PC 3ã€å®‰è£…Linuxæ‰“å¼€windows10çš„åº”ç”¨å•†åº—ï¼Œæœç´¢ubuntuï¼Œé€‰æ‹©éœ€è¦çš„ç‰ˆæœ¬ç‚¹å‡»-è·å– æˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯ubuntu20.04ï¼Œç‚¹å‡»è·å–åç­‰å¾…å®‰è£…å®Œæˆ 4ã€å¯åŠ¨åœ¨å¼€å§‹èœå•ä¸­æ‰¾åˆ°å®‰è£…çš„ubuntuç‚¹å‡»å¯åŠ¨ï¼Œç¬¬ä¸€æ¬¡å¯åŠ¨éœ€è¦è®¾ç½®ç”¨æˆ·å’Œå¯†ç æŒ‰ç…§æç¤ºè®¾ç½®å³å¯ã€‚ æ¢æºUbuntuç³»ç»Ÿè‡ªå¸¦çš„æºéƒ½æ˜¯å›½å¤–çš„ç½‘å€ï¼Œå›½å†…ç”¨æˆ·åœ¨ä½¿ç”¨çš„æ—¶å€™ç½‘é€Ÿæ¯”è¾ƒæ…¢ï¼Œè¿™æ ·æˆ‘ä»¬åœ¨ä¸‹è½½æˆ–æ›´æ–°è½¯ä»¶æ—¶å°±ä¼šååˆ†ç—›è‹¦ã€‚æ‰€ä»¥å¯¹äºä¸€ä¸ªæ–°æ‰‹æ¥è¯´ï¼Œç»™Ubuntuæ¢æºï¼Œå°±æ˜¾å¾—ååˆ†å¿…è¦äº†ã€‚ ä¸€ï¼šå¤‡ä»½åŸæ¥çš„æº1sudo cp &#x2F;etc&#x2F;apt&#x2F;sources.list &#x2F;etc&#x2F;apt&#x2F;sources_init.list æ³¨æ„ï¼Œæˆ‘ä»¬æ“ä½œUbuntuä¸€èˆ¬éƒ½æ˜¯è¦åœ¨ç®¡ç†å‘˜æƒé™ä¸‹è¿›è¡Œæ“ä½œçš„ï¼Œå°¤å…¶æ˜¯è¦å¯¹ç³»ç»Ÿæ–‡ä»¶è¿›è¡Œæ›´æ”¹ã€‚sudoå°±æ˜¯å‘Šè¯‰ç³»ç»Ÿä½¿ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œåé¢çš„å‘½ä»¤ã€‚æ•²å…¥å›è½¦åè¾“å…¥æˆ‘ä»¬ä¹‹å‰è®¾ç½®çš„å¯†ç å³å¯è¿è¡Œã€‚ äºŒï¼šæŸ¥çœ‹ç‰ˆæœ¬å·1lsb_release -a ä¸‰ï¼šæ›´æ¢é˜¿é‡Œæºè¿›å…¥æ›´æ¢é˜¿é‡Œæ•°æ®æº æ‰“å¼€ç½‘ç«™ æ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬æ•°æ®æº 12&#x2F;&#x2F;é˜¿é‡Œæºåœ°å€https:&#x2F;&#x2F;developer.aliyun.com&#x2F;mirror&#x2F;ubuntu?spm&#x3D;a2c6h.13651102.0.0.3e221b11dHF7v5 12&#x2F;&#x2F;æ¸…åæºåœ°å€https:&#x2F;&#x2F;mirrors.tuna.tsinghua.edu.cn&#x2F;help&#x2F;ubuntu&#x2F; 1sudo vim /etc/apt/sources.list å°†æ–‡ä»¶é‡Œçš„å†…å®¹å…¨éƒ¨åˆ é™¤ï¼ˆå¯åœ¨vimçš„å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œä½¿ç”¨ggå°†å…‰æ ‡ç§»åˆ°æ–‡ä»¶é¦–è¡Œï¼Œä½¿ç”¨dGå‘½ä»¤æ¸…ç©ºæ–‡ä»¶ï¼‰ï¼Œæ•²å…¥iè¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå°†ä¸‹é¢å†…å®¹ç²˜è´´(ctrl + shift + v)è¿›æ–‡ä»¶ ä¿æŒåŸæœ‰æ ¼å¼ç²˜è´´ï¼ˆesc å è¾“å…¥ï¼š set paste åœ¨æŒ‰ä¸‹ié”® ctrl + shift + vï¼‰ 123456789101112131415//é˜¿é‡Œæº20.04LTSdeb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse æŒ‰ESCï¼ˆæˆ–Ctrl + [ï¼‰é€€å‡ºç¼–è¾‘æ¨¡å¼è¿›å…¥å‘½ä»¤æ¨¡å¼ï¼Œç„¶åå…ˆæŒ‰â€œ:â€ï¼Œå†è¾“å…¥wqï¼Œæ•²å…¥å›è½¦ï¼Œæ–‡ä»¶å³å†™å…¥æˆåŠŸã€‚ ä¸‰ï¼šæ›´æ–°ç³»ç»Ÿè¾“å…¥ä¸‹åˆ—å‘½ä»¤ï¼Œç­‰å¾…æ›´æ–°å®Œæ¯•~ 12sudo apt-get updatesudo apt-get upgrade å®‰è£…ç³»ç»Ÿåçš„ç¯å¢ƒå‡†å¤‡é…ç½®sshd Vimçš„ç®€å•ä½¿ç”¨ï¼Œè¯·ç™¾åº¦ ä½¿ç”¨å‘½ä»¤sudo vim /etc/ssh/sshd_configæ‰“å¼€sshdçš„é…ç½®æ–‡ä»¶ï¼Œæ‰¾åˆ°ClientAliveIntervalå’ŒClientAliveCountMaxå¹¶å°†å…¶ä¿®æ”¹ä¸ºï¼ˆå¦‚æœæ²¡æœ‰ç›´æ¥æ·»åŠ å³å¯ï¼‰ï¼š60 3 é‡å¯sshdæœåŠ¡ 1sudo service sshd restart å¦‚æœä¸Šè¿°å‘½ä»¤æŠ¥é”™ï¼Œå¤§è‡´å†…å®¹ä¸ºsshdè¿™ä¸ªæœåŠ¡ä¸å­˜åœ¨çš„è¯ï¼Œå°±æ‰§è¡Œsudo service ssh restart ä»¥ä¸‹æ‰€æœ‰é…ç½®ï¼Œéƒ½æ˜¯ä¸ºäº†ä¼˜åŒ–ç»ˆç«¯ï¼Œæå‡ä½¿ç”¨æ•ˆç‡ï¼Œå¦‚æœä½ å·²ç»èƒ½ç‹¬ç«‹å¯¹bashï¼Œzshï¼Œvimç­‰è¿›è¡Œé…ç½®ä¼˜åŒ–ï¼Œå¯è‡ªè¡Œé€‰æ‹©æ–¹æ¡ˆï¼Œæ— éœ€å®Œå…¨æŒ‰ç…§è¿™ä¸ªæ–¹æ¡ˆ GitHubè®¿é—®ä¼˜åŒ– è¯·è¿›å…¥è¿™ä¸ªç½‘å€ï¼šç‚¹å‡»è¿™é‡Œ æ‰¾åˆ°å›¾ä¸­çš„IP1 åœ¨ä¸Šé¢çš„ç½‘ç«™ä¸Šæœç´¢github.com,æ‰¾åˆ°IP2 ä½¿ç”¨å‘½ä»¤sudo vim /etc/hostsæ‰“å¼€hostsæ–‡ä»¶ï¼Œå¹¶åœ¨æœ€ååŠ å…¥ä»¥ä¸‹ä¿¡æ¯ 12199.232.69.194 github.global.ssl.fastly.net140.82.112.4 github.com ä¿å­˜å¹¶é€€å‡º vim###é…ç½®Vimï¼ˆä½¿ç”¨æ–°æ·»åŠ çš„ç”¨æˆ·æ“ä½œï¼‰ åœ¨åç»­çš„å­¦ä¹ è¿‡ç¨‹ä¸­ï¼Œä¼šä½¿ç”¨vimå†™ç¨‹åº Vimé…ç½®æ¨è - ma6174ï¼ˆä¸ç”¨æ‰“å¼€è¿™ä¸ªå®˜æ–¹ç½‘ç«™ï¼‰ æ›´æ–°aptæºä¿¡æ¯ 1sudo apt update é…ç½®vimï¼Œæ‰§è¡Œä¸‹é¢å‘½ä»¤é…ç½®å®‰è£…vim sudo apt-get install git 12wget 47.93.11.51:88/install_vim.shbash install_vim.sh vimçš„é…ç½®å› ä¸ºéœ€è¦å®‰è£…è¾ƒå¤šæ’ä»¶ï¼Œæ‰€ä»¥éœ€è¦ç­‰è¾ƒå¤šæ—¶é—´ï¼Œå¤§å®¶è€å¿ƒç­‰å¾… å¦‚æœå‡ºç°æ‹¬å·ä¸èƒ½è‡ªåŠ¨åŒ¹é…æƒ…å†µé‡æ–°å®‰è£…ç¬¬äºŒæ¡å‘½ä»¤å³å¯ zshçš„å®‰è£…åŠé…ç½® å®‰è£…zsh &#x2F;&#x2F; ä¸»é¢˜ 1sudo apt install zsh ä¿®æ”¹é»˜è®¤shellä¸ºzsh &#x2F;&#x2F; åº”è¯¥æ˜¯ä¿®æ”¹ä¸»é¢˜ 1chsh -s /bin/zsh å®‰è£…oh-my-zsh &#x2F;&#x2F; 1234sh -c &quot;$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)&quot;##å¦‚æœä¸æˆåŠŸï¼Œè¯·æ‰§è¡Œä¸‹é¢ä¸¤æ¡å‘½ä»¤ï¼ŒæˆåŠŸäº†å°±ä¸éœ€è¦åšä¸‹é¢ä¸¤æ¡wget 47.93.11.51:88/install_zsh.shbash install_zsh.sh å®‰è£…zsh-syntax-highlighting &#x2F;&#x2F; ä»£ç é«˜äº®æ’ä»¶ 1git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting ä½¿ç”¨å‘½ä»¤vim .zshrcæ‰“å¼€.zshrcæ–‡ä»¶ï¼Œæ‰¾åˆ°plugins=()è¿™ä¸€è¡Œï¼Œå°†zsh-syntax-highlightingæ·»åŠ è¿›å» 1plugins=(git zsh-syntax-highlighting) å®‰è£…å…¶ä»–æ’ä»¶ 1234567##å‘½ä»¤è‡ªåŠ¨è¡¥å…¨æ’ä»¶mkdir ~/.oh-my-zsh/plugins/incrwget http://mimosa-pudica.net/src/incr-0.2.zsh -O ~/.oh-my-zsh/plugins/incr/incr.plugin.zsh##å‘½ä»¤è‡ªåŠ¨æ¨èï¼Œæ ¹æ®å†å²è®°å½•git clone https://github.com/zsh-users/zsh-autosuggestions $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-autosuggestions##ç›®å½•è‡ªåŠ¨è·³è½¬æ’ä»¶sudo apt install autojump ä½¿ç”¨å‘½ä»¤vim .zshrcï¼Œæ‰“å¼€ååœ¨æœ€åæ’å…¥ä»¥ä¸‹å†…å®¹ï¼š 123456789#è®¾ç½®ç»ˆç«¯é¢œè‰²ï¼Œæç¤ºç¬¦ï¼ŒåŠä¸Šä¸€æ¡æŒ‡ä»¤è¿”å›ç æç¤ºautoload -U colors &amp;&amp; colorsPROMPT=&quot;%&#123;$fg[red]%&#125;%n%&#123;$reset_color%&#125;@%&#123;$fg[blue]%&#125;%m %&#123;$fg[yellow]%&#125;%1~ %&#123;$reset_color%&#125;%# &quot;RPROMPT=&quot;[%&#123;$fg[yellow]%&#125;%?%&#123;$reset_color%&#125;]&quot;# Useful support for interacting with Terminal.app or other terminal programs[ -r &quot;/etc/zshrc_$TERM_PROGRAM&quot; ] &amp;&amp; . &quot;/etc/zshrc_$TERM_PROGRAM&quot;source ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions/zsh-autosuggestions.plugin.zshsource /usr/share/autojump/autojump.shsource ~/.oh-my-zsh/plugins/incr/incr*.zsh æ³¨æ„ï¼Œå¤åˆ¶åå¯èƒ½ä¼šå› ä¸ºVimçš„é…ç½®å¯¼è‡´ä»¥ä¸Šå†…å®¹è¢«æ³¨é‡Šï¼Œä¹Ÿå°±æ˜¯åœ¨å‰é¢åŠ ä¸Šäº†#,å¦‚æœæœ‰çš„è¯ï¼Œåˆ æ‰å°±è¡Œã€‚ ctagså®‰è£…ä¸é…ç½® ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ctags 1sudo apt install ctags æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ 1ctags -I __THROW -I __attribute_pure__ -I __nonnull -I __attribute__ --file-scope=yes --langmap=c:+.h --languages=c,c++ --links=yes --c-kinds=+p --c++-kinds=+p --fields=+iaS --extra=+q -f ~/.vim/systags /usr/include/* /usr/include/x86_64-linux-gnu/sys/* /usr/include/x86_64-linux-gnu/bits/* /usr/include/arpa/* ä½¿ç”¨å‘½ä»¤vim .vimrcç¼–è¾‘.vimrcï¼Œåœ¨æœ€åæ·»åŠ ä»¥ä¸‹å†…å®¹ 1set tags+=~/.vim/systags å®‰è£… gcc&#x2F;g++gcc å®‰è£…å‘½ä»¤ 1sudo apt install gcc g++ å®‰è£…å‘½ä»¤ 1sudo apt install g++ è¿è¡Œå„ç§ç¨‹åºçš„runè„šæœ¬æŸ¥çœ‹ç¯å¢ƒå˜é‡echo $PATHï¼Œåœ¨ä»»æ„ä¸€ä¸ªç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªrunæ–‡ä»¶ æˆ–è€…åœ¨ç¯å¢ƒå˜é‡é‡Œé¢æ–°å»ºä¸€ä¸ªæ–‡ä»¶ runæ–‡ä»¶å†…å®¹ 12345678910111213141516171819202122232425262728293031323334353637383940414243#!/bin/bash#0 c#1 c++#2 bash#3 pyCC=&quot;gcc -lm -Wall&quot;GPP=&quot;g++ -std=c++11 -Wall&quot;function CheckType() &#123; type=`echo $1 | tr &quot;.&quot; &quot;\\n&quot; | tail -1` if [[ $&#123;type&#125; == &quot;c&quot; ]]; then return 0 elif [[ $&#123;type&#125; == &quot;cpp&quot; ]]; then return 1 elif [[ $&#123;type&#125; == &quot;sh&quot; ]]; then return 2 elif [[ $&#123;type&#125; == &quot;py&quot; ]]; then return 3 else exit fi&#125;File=$1Args=($@)unset Args[0]OutFile=`echo $&#123;File&#125; | tr &quot;.&quot; &quot;\\n&quot; | head -1 | tr &quot;\\n&quot; &quot;.&quot;`CheckType $&#123;File&#125;re=$?if [[ $&#123;re&#125; -eq 0 ]]; then $&#123;CC&#125; $&#123;File&#125; -o $&#123;OutFile&#125;exe &amp;&amp; time ./$&#123;OutFile&#125;exe $&#123;Args[*]&#125; &amp;&amp; rm -f $&#123;OutFile&#125;exeelif [[ $&#123;re&#125; -eq 1 ]]; then $&#123;GPP&#125; $&#123;File&#125; -o $&#123;OutFile&#125;exe &amp;&amp; time ./$&#123;OutFile&#125;exe $&#123;Args[*]&#125;&amp;&amp; rm -f $&#123;OutFile&#125;exeelif [[ $&#123;re&#125; -eq 2 ]]; then time bash $&#123;File&#125; $&#123;Args[*]&#125;else time python3 $&#123;File&#125; $&#123;Args[*]&#125;fi ä¿å­˜åç»™runæ–‡ä»¶åŠ ä¸Šxæƒé™chmod +x run ä»¥åæ‰§è¡Œ.c .cpp .sh .pyæ–‡ä»¶æ—¶å°±ç›´æ¥run + æºæ–‡ä»¶åå°±å¯ä»¥äº† å®‰è£…glibc-doc ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… 1sudo apt install glibc-doc Vimä¸‹å­—ä½“ä¿®æ”¹windows + ræ‰“å¼€è¿è¡Œè¾“å…¥regedit æ‰¾åˆ°è¿™ä¸ª 1è®¡ç®—æœº\\HKEY_CURRENT_USER\\Console\\C:_Program Files_WindowsApps_CanonicalGroupLimited.Ubuntu20.04onWindows_2004.2021.825.0_x64__79rhkp1fndgsc_ubuntu2004.exe è¿™é‡Œæ˜¯æˆ‘æ›´æ–°ä¹‹åçš„ä¸ªä¸ªç‰ˆæœ¬(æ¯æ¬¡æ›´æ–°éƒ½éœ€è¦é‡æ–°è®¾ç½®ä¸€ä¸‹å­—ä½“) åœ¨å³ä¾§æ·»åŠ æ–°å»ºä¸€ä¸ªDwordé”® CodePageæ˜¯ç”¨æ¥è®¾ç½®ç»ˆç«¯ä»£ç é¡µçš„é€‰é¡¹ï¼Œ65001æ˜¯UTF-8ï¼Œè¿™ä¸ªå¯ä»¥æ”¯æŒå„ç§å­—ä½“ã€‚è¿™æ˜¯å…³é”®ã€‚ ä¿å­˜ï¼Œé€€å‡ºï¼Œå†æ¬¡æ‰“å¼€Ubuntuï¼Œå°±å¯ä»¥è‡ªç”±çš„è®¾ç½®å–œæ¬¢çš„å­—ä½“äº†ï¼Œè¿VIMä¹Ÿä¸€å¹¶æå®šã€‚ è‡ªå·±è®¾ç½®çš„æ˜¯ Cascadia Code å­—ä½“è¿˜æŒºå¥½ç”¨çš„~ ä¸­æ–‡è®¾ç½® - åœ¨20.04ä¸­å¥½åƒæ—¶æ•ˆäº†å› ä¸ºæ˜¯åˆšåˆšå®‰è£…çš„éœ€è¦æ›´æ–°ä¸‹è½¯ä»¶æºå’Œè½¯ä»¶åŒ…ï¼šæ—¶é—´å¯èƒ½ä¼šä¹…ç‚¹ 12sudo apt updatesudo apt upgrade å®‰è£…ä¸­æ–‡è¯­è¨€åŒ…1sudo apt install -y language-pack-zh-hans language-pack-zh-hans-base è®¾ç½®ä¸­æ–‡ç¯å¢ƒå˜é‡vi ~&#x2F;.profile 1åœ¨æœ«å°¾æ–°å¢ä¸€è¡Œ:LANG=zh_CN.UTF-8 è®¾ç½®å®Œæ¯•é‡æ–°æ‰“å¼€ubuntuå³å¯ï¼Œéƒ¨åˆ†è½¯ä»¶åŠå‘½ä»¤ä¸æ”¯æŒæ±‰åŒ–ä»¥lså‘½ä»¤ä¸ºä¾‹ï¼š ä¸­æ–‡è®¾ç½®å…ˆæŸ¥æ‰¾ä¸€ä¸‹æ˜¯å¦æœ‰apt-cache search language-pack-zh-hansä¸­æ–‡åŒ…ï¼Œå¦‚æœæ²¡æœ‰åˆ™éœ€è¦æ›´æ–°ä¸€ä¸‹è½¯ä»¶æºã€‚ ä¹‹åæ‰§è¡Œ sudo apt install -y language-pack-zh-hans å®‰è£…ä¸­æ–‡åŒ…ï¼Œéœ€è¦ç®¡ç†å‘˜å¯†ç ã€‚ ä¹‹åä¼šæç¤ºæ˜¯å¦å®‰è£…ï¼Œè¾“å…¥yã€‚ å®‰è£…å®Œæˆä¼šçœ‹åˆ°è¯­è¨€çš„åå­—ã€‚ sudo update-locale LANG&#x3D;zh_CN.UTF-8 ä¹‹åçœ‹ä¸€ä¸‹å¸®åŠ©ä¿¡æ¯ï¼Œå·²æœ‰ä¸­æ–‡æ˜¾ç¤ºäº†ã€‚ vimè®¾ç½®ä»£ç æ–‡ä»¶ä½œè€…ä¿¡æ¯ç­‰vim .vimrc åˆ›å»ºæ–‡ä»¶ vim test.c","categories":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://tutouwang.vercel.app/categories/%E6%95%99%E7%A8%8B/"}],"tags":[{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://tutouwang.vercel.app/tags/%E6%95%99%E7%A8%8B/"}]},{"title":"å¹¶æŸ¥é›†","slug":"åŸºç¡€ç®—æ³•/å¹¶æŸ¥é›†","date":"2021-03-27T10:08:15.000Z","updated":"2022-05-22T15:05:06.431Z","comments":true,"path":"2021/03/27/åŸºç¡€ç®—æ³•/å¹¶æŸ¥é›†/","link":"","permalink":"https://tutouwang.vercel.app/2021/03/27/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E5%B9%B6%E6%9F%A5%E9%9B%86/","excerpt":"","text":"å¹¶æŸ¥é›†(Union Find)å¹¶æŸ¥é›†ä¸»è¦è®²çš„å°±æ˜¯è¿é€šæ€§é—®é¢˜ æ¯”å¦‚è¯´ç°åœ¨å’±ä»¬è¿™ä¸ªæ•™å­¦æ¥¼ï¼Œè¢«å¤§æ°´æ·¹äº†æ¯”å¦‚è¯´ä¸€æ¥¼å’Œå…¶å®ƒæ¥¼å±‚éƒ½è¢«å¤§æ°´æ·¹äº†ï¼Œå°±å”¯ç‹¬å’±ä»¬æ•™å®¤æ²¡æœ‰ï¼Œå¯ä»¥è¯´æ˜ä»€ä¹ˆï¼Œå’±ä»¬ç°åœ¨å°±æ˜¯ä¸ä¸–éš”ç»äº†ï¼Œä¹‹åå‘¢å°±è¢«å¤§æ°´æ·¹æ²¡çš„ä¸ªä¸ªæ¥¼å±‚æ°´æ˜¯ä¸æ˜¯éƒ½å¯ä»¥æ¥å›èµ°ï¼Œæ¯”å¦‚æµåˆ°äº†å’±ä»¬æ•™å®¤æ°å·§å…³ä¸Šäº†ä»¬ï¼Œä¹‹åæ°´å°±æ²¡æµè¿›æ¥ï¼Œè¯´æ˜ä»€ä¹ˆå’±ä»¬ç°åœ¨æ˜¯ä¸è¿™ä¸ªæ•™å­¦æ¥¼çš„ä¸€é—´æ•™å®¤éƒ½ä¸è¿å›¾ï¼Œå¦‚æœè¯´å’±ä»¬ä¸éš”å£æ˜¯è¿é€šçš„ï¼Œè€Œä¸”å’±ä»¬éš”å£è¿˜è¢«å¤§æ°´æ·¹æ²¡äº†ï¼Œä½ è¯´å’±ä»¬è¿™å±‹æ˜¯ä¸æ˜¯ä¹Ÿè¢«æ·¹æ²¡äº†ã€‚ è‹¥æŸä¸ªå®¶æ—äººå‘˜è¿‡äºåºå¤§ï¼Œè¦åˆ¤æ–­ä¸¤ä¸ªæ˜¯å¦æ˜¯äº²æˆšï¼Œç¡®å®ä¸å®¹æ˜“ï¼Œç»™å‡ºæŸä¸ªäº²æˆšå…³ç³»å›¾ï¼Œæ±‚ä»»æ„ç»™å‡ºçš„ä¸¤ä¸ªäººæ˜¯å¦å…·æœ‰äº²æˆšå…³ç³»ã€‚ æ ‘å½¢ç»“æ„åœ¨æ˜¥ç§‹æˆ˜å›½æ—¶æœŸæœ‰å„ç§æ€æƒ³å­¦æœ¯æµæ´¾çš„æˆå°±ï¼Œæœ‰ å­”å­ å¢¨å­ è€å­ è¿˜æœ‰è°æ¯”å¦‚ éŸ©éå­ç­‰ç­‰ ä»æˆ‘ä»¬å½“å‰å›¾ä¸­æˆ‘é—¨å¯ä»¥çœ‹å‡ºæˆ‘ä»¬æœ‰å‡ ä¸ªè¿åŒå— æœ‰3ä¸ªå¯¹æŠŠ æ¯”å¦‚è¯´æœ‰ä¸€å¤© 2 å· è·Ÿ 4å· æ‰“èµ·æ¥æ¥äº†è¯´ä½ å†™çš„ä¸œè¥¿ä¸å¦‚æˆ‘ï¼Œï¼ˆè¿™é‡Œæœ‰ä¸ªè§„å®šå°±æ˜¯è¯´å¾’å¼Ÿä¸€å®šä¸å¦‚å¸ˆå‚…ï¼‰å®Œäº†4å·æœ¬èº«å°±æ˜¯1å·çš„å¾’å¼Ÿè‚¯å®šä¸å¦‚2å· å½“ç„¶ 4å·æœ‰å¸ˆå‚… ä¹‹å4å·æ‰¾åˆ°è‡ªå·±çš„å¸ˆå‚… 1 å· è¯´ä»Šå¤©æˆ‘è¢«äººç¾è¾±äº†å¯¹å§é‚£å½“å¸ˆå‚…çš„è‚¯å®šä¸èƒ½åšäº‹ä¸ç®¡å¯¹å§ ä¹‹åä¸€çœ‹ è¯´è¿™2å·ä¹Ÿè€å­”çš„å¾’å¼Ÿä¸€çœ‹è¿™ä¸æ˜¯å°±æ˜¯ä¸€ä¸ªå¸ˆå‚…ä¹ˆé‚£å°±åˆ«æŠ¥ä»‡äº† è®© 4 å· ç»™ 2 å·è®¤ä¸ªé”™ å°±æ˜¯ä¸‹æ¬¡çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥æ€ä¹ˆçœ‹ å°±æ˜¯å…ˆçŸ¥é“è‡ªå·±çš„å¸ˆå‚…çš„å¸ˆå‚…æ˜¯è°å¯¹å§ åœ¨çœ‹ä½ è¦æ‰¾çš„äººçš„å¸ˆå‚…çš„å¸ˆå‚…ï¼ˆè¿™å¸ˆå‚…å¯èƒ½è¿˜æœ‰å¸ˆå‚…æ‰€æœ‰è¦æ‰¾åˆ°æœ€åä¸€ä¸ªå¸ˆå‚…ï¼‰æ˜¯è° å¦‚æœä»–ä»¬æœ€åçš„å¸ˆå‚…éƒ½æ˜¯åŒä¸€ä¸ªäººé‚£ä»–ä»¬æ˜¯ä¸æ˜¯å°±æ˜¯ä¸€å®¶äººå±äºåŒä¸€ä¸ªå¸ˆå‚… ï¼ˆå¯ä»¥è¯´æ˜ä»–ä»¬åœ¨é€šä¸€è¯¾æ ‘ä¸­è¯´æ˜å®ƒä»¬ä¿©ä¸ªè¿åŒï¼‰ å…¶å®æˆ‘ä»¬åœ¨è¿åŒæ€§ä¸­ä¸åœ¨ä¹è¿æ¥æˆä»€ä¹ˆæ ·å­è°æ˜¯è°çš„å¾’å¼Ÿæˆ‘åªåœ¨ä¹ä»–ä»¬èƒ½ä¸èƒ½è¿åŒæœ€åçš„ç¥–å¸ˆï¼Œç¥–å¸ˆçˆ·æ˜¯ä¸æ˜¯åŒä¸€ä¸ªäºº è¿™ä¸ªä¸¤ä¸ªç‚¹èƒ½ä¸èƒ½è¿åŒ Ps æ¯”å¦‚ ï¼ˆ1ï¼Œ 2ï¼‰ ä¸ºä¸€ä¸ªé›†åˆ æ•°ç»„è¡¨ç¤º ï¼ˆ1ï¼Œ4ï¼‰ ï¼ˆ4ï¼Œ7ï¼‰ è¿™é‡Œä»£è¡¨ä¸¤ä¸ªé›†åˆé“¾æ¥ï¼Œè¿™é‡Œé“¾æ¥çš„æ—¶å€™ä½ è¯´æ˜¯ 1 å½“ä½œæ ¹èŠ‚ç‚¹è¿˜æ˜¯ 4 å½“ä½œæ ¹èŠ‚ç‚¹ 1 å…¶å®æ˜¯æ— æ‰€è°“çš„ã€‚è¿™é‡Œå‡å®š 4ä¸ºæ ¹èŠ‚ç‚¹æˆ‘ä»¬å¯ä»¥å¾—åˆ° å›¾ è¿™ä¸¤ä¸ªç‚¹çš„è¿åŒä¸ä»…ä»…æ˜¯ä¸¤ä¸ªç‚¹çš„è¿åŒè€Œæ˜¯ä¸¤ä¸ªé›†åˆçš„è¿é€šï¼ˆå…¶å®ä»–ä»¬éƒ½å±ä¸€ä¸ªä¸ªä½“ï¼‰ æ¯”å¦‚ä½ çš„çˆ¸å’Œä½ å¦ˆæ˜¯ä¸¤ä¸ªå§“å¯¹å§ ä»–ä»¬åœ¨æ²¡ç»“å©šä¹‹å‰æ˜¯ä»€ä¹ˆï¼Œä¸¤ä¸ªå®¶çš„äººå°±å¯ä»¥æ¯”ä½œä»€ä¹ˆä¸¤ä¸ªé›†åˆï¼Œä¹‹åä»–ä»¬ç»“å©šäº† æ˜¯åªæœ‰ä»–ä¿©æ˜¯ä¸€å®¶äººä¹ˆ ä¸æ˜¯å§ æ˜¯ä¸¤å®¶äººï¼Œè¿™å°±å¥½æ¯”æˆ‘ä»¬ä¸¤ä¸ªç‚¹çš„é“¾æ¥ã€‚ æˆ‘ä»¬å¯ä»¥ç”¨æ•°ç»„è¡¨ç¤º åˆå§‹åŒ–æŠŠæ¯ä¸ªç‚¹æ‰€åœ¨çš„é›†åˆåˆå§‹åŒ–ä¸ºå…¶è‡ªèº«ã€‚ åˆå§‹åŒ–åŠ ç²— ä¸ºä¸‹æ ‡ æˆ‘ä»¬å¯ä»¥ç”¨ç”¨å®ƒè‡ªèº«å»åˆå§‹åŒ–ï¼ˆä¹Ÿå¯ä»¥ç”¨ -1 ä½†æ˜¯åæœŸåœ¨ä¼˜åŒ–çš„æ—¶å€™ä¼šæœ‰ç‚¹éº»çƒ¦ï¼‰ 0 1 2 3 0 1 2 3 4 5 6 7 4 5 6 7 0 1 2 3 0 4 2 3 4 5 6 7 4 5 6 4 ç«èµ›é˜¶æ®µæˆ‘ä»¬ä¼šç”¨åˆ°çš„ç®—æ³• find union123456789101112131415161718// æœ´ç´ int find_root(int x, int parent[]) &#123; while (parent[x] != x) &#123; x = parent[x]; &#125; return x;&#125;// æŸ¥æ‰¾--ä¼˜åŒ–int find_root(int x, int parent[]) &#123; if (parent[x] != x) &#123; parent[x] = find_root(parent[x], parent); &#125; return parent[x]; // return x == parent[x] ? x : parent[x] = find_root(parent[x], parent); // return parent[x] = (x == parent[x] ? x : find_root(parent[x], parent));&#125; 123456789101112131415161718192021// åˆå¹¶void merge(int x, int y, int parent[], int height[]) &#123; int x_root = find_root(x, parent); int y_root = find_root(y, parent); if (x_root != y_root) &#123; // parent[x_root] = y_root; // åŸå…ˆä»£ç  // å®‰ç§©åˆå¹¶ if (height[x_root] == height[y_root]) &#123; parent[x_root] = y_root; // ç›¸ç­‰è®©yçš„æ ‘é«˜ +1 height[y_root]++; &#125; else if (height[x_root] &gt; height[y_root]) &#123; parent[y_root] = x_root; &#125; else &#123; parent[x_root] = y_root; &#125; return ; &#125; mark = 1; return ;&#125; è·¯å¾„å‹ç¼©â€“æŒ‰ç§©åˆå¹¶123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172#include&lt;iostream&gt;using namespace std;const int MAX_N = 1e4;int mark = 0;// åˆå§‹åŒ–void inital(int n, int parent[], int height[]) &#123; for (int i = 1; i &lt;= n; i++) &#123; parent[i] = i; height[i] = 0; &#125; return ;&#125;// è·¯å¾„å‹ç¼©int find_root(int x, int parent[]) &#123; if (parent[x] != x) &#123; parent[x] = find_root(parent[x], parent); &#125; return parent[x]; // &#125;// è·¯å¾„å‹ç¼©--éé€’å½’ç‰ˆint find_root1(int x, int parent[]) &#123; int k = x; while (parent[k] != k) &#123; k = parent[k]; &#125; while (x != k) &#123; int temp = parent[x]; parent[x] = k; x = temp; &#125; return k;&#125;void merge(int x, int y, int parent[], int height[]) &#123; int x_root = find_root(x, parent); int y_root = find_root(y, parent); if (x_root != y_root) &#123; // parent[x_root] = y_root; // åŸå…ˆä»£ç  // æŒ‰ç§©åˆå¹¶ if (height[x_root] == height[y_root]) &#123; parent[x_root] = y_root; // ç›¸ç­‰è®©yçš„æ ‘é«˜ +1 height[y_root]++; &#125; else if (height[x_root] &gt; height[y_root]) &#123; parent[y_root] = x_root; &#125; else &#123; parent[x_root] = y_root; &#125; return ; &#125; mark = 1; return ;&#125;int main() &#123; int n, m, parent[MAX_N + 10], height[MAX_N + 10]; cin &gt;&gt; n &gt;&gt; m; inital(m, parent, height); for (int i = 0; i &lt; n; i++) &#123; int x, y; cin &gt;&gt; x &gt;&gt; y; merge(x, y, parent, height); &#125; if (mark) cout &lt;&lt; &quot;æœ‰ç¯ï¼&quot; &lt;&lt; endl; else cout &lt;&lt; &quot;æ— ç¯ï¼&quot; &lt;&lt; endl; return 0;&#125; è·¯å¾„å‹ç¼©æ˜¯æ€ä¹ˆå®ç°çš„ æ£€æµ‹æ˜¯å¦å­˜åœ¨ç¯æˆ‘ä»¬å¦‚ä½•å»æ£€æµ‹ä¸€ä¸ªå›¾æ˜¯å¦å­˜åœ¨ç¯ç¯è·¯ å¦‚ä¸‹ æˆ‘ä»¬æœ‰ 0ï¸âƒ£ 1ï¸âƒ£ 2ï¸âƒ£ 3ï¸âƒ£ 4ï¸âƒ£ 5ï¸âƒ£ æŠŠæ¯ä¸ªç‚¹çœ‹æˆå•ä¸ªé›†åˆæ¯”å¦‚æˆ‘ä»¬ç›¸è¿ï¼ˆ0 ï¼Œ1ï¼‰ ï¼ˆ1ï¼Œ2ï¼‰ ï¼ˆ1ï¼Œ3ï¼‰ï¼ˆ2ï¼Œ4ï¼‰ï¼ˆ2ï¼Œ3ï¼‰ æˆ‘ä»¬åœ¨åˆå¹¶æ—¶å€™éœ€è¦å…ˆæŸ¥è¯¢ä¸€ä¸‹ä»–ä»¬æ˜¯å¦å±äºåŒä¸€é›†åˆï¼Œå¦‚æœä¸å±äºåŒä¸€é›†åˆæˆ‘æ‰èƒ½åˆå¹¶ï¼Œåä¹‹è¦æ˜¯å®ƒä»¬åœ¨åˆå¹¶å°±ä¼šæ„æˆå›è·¯ã€‚ å¦‚æœä¸è€ƒè™‘é“¾æ¥çº¢è‰²ä¸¤ç‚¹ï¼Œåˆå¹¶é›†åˆä¹‹åæ˜¯{0ï¼Œ1ï¼Œ2ï¼Œ3ï¼Œ4} æˆ‘ä»¬å¯ä»¥å¾—åˆ°ç«™åœ¨ä»»æ„ç‚¹åˆ°è¾¾å¦ä¸€ä»»æ„ç‚¹ã€‚ä¸æ„æˆç¯ å¦‚æœè¯´æˆ‘ä»¬åœ¨å·²è¿æ¥ä¸­ä»»æ„é€‰æ‹©ä¸¤ä¸ªå»é“¾æ¥ä»–ä¸€å®šä¼šæˆç¯å¯¹å§ã€‚ğŸ”¶ æ¯”å¦‚çº¢è‰²ä¸¤ç‚¹é“¾æ¥ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° 1ï¼Œ 2ï¼Œ 3 ç‚¹å½¢æˆäº†ç¯ã€‚ å½¢æˆç¯è·¯ æˆ‘ä»¬æ€ä¹ˆçŸ¥é“ä»–æ˜¯æˆç¯äº†å‘¢æˆ‘ä»¬æŠŠ 1 å½“åšæ ¹ç»“ç‚¹ ï¼Œ0ï¼Œ 2ï¼Œ4ï¼Œ3 éƒ½å±äº 1 çš„å­©å­æˆ–è€…æ˜¯å­™å­ å½“ä½ å»é“¾æ¥ ï¼ˆ2ï¼Œ 3ï¼‰æ—¶å€™ä½ ä¼šå‘ç°ä»–ä»¬éƒ½å±äº 1 ä¸‹å°±å¦‚æˆ‘ä»¬åˆšæ‰æ‰€è¯´ ğŸ”¶å› ä¸ºæˆ‘ä»¬çŸ¥é“ä¸¤ä¸ªé›†åˆåœ¨åˆå¹¶çš„æ—¶å€™ä¸€å®šä¼šå…ˆå»æ‰¾æ ¹èŠ‚ç‚¹ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#include&lt;iostream&gt;using namespace std;const int MAX_N = 1e4;int mark = 0;int parent[MAX_N + 10];// åˆå§‹åŒ–void inital(int n, int parent[]) &#123; for (int i = 1; i &lt;= n; i++) &#123; parent[i] = i; &#125; return ;&#125;int find_root(int x, int parent[]) &#123; if (parent[x] != x) &#123; parent[x] = find_root(parent[x], parent); &#125; return parent[x];&#125;void merge(int x, int y, int parent[]) &#123; int x_root = find_root(x, parent); int y_root = find_root(y, parent); if (x_root != y_root) &#123; parent[x_root] = y_root; return ; &#125; mark = 1; return ;&#125;int main() &#123; int n, m; // ç»„æ•° æœ€å¤§å€¼ cin &gt;&gt; n &gt;&gt; m; inital(m, parent); for (int i = 0; i &lt; n; i++) &#123; int x, y; cin &gt;&gt; x &gt;&gt; y; merge(x, y, parent); &#125; if (mark) cout &lt;&lt; &quot;æœ‰ç¯ï¼&quot; &lt;&lt; endl; else cout &lt;&lt; &quot;æ— ç¯ï¼&quot; &lt;&lt; endl; return 0;&#125; å¹¶æŸ¥é›†â€“æ•°æ®ç»“æ„å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#include &lt;stdlib.h&gt;#include &lt;stdio.h&gt;struct UnionSet &#123; int *parent;&#125;;// åˆå§‹åŒ–UnionSet *init(int n) &#123; UnionSet *U = (UnionSet *)malloc(sizeof(UnionSet)); U-&gt;parent = (int *)malloc(sizeof(int) * (n + 1)); for (int i = 1; i &lt;= n; i++) &#123; U-&gt;parent[i] = i; &#125; return U;&#125;int find_root(UnionSet *U, int x) &#123; if (U-&gt;parent[x] != x) &#123; return find_root(U, U-&gt;parent[x]); &#125; return x;&#125;void merge(UnionSet *U, int x, int y) &#123; int x_root = find_root(U, x); int y_root = find_root(U, y); if (x_root != y_root) &#123; U-&gt;parent[x_root] = y_root; &#125; return ;&#125;int main() &#123; int n, m; scanf(&quot;%d%d&quot;, &amp;n, &amp;m); UnionSet *U = init(n); // è¿›è¡Œ M æ¬¡æ“ä½œ for (int i = 1; i &lt;= m; i++) &#123; int a, b, c; scanf(&quot;%d%d%d&quot;, &amp;a, &amp;b, &amp;c); switch(a) &#123; case 1: merge(U, b, c); break; // åˆå¹¶æ“ä½œ case 2: printf(&quot;%s\\n&quot;, find_root(U, b) == find_root(U, c) ? &quot;Yes&quot; : &quot;No&quot;); &#125; &#125; return 0;&#125; ä¾‹é¢˜â€“é¢˜è§£æµ·è´¼ #71 æœ‹å‹åœˆ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465/************************************************************************* &gt; File Name: æµ·è´¼_#71å¹¶æŸ¥é›†_è·¯å¾„å‹ç¼©ä¼˜åŒ–.cpp &gt; Author: &gt; Mail: &gt; Created Time: 2021å¹´01æœˆ18æ—¥ æ˜ŸæœŸä¸€ 15æ—¶33åˆ†00ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;cstdio&gt;using namespace std;const int MAX_N = 1e4;// åˆå§‹åŒ–void initialization(int n, int parent[]) &#123; for (int i = 1; i &lt;= n; i++) &#123; parent[i] = i; &#125; return ;&#125;// è·¯å¾„å‹ç¼©int find_root(int x, int parent[]) &#123; if (parent[x] != x) &#123; parent[x] = find_root(parent[x], parent); &#125; return parent[x];&#125;// æœ´ç´ ç®—æ³•int find_root1(int x, int parent[]) &#123; while (parent[x] != x) &#123; x = parent[x]; &#125; return x;&#125;void merge(int x, int y, int parent[]) &#123; int x_root = find_root(x, parent); int y_root = find_root(y, parent); if (x_root != y_root) &#123; parent[x_root] = y_root; &#125; return ;&#125;int main() &#123; int n, m, parent[MAX_N + 10]; cin &gt;&gt; n &gt;&gt; m; initialization(n, parent); for (int i = 0; i &lt; m; i++) &#123; int a, b, c; scanf(&quot;%d%d%d&quot;, &amp;a, &amp;b, &amp;c); if (a == 1) &#123; // æ·»åŠ  merge(b, c, parent); &#125; else &#123; // æŸ¥çœ‹ if (find_root(b, parent) - find_root(c, parent)) &#123; printf(&quot;No\\n&quot;); &#125; else printf(&quot;Yes\\n&quot;); &#125; &#125; return 0;&#125; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576/************************************************************************* &gt; File Name: æµ·è´¼_#71å¹¶æŸ¥é›†_è·¯å¾„å‹ç¼©_å®‰ç§©åˆå¹¶_ä¼˜åŒ–.cpp &gt; Author: &gt; Mail: &gt; Created Time: 2021å¹´01æœˆ18æ—¥ æ˜ŸæœŸä¸€ 21æ—¶33åˆ†00ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;cstdio&gt;using namespace std;const int MAX_N = 1e4;// åˆå§‹åŒ– void initialization(int n, int parent[], int height[]) &#123; for (int i = 1; i &lt;= n; i++) &#123; parent[i] = i; // å¼€å§‹æ ‘é«˜ä¸º 0 height[i] = 0; &#125; return ;&#125;// è·¯å¾„å‹ç¼©int find_root(int x, int parent[]) &#123; if (parent[x] != x) &#123; parent[x] = find_root(parent[x], parent); &#125; return parent[x];&#125;// æœ´ç´ ç®—æ³•int find_root1(int x, int parent[]) &#123; while (parent[x] != x) &#123; x = parent[x]; &#125; return x;&#125;void merge(int x, int y, int parent[], int height[]) &#123; int x_root = find_root(x, parent); int y_root = find_root(y, parent); if (x_root != y_root) &#123; if (height[x_root] == height[y_root]) &#123; parent[x_root] = y_root; // ç›¸ç­‰è®©yçš„æ ‘é«˜ +1 height[y_root]++; &#125; else if (height[x_root] &gt; height[y_root]) &#123; parent[y_root] = x_root; &#125; else &#123; parent[x_root] = y_root; &#125; &#125; return ;&#125;int main() &#123; int n, m, parent[MAX_N + 10], height[MAX_N + 10]; cin &gt;&gt; n &gt;&gt; m; initialization(n, parent, height); for (int i = 0; i &lt; m; i++) &#123; int a, b, c; scanf(&quot;%d%d%d&quot;, &amp;a, &amp;b, &amp;c); if (a == 1) &#123; // æ·»åŠ  merge(b, c, parent, height); &#125; else &#123; // æŸ¥çœ‹ if (find_root(b, parent) - find_root(c, parent)) &#123; printf(&quot;No\\n&quot;); &#125; else printf(&quot;Yes\\n&quot;); &#125; &#125; return 0;&#125; æ´›è°· P1551 äº²æˆš123456789101112131415161718192021222324252627282930313233343536373839404142434445464748#include&lt;iostream&gt;using namespace std;const int MAX_N = 1e4;int arr[MAX_N];void initial(int n) &#123; for (int i = 1; i &lt;= n; i++) &#123; arr[i] = i; &#125;&#125;int find(int x) &#123; if (arr[x] != x) &#123; x = find(arr[x]); &#125; return arr[x];&#125;void merge(int x, int y) &#123; int x_root = find(x); int y_root = find(y); if (x_root != y_root) &#123; arr[x_root] = y_root; &#125; return ;&#125;int main() &#123; int n, m, p; cin &gt;&gt; n &gt;&gt; m &gt;&gt; p; initial(n); while (m--) &#123; int mi, mj; cin &gt;&gt; mi &gt;&gt; mj; merge(mi, mj); &#125; while (p--) &#123; int mi, mj; cin &gt;&gt; mi &gt;&gt; mj; if (find(mi) == find(mj)) &#123; cout &lt;&lt; &quot;Yes&quot; &lt;&lt; endl; &#125; else &#123; cout &lt;&lt; &quot;No&quot; &lt;&lt; endl; &#125; &#125; return 0;&#125;","categories":[{"name":"åŸºç¡€ç®—æ³•","slug":"åŸºç¡€ç®—æ³•","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"å¹¶æŸ¥é›†","slug":"å¹¶æŸ¥é›†","permalink":"https://tutouwang.vercel.app/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/"},{"name":"åŸºç¡€ç®—æ³•","slug":"åŸºç¡€ç®—æ³•","permalink":"https://tutouwang.vercel.app/tags/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/"}]},{"title":"è“æ¡¥æ¯çœèµ›_Bç»„ç»„_åå±Š","slug":"è“æ¡¥æ¯é¢˜è§£/åå±ŠBç»„-çœŸé¢˜/è“æ¡¥æ¯çœèµ›_Bç»„ç»„_åå±Š","date":"2021-03-21T09:07:43.000Z","updated":"2022-01-19T02:47:14.198Z","comments":true,"path":"2021/03/21/è“æ¡¥æ¯é¢˜è§£/åå±ŠBç»„-çœŸé¢˜/è“æ¡¥æ¯çœèµ›_Bç»„ç»„_åå±Š/","link":"","permalink":"https://tutouwang.vercel.app/2021/03/21/%E8%93%9D%E6%A1%A5%E6%9D%AF%E9%A2%98%E8%A7%A3/%E5%8D%81%E5%B1%8AB%E7%BB%84-%E7%9C%9F%E9%A2%98/%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%9C%81%E8%B5%9B_B%E7%BB%84%E7%BB%84_%E5%8D%81%E5%B1%8A/","excerpt":"","text":"è¯•é¢˜A:å¹³æ–¹åºåˆ—","categories":[{"name":"è“æ¡¥æ¯å†å±ŠçœŸé¢˜","slug":"è“æ¡¥æ¯å†å±ŠçœŸé¢˜","permalink":"https://tutouwang.vercel.app/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%8E%86%E5%B1%8A%E7%9C%9F%E9%A2%98/"}],"tags":[{"name":"è“æ¡¥æ¯","slug":"è“æ¡¥æ¯","permalink":"https://tutouwang.vercel.app/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF/"}]},{"title":"æ’åºåˆé›†","slug":"åŸºç¡€ç®—æ³•/æ’åºåˆé›†","date":"2021-03-14T01:48:14.000Z","updated":"2021-04-03T07:38:30.808Z","comments":true,"path":"2021/03/14/åŸºç¡€ç®—æ³•/æ’åºåˆé›†/","link":"","permalink":"https://tutouwang.vercel.app/2021/03/14/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E5%90%88%E9%9B%86/","excerpt":"","text":"æ€ä¹ˆåŒºåˆ†ç¨³å®šè¿˜æ˜¯ä¸ç¨³å®šå¦‚æœåœ¨åŸåºåˆ—é‡Œé¢ä¸¤ä¸ªæ•°æ˜¯ç›¸åŒçš„ï¼Œé‚£ä¹ˆæ’å®Œåºä½ç½®æ²¡æœ‰å‘ç”Ÿå˜åŒ–é‚£ä¹ˆ è¿™ä¸ªæ’åºå°±æ˜¯ç¨³å®šçš„ï¼Œå¦‚æœå‘ç”Ÿå˜åŒ–é‚£ä¹ˆè¿™ä¸ªæ’åºå°±æ˜¯ä¸ç¨³å®šçš„ã€‚ å†’æ³¡æ’åºï¼ˆç¨³å®šï¼‰ è€ƒè™‘å†’æ³¡æ’åºçš„å¤æ‚åº¦ï¼Œå¯¹äºæ‹¥æœ‰Nä¸ªå­—æ¯çš„å­—ç¬¦ä¸²ï¼Œæœ€å¤šéœ€è¦äº¤æ¢ N*(N - 1) &#x2F; 2 æ¬¡ï¼ˆå®Œå…¨é€†åºï¼‰ å¿«é€Ÿæ’åºï¼ˆä¸ç¨³å®šï¼‰éšæœºå¿«é€Ÿæ’åºè¿‡ç¨‹ ç¡®å®šåˆ†ç•Œç‚¹ï¼ˆä¹Ÿå«é€‰æ‹©åŸºå‡†æ•°ï¼‰ï¼š$q[L], q[(L + R) &#x2F; 2], q[R]$ è°ƒæ•´åŒºé—´ï¼š é€’å½’ï¼šå¤„ç†å·¦å³ä¸¤ç«¯æ’åºï¼Œå¦‚æœå·¦å³ä¸¤ä¾§éƒ½æ’åºå¥½äº†åœ¨åˆå¹¶ä¸€èµ·é‚£ä¹ˆå°±æ˜¯ä¸€ä¸ªæœ‰åºçš„åºåˆ—äº† ï¼ˆæš´åŠ›ï¼‰ç‰ˆ å¯ä»¥å…ˆå¼€è¾Ÿä¸¤ä¸ªç©ºçš„æ•°ç»„ a[] å’Œ b[] åœ¨ L åˆ° R åŒºé—´å†…æ‰«æä¸€é æŠŠ &gt;&#x3D; x å’Œ &lt;&#x3D; x çš„æ•°æ‹†åˆ†å‡ºæ¥æ”¾åˆ° a, b æ•°ç»„ $q[L - R] $ $q[i] &lt;&#x3D; x, q[i] - &gt; a[]$ &#x2F;&#x2F; q[i] &lt;&#x3D; x å°±å®ƒæ”¾åˆ° a æ•°ç»„é‡Œé¢ $q[i] &gt;&#x3D; x, q[i] -&gt; b[]$ &#x2F;&#x2F; q[i] &gt;&#x3D; x å°±å®ƒæ”¾åˆ° b æ•°ç»„é‡Œé¢ $a[] -&gt; q[], b[]-&gt;q[]$ &#x2F;&#x2F;åœ¨æŠŠ aï¼Œb æ•°ç»„æ•°æ®åœ¨åˆå¹¶åˆ° q æ•°ç»„é‡Œé¢ ï¼ˆåŸºç¡€ï¼‰ç‰ˆæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸¤ä¸ªæŒ‡é’ˆä»çº¿æ®µä¸¤ä¾§å¾€ä¸­é—´èµ°åªè¦ï¼ˆi &lt; j) çº¢è‰²i è“è‰²jï¼Œå¦‚æœçº¢è‰²æŒ‡é’ˆè¦å°äºåŸºå‡†æ•°é‚£ä¹ˆi++, å¦‚æœçº¢è‰²æŒ‡é’ˆè¦å¤§äºåŸºå‡†æ•°äº†ï¼Œé‚£ä¹ˆåˆ¤æ–­jæŒ‡é’ˆæ•°æ˜¯å¦å¤§äºåŸºå‡†å€¼å¦‚æœå¤§äºé‚£ä¹ˆj++, å¦‚æœå°äºé‚£ä¹ˆ äº¤æ¢i, j æŒ‡é’ˆã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445/************************************************************************* &gt; File Name: Demo15.c &gt; Author: ç§ƒå¤´ç‹ &gt; Mail: 1658339000@qq.com &gt; Created Time: 2021å¹´03æœˆ16æ—¥ æ˜ŸæœŸäºŒ 20æ—¶37åˆ†05ç§’ ************************************************************************/#include&lt;stdio.h&gt;#define MAX_N 100000#define swap(a, b) &#123;\\ a ^= b, b ^= a, a ^= b;\\&#125;int q[MAX_N + 10];void quick_sort(int l, int r) &#123; if (l &gt;= r) return ; // å¦‚æœä¸‹é¢é€’å½’å·¦å³ é€‰çš„æ˜¯jçš„è¯ åŸºå‡†æŒ‡æ•°ä¸€å®šä¸èƒ½é€‰ q[r] è¦ä¸ç„¶å›å‘ç”Ÿè¾¹ç•Œé—®é¢˜ int x = q[l], i = l - 1, j = r + 1; while (i &lt; j) &#123; do i++; while (q[i] &lt; x); do j--; while (q[j] &gt; x); if (i &lt; j) swap(q[i], q[j]); &#125; // éå†å·¦ä¾§ quick_sort(l, j); // éå†å³ä¾§ quick_sort(j + 1, r); return ;&#125;int main() &#123; int n; scanf(&quot;%d&quot;, &amp;n); for (int i = 0; i &lt; n; i++) &#123; scanf(&quot;%d&quot;, q + i); &#125; quick_sort(0, n - 1); for (int i = 0; i &lt; n; i++) &#123; printf(&quot;%d &quot;, q[i]); &#125; return 0;&#125; å½’å¹¶æ’åºï¼ˆç¨³å®šï¼‰ ç¡®å®šåˆ†ç•Œç‚¹ mid(L + R) &#x2F; 2 (è¿™é‡Œçš„åˆ†ç•Œç‚¹æ˜¯æ•°ç»„ä¸‹æ ‡çš„ä½ç½®)è€Œå¿«æ’æ˜¯éšæœºç¡®å®šæ•°ç»„é‡Œé¢æ•°ã€‚ é€’å½’æ’åºå·¦å³ä¸¤é¢ã€‚ å½’å¹¶ï¼ˆæŠŠæ’åºå¥½çš„å·¦å³ä¸¤ä¾§åˆå¹¶åˆ°ä¸€èµ·ï¼‰ã€‚","categories":[{"name":"ç®—æ³•åŸºç¡€","slug":"ç®—æ³•åŸºç¡€","permalink":"https://tutouwang.vercel.app/categories/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/"}],"tags":[]},{"title":"ACwin104_è´§ä»“é€‰å€","slug":"ACwiné¢˜è§£/ACwin104_è´§ä»“é€‰å€","date":"2021-03-13T09:39:11.000Z","updated":"2022-01-19T02:51:41.482Z","comments":true,"path":"2021/03/13/ACwiné¢˜è§£/ACwin104_è´§ä»“é€‰å€/","link":"","permalink":"https://tutouwang.vercel.app/2021/03/13/ACwin%E9%A2%98%E8%A7%A3/ACwin104_%E8%B4%A7%E4%BB%93%E9%80%89%E5%9D%80/","excerpt":"","text":"åŸé¢˜é“¾æ¥ é¢˜ç›®ï¼šåœ¨ä¸€æ¡æ•°è½´ä¸Šæœ‰ N å®¶å•†åº—ï¼Œå®ƒä»¬çš„åæ ‡åˆ†åˆ«ä¸º A1âˆ¼ANã€‚ ç°åœ¨éœ€è¦åœ¨æ•°è½´ä¸Šå»ºç«‹ä¸€å®¶è´§ä»“ï¼Œæ¯å¤©æ¸…æ™¨ï¼Œä»è´§ä»“åˆ°æ¯å®¶å•†åº—éƒ½è¦è¿é€ä¸€è½¦å•†å“ã€‚ ä¸ºäº†æé«˜æ•ˆç‡ï¼Œæ±‚æŠŠè´§ä»“å»ºåœ¨ä½•å¤„ï¼Œå¯ä»¥ä½¿å¾—è´§ä»“åˆ°æ¯å®¶å•†åº—çš„è·ç¦»ä¹‹å’Œæœ€å°ã€‚ è¾“å…¥æ ¼å¼ç¬¬ä¸€è¡Œè¾“å…¥æ•´æ•° Nã€‚ ç¬¬äºŒè¡Œ N ä¸ªæ•´æ•° A1âˆ¼ AN è¾“å‡ºæ ¼å¼è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºè·ç¦»ä¹‹å’Œçš„æœ€å°å€¼ã€‚ æ•°æ®èŒƒå›´$1â‰¤Nâ‰¤1000001â‰¤Nâ‰¤100000$$0 â‰¤ Ai â‰¤ 400000 â‰¤ Ai â‰¤ 40000$ è¾“å…¥æ ·ä¾‹ï¼š1246 2 9 1 è¾“å‡ºæ ·ä¾‹ï¼š112 è§£é¢˜æ€è·¯:é‚£é¢å¦‚ä½•é€‰æ‹©ä¸­ä½æ•°ä»“åº“xå¦‚æœå½“nç­‰äºå¥‡æ•°é‚£ä¹ˆä¸­é—´çš„æ•°å°±æ˜¯ä¸­ä½æ•°ï¼Œå¦‚æœnæ˜¯å¶æ•°é‚£ä¹ˆç°åœ¨ä¸­é—´ä¸¤ä¸ªå…¶å®ä¸€éƒ½å¯ä»¥ã€‚ é¦–å…ˆè€ƒè™‘åœ¨åæ ‡è½´ä¸Šå»ºç«‹ä»“åº“$x$å¦‚å›¾ å‡è®¾è´§ä»“åœ¨ä¸­é—´å¯å¾—$|a - x| + |b - x| &gt;&#x3D; |a - b|$ï¼Œ$|a - x|$å°±æ˜¯a åˆ° xçš„è·ç¦» åŒç† $|b - x|ã€ |a - b|$ å¦‚æœè´§ä»“åœ¨æœ€å·¦ä¾§æˆ–è€…æœ€å³ä¾§æƒ…å†µï¼Œé‚£ä¹ˆå¯ä»¥çœ‹å‡º$|x - a|$çš„è·ç¦»å°±èµ°äº†ä¸¤éæ‰€æœ‰æ”¾åœ¨ä¸­é—´æ‰æ˜¯æœ€ä¼˜è§£ã€‚ ç¬¬ä¸€ç§åšæ³•ï¼š12345678910111213141516171819202122#include &lt;stdio.h&gt;#include &lt;math.h&gt;#include &lt;algorithm&gt;#define MAX_N 100000int f[MAX_N + 10];int main() &#123; int n; scanf(&quot;%d&quot;, &amp;n); for (int i = 0; i &lt; n; i++) &#123; scanf(&quot;%d&quot;, f + i); &#125; std::sort(f, f + n); int res = 0; for (int i = 0; i &lt; n; i++) &#123; res += abs(f[i] - f[n &gt;&gt; 1]); &#125; printf(&quot;%d\\n&quot;, res); return 0;&#125;","categories":[{"name":"ACwiné¢˜è§£","slug":"ACwiné¢˜è§£","permalink":"https://tutouwang.vercel.app/categories/ACwin%E9%A2%98%E8%A7%A3/"}],"tags":[{"name":"ä¸­ä½æ•°","slug":"ä¸­ä½æ•°","permalink":"https://tutouwang.vercel.app/tags/%E4%B8%AD%E4%BD%8D%E6%95%B0/"}]},{"title":"èƒŒåŒ…ä¹è®²","slug":"åŸºç¡€ç®—æ³•/èƒŒåŒ…ä¹è®²","date":"2021-03-07T04:21:06.000Z","updated":"2022-05-22T15:05:06.431Z","comments":true,"path":"2021/03/07/åŸºç¡€ç®—æ³•/èƒŒåŒ…ä¹è®²/","link":"","permalink":"https://tutouwang.vercel.app/2021/03/07/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/%E8%83%8C%E5%8C%85%E4%B9%9D%E8%AE%B2/","excerpt":"","text":"åŠ¨æ€è§„åˆ’ åŠ¨æ€è§„åˆ’ï¼ˆDynamic programmingï¼Œç®€ç§° DPï¼‰æ˜¯ä¸€ç§åœ¨æ•°å­¦ã€ç®¡ç†ç§‘å­¦ã€è®¡ç®—æœºç§‘å­¦ã€ç»æµå­¦å’Œç”Ÿç‰©ä¿¡æ¯ å­¦ä¸­ä½¿ç”¨çš„ï¼Œé€šè¿‡æŠŠåŸé—®é¢˜åˆ†è§£ä¸ºç›¸å¯¹ç®€å•çš„å­é—®é¢˜çš„æ–¹å¼æ±‚è§£å¤æ‚é—®é¢˜çš„æ–¹æ³•ã€‚ åŠ¨æ€è§„åˆ’å¸¸å¸¸é€‚ç”¨äºæœ‰é‡å å­é—®é¢˜å’Œæœ€ä¼˜å­ç»“æ„æ€§è´¨çš„é—®é¢˜ï¼ŒåŠ¨æ€è§„åˆ’æ–¹æ³•æ‰€è€—æ—¶é—´å¾€å¾€è¿œå°‘äºæœ´ç´ è§£æ³•ã€‚ åŠ¨æ€è§„åˆ’èƒŒåçš„åŸºæœ¬æ€æƒ³éå¸¸ç®€å•ã€‚å¤§è‡´ä¸Šï¼Œè‹¥è¦è§£ä¸€ä¸ªç»™å®šé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è§£å…¶ä¸åŒéƒ¨åˆ†ï¼ˆå³å­é—®é¢˜ï¼‰ï¼Œ å†æ ¹æ®å­é—®é¢˜çš„è§£ä»¥å¾—å‡ºåŸé—®é¢˜çš„è§£ã€‚åŠ¨æ€è§„åˆ’å¾€å¾€ç”¨äºä¼˜åŒ–é€’å½’é—®é¢˜ï¼Œä¾‹å¦‚æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œå¦‚æœè¿ç”¨é€’å½’ çš„æ–¹å¼æ¥æ±‚è§£ä¼šé‡å¤è®¡ç®—å¾ˆå¤šç›¸åŒçš„å­é—®é¢˜ï¼Œåˆ©ç”¨åŠ¨æ€è§„åˆ’çš„æ€æƒ³å¯ä»¥å‡å°‘è®¡ç®—é‡ã€‚ é€šå¸¸è®¸å¤šå­é—®é¢˜éå¸¸ç›¸ä¼¼ï¼Œä¸ºæ­¤åŠ¨æ€è§„åˆ’æ³•è¯•å›¾ä»…ä»…è§£å†³æ¯ä¸ªå­é—®é¢˜ä¸€æ¬¡ï¼Œå…·æœ‰å¤©ç„¶å‰ªæçš„åŠŸèƒ½ï¼Œä»è€Œå‡å°‘ è®¡ç®—é‡ï¼šä¸€æ—¦æŸä¸ªç»™å®šå­é—®é¢˜çš„è§£å·²ç»ç®—å‡ºï¼Œåˆ™å°†å…¶è®°å¿†åŒ–å­˜å‚¨ï¼Œä»¥ä¾¿ä¸‹æ¬¡éœ€è¦åŒä¸€ä¸ªå­é—®é¢˜è§£ä¹‹æ—¶ç›´æ¥æŸ¥ è¡¨ã€‚è¿™ç§åšæ³•åœ¨é‡å¤å­é—®é¢˜çš„æ•°ç›®å…³äºè¾“å…¥çš„è§„æ¨¡å‘ˆæŒ‡æ•°å¢é•¿æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚ åœ¨å¤§å®¶çœ‹å®Œä»€ä¹ˆæ˜¯åŠ¨æ€è§„åˆ’åå°±æ˜¯è¯´æˆ‘ä»¬åœ¨ä¹‹å‰ä¹Ÿåšé¢˜ä¸­å¯èƒ½ä¹Ÿé‡åˆ°è¿‡åŠ¨æ€è§„åˆ’çš„é¢˜æ¯”å¦‚æ–æ³¢é‚£å¥‘æ•°åˆ— å¦‚ 1ï¼Œ1ï¼Œ 2ï¼Œ 3â€¦ å°±æ˜¯è¿™ä¸ª 2 æ€ä¹ˆæ¥çš„å°±æ˜¯ 1 + 1 &#x3D; 2 ä¹‹å 3 çš„ä¸‹ä¸€é¡¹æ˜¯ä»€ä¹ˆï¼Ÿå°±æ˜¯ 2 + 3 &#x3D; 5 ä¹Ÿå°±æ˜¯è¯´ 3 çš„ä¸‹ä¸€é¡¹å°±æ˜¯ 5 ä¹‹åä¸‹å‡ é¡¹å°±æ˜¯ 8ï¼Œ13ï¼Œ21â€¦å°±ä¼šå¾—åˆ°è¿™ç»„åºåˆ— æˆ‘ä»¬å¦‚æœç›¸æ±‚ç¬¬næ–æ³¢é‚£å¥‘æ•°åˆ—å¯ä»¥å¾—åˆ°è½¬ç§»å…¬å¼ $Fib(n) &#x3D; Fib(n - 1) + Fib(n - 2);$ (Fib(1) &#x3D; 1 å’Œ Fib(2) &#x3D; 1æ˜¯ç”±é¢˜ç›®ç»™å‡ºçš„ï¼Œn &gt; 2 ) å®Œæ•´çš„æ–æ³¢é‚£å¥‘æ•°åˆ— åŠ ä¸Šå‡ºå£å°±æ˜¯ n &#x3D; 1 or n &#x3D; 2 è¿”å› 1 , å°±æ˜¯è¯´æˆ‘ä»¬è¿™é‡Œä¸ºä»€ä¹ˆæå‡ºè¿™ä¸ªæ–æ³¢é‚£å¥‘æ•°åˆ—å‘¢å°±æ˜¯æˆ‘ä»¬åœ¨é€’å½’æ—¶å€™ï¼Œæˆ‘ä»¬å‘¢ä¼šå‘ç°ä»–çš„é€’å½’å¼ä¸­ä¼šå‡ºç°é‡å çš„å­é—®é¢˜ï¼Œä¸ºä»€ä¹ˆä¼šè¿™ä¹ˆè¯´æˆ‘æ¥è®¡ç®—ä¸€ä¸‹æ–æ³¢é‚£å¥‘æ•°åˆ— ç¬¬ 5 é¡¹ Fib(5) å¯å¾—å‡ºå¦‚ä¸‹ å‡å¦‚è¯´æˆ‘ä»¬ç”¨æ•°ç»„å»æ±‚è§£Fib(6) æ˜¯ä¸å°±å¯ä»¥ç›´æ¥ç”¨ä¹‹å‰æ±‚Fib(5) + Fib(4) çš„ ç›´æ¥å¾—åˆ° Fib(6) è¿™æ ·æˆ‘æ˜¯ä¸æ˜¯å°±å¯ä»¥çœå»æ±‚é‡å å­é—®é¢˜çš„æ—¶é—´ï¼Œè¿™æ ·æˆ‘ä»¬çš„æ—¶é—´å¤æ‚åº¦å°±ä»o(2^n^) å˜æˆ o(n)(å½“ç„¶è¿™ä¸ªæ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯èƒ½å¼„è®°å¿†åŒ–æœç´¢ä¼˜åŒ–çš„)ã€‚ ä¾‹é¢˜ 01 èƒŒåŒ… åªåˆ 2 ç§é€‰æ‹©ä¸€ç§é€‰ä¸€ç§ä¸é€‰ã€‚ æ´›è°· P1048 é‡‡è¯ å®Œå…¨èƒŒåŒ… æ¯ä»¶ç‰©å“å¯ä»¥æ— é™é€‰ï¼ˆåªè¦ä¸è¶…è¿‡èƒŒåŒ…çš„æ€»ä½“ç§¯ï¼‰ã€‚ æ´›è°· P1616 ç–¯ç‹‚çš„é‡‡è¯ å¤šé‡èƒŒåŒ… æ¯ä¸ªç‰©å“æœ‰ç›¸åº”çš„ä¸ªæ•°ã€‚ æ´›è°· P1776 å®ç‰©ç­›é€‰ æ··åˆèƒŒåŒ… åŸºäºä»¥ä¸Šä¸Šé¢ä¸‰ç§èƒŒåŒ…ã€‚ æ´›è°· P1833 æ¨±èŠ± äºŒç»´è´¹ç”¨èƒŒåŒ… ç±»æ¯”ä»¥ä¸€ç»´è´¹ç”¨01èƒŒåŒ…ï¼Œæ¨å¹¿äºŒç»´è´¹ç”¨01èƒŒåŒ…ã€‚ æ´›è°· P1507 NASAçš„é£Ÿç‰©è®¡åˆ’ åˆ†ç»„èƒŒåŒ… æœ‰ n ç»„ç‰©å“ æ¯ç»„ç‰©å“æœ‰è‹¥å¹²ä¸ªï¼ŒåŒä¸€ç»„å†…äº’ç›¸å†²çªï¼ŒåŒä¸€ç»„æœ€å¤šåªèƒ½é€‰ä¸€ä¸ªæˆ–è€…ä¸é€‰ æ´›è°· P1757 é€šå¤©ä¹‹åˆ†ç»„èƒŒåŒ… æœ‰ä¾èµ–çš„èƒŒåŒ… ç±»ä¼¼æ†ç»‘é”€å”® ä¹°é™„å¿…é¡»ä¹°ä¸»ï¼Œä¹°ä¸»å¯ä»¥ä¸ä¹°é™„ æ´›è°· P1064 é‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆ èƒŒåŒ…ä¹è®²0-1èƒŒåŒ…é¢˜ç›®ï¼šæœ‰ä¸€å¤©å°é²åŒå­¦åœ¨å®¶é‡Œå­¦ä¹ ç®—æ³•ï¼Œå°é²çš„å¦ˆå¦ˆå°±å«è¿™ä¸ªé“²å±å®˜å°é²å»æ”¶æ‹¾ä¸€ä¸‹ï¼Œä½†æ˜¯å°é²å¾ˆä¸æƒ³å»å°±è¯´æˆ‘åœ¨å­¦ä¹ ç®—æ³•ï¼Œå°é²çš„å¦ˆå¦ˆå°±è¯´ä½ è¦æ˜¯åœ¨ä¸å»æˆ‘å°±æŠŠä½ ä¸€èµ·ä¹Ÿé“²å‡ºå»ï¼Œå°é²å°±æƒ³è¢«ä½ é“²é™¤å»è¿˜ä¸å¦‚æˆ‘è‡ªå·±èµ°ï¼Œè¿™æ ·å°é²å°±å›åˆ°äº†è‡ªå·±çš„æˆ¿é—´ï¼Œæ‰“ç ´äº†å‚¨å­˜å·²ä¹…çš„å°çŒªå‚¨å­˜ç½ğŸ–ã€‚ å°é²çš„èƒŒåŒ…å¯å®¹çº³ä¸‹æ€»é‡é‡ä¸º 20ï¼ˆ s ï¼‰ ä»–éœ€è¦å¸¦å°½å¯èƒ½å¤šçš„é’±èµ°ã€‚ï¼ˆæ²¡ç§é’±å¯ä»¥é‡å¤çš„é€‰å–æ²¡æœ‰ä¸Šé™ï¼‰ã€‚ ç®€å•çš„è¯´ï¼š æœ‰Nä»¶ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸ºTçš„èƒŒåŒ…ã€‚ç¬¬iä»¶ç‰©å“çš„è´¹ç”¨æ˜¯t[i]ï¼Œä»·å€¼æ˜¯v[i]ã€‚æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…å¯ä½¿ä»·å€¼æ€»å’Œæœ€å¤§ã€‚ ä¸‹æ ‡ é‡é‡ï¼ˆwï¼‰ ä»·å€¼ ï¼ˆvï¼‰ 1 2 3 2 3 4 3 4 5 4 5 8 5 9 10 è¿™é‡Œä¸ºä»€ä¹ˆä¸ç”¨è´ªå¿ƒè€Œç”¨åŠ¨æ€è§„åˆ’ï¼Ÿ é¦–å…ˆè´ªå¿ƒä»–æ˜¯å±€éƒ¨æœ€ä¼˜è§£ï¼Œè€Œæˆ‘æ‰€è®²çš„åŠ¨æ€è§„åˆ’å¯ä»¥è¾¾åˆ°å…¨å±€æœ€ä¼˜è§£ã€‚ åŸºæœ¬æ€è·¯ï¼š é¦–å…ˆæˆ‘ä»¬è€ƒè™‘ä»€ä¹ˆï¼Œå–ä¸å–ç¬¬ n ä»¶ç‰©å“ï¼Ÿ å– $-&gt; n - 1$ ä¸ªç‰©å“ï¼ŒèƒŒåŒ…å¤§å° $s - w[n]$ ä¸å–$ -&gt; n - 1$ ä¸ªç‰©å“ï¼ŒèƒŒåŒ…å¤§å° s å®šä¹‰çŠ¶æ€ï¼š$dp[i][j]$ è¡¨ç¤ºè€ƒè™‘å‰ i ä¸ªç‰©å“ï¼ŒèƒŒåŒ…å¤§å° $0 -&gt; j $, è·å¾—æœ€å¤§ä»·å€¼ã€‚ è½¬ç§»æ–¹ç¨‹ï¼š$dp[i][j] &#x3D; max(dp[i - 1][j], dp[i - 1][j - w[i]] + v[i])$ ä»£ç å®ç°ï¼šæ— ä¼˜åŒ–-ä»£ç 1234567891011121314151617181920212223242526272829303132#include&lt;iostream&gt;using namespace std;#define MAX_N 1000int dp[MAX_N + 10][MAX_N + 10];int t[MAX_N + 10], v[MAX_N + 10];void backpack(int k, int T) &#123; for (int i = 1; i &lt;= k; i++) &#123; for (int j = 1; j &lt;= T; j++) &#123; if (t[i] &gt; j) &#123; dp[i][j] = dp[i - 1][j]; &#125; else &#123; int Y = dp[i - 1][j - t[i]] + v[i]; int T = dp[i - 1][j]; dp[i][j] = Y &gt; T ? Y : T; // dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - w[i]] + v[i]); &#125; &#125; &#125;&#125;int main() &#123; int T, n; cin &gt;&gt; T &gt;&gt; n; for (int i = 1; i &lt;= n; i++) &#123; cin &gt;&gt; t[i] &gt;&gt; v[i]; &#125; backpack(n, T); cout &lt;&lt; dp[n][T];&#125; 1234567891011121314151617181920212223#include &lt;iostream&gt;using namespace std;const int MAX_N = 1e3;int n, m;int f[MAX_N + 10][MAX_N + 10], w[MAX_N + 10], v[MAX_N + 10];int main() &#123; cin &gt;&gt; n &gt;&gt; m; for(int i = 1; i &lt;= m; i++) &#123; cin &gt;&gt; w[i] &gt;&gt; v[i]; &#125; for(int i = 1; i &lt;= m; i++) &#123; for(int j = 1; j &lt;= n; j++) &#123; f[i][j] = f[i - 1][j]; if(j &gt;= w[i]) f[i][j] = max(f[i - 1][j], f[i - 1][j - w[i]] + v[i]); &#125; &#125; cout &lt;&lt; f[m][n] &lt;&lt; endl; return 0;&#125; ä¼˜åŒ–-ä»£ç 12345678910111213141516171819202122232425262728#include &lt;iostream&gt;#include &lt;cmath&gt;using namespace std;#define MAX_N 1000int dp[MAX_N];int T[MAX_N], V[MAX_N];void backpack(int k, int s) &#123; for (int i = 1; i &lt;= k; i++) &#123; for (int j = s; j &gt;= T[i]; j--) &#123; dp[j] = max(dp[j], dp[j - T[i]] + V[i]); &#125; &#125; return ;&#125;int main() &#123; int t, n; cin &gt;&gt; t &gt;&gt; n; for (int i = 1; i &lt;= n; i++) &#123; cin &gt;&gt; T[i] &gt;&gt; V[i]; &#125; backpack(n, t); cout &lt;&lt; dp[t]; return 0;&#125; ä¸Šé¢æœ´ç´ ç®—æ³•æ—¶é—´å¤æ‚åº¦ä¸ç©ºé—´å¤æ‚åº¦çš†ä¸º O(t*n) å…¶ä¸­æ—¶é—´å¤æ‚åº¦ä¸èƒ½å†ä¼˜åŒ–, è€Œç©ºé—´å¤æ‚åº¦å¯ä»¥ ä¼˜åŒ–ä¸ºO(t), ä¸‹é¢æˆ‘ä»¬æ¥è®²è§£å¦‚ä½•ä¼˜åŒ–åˆ°ä¸€ç»´æ•°ç»„ ç»†èŠ‚é—®é¢˜ 1 æˆ‘ä»¬çœ‹åˆ°çš„æ±‚æœ€ä¼˜è§£çš„èƒŒåŒ…é—®é¢˜é¢˜ç›®ä¸­ï¼Œäº‹å®ä¸Šæœ‰ä¸¤ç§ä¸å¤ªç›¸åŒçš„é—®æ³•ã€‚æœ‰çš„é¢˜ç›®è¦æ±‚â€œæ°å¥½è£…æ»¡èƒŒåŒ…â€æ—¶çš„æœ€ä¼˜è§£ï¼Œæœ‰çš„é¢˜ç›®åˆ™å¹¶æ²¡æœ‰è¦æ±‚å¿…é¡»æŠŠèƒŒåŒ…è£…æ»¡ã€‚ä¸€ç§åŒºåˆ«è¿™ä¸¤ç§é—®æ³•çš„å®ç°æ–¹æ³•æ˜¯åœ¨åˆå§‹åŒ–çš„æ—¶å€™æœ‰æ‰€ä¸åŒã€‚å¦‚æœæ˜¯ç¬¬ä¸€ç§é—®æ³•ï¼Œè¦æ±‚æ°å¥½è£…æ»¡èƒŒåŒ…ï¼Œé‚£ä¹ˆåœ¨åˆå§‹åŒ–æ—¶é™¤äº†f[0]ä¸º0å…¶å®ƒf[1..V]å‡è®¾ä¸º-âˆï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯æœ€ç»ˆå¾—åˆ°çš„f[N]æ˜¯ä¸€ç§æ°å¥½è£…æ»¡èƒŒåŒ…çš„æœ€ä¼˜è§£ã€‚ 2 å¦‚æœå¹¶æ²¡æœ‰è¦æ±‚å¿…é¡»æŠŠèƒŒåŒ…è£…æ»¡ï¼Œè€Œæ˜¯åªå¸Œæœ›ä»·æ ¼å°½é‡å¤§ï¼Œåˆå§‹åŒ–æ—¶åº”è¯¥å°†f[0..V]å…¨éƒ¨è®¾ä¸º0ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ 3 å¯ä»¥è¿™æ ·ç†è§£ï¼šåˆå§‹åŒ–çš„fæ•°ç»„äº‹å®ä¸Šå°±æ˜¯åœ¨æ²¡æœ‰ä»»ä½•ç‰©å“å¯ä»¥æ”¾å…¥èƒŒåŒ…æ—¶çš„åˆæ³•çŠ¶æ€ã€‚å¦‚æœè¦æ±‚èƒŒåŒ…æ°å¥½è£…æ»¡ï¼Œé‚£ä¹ˆæ­¤æ—¶åªæœ‰å®¹é‡ä¸º0çš„èƒŒåŒ…å¯èƒ½è¢«ä»·å€¼ä¸º0çš„ï¼ˆç›¸å½“äºæ²¡è£…ä¸œè¥¿ï¼‰ï¼Œå…¶å®ƒå®¹é‡çš„èƒŒåŒ…å‡æ²¡æœ‰åˆæ³•çš„è§£ï¼Œå±äºæœªå®šä¹‰çš„çŠ¶æ€ï¼Œå®ƒä»¬çš„å€¼å°±éƒ½åº”è¯¥æ˜¯-âˆäº†ã€‚å¦‚æœèƒŒåŒ…å¹¶éå¿…é¡»è¢«è£…æ»¡ï¼Œé‚£ä¹ˆä»»ä½•å®¹é‡çš„èƒŒåŒ…éƒ½æœ‰ä¸€ä¸ªåˆæ³•è§£â€œä»€ä¹ˆéƒ½ä¸è£…â€ï¼Œè¿™ä¸ªè§£çš„ä»·å€¼ä¸º0ï¼Œæ‰€ä»¥åˆå§‹æ—¶çŠ¶æ€çš„å€¼ä¹Ÿå°±å…¨éƒ¨ä¸º0äº†ã€‚è¿™ä¸ªå°æŠ€å·§å®Œå…¨å¯ä»¥æ¨å¹¿åˆ°å…¶å®ƒç±»å‹çš„èƒŒåŒ…é—®é¢˜ï¼Œåé¢ä¹Ÿå°±ä¸å†å¯¹è¿›è¡ŒçŠ¶æ€è½¬ç§»ä¹‹å‰çš„åˆå§‹åŒ–è¿›è¡Œè®²è§£ã€‚ å®Œå…¨èƒŒåŒ…é¢˜ç›®ï¼šæœ‰Nç§ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸ºTçš„èƒŒåŒ…ï¼Œæ¯ç§ç‰©å“éƒ½æœ‰æ— é™ä»¶å¯ç”¨ã€‚ç¬¬iç§ç‰©å“çš„è´¹ç”¨æ˜¯t[i]ï¼Œä»·å€¼æ˜¯v[i]ã€‚æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…å¯ä½¿è¿™äº›ç‰©å“çš„è´¹ç”¨æ€»å’Œä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”ä»·å€¼æ€»å’Œæœ€å¤§ã€‚ åŸºæœ¬æ€è·¯ï¼šå’Œ 01èƒŒåŒ…å¾ˆç›¸ä¼¼ è½¬ç§»æ–¹ç¨‹ç›¸åŒ è½¬ç§»æ–¹ç¨‹ï¼š$dp[i][j] &#x3D; max(dp[i - 1][j], dp[i - 1][j - w[i]] + v[i])$ ä¸ 01èƒŒåŒ…çš„åŒºåˆ«â€“ç¬¬äºŒä¸ªå¾ªç¯ 01èƒŒåŒ… åœ¨æ›´æ–°æ—¶å€™å€’åºå› ä¸ºæ˜¯éœ€è¦ç”¨ä¹‹å‰å…ƒç´  ä»£ç å®ç°ï¼šæ— ä¼˜åŒ–-ä»£ç 123456789101112131415161718192021222324252627282930#include&lt;iostream&gt;using namespace std;const int MAX_N = 1e4;long long dp[MAX_N + 10][MAX_N +10];long long t[MAX_N + 10], v[MAX_N + 10];void backpack(int k, int s) &#123; for (int i = 1; i &lt;= k; i++) &#123; for (int j = 1; j &lt;= s; j++) &#123; if (j &lt; t[i]) dp[i][j] = dp[i - 1][j]; else &#123; dp[i][j] = max(dp[i - 1][j], dp[i][j - t[i]] + v[i]); &#125; &#125; &#125; return ;&#125;int main() &#123; int T, n; cin &gt;&gt; T &gt;&gt; n; for (int i = 1; i &lt;= n; i++) &#123; cin &gt;&gt; t[i] &gt;&gt; v[i]; &#125; backpack(n, T); cout &lt;&lt; dp[n][T] &lt;&lt; endl; return 0;&#125; ä¼˜åŒ–-ä»£ç 123456789101112131415161718192021222324252627#include&lt;iostream&gt;using namespace std;const int MAX_N = 1e7;long long B[MAX_N + 10];int t[MAX_N + 10], v[MAX_N + 10];void backpack(int k, int s) &#123; for (int i = 1; i &lt;= k; i++) &#123; for (int j = t[i]; j &lt;= s; j++) &#123; B[j] = max(B[j], B[j - t[i]] + v[i]); &#125; &#125; return ;&#125;int main() &#123; int T, n; cin &gt;&gt; T &gt;&gt; n; for (int i = 1; i &lt;= n; i++) &#123; cin &gt;&gt; t[i] &gt;&gt; v[i]; &#125; backpack(n, T); cout &lt;&lt; B[T] &lt;&lt; endl; return 0;&#125; å¤šé‡èƒŒåŒ…é¢˜ç›®ï¼šæœ‰Nç§ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸ºsçš„èƒŒåŒ…ã€‚ç¬¬iç§ç‰©å“æœ€å¤šæœ‰m[i]ä»¶å¯ç”¨ï¼Œæ¯ä»¶è´¹ç”¨æ˜¯w[i]ï¼Œä»·å€¼æ˜¯v[i]ã€‚æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…å¯ä½¿è¿™äº›ç‰©å“çš„è´¹ç”¨æ€»å’Œä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”ä»·å€¼æ€»å’Œæœ€å¤§ã€‚ åŸºæœ¬æ€è·¯ï¼šè¿™é¢˜ç›®å’Œå®Œå…¨èƒŒåŒ…é—®é¢˜å¾ˆç±»ä¼¼ã€‚åŸºæœ¬çš„æ–¹ç¨‹åªéœ€å°†å®Œå…¨èƒŒåŒ…é—®é¢˜çš„æ–¹ç¨‹ç•¥å¾®ä¸€æ”¹å³å¯ï¼Œå› ä¸ºå¯¹äºç¬¬iç§ç‰©å“æœ‰m[i]+1ç§ç­–ç•¥ï¼šå–0ä»¶ï¼Œå–1ä»¶â€¦â€¦å–n[i]ä»¶ã€‚ä»¤f[i][j]è¡¨ç¤ºå‰iç§ç‰©å“æ°æ”¾å…¥ä¸€ä¸ªå®¹é‡ä¸ºvçš„èƒŒåŒ…çš„æœ€å¤§æƒå€¼ã€‚ åˆ™è½¬ç§»æ–¹ç¨‹ï¼š $dp[i][j] &#x3D; max(dp[i - 1][j], dp[i - 1][j - k * w] + k * v);$ ä»£ç å®ç°ï¼šæ— ä¼˜åŒ–-ä»£ç 1234567891011121314151617181920212223242526// å¤šé‡èƒŒåŒ… æœ´ç´  ç®—æ³•#include&lt;iostream&gt;using namespace std;const int MAX_N = 1e3;int dp[MAX_N + 10][MAX_N + 10];int main() &#123; int n, s; cin &gt;&gt; n &gt;&gt; s; for (int i = 1; i &lt;= n; i++) &#123; // ä»·å€¼ é‡é‡ ç»„æ•° int v, w, m; cin &gt;&gt; v &gt;&gt; w &gt;&gt; m; for (int j = s; j &gt;= w; j--) &#123; // èƒŒåŒ…å®¹é‡ for (int k = 0; k &lt;= m &amp;&amp; j &gt;= k * w; k++) &#123; // å†³ç­– dp[i][j] = max(dp[i - 1][j], dp[i - 1][j - k * w] + k * v); &#125; &#125; &#125; cout &lt;&lt; dp[n][s] &lt;&lt; endl; return 0;&#125; è½¬åŒ–ä¸º01èƒŒåŒ…é—®é¢˜ å¦ä¸€ç§å¥½æƒ³å¥½å†™çš„åŸºæœ¬æ–¹æ³•æ˜¯è½¬åŒ–ä¸º01èƒŒåŒ…æ±‚è§£ï¼šæŠŠç¬¬iç§ç‰©å“æ¢æˆlog(m)ä»¶01èƒŒåŒ…ä¸­çš„ç‰©å“. ä½†æ˜¯æˆ‘ä»¬æœŸæœ›å°†å®ƒè½¬åŒ–ä¸º01èƒŒåŒ…é—®é¢˜ä¹‹åèƒ½å¤Ÿåƒå®Œå…¨èƒŒåŒ…ä¸€æ ·é™ä½å¤æ‚åº¦ã€‚ä»ç„¶è€ƒè™‘äºŒè¿›åˆ¶çš„æ€æƒ³. äºŒè¿›åˆ¶ä¼˜åŒ– å‡è®¾æœ‰50ä¸ªè‹¹æœï¼Œç°åœ¨è¦å–nä¸ªè‹¹æœ(nâ‰¤50ï¼‰ï¼Œå¦‚ä½•å–?æœ´ç´ çš„åšæ³•åº”è¯¥æ˜¯å°†è‹¹æœä¸€ä¸ªä¸€ä¸ªæ‹¿å‡ºæ¥ï¼Œç›´åˆ°nä¸ªè‹¹æœè¢«å–å‡ºæ¥ã€‚å†å‡è®¾æœ‰50ä¸ªè‹¹æœå’Œ6åªç®±å­ï¼Œåˆ©ç”¨ç®±å­è¿›è¡ŒæŸäº›é¢„å¤‡å·¥ä½œï¼Œå¯ä»¥åœ¨æ¯ä¸ªç®±å­ä¸­æ”¾2(kâ‰¥0)ä¸ªè‹¹æœï¼Œä¹Ÿå°±æ˜¯1ã€2ã€4ã€8ã€16ã€19ï¼ˆå‰©ä½™çš„æ•°ï¼‰ï¼Œå–ä»»æ„nä¸ªè‹¹æœæ—¶ï¼Œåªè¦æ¨å‡ºå¿†åªç®±å­å°±å¯ä»¥äº†ã€‚ lg45Ã·lg2&#x3D;1.6532125Ã·0.301029996&#x3D;5.49185 ä¼˜åŒ–-ä»£ç 123456789101112131415161718192021222324252627282930313233343536#include&lt;iostream&gt;using namespace std;const int MAX_N = 1e5;int dp[MAX_N + 10];int ww[MAX_N + 10], vv[MAX_N + 10], mm[MAX_N + 10];int main () &#123; int n, s, count = 1, v, w, m; cin &gt;&gt; n &gt;&gt; s; for (int i = 1; i &lt;= n; i++) &#123; cin &gt;&gt; v &gt;&gt; w &gt;&gt; m; for (int j = 1; j &lt;= m; j &lt;&lt;= 1) &#123; ww[count] = j * w; vv[count++] = j * v; m -= j; &#125; // å¤„ç† äºŒè¿›åˆ¶æ‹†åˆ†ä¸äº†çš„ if (m) &#123; ww[count] = m * w; vv[count++] = m * v; &#125; &#125; // 01 èƒŒåŒ… æ¨¡æ¿ for (int i = 1; i &lt; count; i++) &#123; for (int j = s; j &gt;= ww[i]; j--) &#123; dp[j] = max(dp[j], dp[j - ww[i]] + vv[i]); &#125; &#125; cout &lt;&lt; dp[s] &lt;&lt; endl; return 0;&#125; æ··åˆèƒŒåŒ…é¢˜ç›®ï¼šå¦‚æœå°† 01èƒŒåŒ…ã€å®Œå…¨èƒŒåŒ…ã€å¤šé‡èƒŒåŒ…ã€æ··åˆèµ·æ¥ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ‰çš„ç‰©å“åªå¯ä»¥å–ä¸€æ¬¡ï¼ˆ01èƒŒåŒ…ï¼‰ï¼Œæœ‰çš„ç‰©å“å¯ä»¥å–æ— é™æ¬¡ï¼ˆå®Œå…¨èƒŒåŒ…ï¼‰ï¼Œæœ‰çš„ç‰©å“å¯ä»¥å–çš„æ¬¡æ•°æœ‰ä¸€ä¸ªä¸Šé™ï¼ˆå¤šé‡èƒŒ1åŒ…ï¼‰ã€‚åº”è¯¥æ€ä¹ˆæ±‚è§£å‘¢ï¼Ÿ åŸºæœ¬æ€è·¯ï¼š 01èƒŒåŒ…ä¸å®Œå…¨èƒŒåŒ…çš„æ··åˆ æˆ‘åªéœ€è¦è€ƒè™‘åˆ°åœ¨01èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…ä¸­ç»™å‡ºçš„ä»£ç åªæœ‰ä¸€å¤„ä¸åŒï¼Œæ•…å¦‚æœåªæœ‰ä¸¤ç±»ç‰©å“ï¼šä¸€ç±»ç‰©å“åªèƒ½å–ä¸€æ¬¡ï¼Œå¦ä¸€ç±»ç‰©å“å¯ä»¥å–æ— é™æ¬¡ï¼Œé‚£ä¹ˆåªéœ€åœ¨å¯¹æ¯ä¸ªç‰©å“åº”ç”¨è½¬ç§»æ–¹ç¨‹æ—¶ï¼Œæ ¹æ®ç‰©å“çš„ç±»åˆ«é€‰ç”¨é¡ºåºæˆ–é€†åºçš„å¾ªç¯å³å¯. 12345678if // å¦‚æœæ˜¯ 01 èƒŒåŒ… for (int j = s; j &gt;= w[i] j--) &#123; dp[j] = max(dp[j], dp[j - w[i]] + v[i]); &#125;else // å¦‚æœæ˜¯ å®Œå…¨èƒŒåŒ… for (int j = w[i]; j &lt;= s; j++) &#123; dp[j] = max(dp[j], dp[j - w[i]] + v[i]); &#125; å†åŠ ä¸Šå¤šé‡èƒŒåŒ… å¦‚æœå†åŠ ä¸Šæœ‰çš„ç‰©å“æœ€å¤šå¯ä»¥å–æœ‰é™æ¬¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨äºŒè¿›åˆ¶æ‹†åˆ†æ¥æŠŠå¤šé‡èƒŒåŒ…è½¬æ¢æˆ01èƒŒåŒ… 1234567891011// m = ç‰©å“æœ€å¤šèƒ½å–çš„ä¸ªæ•°for (int j = 1; j &lt;= m; j &lt;&lt;= 1) &#123; ww[count] = j * w; vv[count++] = j * v; m -= j;&#125;// å¤„ç† äºŒè¿›åˆ¶æ‹†åˆ†ä¸äº†çš„if (m) &#123; ww[count] = m * w; vv[count++] = m * v;&#125; é¢˜è§£-ä»£ç ï¼š12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455#include &lt;iostream&gt;#include &lt;algorithm&gt;#include &lt;cstdio&gt;using namespace std;const int MAX_N = 1e5;int dp[MAX_N + 10], ww[MAX_N + 10], vv[MAX_N + 10], mark[MAX_N + 10];int main() &#123; int T, t1, t11, t2, t22, n, count = 1; scanf(&quot;%d:%d %d:%d %d&quot;, &amp;t1, &amp;t11, &amp;t2, &amp;t22, &amp;n); T = (t2 * 60 + t22) - (t1 * 60 + t11); for (int i = 1; i &lt;= n; i++) &#123; int w, v, m; cin &gt;&gt; w &gt;&gt; v &gt;&gt; m; if (!m) &#123; ww[count] = w; vv[count] = v; // æ ‡è®°ä¸º 0 ä»£è¡¨å¯ä»¥é‡å¤è§‚çœ‹ å®Œå…¨èƒŒåŒ… mark[count++] = 0; &#125; else &#123; // äºŒè¿›åˆ¶æ‹†åˆ†è½¬æ¢ 01èƒŒåŒ… for (int j = 1; j &lt;= m; j &lt;&lt;= 1) &#123; ww[count] = j * w; vv[count] = j * v; // æ ‡è®°ä¸º 1 ä»£è¡¨æ¯æ£µæ ‘åªèƒ½çœ‹æˆ–è€…ä¸çœ‹ 01èƒŒåŒ… mark[count++] = 1; m -= j; &#125; // å› ä¸ºäºŒè¿›åˆ¶æ‹†åˆ† åªèƒ½æ˜¯ 1 2 4 8 16 32 æ¯”å¦‚ m = 10 äºŒè¿›åˆ¶æ‹†åˆ†ä¹‹åè¿˜ä¼šä½™ä¸‹ 1 ä¸‹é¢ if å°±æ˜¯è§£å†³é‚£ä¸ªå¤šä½™å‡ºæ¥çš„ if (m) &#123; ww[count] = m * w; vv[count] = m * v; mark[count++] = 1; &#125; &#125; &#125; // å®ç° 01èƒŒåŒ… å’Œ å®Œå…¨èƒŒåŒ… æ¨¡æ¿å°±è¡Œäº† for (int i = 1; i &lt; count; i++) &#123; if (mark[i]) &#123; // å¦‚æœ mark[i] == 1 å°±æ‰§è¡Œ 01èƒŒåŒ… for (int j = T; j &gt;= ww[i]; j--) &#123; dp[j] = max(dp[j], dp[j - ww[i]] + vv[i]); &#125; &#125; else &#123; for (int j = ww[i]; j &lt;= T; j++) &#123; dp[j] = max(dp[j], dp[j - ww[i]] + vv[i]); &#125; &#125; &#125; cout &lt;&lt; dp[T] &lt;&lt; endl; return 0;&#125; äºŒç»´è´¹ç”¨èƒŒåŒ…é¢˜ç›®ï¼šäºŒç»´è´¹ç”¨çš„èƒŒåŒ…é—®é¢˜æ˜¯æŒ‡ï¼šå¯¹äºæ¯ä»¶ç‰©å“ï¼Œå…·æœ‰ä¸¤ç§ä¸åŒçš„è´¹ç”¨ï¼›é€‰æ‹©è¿™ä»¶ç‰©å“å¿…é¡»åŒæ—¶ä»˜å‡ºè¿™ä¸¤ç§ä»£ä»·ï¼›å¯¹äºæ¯ç§ä»£ä»·éƒ½æœ‰ä¸€ä¸ªå¯ä»˜å‡ºçš„æœ€å¤§å€¼ï¼ˆèƒŒåŒ…å®¹é‡ï¼‰ã€‚é—®æ€æ ·é€‰æ‹©ç‰©å“å¯ä»¥å¾—åˆ°æœ€å¤§çš„ä»·å€¼ã€‚è®¾è¿™ä¸¤ç§ä»£ä»·åˆ†åˆ«ä¸ºä»£ä»·1å’Œä»£ä»·2ï¼Œç¬¬iä»¶ç‰©å“æ‰€éœ€çš„ä¸¤ç§ä»£ä»·åˆ†åˆ«ä¸ºa[i]å’Œb[i]ã€‚ä¸¤ç§ä»£ä»·å¯ä»˜å‡ºçš„æœ€å¤§å€¼ï¼ˆä¸¤ç§èƒŒåŒ…å®¹é‡ï¼‰åˆ†åˆ«ä¸ºVå’ŒQã€‚ç‰©å“çš„ä»·å€¼ä¸ºv[i]ã€‚ åŸºæœ¬æ€è·¯ï¼šè´¹ç”¨åŠ äº†ä¸€ç»´ï¼Œåªéœ€çŠ¶æ€ä¹ŸåŠ ä¸€ç»´å³å¯ã€‚è®¾dp[i][j][k]è¡¨ç¤ºå‰iä»¶ç‰©å“ä»˜å‡ºä¸¤ç§ä»£ä»·åˆ†åˆ«ä¸ºmå’Œwæ—¶å¯è·å¾—çš„æœ€å¤§ä»·å€¼ã€‚ çŠ¶æ€è½¬ç§»æ–¹ç¨‹å°±æ˜¯ï¼š$f [i][j][k]&#x3D;max{f[i-1][j][k],f[i-1][f-a[i]][k-b[i]]+v[i]}$ã€‚ å¦‚å‰è¿°æ–¹æ³•ï¼Œå¯ä»¥åªä½¿ç”¨äºŒç»´çš„æ•°ç»„ï¼šå½“æ¯ä»¶ç‰©å“åªå¯ä»¥å–ä¸€æ¬¡æ—¶å˜é‡må’Œwé‡‡ç”¨é¡ºåºçš„å¾ªç¯ã€‚ å¤§æ¦‚å°±æ˜¯ ç”±ä¸€ç»´01èƒŒåŒ…è´¹ç”¨æ¨å¹¿äºŒç»´01èƒŒåŒ…è´¹ç”¨è¿˜å¯ä»¥æ¨å¹¿ä¸‰ç»´ï¼Œå››ç»´ï¼Œâ€¦..Nç»´ã€‚ å½“ç‰©å“æœ‰å¦‚å®Œå…¨èƒŒåŒ…é—®é¢˜æ—¶é‡‡ç”¨é€†åºçš„å¾ªç¯ã€‚ å½“ç‰©å“æœ‰å¦‚å¤šé‡èƒŒåŒ…é—®é¢˜æ—¶æ‹†åˆ†ç‰©å“ã€‚ é¢˜è§£-ä»£ç ï¼š1234567891011121314151617181920212223#include&lt;iostream&gt;using namespace std;const int MAX_N = 1e3;int dp[MAX_N + 10][MAX_N + 10];int main() &#123; int V, Q, n; cin &gt;&gt; V &gt;&gt; Q &gt;&gt; n; for (int i = 1; i &lt;= n; i++) &#123; int m, w, v; cin &gt;&gt; m &gt;&gt; w &gt;&gt; v; for (int j = V; j &gt;= m; j--) &#123; for (int k = Q; k &gt;= w; k--) &#123; dp[j][k] = max(dp[j][k], dp[j - m][k - w] + v); &#125; &#125; &#125; cout &lt;&lt; dp[V][Q] &lt;&lt; endl; return 0;&#125; åˆ†ç»„çš„èƒŒåŒ…é—®é¢˜é¢˜ç›®ï¼šæœ‰Nä»¶ç‰©å“å’Œä¸€ä¸ªå®¹é‡ä¸ºSçš„èƒŒåŒ…ã€‚ç¬¬iä»¶ç‰©å“çš„è´¹ç”¨æ˜¯w[i]ï¼Œä»·å€¼æ˜¯v[i]ï¼Œç»„åˆ«g[i]ã€‚è¿™äº›ç‰©å“è¢«åˆ’åˆ†ä¸ºè‹¥å¹²ç»„ï¼Œæ¯ç»„ä¸­çš„ç‰©å“äº’ç›¸å†²çªï¼Œæœ€å¤šé€‰ä¸€ä»¶æˆ–è€…ä¸é€‰,å¦‚æœåŒå±äºv[i]ç»„ä¸€å…±æœ‰mä¸ªé‚£æœ€å¤šå°±æœ‰m + 1ç§é€‰æ³•ã€‚æ±‚è§£å°†å“ªäº›ç‰©å“è£…å…¥èƒŒåŒ…å¯ä½¿è¿™äº›ç‰©å“çš„è´¹ç”¨æ€»å’Œä¸è¶…è¿‡èƒŒåŒ…å®¹é‡ï¼Œä¸”ä»·å€¼æ€»å’Œæœ€å¤§ã€‚ åŸºæœ¬æ€è·¯ï¼š$dp[i][j]$ è¡¨å‰ i ç»„ç‰©å“ï¼Œèƒ½æ”¾ä¸‹å®¹é‡ä¸ºjçš„èƒŒåŒ…çš„æœ€å¤§ä»·å€¼ã€‚ æœ´ç´ ç®—æ³• å¯¹ç¬¬ i ç»„ç‰©å“ï¼Œå®¹é‡ä¸º j çš„èƒŒåŒ…ï¼Œæœ‰ m + 1ç§é€‰æ³•ã€‚ $max(dp[i-1][j], dp[i - 1][j - w[1]], dp[i - 1][j - w[2]]â€¦dp[i - 1][j - w[m]])$ è¿™é‡ŒåŸºæœ¬å°±æ˜¯01èƒŒåŒ…æ¨¡æ¿ç›´æ¥ç”¨01èƒŒåŒ…ä¼˜åŒ–ç‰ˆçš„æ¿å­å°±å¯ä»¥äº†ã€‚ é¢˜è§£-ä»£ç ï¼š123456789101112131415161718192021222324252627282930313233#include &lt;iostream&gt;#include &lt;cstdio&gt;using namespace std;const int MAX_N = 1e3;int dp[MAX_N + 10];int w[MAX_N + 10], v[MAX_N + 10], g[MAX_N + 10], gg[MAX_N + 10][MAX_N + 10];int main() &#123; int n, s, nn = 0; cin &gt;&gt; s &gt;&gt; n; for (int i = 1; i &lt;= n; i++) &#123; int t; scanf(&quot;%d%d%d&quot;, &amp;w[i], &amp;v[i], &amp;t); nn = max(t, nn); g[t]++; gg[t][g[t]] = i; &#125; // æšä¸¾ nn ä¸ªç»„ for (int i = 1; i &lt;= nn; i++) &#123; for (int j = s; j &gt;= 0; j--) &#123; // èƒŒåŒ…å®¹é‡ for (int k = 0; k &lt;= g[i]; k++) &#123; // å†³ç­– if (j &gt;= w[gg[i][k]]) // ä¸é€‰ä» k - 1 ä¸ªç‰©å“ä¸­é€‰æ‹©ä¸€ä¸ªä»·å€¼æœ€å¤§çš„ dp[j] = max(dp[j], dp[j - w[gg[i][k]]] + v[gg[i][k]]); &#125; &#125; &#125; cout &lt;&lt; dp[s] &lt;&lt; endl; return 0;&#125; é—®èƒŒåŒ…å®¹é‡ä¸å†³ç­–å¾ªç¯æ˜¯å¦å¯ä»¥è°ƒæ¢ï¼Ÿ ä¸èƒ½ å› ä¸ºæ›´æ–°$dp[j]$æ—¶ç”¨åˆ°$dp[i][j - w[k]]$çš„å€¼ï¼Œ$dp[j- w[k]]$ä¸$dp[i-1][j-w[k]]$ æœ‰ä¾èµ–çš„èƒŒåŒ…åŸºæœ¬æ€è·¯ï¼šè¿™ç§èƒŒåŒ…é—®é¢˜çš„ç‰©å“é—´å­˜åœ¨æŸç§â€œä¾èµ–â€çš„å…³ç³»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç‰©å“ i ä¾èµ–äºç‰©å“ jï¼Œ è¡¨ç¤ºè‹¥é€‰ç‰©å“ iï¼Œåˆ™å¿…é¡»é€‰ç‰©å“ jã€‚ä¸ºäº†ç®€åŒ–èµ·è§ï¼Œæˆ‘ä»¬å…ˆè®¾æ²¡æœ‰æŸä¸ªç‰©å“æ—¢ä¾èµ–äºåˆ« çš„ç‰©å“ï¼Œåˆè¢«åˆ«çš„ç‰©å“æ‰€ä¾èµ–ï¼›å¦å¤–ï¼Œæ²¡æœ‰æŸä»¶ç‰©å“åŒæ—¶ä¾èµ–å¤šä»¶ç‰©å“ã€‚ è¿™ä¸ªé—®é¢˜ç”± NOIP2006 ä¸­â€œé‡‘æ˜çš„é¢„ç®—æ–¹æ¡ˆâ€ä¸€é¢˜æ‰©å±•è€Œæ¥ã€‚éµä»è¯¥é¢˜çš„ææ³•ï¼Œå°† ä¸ä¾èµ–äºåˆ«çš„ç‰©å“çš„ç‰©å“ç§°ä¸ºâ€œä¸»ä»¶â€ï¼Œä¾èµ–äºæŸä¸»ä»¶çš„ç‰©å“ç§°ä¸ºâ€œé™„ä»¶â€ã€‚ç”±è¿™ä¸ªé—®é¢˜ çš„ç®€åŒ–æ¡ä»¶å¯çŸ¥æ‰€æœ‰çš„ç‰©å“ç”±è‹¥å¹²ä¸»ä»¶å’Œä¾èµ–äºæ¯ä¸ªä¸»ä»¶çš„ä¸€ä¸ªé™„ä»¶é›†åˆç»„æˆã€‚ å°±å¥½æ¯”å¦‚ ä½ å¤§ä¸€å­¦çš„c\\c++è¯­è¨€å®Œäº†å¤§äºŒæ‰èƒ½å­¦æ•°æ®ç»“æ„ï¼Œå°±æ˜¯ä½ ä¸èƒ½ç›´æ¥å­¦æ•°æ®ç»“æ„è¦å…ˆå­¦å®Œc\\c++è¿™å°±æ˜¯ä¾èµ–å…³ç³» å¯çœ‹ä¸Šé¢ä¾‹é¢˜ çœ‹é¢˜, æˆ‘ä»¬åœ¨é€‰æ‹©æ—¶å€™ä¼šæœ‰5ç§æƒ…å†µï¼š é€‰æˆ–è€…ä¸é€‰ é€‰ ã€åªé€‰è¿™ä¸ªä¸»ä»¶ ä¸é€‰ã€ç›´æ¥è€ƒè™‘ä¸‹ä¸€ä¸ª é€‰è¿™ä¸ªä¸»ä»¶ é€‰è¿™ä¸ªä¸»ä»¶ã€å¹¶ä¸”é€‰é™„ä»¶1 é€‰è¿™ä¸ªä¸»ä»¶ã€å¹¶ä¸”é€‰é™„ä»¶2 é€‰è¿™ä¸ªä¸»ä»¶ã€ å¹¶ä¸”é€‰é™„ä»¶1å’Œé™„ä»¶2 ä¾‹é¢˜-ä»£ç ï¼š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647#include &lt;iostream&gt;#include &lt;cstdio&gt;using namespace std;const int MAX_N = 1e6;int dp[MAX_N + 10];int w[MAX_N + 10], v[MAX_N + 10], g[MAX_N + 10][3], mark[MAX_N + 10];int main() &#123; int n, s; scanf(&quot;%d%d&quot;, &amp;s, &amp;n); for (int i = 1; i &lt;= n; i++) &#123; int p, q; scanf(&quot;%d%d%d&quot;, &amp;w[i], &amp;p, &amp;q); mark[i] = q; v[i] = w[i] * p; if (q) &#123; g[q][0]++; g[q][g[q][0]] = i; &#125; &#125; for (int i = 1; i &lt;= n; i++) &#123; if(mark[i] != 0) continue; for (int j = s; j &gt;= w[i]; j--) &#123; // 1ã€ä¸é€‰ æˆ–è€… åªé€‰æ‹©ä¸»ä»¶ dp[j] = max(dp[j], dp[j - w[i]] + v[i]); // 2ã€é€‰æ‹©ç¬¬ä¸€ä¸ªé™„ä»¶ if (j &gt;= w[g[i][1]] + w[i] &amp;&amp; g[i][1] != 0) &#123; dp[j] = max(dp[j], dp[j - w[i] - w[g[i][1]]] + v[i] + v[g[i][1]]); &#125; // 3ã€é€‰æ‹©ç¬¬äºŒä¸ªé™„ä»¶ if (j &gt;= w[g[i][2]] + w[i] &amp;&amp; g[i][2] != 0) &#123; dp[j] = max(dp[j], dp[j - w[i] - w[g[i][2]]] + v[i] + v[g[i][2]]); &#125; // 4ã€ä¸¤ä¸ªé™„ä»¶éƒ½é€‰ if (j &gt;= w[g[i][1]] + w[g[i][2]] + w[i] &amp;&amp; g[i][1] != 0 &amp;&amp; g[i][2] != 0) &#123; dp[j] = max(dp[j], dp[j - w[i] - w[g[i][1]] - w[g[i][2]]] + v[i] + v[g[i][1]]+ v[g[i][2]]); &#125; &#125; &#125; cout &lt;&lt; dp[s] &lt;&lt; endl; return 0;&#125; æ³›åŒ–ç‰©å“ (äº†è§£)å®šä¹‰è€ƒè™‘è¿™æ ·ä¸€ç§ç‰©å“ï¼Œå®ƒå¹¶æ²¡æœ‰å›ºå®šçš„è´¹ç”¨å’Œä»·å€¼ï¼Œè€Œæ˜¯å®ƒçš„ä»·å€¼éšç€ä½ åˆ†é…ç»™å®ƒçš„ è´¹ç”¨è€Œå˜åŒ–ã€‚è¿™å°±æ˜¯æ³›åŒ–ç‰©å“çš„æ¦‚å¿µã€‚ æ›´ä¸¥æ ¼çš„å®šä¹‰ä¹‹ã€‚åœ¨èƒŒåŒ…å®¹é‡ä¸º V çš„èƒŒåŒ…é—®é¢˜ä¸­ï¼Œæ³›åŒ–ç‰©å“æ˜¯ä¸€ä¸ªå®šä¹‰åŸŸä¸º 0 . . . V ä¸­çš„æ•´æ•°çš„å‡½æ•° hï¼Œå½“åˆ†é…ç»™å®ƒçš„è´¹ç”¨ä¸º v æ—¶ï¼Œèƒ½å¾—åˆ°çš„ä»·å€¼å°±æ˜¯ h(v)ã€‚ è¿™ä¸ªå®šä¹‰æœ‰ä¸€ç‚¹ç‚¹æŠ½è±¡ï¼Œå¦ä¸€ç§ç†è§£æ˜¯ä¸€ä¸ªæ³›åŒ–ç‰©å“å°±æ˜¯ä¸€ä¸ªæ•°ç»„ h[0 . . . V ]ï¼Œç»™å®ƒ è´¹ç”¨ vï¼Œå¯å¾—åˆ°ä»·å€¼ h[v]ã€‚ ä¸€ä¸ªè´¹ç”¨ä¸º c ä»·å€¼ä¸º w çš„ç‰©å“ï¼Œå¦‚æœå®ƒæ˜¯ 01 èƒŒåŒ…ä¸­çš„ç‰©å“ï¼Œé‚£ä¹ˆæŠŠå®ƒçœ‹æˆæ³›åŒ–ç‰© å“ï¼Œå®ƒå°±æ˜¯é™¤äº† h(c) &#x3D; w å¤–ï¼Œå…¶å®ƒå‡½æ•°å€¼éƒ½ä¸º 0 çš„ä¸€ä¸ªå‡½æ•°ã€‚å¦‚æœå®ƒæ˜¯å®Œå…¨èƒŒåŒ…ä¸­çš„ ç‰©å“ï¼Œé‚£ä¹ˆå®ƒå¯ä»¥çœ‹æˆè¿™æ ·ä¸€ä¸ªå‡½æ•°ï¼Œä»…å½“ v è¢« c æ•´é™¤æ—¶æœ‰ h(v) &#x3D; w Â· v cï¼Œå…¶å®ƒå‡½æ•°å€¼ å‡ä¸º 0ã€‚å¦‚æœå®ƒæ˜¯å¤šé‡èƒŒåŒ…ä¸­é‡å¤æ¬¡æ•°æœ€å¤šä¸º m çš„ç‰©å“ï¼Œé‚£ä¹ˆå®ƒå¯¹åº”çš„æ³›åŒ–ç‰©å“çš„å‡½ æ•°æœ‰ h(v) &#x3D; w Â· v c ä»…å½“ v è¢« c æ•´é™¤ä¸” v c â‰¤ nï¼Œå…¶å®ƒæƒ…å†µå‡½æ•°å€¼å‡ä¸º 0ã€‚ ä¸€ä¸ªç‰©å“ç»„å¯ä»¥çœ‹ä½œä¸€ä¸ªæ³›åŒ–ç‰©å“ hã€‚å¯¹äºä¸€ä¸ª 0 . . . V ä¸­çš„ vï¼Œè‹¥ç‰©å“ç»„ä¸­ä¸å­˜åœ¨ è´¹ç”¨ä¸º v çš„ç‰©å“ï¼Œåˆ™ h(v) &#x3D; 0ï¼Œå¦åˆ™ h(v) å–å€¼ä¸ºæ‰€æœ‰è´¹ç”¨ä¸º v çš„ç‰©å“çš„æœ€å¤§ä»·å€¼ã€‚6ä¸­ æ¯ä¸ªä¸»ä»¶åŠå…¶é™„ä»¶é›†åˆç­‰ä»·äºä¸€ä¸ªç‰©å“ç»„ï¼Œè‡ªç„¶ä¹Ÿå¯çœ‹ä½œä¸€ä¸ªæ³›åŒ–ç‰©å“ã€‚ è§†é¢‘","categories":[{"name":"åŸºç¡€ç®—æ³•","slug":"åŸºç¡€ç®—æ³•","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/"}],"tags":[{"name":"åŸºç¡€ç®—æ³•","slug":"åŸºç¡€ç®—æ³•","permalink":"https://tutouwang.vercel.app/tags/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/"},{"name":"åŠ¨æ€è§„åˆ’","slug":"åŠ¨æ€è§„åˆ’","permalink":"https://tutouwang.vercel.app/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"}]},{"title":"è“æ¡¥æ¯çœèµ› Bç»„ åä¸€å±Š ç¬¬äºŒåœº","slug":"è“æ¡¥æ¯é¢˜è§£/åä¸€å±ŠBç»„-çœŸé¢˜/è“æ¡¥æ¯çœèµ›_Bç»„_åä¸€å±Š_ç¬¬äºŒåœº","date":"2021-03-06T04:21:06.000Z","updated":"2022-05-22T15:05:06.430Z","comments":true,"path":"2021/03/06/è“æ¡¥æ¯é¢˜è§£/åä¸€å±ŠBç»„-çœŸé¢˜/è“æ¡¥æ¯çœèµ›_Bç»„_åä¸€å±Š_ç¬¬äºŒåœº/","link":"","permalink":"https://tutouwang.vercel.app/2021/03/06/%E8%93%9D%E6%A1%A5%E6%9D%AF%E9%A2%98%E8%A7%A3/%E5%8D%81%E4%B8%80%E5%B1%8AB%E7%BB%84-%E7%9C%9F%E9%A2%98/%E8%93%9D%E6%A1%A5%E6%9D%AF%E7%9C%81%E8%B5%9B_B%E7%BB%84_%E5%8D%81%E4%B8%80%E5%B1%8A_%E7%AC%AC%E4%BA%8C%E5%9C%BA/","excerpt":"","text":"è“æ¡¥æ¯çœèµ› Bç»„ åä¸€å±Š ç¬¬äºŒåœºè¯•é¢˜A:é—¨ç‰Œåˆ¶ä½œ ç­”æ¡ˆï¼š624 1234567891011121314151617181920212223242526/************************************************************************* &gt; File Name: åä¸€å±Šâ€”è¯•é¢˜Aé—¨ç‰Œåˆ¶ä½œ.cppz &gt; Author: &gt; Mail: &gt; Created Time: 2021å¹´02æœˆ28æ—¥ æ˜ŸæœŸæ—¥ 16æ—¶31åˆ†53ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;const int MAX_N = 2020;int f[MAX_N + 10];int main() &#123; int n = 0; for (int i = 1; i &lt;= 2020; i++) &#123; int t = i; while (t) &#123; if (t % 10 == 2) n++; t /= 10; &#125; &#125; cout &lt;&lt; n &lt;&lt; endl; return 0;&#125; è¯•é¢˜B:æ—¢çº¦åˆ†æ•° ç­”æ¡ˆï¼š2481215 12345678910111213141516171819202122 /************************************************************************* &gt; File Name: åä¸€å±Šâ€”è¯•é¢˜Bæ—¢çº¦åˆ†æ•°.cpp &gt; Author: &gt; Mail: &gt; Created Time: 2021å¹´02æœˆ28æ—¥ æ˜ŸæœŸæ—¥ 19æ—¶46åˆ†32ç§’ ************************************************************************/#include &lt;iostream&gt;#include &lt;algorithm&gt;using namespace std;int main() &#123; int n = 0; for (int i = 1; i &lt;= 2020; i++) &#123; for (int j = 1; j &lt;= 2020; j++) &#123; if(__gcd(i, j) == 1) n++; &#125; &#125; cout &lt;&lt; n &lt;&lt; endl; return 0;&#125; è¯•é¢˜C:è›‡å½¢å¡«æ•° é¢˜è§£æ€è·¯ï¼šæœ‰é¢˜ç›®å¯ä»¥å¾—å‡ºï¼Œ çº¢è‰²å¶æ•°æ˜¯æ–œç€å‘ä¸‹ï¼Œè“è‰²å¥‡æ•°æ˜¯æ–œç€å‘ä¸Šç”±æ­¤å¯ä»¥å†™å‡ºä»£ç ã€‚ ç­”æ¡ˆï¼š761 123456789101112131415161718192021222324252627282930313233343536/************************************************************************* &gt; File Name: è›‡å½¢å¡«æ•°.cpp &gt; Author: &gt; Mail: &gt; Created Time: 2021å¹´02æœˆ28æ—¥ æ˜ŸæœŸæ—¥ 20æ—¶08åˆ†21ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;const int MAX_N = 40;int f[MAX_N][MAX_N];int main() &#123; int n = 1; for (int i = 1; i &lt;= MAX_N; i++) &#123; if (i &amp; 1) &#123; // å¥‡æ•°çš„æƒ…å†µ for (int x = i, y = 1; x &gt;= 1 &amp;&amp; y &lt;= i; x--, y++) &#123; f[x][y] = n++; &#125; &#125; else &#123; for (int x = 1, y = i; x &lt;= i &amp;&amp; y &gt;= 1; x++, y--) &#123; f[x][y] = n++; &#125; &#125; &#125; for (int i = 1; i &lt;= 20; i++) &#123; for (int j = 1; j &lt;= 20; j++) &#123; cout &lt;&lt; f[i][j] &lt;&lt; &quot; &quot;; &#125; cout &lt;&lt; endl; &#125; return 0;&#125; è¯•é¢˜D:è·‘æ­¥é”»ç‚¼ ç­”æ¡ˆï¼š8879 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/************************************************************************* &gt; File Name: è·‘æ­¥é”»ç‚¼.cpp &gt; Author: &gt; Mail: &gt; Created Time: 2021å¹´03æœˆ01æ—¥ æ˜ŸæœŸä¸€ 13æ—¶00åˆ†05ç§’ ************************************************************************/#include &lt;iostream&gt;using namespace std;// åˆ—å‡ºæ‰€æœ‰æœˆä»½ä¹‹å åœ¨ç‰¹æ®Šå¤„ç† 2 æœˆint m[13] = &#123;0, 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31&#125;;int leap_year(int x) &#123; if ((x % 4 == 0 &amp;&amp; x % 100 != 0) || x % 400 == 0) return 1; return 0;&#125;int main() &#123; int s = 0; int mark = 6; // è¿™é‡Œé¢˜ç›®ç»™å‡º 2000 å¹´ è‡³ 2020 å¹´ å› ä¸ºé¢˜ç›®ç»™å‡º 2020å¹´ä¸æ˜¯æ•´æœˆæ‰€ä»¥å°±å•å¤„ç†ä¸€ä¸‹ for (int i = 2000; i &lt; 2020; i++) &#123; if (leap_year(i)) m[2] = 29; else m[2] = 28; for (int j = 1; j &lt;= 12; j++) &#123; for (int k = 1; k &lt;= m[j]; k++) &#123; if (mark % 7 == 1 || k == 1) s += 2; else s++; mark++; &#125; &#125; &#125; // é—°å¹´ 29 å¹³å¹´ 28 if (leap_year(2020)) m[2] = 29; else m[2] = 28; for (int i = 1; i &lt;= 9; i++) &#123; for (int j = 1; j &lt;= m[i]; j++) &#123; if (mark % 7 == 1 || j == 1) s += 2; else s++; mark++; &#125; &#125; // é¢˜ç›®è¦æ±‚ åªé“ 10 æœˆ 1 æ—¥ ç”±äºè¿˜æ˜¯ æœˆåˆ æ‰€ä»¥åŠ ä¸Š + 2 cout &lt;&lt; s + 2; return 0;&#125; è¯•é¢˜E:ä¸ƒæ®µç  ç­”æ¡ˆï¼š80 æ¥æºäºç½‘ä¸Šä¸€ä¸ªå¤§ä½¬ æšä¸¾å‡ºæ‰€æœ‰æƒ…å†µçš„åšæ³• $$ä¸Šé¢æ˜¯ä¸€é“ç»“æœå¡«ç©ºçš„é¢˜ï¼Œä½ åªéœ€è¦ç®—å‡ºç»“æœåæäº¤å³å¯ã€‚æœ¬é¢˜çš„ç»“æœä¸ºä¸€ ä¸ªæ•´æ•°ï¼Œåœ¨æäº¤ç­”æ¡ˆæ—¶åªå¡«å†™è¿™ä¸ªæ•´æ•°ï¼Œå¡«å†™å¤šä½™çš„å†…å®¹å°†æ— æ³•å¾—åˆ†$$ è¯•é¢˜F:æˆç»©ç»Ÿè®¡ 12345678910111213141516171819#include &lt;iostream&gt;#include &lt;cstdio&gt;using namespace std;int main() &#123; int n; int E = 0, G = 0; cin &gt;&gt; n; for (int i = 0; i &lt; n; i++) &#123; int t; cin &gt;&gt; t; if (t &gt; 60) G++; if (t &gt; 85) E++; &#125; int t = E * 100.0 / n + 0.5; int t1 = G * 100.0 / n + 0.5; printf(&quot;%d%%\\n%d%%&quot;, t1, t); return 0;&#125;","categories":[{"name":"è“æ¡¥æ¯å†å±ŠçœŸé¢˜","slug":"è“æ¡¥æ¯å†å±ŠçœŸé¢˜","permalink":"https://tutouwang.vercel.app/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%8E%86%E5%B1%8A%E7%9C%9F%E9%A2%98/"}],"tags":[{"name":"è“æ¡¥æ¯","slug":"è“æ¡¥æ¯","permalink":"https://tutouwang.vercel.app/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF/"}]}],"categories":[{"name":"MySql","slug":"MySql","permalink":"https://tutouwang.vercel.app/categories/MySql/"},{"name":"åº·å¤è®­ç»ƒ","slug":"åº·å¤è®­ç»ƒ","permalink":"https://tutouwang.vercel.app/categories/%E5%BA%B7%E5%A4%8D%E8%AE%AD%E7%BB%83/"},{"name":"æœ‰è¶£çš„çŸ¥è¯†","slug":"æœ‰è¶£çš„çŸ¥è¯†","permalink":"https://tutouwang.vercel.app/categories/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/"},{"name":"OOP","slug":"OOP","permalink":"https://tutouwang.vercel.app/categories/OOP/"},{"name":"Linuxç½‘ç»œç¼–ç¨‹","slug":"Linuxç½‘ç»œç¼–ç¨‹","permalink":"https://tutouwang.vercel.app/categories/Linux%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/"},{"name":"Linuxå¤šçº¿ç¨‹å¼€å‘","slug":"Linuxå¤šçº¿ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%BC%80%E5%8F%91/"},{"name":"Linuxå¤šè¿›ç¨‹å¼€å‘","slug":"Linuxå¤šè¿›ç¨‹å¼€å‘","permalink":"https://tutouwang.vercel.app/categories/Linux%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%BC%80%E5%8F%91/"},{"name":"åŸºç¡€ç®—æ³•","slug":"åŸºç¡€ç®—æ³•","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/"},{"name":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨","slug":"LInux-ç³»ç»Ÿç¼–ç¨‹å…¥é—¨","permalink":"https://tutouwang.vercel.app/categories/LInux-%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/"},{"name":"åŸºç¡€æ•°æ®ç»“æ„","slug":"åŸºç¡€æ•°æ®ç»“æ„","permalink":"https://tutouwang.vercel.app/categories/%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://tutouwang.vercel.app/categories/%E6%95%99%E7%A8%8B/"},{"name":"è“æ¡¥æ¯å†å±ŠçœŸé¢˜","slug":"è“æ¡¥æ¯å†å±ŠçœŸé¢˜","permalink":"https://tutouwang.vercel.app/categories/%E8%93%9D%E6%A1%A5%E6%9D%AF%E5%8E%86%E5%B1%8A%E7%9C%9F%E9%A2%98/"},{"name":"ç®—æ³•åŸºç¡€","slug":"ç®—æ³•åŸºç¡€","permalink":"https://tutouwang.vercel.app/categories/%E7%AE%97%E6%B3%95%E5%9F%BA%E7%A1%80/"},{"name":"ACwiné¢˜è§£","slug":"ACwiné¢˜è§£","permalink":"https://tutouwang.vercel.app/categories/ACwin%E9%A2%98%E8%A7%A3/"}],"tags":[{"name":"[object Object]","slug":"object-Object","permalink":"https://tutouwang.vercel.app/tags/object-Object/"},{"name":"æœ‰è¶£çš„çŸ¥è¯†","slug":"æœ‰è¶£çš„çŸ¥è¯†","permalink":"https://tutouwang.vercel.app/tags/%E6%9C%89%E8%B6%A3%E7%9A%84%E7%9F%A5%E8%AF%86/"},{"name":"Linux","slug":"Linux","permalink":"https://tutouwang.vercel.app/tags/Linux/"},{"name":"LInux","slug":"LInux","permalink":"https://tutouwang.vercel.app/tags/LInux/"},{"name":"æ’åº","slug":"æ’åº","permalink":"https://tutouwang.vercel.app/tags/%E6%8E%92%E5%BA%8F/"},{"name":"å¹¿ä¹‰è¡¨è½¬äºŒå‰æ ‘","slug":"å¹¿ä¹‰è¡¨è½¬äºŒå‰æ ‘","permalink":"https://tutouwang.vercel.app/tags/%E5%B9%BF%E4%B9%89%E8%A1%A8%E8%BD%AC%E4%BA%8C%E5%8F%89%E6%A0%91/"},{"name":"æ ‘ä¸äºŒå‰æ ‘","slug":"æ ‘ä¸äºŒå‰æ ‘","permalink":"https://tutouwang.vercel.app/tags/%E6%A0%91%E4%B8%8E%E4%BA%8C%E5%8F%89%E6%A0%91/"},{"name":"æ ˆä¸é˜Ÿåˆ—","slug":"æ ˆä¸é˜Ÿåˆ—","permalink":"https://tutouwang.vercel.app/tags/%E6%A0%88%E4%B8%8E%E9%98%9F%E5%88%97/"},{"name":"é“¾è¡¨","slug":"é“¾è¡¨","permalink":"https://tutouwang.vercel.app/tags/%E9%93%BE%E8%A1%A8/"},{"name":"é¡ºåºè¡¨","slug":"é¡ºåºè¡¨","permalink":"https://tutouwang.vercel.app/tags/%E9%A1%BA%E5%BA%8F%E8%A1%A8/"},{"name":"æ•™ç¨‹","slug":"æ•™ç¨‹","permalink":"https://tutouwang.vercel.app/tags/%E6%95%99%E7%A8%8B/"},{"name":"å¹¶æŸ¥é›†","slug":"å¹¶æŸ¥é›†","permalink":"https://tutouwang.vercel.app/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/"},{"name":"åŸºç¡€ç®—æ³•","slug":"åŸºç¡€ç®—æ³•","permalink":"https://tutouwang.vercel.app/tags/%E5%9F%BA%E7%A1%80%E7%AE%97%E6%B3%95/"},{"name":"è“æ¡¥æ¯","slug":"è“æ¡¥æ¯","permalink":"https://tutouwang.vercel.app/tags/%E8%93%9D%E6%A1%A5%E6%9D%AF/"},{"name":"ä¸­ä½æ•°","slug":"ä¸­ä½æ•°","permalink":"https://tutouwang.vercel.app/tags/%E4%B8%AD%E4%BD%8D%E6%95%B0/"},{"name":"åŠ¨æ€è§„åˆ’","slug":"åŠ¨æ€è§„åˆ’","permalink":"https://tutouwang.vercel.app/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"}]}